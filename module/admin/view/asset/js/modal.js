"use strict";function initModalContainer(){let e=document.querySelector(".modals");return e||(e=document.createElement("div"),e.classList.add("modals"),document.body.appendChild(e)),e}function openModal(e){if(!e)return!1;const t=e.querySelector(".modal__body");t&&(t.scrollTop=0),document.querySelectorAll(".modal").forEach((t=>{t===e?t.classList.add("active"):t.classList.remove("active")})),document.body.classList.add("modal-open");const o=window.scrollX,l=window.scrollY;return window.onscroll=()=>window.scroll(o,l),!0}function closeModal(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?e.classList.remove("active"):document.querySelectorAll(".modal").forEach((e=>e.classList.remove("active"))),document.body.classList.remove("modal-open"),window.onscroll="",!0}function createModal(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(((o,l)=>{var a;const n=document.createElement("div");n.setAttribute("id",Math.random().toString(32).replace("0.","")),n.classList.add("modal"),t.class&&t.class.length?t.class.split(" ").forEach((e=>n.classList.add(e))):n.classList.add("modal_center");const d=document.createElement("header");d.classList.add("modal__header");const c=document.createElement("span");c.textContent=e;const s=document.createElement("button");if(s.setAttribute("type","button"),s.classList.add("modal__close"),s.innerHTML='<i class="icon icon-x"></i>',s.addEventListener("click",(e=>{closeModal(n),n.remove(),o(!1)})),d.appendChild(c),d.appendChild(s),n.appendChild(d),t.text){const e=document.createElement("div");e.classList.add("modal__body"),s.textContent=t.text,n.appendChild(e)}const i=document.createElement("footer");i.classList.add("modal__footer");(t.actions||[{text:(null===(a=ENGINE)||void 0===a||null===(a=a.translation)||void 0===a||null===(a=a.modal)||void 0===a?void 0:a.ok)||"Ok",class:"btn_primary"}]).forEach((e=>{const t=document.createElement("button");t.setAttribute("type","button"),t.classList.add("btn"),e.class&&e.class.length&&e.class.split(" ").forEach((e=>t.classList.add(e))),t.textContent=e.text,t.addEventListener("click",(t=>{"function"==typeof e.callback?o(e.callback(n,t)):(closeModal(n),n.remove(),o(!0))})),i.appendChild(t)})),n.appendChild(i),n.instance={open:()=>openModal(n),close:()=>closeModal(n),destroy:()=>{closeModal(n),n.remove()}};initModalContainer().appendChild(n),openModal(n)}))}async function confirmation(e){var t,o;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return await createModal(e,{text:l,class:"modal_sm modal_center",actions:[{text:(null===(t=ENGINE)||void 0===t||null===(t=t.translation)||void 0===t||null===(t=t.modal)||void 0===t?void 0:t.ok)||"Ok",class:"btn_primary",callback:e=>(closeModal(e),e.remove(),!0)},{text:(null===(o=ENGINE)||void 0===o||null===(o=o.translation)||void 0===o||null===(o=o.modal)||void 0===o?void 0:o.cancel)||"Cancel",class:"btn_cancel",callback:e=>(closeModal(e),e.remove(),!1)}]})}document.addEventListener("DOMContentLoaded",(()=>{const e=initModalContainer();document.querySelectorAll(".modal").forEach((t=>{const o={open:()=>openModal(t),close:()=>closeModal(t),destroy:()=>{closeModal(t),t.remove()}};t.instance=o,e.appendChild(t)}))})),document.addEventListener("click",(e=>{const t=e.target.closest("[data-modal]");if(!t)return!1;const o=document.querySelector(t.getAttribute("data-modal"));if(!o)return!1;openModal(o)})),document.addEventListener("click",(e=>{if(e.target.closest("[data-modal]"))return!1;const t=e.target.closest("[data-modal-close]"),o=e.target.closest(".modal")||(t?document.querySelector(t.getAttribute("data-modal-close")):null);(t&&o||!t&&!o)&&closeModal(o)})),document.addEventListener("keydown",(e=>{let t=!1;if(t="key"in e?"Escape"===e.key||"Esc"===e.key:27===e.keyCode,!t)return!1;document.querySelectorAll(".modal").forEach((e=>closeModal(e)))}));