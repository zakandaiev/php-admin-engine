@import "quill/dist/quill.snow";

.wysiwyg {
  position: relative;
  display: block;
  width: 100%;
  min-height: 2.543em;

  textarea {
    position: absolute;
    z-index: var(--zi-below);
    inset: 0;

    width: 100%;
    height: 100%;
    margin: 0;
    padding: 0;

    opacity: 0;
  }

  .ql-expand {
    font-size: 1.8rem;
    color: var(--color-text);

    .ti-arrows-maximize {
      display: block;
    }

    .ti-arrows-minimize {
      display: none;
    }

    &.active {
      .ti-arrows-maximize {
        display: none;
      }

      .ti-arrows-minimize {
        display: block;
      }
    }
  }

  .ql-container {
    display: block;

    width: 100%;
    height: auto;

    font-family: var(--font);
    font-size: 1.4rem;
    font-weight: var(--font-normal);
    line-height: 1.4;
    color: var(--color-text);

    background: var(--color-box);
    border: var(--border);
    border-top-width: 0;
    border-radius: 0 0 var(--radius-xs) var(--radius-xs);
  }

  .ql-editor ul[data-checked="true"] > li::before,
  .ql-editor ul[data-checked="false"] > li::before {
    color: var(--color-text);
  }

  .ql-editor.ql-blank::before {
    font-style: normal;
    color: var(--color-text-muted);
  }

  .ql-snow.ql-toolbar button:hover,
  .ql-snow .ql-toolbar button:hover,
  .ql-snow.ql-toolbar button:focus,
  .ql-snow .ql-toolbar button:focus,
  .ql-snow.ql-toolbar button.ql-active,
  .ql-snow .ql-toolbar button.ql-active,
  .ql-snow.ql-toolbar .ql-picker-label:hover,
  .ql-snow .ql-toolbar .ql-picker-label:hover,
  .ql-snow.ql-toolbar .ql-picker-label.ql-active,
  .ql-snow .ql-toolbar .ql-picker-label.ql-active,
  .ql-snow.ql-toolbar .ql-picker-item:hover,
  .ql-snow .ql-toolbar .ql-picker-item:hover,
  .ql-snow.ql-toolbar .ql-picker-item.ql-selected,
  .ql-snow .ql-toolbar .ql-picker-item.ql-selected {
    color: var(--color-primary);
  }

  .ql-snow.ql-toolbar button:hover .ql-fill,
  .ql-snow .ql-toolbar button:hover .ql-fill,
  .ql-snow.ql-toolbar button:focus .ql-fill,
  .ql-snow .ql-toolbar button:focus .ql-fill,
  .ql-snow.ql-toolbar button.ql-active .ql-fill,
  .ql-snow .ql-toolbar button.ql-active .ql-fill,
  .ql-snow.ql-toolbar .ql-picker-label:hover .ql-fill,
  .ql-snow .ql-toolbar .ql-picker-label:hover .ql-fill,
  .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-fill,
  .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-fill,
  .ql-snow.ql-toolbar .ql-picker-item:hover .ql-fill,
  .ql-snow .ql-toolbar .ql-picker-item:hover .ql-fill,
  .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-fill,
  .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-fill,
  .ql-snow.ql-toolbar button:hover .ql-stroke.ql-fill,
  .ql-snow .ql-toolbar button:hover .ql-stroke.ql-fill,
  .ql-snow.ql-toolbar button:focus .ql-stroke.ql-fill,
  .ql-snow .ql-toolbar button:focus .ql-stroke.ql-fill,
  .ql-snow.ql-toolbar button.ql-active .ql-stroke.ql-fill,
  .ql-snow .ql-toolbar button.ql-active .ql-stroke.ql-fill,
  .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
  .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke.ql-fill,
  .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
  .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke.ql-fill,
  .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
  .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke.ql-fill,
  .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill,
  .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke.ql-fill {
    fill: var(--color-primary);
  }

  .ql-snow.ql-toolbar button:hover .ql-stroke,
  .ql-snow .ql-toolbar button:hover .ql-stroke,
  .ql-snow.ql-toolbar button:focus .ql-stroke,
  .ql-snow .ql-toolbar button:focus .ql-stroke,
  .ql-snow.ql-toolbar button.ql-active .ql-stroke,
  .ql-snow .ql-toolbar button.ql-active .ql-stroke,
  .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke,
  .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke,
  .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke,
  .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke,
  .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke,
  .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke,
  .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
  .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke,
  .ql-snow.ql-toolbar button:hover .ql-stroke-miter,
  .ql-snow .ql-toolbar button:hover .ql-stroke-miter,
  .ql-snow.ql-toolbar button:focus .ql-stroke-miter,
  .ql-snow .ql-toolbar button:focus .ql-stroke-miter,
  .ql-snow.ql-toolbar button.ql-active .ql-stroke-miter,
  .ql-snow .ql-toolbar button.ql-active .ql-stroke-miter,
  .ql-snow.ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
  .ql-snow .ql-toolbar .ql-picker-label:hover .ql-stroke-miter,
  .ql-snow.ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
  .ql-snow .ql-toolbar .ql-picker-label.ql-active .ql-stroke-miter,
  .ql-snow.ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
  .ql-snow .ql-toolbar .ql-picker-item:hover .ql-stroke-miter,
  .ql-snow.ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter,
  .ql-snow .ql-toolbar .ql-picker-item.ql-selected .ql-stroke-miter {
    stroke: var(--color-primary);
  }

  .ql-snow .ql-stroke {
    stroke: var(--color-text);
  }

  .ql-snow .ql-stroke-miter {
    stroke: var(--color-text);
  }

  .ql-snow .ql-fill,
  .ql-snow .ql-stroke.ql-fill {
    fill: var(--color-text);
  }

  .ql-snow .ql-editor blockquote {
    margin-top: 5px;
    margin-bottom: 5px;
    padding-left: 16px;
    border-left: 4px solid var(--color-border);
  }

  .ql-snow .ql-editor code,
  .ql-snow .ql-editor pre {
    margin: 0;
    padding: 0;

    color: var(--color-info);

    background: none;
    border-radius: 0;
  }

  .ql-snow .ql-picker {
    color: var(--color-text);
  }

  .ql-snow .ql-picker-options {
    background: var(--color-box);
  }

  .ql-snow .ql-picker.ql-expanded .ql-picker-label {
    z-index: 2;
    color: var(--color-text);
  }

  .ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-fill {
    fill: var(--color-text);
  }

  .ql-snow .ql-picker.ql-expanded .ql-picker-label .ql-stroke {
    stroke: var(--color-text);
  }

  .ql-toolbar.ql-snow {
    font-family: var(--font);
    font-size: 1.4rem;
    font-weight: var(--font-normal);
    line-height: 1.4;
    color: var(--color-text);

    background: var(--color-box);
    border: var(--border);
    border-radius: var(--radius-xs) var(--radius-xs) 0 0;
  }

  .ql-toolbar.ql-snow .ql-picker-label {
    border: var(--border-width) solid transparent;
    outline: none;
  }

  .ql-toolbar.ql-snow .ql-picker-options {
    border: var(--border-width) solid transparent;
    box-shadow: var(--shadow);
  }

  .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-label {
    border-color: transparent;
  }

  .ql-toolbar.ql-snow .ql-picker.ql-expanded .ql-picker-options {
    top: calc(100% + 0.5em);

    margin: 0;

    border-color: var(--color-border);
    border-radius: var(--radius-xs);
    box-shadow: var(--shadow);
  }

  .ql-snow .ql-tooltip {
    padding: 0.5em 1em;

    color: var(--color-text);

    background: var(--color-box);
    border: var(--border);
    border-radius: var(--radius-xs);
    box-shadow: var(--shadow);
  }

  .ql-snow .ql-tooltip input[type="text"] {
    border: var(--border);
  }

  .ql-snow a {
    color: var(--color-link);
  }

  .ql-snow .ql-editor img {
    max-width: 100%;
    max-height: 40vh;
  }

  .ql-header svg,
  .ql-color svg,
  .ql-background svg,
  .ql-align svg {
    width: 18px;
    height: 18px;
  }

  .ql-color .ql-picker-label {
    padding-top: 3px;
  }

  @media (pointer: coarse) {
    .ql-snow.ql-toolbar button:hover:not(.ql-active),
    .ql-snow .ql-toolbar button:hover:not(.ql-active) {
      color: var(--color-text);
    }

    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-fill,
    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-fill,
    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill,
    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke.ql-fill {
      fill: var(--color-text);
    }

    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke,
    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke,
    .ql-snow.ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter,
    .ql-snow .ql-toolbar button:hover:not(.ql-active) .ql-stroke-miter {
      stroke: var(--color-text);
    }
  }
}

.form__column_invalid > .form__input > .wysiwyg:not(.wysiwyg_fullscreen) {
  & > .ql-toolbar,
  & > .ql-container {
    border-color: var(--color-error);
  }
}

.form__column_valid > .form__input > .wysiwyg:not(.wysiwyg_fullscreen) {
  & > .ql-toolbar,
  & > .ql-container {
    border-color: var(--color-success);
  }
}

.wysiwyg_fullscreen {
  position: fixed;
  z-index: var(--zi-modal);
  inset: 0;

  width: 100%;
  height: 100%;

  & > .ql-toolbar.ql-snow {
    width: 100%;
    border: none;
    border-bottom: var(--border);
  }

  & > .ql-container {
    width: 100%;
    height: 100%;
    border: none;
  }
}
