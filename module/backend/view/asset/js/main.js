function t(t,i="default",s=null){if("string"!=typeof t||!t?.length)return!1;let n=document.querySelector(".toasts");n||(n=document.createElement("div"),n.classList.add("toasts"),document.body.appendChild(n));const o=document.createElement("div");o.classList.add("toasts__item"),i&&o.classList.add(i);const r=document.createElement("i");r.classList.add("toasts__icon");const c=document.createElement("span");return c.classList.add("toasts__text"),c.textContent=t,o.appendChild(r),o.appendChild(c),n.appendChild(o),o.addEventListener("click",(()=>e(n,o))),setTimeout((()=>e(n,o)),s||5e3),!0}function e(t,e){e.classList.add("disappear"),e.addEventListener("animationend",(()=>{e.remove(),t&&t.childElementCount<=0&&t.remove()}))}function i(){let t=document.querySelector(".modals");return t||(t=document.createElement("div"),t.classList.add("modals"),document.body.appendChild(t)),t}function s(t){if(!t)return!1;const e=t.querySelector(".modal__body");e&&(e.scrollTop=0),document.querySelectorAll(".modal").forEach((e=>{e===t?e.classList.add("active"):e.classList.remove("active")})),document.body.classList.add("modal-open");const i=window.scrollX,s=window.scrollY;return window.onscroll=()=>window.scroll(i,s),!0}function n(t=null){return t?t.classList.remove("active"):document.querySelectorAll(".modal").forEach((t=>t.classList.remove("active"))),document.body.classList.remove("modal-open"),window.onscroll="",!0}async function o(t,e=null){const o=await function(t,e={}){return new Promise((o=>{const r=document.createElement("div");r.setAttribute("id",Math.random().toString(32).replace("0.","")),r.classList.add("modal"),e.class&&e.class.length?e.class.split(" ").forEach((t=>r.classList.add(t))):r.classList.add("modal_center");const c=document.createElement("header");c.classList.add("modal__header");const h=document.createElement("span");h.textContent=t;const d=document.createElement("button");if(d.setAttribute("type","button"),d.classList.add("modal__close"),d.innerHTML='<i class="ti ti-x"></i>',d.addEventListener("click",(()=>{n(r),r.remove(),o(!1)})),c.appendChild(h),c.appendChild(d),r.appendChild(c),e.text){const t=document.createElement("div");t.classList.add("modal__body"),d.textContent=e.text,r.appendChild(t)}const u=document.createElement("footer");u.classList.add("modal__footer"),(e.actions||[{text:window.Engine?.translation?.modal?.ok||"Ok",class:"btn_primary"}]).forEach((t=>{const e=document.createElement("button");e.setAttribute("type","button"),e.classList.add("btn"),t.class&&t.class.length&&t.class.split(" ").forEach((t=>e.classList.add(t))),e.textContent=t.text,e.addEventListener("click",(e=>{"function"==typeof t.callback?o(t.callback(r,e)):(n(r),r.remove(),o(!0))})),u.appendChild(e)})),r.appendChild(u),r.instance={open:()=>s(r),close:()=>n(r),destroy:()=>{n(r),r.remove()}},i().appendChild(r),s(r)}))}(t,{text:e,class:"modal_sm modal_center",actions:[{text:window.Engine?.translation?.modal?.ok||"Ok",class:"btn_primary",callback:t=>(n(t),t.remove(),!0)},{text:window.Engine?.translation?.modal?.cancel||"Cancel",class:"btn_cancel",callback:t=>(n(t),t.remove(),!1)}]});return o}function r(t=null,e=0,i="smooth"){if(t){const s=t.getBoundingClientRect().top+window.scrollY-e;window.scrollTo({top:s,behavior:i})}else window.scrollTo({top:0,behavior:i})}async function c(t,e={},i=15e3,s=1e3){const n=performance.now();e.method||(e.method="GET"),e.headers||(e.headers={"Content-Type":"application/json"}),"object"!=typeof e.body||e.body instanceof FormData||(e.body=JSON.stringify(e.body));const o={code:null,status:null,message:null,data:null};let r={};try{r=await async function(t,e={},i=15e3){const s=new AbortController,n=setTimeout((()=>s.abort()),i),o=await fetch(t,{...e,signal:s.signal});return clearTimeout(n),o}(t,e,i),o.code=r.status}catch(t){}try{const t=await r.json()||{};Object.assign(o,t),o.status=t.status||null,o.message=t.message||null,o.data=t.data||t.payload||null}catch(t){o.status="error",o.message=t}const c=performance.now()-n;var h;return c<s&&await(h=s-c,new Promise((t=>setTimeout(t,h)))),o}console.log("%cMade by Zakandaiev","background:#222e3c;color:#fff;padding:10px;font-weight:bold;"),document.addEventListener("DOMContentLoaded",(()=>{document.addEventListener("click",(t=>{const e=t.target.closest(".accordion"),i=t.target.closest(".accordion__body");if(!e||i)return!1;const s=e.querySelector(".accordion__header"),n=e.querySelector(".accordion__body");if(!s||!n)return!1;t.preventDefault();e.parentElement&&(e.parentElement.hasAttribute("data-collapse")||1==e.parentElement.getAttribute("data-collapse"))&&e.parentElement.querySelectorAll(".accordion").forEach((t=>{if(t===e)return!1;t.classList.remove("accordion_active");const i=t.querySelector(".accordion__body");i&&(i.style.height="0px")}));const o=n.scrollHeight;e.classList.contains("accordion_active")?(n.style.height="0px",e.classList.remove("accordion_active")):(n.style.height=`${o}px`,e.classList.add("accordion_active"))})),document.querySelectorAll(".accordion").forEach((t=>{const e=t.querySelector(".accordion__body");if(!e||!t.hasAttribute("data-active"))return!1;const i=e.scrollHeight;e.style.height=`${i}px`,e.style.transition="none",setTimeout((()=>{e.style.transition=""}),100),t.classList.add("accordion_active")}))})),document.addEventListener("DOMContentLoaded",(()=>{document.addEventListener("click",(t=>{const e=t.target.closest("[data-copy]");if(!e)return!1;const i=e.getAttribute("data-copy").length>0?e.getAttribute("data-copy"):e.textContent;if(!i)return!1;!async function(t){let e=!1;if(navigator.clipboard&&window.isSecureContext)try{await navigator.clipboard.writeText(t),e=!0}catch(t){}else{const i=document.createElement("textarea");i.value=t,i.style.position="fixed",i.style.zIndex="-1000000",i.style.top="100%",i.style.left="100%",i.style.opacity="0",i.style.visibility="hidden",document.body.append(i),i.select();try{document.execCommand("copy"),e=!0}catch(t){}finally{i.remove()}}}(i)}))})),window.toast=t,document.addEventListener("DOMContentLoaded",(()=>{document.addEventListener("click",(e=>{const i=e.target.closest("[data-toast]");if(!i)return!1;t(i.getAttribute("data-toast").length>0?i.getAttribute("data-toast"):i.textContent,i.getAttribute("data-toast-type"),i.getAttribute("data-toast-duration"))}))})),document.addEventListener("DOMContentLoaded",(()=>{function t(){const{trigger:t,menu:e}=this;if(!t||!e)return!1;e.classList.remove("dropdown__menu_disappear"),document.body.appendChild(e);const i=t.getBoundingClientRect(),s=e.getAttribute("data-position")||"bottom-left";document.body.appendChild(e);const n=e.getBoundingClientRect();let o=i.bottom+5,{left:r}=i;return e.style.top=`${o}px`,e.style.left=`${r}px`,"top-left"===s?(o=i.top-5-n.height,r=i.left):"top-center"===s?(o=i.top-5-n.height,r=i.left+i.width/2-n.width/2):"top-right"===s?(o=i.top-5-n.height,r=i.right-n.width):"bottom-left"===s?(o=i.bottom+5,r=i.left):"bottom-center"===s?(o=i.bottom+5,r=i.left+i.width/2-n.width/2):"bottom-right"===s?(o=i.bottom+5,r=i.right-n.width):"left-top"===s?(o=i.bottom-n.height,r=i.left-5-n.width):"left-center"===s?(o=i.top+i.height/2-n.height/2,r=i.left-5-n.width):"left-bottom"===s?(o=i.top,r=i.left-5-n.width):"right-top"===s?(o=i.bottom-n.height,r=i.right+5):"right-center"===s?(o=i.top+i.height/2-n.height/2,r=i.right+5):"right-bottom"===s&&(o=i.top,r=i.right+5),e.style.top=`${o}px`,e.style.left=`${r}px`,!0}function e(t){const{trigger:e,menu:i}=this;if(!e||!i)return!1;if(!t)return i.classList.add("dropdown__menu_disappear"),!0;const s=t.closest(".dropdown__item"),n=t.closest(".dropdown__header"),o=t.closest(".dropdown__text"),r=t.closest(".dropdown__divider"),c=!!i.hasAttribute("data-keep-open");return n||o||r||c&&s?(i.querySelectorAll(".dropdown__item").forEach((t=>{t===s?t.classList.toggle("active"):t.classList.remove("active")})),!1):(i.classList.add("dropdown__menu_disappear"),!0)}function i(t){document.querySelectorAll(".dropdown").forEach((e=>{e.instance&&e.instance.close(t)}))}document.querySelectorAll(".dropdown").forEach((i=>{const s=i.querySelector(".dropdown__menu");s.addEventListener("animationend",(t=>{"dropdown-disappear"===t.animationName&&s.remove()}));const n={trigger:i,menu:s,open:t,close:e};s&&s.remove(),i.instance=n})),document.addEventListener("click",(t=>{i(t.target);const e=t.target.closest(".dropdown");if(!e||!e.instance)return!1;e.instance.open()})),document.addEventListener("scroll",(()=>i()))})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("a").forEach((t=>{t.hasAttribute("target")&&"_blank"===t.getAttribute("target")&&t.setAttribute("rel","noopener noreferrer nofollow")}))})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("a").forEach((t=>{t.hasAttribute("href")&&t.href.startsWith("tel:")&&(t.href=`tel:${t.href.replaceAll(/[^\d+]/g,"")}`)}))})),document.addEventListener("DOMContentLoaded",(()=>{const t=i();document.querySelectorAll(".modal").forEach((e=>{const i={open:()=>s(e),close:()=>n(e),destroy:()=>{n(e),e.remove()}};e.instance=i,t.appendChild(e)}))})),document.addEventListener("click",(t=>{const e=t.target.closest("[data-modal]");if(!e)return!1;const i=document.getElementById(e.getAttribute("data-modal"));if(!i)return!1;s(i)})),document.addEventListener("click",(t=>{if(t.target.closest("[data-modal]"))return!1;const e=t.target.closest("[data-modal-close]"),i=t.target.closest(".modal")||(e?document.querySelector(e.getAttribute("data-modal-close")):null);(e&&i||!e&&!i)&&n(i)})),document.addEventListener("keydown",(t=>{let e=!1;if(e="key"in t?"Escape"===t.key||"Esc"===t.key:27===t.keyCode,!e)return!1;document.querySelectorAll(".modal").forEach((t=>n(t)))})),window.onload=()=>{document.querySelectorAll("img").forEach((t=>{t.complete&&"number"==typeof t.naturalWidth&&t.naturalWidth<=0&&(t.src=`${window?.Engine?.site?.assetUrl||""}/img/no-image.jpg`)}))},document.addEventListener("DOMContentLoaded",(()=>{function t(){document.querySelectorAll(".popover").forEach((t=>t.classList.add("popover_disappear")))}document.addEventListener("click",(e=>{t();const i=e.target.closest("[data-popover]");if(!i)return!1;const s=i.getBoundingClientRect(),n=i.getAttribute("data-popover")||"top",o=i.getAttribute("data-title"),r=i.getAttribute("data-content"),c=document.createElement("div");c.classList.add("popover"),c.classList.add(`popover_${n}`);const h=document.createElement("div");h.classList.add("popover__header"),h.textContent=o;const d=document.createElement("div");d.classList.add("popover__body"),d.textContent=r,c.appendChild(h),c.appendChild(d),document.body.appendChild(c);const u=c.getBoundingClientRect();let p=s.top-u.height-15,m=s.left+s.width/2-u.width/2;"bottom"===n?(p=s.bottom+15,m=s.left+s.width/2-u.width/2):"left"===n?(p=s.top+s.height/2-u.height/2,m=s.left-u.width-15):"right"===n&&(p=s.top+s.height/2-u.height/2,m=s.right+15),c.style.top=`${p}px`,c.style.left=`${m}px`,c.addEventListener("animationend",(t=>{"popover-disappear"===t.animationName&&c.remove()}))})),document.addEventListener("scroll",(()=>t()))})),document.addEventListener("DOMContentLoaded",(()=>{document.addEventListener("contextmenu",(t=>{"IMG"===t.target.nodeName&&t.preventDefault()}))})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("table").forEach((t=>{if(!t.parentElement.classList.contains("table-responsive")&&!t.hasAttribute("data-noresponsive")){const e=document.createElement("div");e.classList.add("table-responsive"),t.before(e),e.appendChild(t)}}))})),document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("header")?.offsetHeight||0;document.addEventListener("click",(e=>{const i=e.target.closest("a");if(!i)return!1;const s=i.getAttribute("href");if("#"===s)e.preventDefault(),r();else if("#"===s.charAt(0)||"/"===s.charAt(0)&&"#"===s.charAt(1)){if(!i.hash)return!1;const s=document.querySelector(i.hash);s&&(e.preventDefault(),r(s,t+32))}}))})),document.addEventListener("DOMContentLoaded",(()=>{document.addEventListener("click",(t=>{const e=t.target.closest(".tab"),i=t.target.closest(".tab__nav-item");if(!e||!i)return!1;t.preventDefault();const{hash:s}=i,n=s.substring(1);e.hasAttribute("data-save")&&(window.history.pushState?window.history.pushState(null,null,s):window.location.hash=s),e.querySelectorAll(".tab__nav-item").forEach((t=>{t.hash===s?t.classList.add("active"):t.classList.remove("active")})),e.querySelectorAll(".tab__body").forEach((t=>{t.id===n?t.classList.add("active"):t.classList.remove("active")}))})),window.location.hash&&document.querySelectorAll(".tab__nav-item,.tab__body").forEach((t=>{if(!t.closest(".tab").hasAttribute("data-save"))return!1;const{hash:e}=window.location,i=e.substring(1);t.classList.contains("tab__nav-item")?t.hash===e?t.classList.add("active"):t.classList.remove("active"):t.classList.contains("tab__body")&&(t.id===i?t.classList.add("active"):t.classList.remove("active"))}))})),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("textarea").forEach((t=>{const e=t.scrollHeight;t.initialHeight=e,t.style.height=`${e}px`,t.style.overflow=e>300?"hidden auto":"hidden"})),document.addEventListener("input",(t=>{const e=t.target;if("TEXTAREA"===e.tagName){if((e.initialHeight||0)>e.scrollHeight)return!1;e.style.height=0,e.style.height=`${e.scrollHeight}px`,e.style.overflow=e.scrollHeight>300?"hidden auto":"hidden"}}))})),document.addEventListener("DOMContentLoaded",(()=>{document.addEventListener("mouseover",(t=>{const e=t.target.closest("[data-tooltip]");if(!e)return!1;const i=e.getBoundingClientRect(),s=e.getAttribute("data-tooltip")||"top",n=e.getAttribute("title"),o=document.createElement("div");o.classList.add("tooltip"),o.classList.add(`tooltip_${s}`),o.textContent=n,e.title_backup=n,e.removeAttribute("title"),e.tooltip=o,document.body.appendChild(o);const r=o.getBoundingClientRect();let c=i.top-r.height-10,h=i.left+i.width/2-r.width/2;"bottom"===s?(c=i.bottom+10,h=i.left+i.width/2-r.width/2):"left"===s?(c=i.top+i.height/2-r.height/2,h=i.left-r.width-10):"right"===s&&(c=i.top+i.height/2-r.height/2,h=i.right+10),o.style.top=`${c}px`,o.style.left=`${h}px`})),document.addEventListener("mouseout",(t=>{const e=t.target.closest("[data-tooltip]");if(!e)return!1;const{tooltip:i}=e;if(!i)return!1;e.setAttribute("title",e.title_backup),e.tooltip=null,i.remove()}))})),document.addEventListener("DOMContentLoaded",(()=>{const t=document.querySelector(".sidebar");if(!t)return!1;t.style.transition="none",setTimeout((()=>{t.style.transition=""}),100),window.innerWidth>=992?t.classList.remove("sidebar_hidden"):t.classList.add("sidebar_hidden"),document.addEventListener("click",(t=>{const e=t.target.closest(".sidebar__collapse > .sidebar__item"),i=t.target.closest(".sidebar__collapse");if(!e||!i)return!1;const s=i.querySelector(".sidebar__collapse-menu");if(!s)return!1;t.preventDefault();const n=s.scrollHeight;i.classList.contains("active")?(s.style.height="0px",i.classList.remove("active")):(s.style.height=`${n}px`,i.classList.add("active"))})),document.querySelectorAll(".sidebar__collapse.active").forEach((t=>{const e=t.querySelector(".sidebar__collapse-menu");if(!e)return!1;const i=e.scrollHeight;e.style.transition="none",setTimeout((()=>{e.style.transition=""}),100),e.style.height=`${i}px`})),document.addEventListener("click",(e=>{if(!e.target.closest("[data-sidebar-toggle]"))return!1;e.preventDefault(),t.classList.toggle("sidebar_hidden")})),window.addEventListener("resize",(e=>{e.currentTarget.innerWidth>=992?t.classList.remove("sidebar_hidden"):t.classList.add("sidebar_hidden")}))}));class Form{constructor(t,e={}){this.initializeVariables(t,e)}initializeVariables(t,e={}){if(this.node=t,this.options=e,this.submit=t.querySelector('[type="submit"]'),this.submit||(this.submit=document.createElement("button"),this.submit.classList.add("hidden"),this.node.appendChild(this.submit)),this.dataSubmitNative=!!this.node.hasAttribute("data-submit-native"),this.dataSubmitOnchange=!!this.node.hasAttribute("data-submit-onchange"),this.dataUnsetNull=!!this.node.hasAttribute("data-unset-null"),this.node.hasAttribute("data-native"))return this;this.action=this.node.action,this.method=this.node.method||"POST","get"===this.method.toLowerCase()&&(this.method="POST"),this.dataConfirm=this.node.getAttribute("data-confirm"),this.dataClass=this.node.getAttribute("data-class")||"form_loading",this.dataReset=!!this.node.hasAttribute("data-reset"),this.dataRedirect=this.node.getAttribute("data-redirect"),this.dataMessage=this.node.getAttribute("data-message"),this.api={delayMs:this.node.getAttribute("data-delay")?parseInt(this.node.getAttribute("data-delay"),10):this.options?.backend?.delayMs||500,timeoutMs:this.node.getAttribute("data-timeout")?parseInt(this.node.getAttribute("data-timeout"),10):this.options?.backend?.timeoutMs||15e3},this.action&&this.initialize()}initialize(){this.initValidation(),this.insertLoader(),this.initSubmit(),this.listenSubmit()}initValidation(){if(!this.node.hasAttribute("data-validate"))return!1;this.submit.addEventListener("click",(()=>{this.node.querySelectorAll(":invalid").forEach((t=>{if("FIELDSET"===t.tagName)return!1;const e=t.closest(".form__column");if(e)return e.classList.remove("form__column_valid"),e.classList.add("form__column_invalid"),!0;t.classList.remove("valid"),t.classList.add("invalid")})),this.node.querySelectorAll(":valid").forEach((t=>{if("FIELDSET"===t.tagName)return!1;const e=t.closest(".form__column");if(e)return e.classList.remove("form__column_invalid"),e.classList.add("form__column_valid"),!0;t.classList.remove("invalid"),t.classList.add("valid")}))})),this.node.querySelectorAll("input, textarea, select").forEach((t=>{["input","change"].forEach((e=>{t.addEventListener(e,(()=>{if(t.validity.valid){const e=t.closest(".form__column");if(e)return e.classList.remove("form__column_invalid"),e.classList.add("form__column_valid"),!0;t.classList.remove("invalid"),t.classList.add("valid")}else{const e=t.closest(".form__column");if(e)return e.classList.remove("form__column_valid"),e.classList.add("form__column_invalid"),!0;t.classList.remove("valid"),t.classList.add("invalid")}}))}))}))}insertLoader(){const t=this.options?.theme?.loader;return!!t&&(this.node.insertAdjacentHTML("beforeend",`<div class="form__loader">${t}</div>`),!0)}initSubmit(){this.dataSubmitOnchange&&this.node.querySelectorAll("[name]").forEach((t=>{t.onchange=()=>{this.node.requestSubmit(this.submit)}}))}listenSubmit(){this.node.addEventListener("submit",(async e=>{if(this.dataSubmitNative)return this.node.querySelectorAll("[name]").forEach((t=>{if(t.hasAttribute("data-picker")&&t.instance&&t.instance.selectedDates){const e=t.getAttribute("data-picker");if(!["date","datetime","month"].includes(e))return!1;t.hasAttribute("data-multiple")||t.hasAttribute("data-range")?t.value=t.instance.selectedDates.map((t=>this.getFormattedDate(e,t))).join(" - "):t.value=t.value.length&&t.instance.selectedDates.length?this.getFormattedDate(e,t.instance.selectedDates[0]):""}this.dataUnsetNull&&!t.value.length&&t.setAttribute("disabled",!0)})),!1;e.preventDefault();if(!await this.checkConfirmation())return!1;this.disableForm();const i=await c(this.action,{headers:{},method:this.method,body:this.getFormData()},this.api.timeoutMs,this.api.delayMs),s=200===i.code&&"success"===i.status;if(s){this.successRedirect(i)||(this.successResetForm(),t(this.dataMessage||i.message,i.status))}else this.showErrors(i.data||[]),t(i.message,i.status);this.enableForm(s)}))}async checkConfirmation(){if(!this.dataConfirm)return!0;let t=!1;return t=await t(this.dataConfirm),t}getFormData(){const t=new FormData(this.node);return this.options?.csrf&&t.set(this.options.csrf.key,this.options.csrf.token),this.formatDates(t),this.dataUnsetNull&&this.unsetNullFormData(t),t}formatDates(t){for(const e of t.entries()){const i=e[0],s=this.node.querySelector(`[name="${i}"]`);if(s&&s.hasAttribute("data-picker")&&s.instance&&s.instance.selectedDates){const e=s.getAttribute("data-picker");if(!["date","datetime","month"].includes(e))return!1;s.hasAttribute("data-multiple")||s.hasAttribute("data-range")?(t.delete(i),s.instance.selectedDates.forEach((s=>t.append(i,this.getFormattedDate(e,s))))):t.set(i,s.value.length&&s.instance.selectedDates.length?this.getFormattedDate(e,s.instance.selectedDates[0]):"")}}}unsetNullFormData(t){for(const e of t.entries()){const i=e[0],s=e[1];s&&s.length||t.delete(i)}}getFormattedDate(t,e){const i=new Date(e.valueOf());return i.setMinutes(i.getMinutes()-i.getTimezoneOffset()),"date"===t?i.toJSON().slice(0,10):"datetime"===t?i.toJSON().slice(0,19).replace("T"," "):"month"===t&&i.toJSON().slice(0,7)}disableForm(){return this.node.setAttribute("disabled","disabled"),this.node.classList.add(this.dataClass),this.submit.disabled=!0,!0}enableForm(t=!1){return this.node.removeAttribute("disabled","disabled"),this.node.classList.remove(this.dataClass),this.submit.disabled=!1,!t||(this.node.querySelectorAll("input, textarea, select").forEach((t=>{const e=t.closest(".form__column");if(e)return e.classList.remove("form__column_valid","form__column_invalid"),!0;t.classList.remove("valid","invalid")})),!0)}showErrors(t){if(!this.node.hasAttribute("data-validate")||!t?.length)return!1;t.forEach((t=>{if(!t.column||!t.validation)return!1;const e=this.node.querySelector(`[data-column-name="${t.column}"]`);if(!e)return!1;e.classList.remove("form__column_valid"),e.classList.add("form__column_invalid");const i=e.querySelector(".form__error");if(!i)return!1;i.textContent=t.validation}))}successRedirect(t){return"this"===this.dataRedirect?document.location.reload():this.dataRedirect&&(window.location.href=decodeURI(this.dataRedirect).replaceAll(/(\$[\w\d\-_]+)/g,t?.data)),!!this.dataRedirect}successResetForm(){return!!this.dataReset&&(this.node.reset(),!0)}}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("form").forEach((t=>{const e=new Form(t,window.Engine);t.form=e}))}));var h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u,p={exports:{}};var m=(u||(u=1,p.exports=function(){var t={d:function(e,i){for(var s in i)t.o(i,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:i[s]})},o:function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}},e={};t.d(e,{default:function(){return R}});var i={days:"days",months:"months",years:"years",day:"day",month:"month",year:"year",eventChangeViewDate:"changeViewDate",eventChangeCurrentView:"changeCurrentView",eventChangeFocusDate:"changeFocusDate",eventChangeSelectedDate:"changeSelectedDate",eventChangeTime:"changeTime",eventChangeLastSelectedDate:"changeLastSelectedDate",actionSelectDate:"selectDate",actionUnselectDate:"unselectDate",cssClassWeekend:"-weekend-"},s={classes:"",inline:!1,locale:{days:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],daysShort:["Вос","Пон","Вто","Сре","Чет","Пят","Суб"],daysMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],today:"Сегодня",clear:"Очистить",dateFormat:"dd.MM.yyyy",timeFormat:"HH:mm",firstDay:1},startDate:new Date,firstDay:"",weekends:[6,0],dateFormat:"",altField:"",altFieldDateFormat:"T",toggleSelected:!0,keyboardNav:!0,selectedDates:!1,container:"",isMobile:!1,visible:!1,position:"bottom left",offset:12,view:i.days,minView:i.days,showOtherMonths:!0,selectOtherMonths:!0,moveToOtherMonthsOnSelect:!0,showOtherYears:!0,selectOtherYears:!0,moveToOtherYearsOnSelect:!0,minDate:"",maxDate:"",disableNavWhenOutOfRange:!0,multipleDates:!1,multipleDatesSeparator:", ",range:!1,dynamicRange:!0,buttons:!1,monthsField:"monthsShort",showEvent:"focus",autoClose:!1,fixedHeight:!1,prevHtml:'<svg><path d="M 17,12 l -5,5 l 5,5"></path></svg>',nextHtml:'<svg><path d="M 14,12 l 5,5 l -5,5"></path></svg>',navTitles:{days:"MMMM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},timepicker:!1,onlyTimepicker:!1,dateTimeSeparator:" ",timeFormat:"",minHours:0,maxHours:24,minMinutes:0,maxMinutes:59,hoursStep:1,minutesStep:1,onSelect:!1,onChangeViewDate:!1,onChangeView:!1,onRenderCell:!1,onShow:!1,onHide:!1,onClickDayName:!1};function n(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:document;return"string"==typeof t?e.querySelector(t):t}function o(){let{tagName:t="div",className:e="",innerHtml:i="",id:s="",attrs:n={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=document.createElement(t);return e&&o.classList.add(...e.split(" ")),s&&(o.id=s),i&&(o.innerHTML=i),n&&r(o,n),o}function r(t,e){for(let[i,s]of Object.entries(e))void 0!==s&&t.setAttribute(i,s);return t}function c(t){return new Date(t.getFullYear(),t.getMonth()+1,0).getDate()}function h(t){let e=t.getHours(),{hours:i,dayPeriod:s}=d(e);return{year:t.getFullYear(),month:t.getMonth(),fullMonth:t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1,date:t.getDate(),fullDate:t.getDate()<10?"0"+t.getDate():t.getDate(),day:t.getDay(),hours:e,fullHours:u(e),hours12:i,dayPeriod:s,fullHours12:u(i),minutes:t.getMinutes(),fullMinutes:t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes()}}function d(t){return{dayPeriod:t>11?"pm":"am",hours:t%12==0?12:t%12}}function u(t){return t<10?"0"+t:t}function p(t){let e=10*Math.floor(t.getFullYear()/10);return[e,e+9]}function m(){let t=[];for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];return i.forEach((e=>{if("object"==typeof e)for(let i in e)e[i]&&t.push(i);else e&&t.push(e)})),t.join(" ")}function b(t,e){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.days;if(!t||!e)return!1;let n=h(t),o=h(e);return{[i.days]:n.date===o.date&&n.month===o.month&&n.year===o.year,[i.months]:n.month===o.month&&n.year===o.year,[i.years]:n.year===o.year}[s]}function v(t,e,i){let s=E(t,!1).getTime(),n=E(e,!1).getTime();return i?s>=n:s>n}function y(t,e){return!v(t,e,!0)}function E(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=new Date(t.getTime());return"boolean"!=typeof e||e||function(t){t.setHours(0,0,0,0)}(i),i}function x(t,e,i){t.length?t.forEach((t=>{t.addEventListener(e,i)})):t.addEventListener(e,i)}function w(t,e){return!(!t||t===document||t instanceof DocumentFragment)&&(t.matches(e)?t:w(t.parentNode,e))}function S(t,e,i){return t>i?i:t<e?e:t}function O(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];return i.filter((t=>t)).forEach((e=>{for(let[i,s]of Object.entries(e))if(void 0!==s&&"[object Object]"===s.toString()){let e=void 0!==t[i]?t[i].toString():void 0,n=s.toString(),o=Array.isArray(s)?[]:{};t[i]=t[i]?e!==n?o:t[i]:o,O(t[i],s)}else t[i]=s})),t}function D(t){let e=t;return t instanceof Date||("string"==typeof t&&/^\d{4}-\d{2}-\d{2}$/.test(t)&&(t+="T00:00:00"),e=new Date(t)),isNaN(e.getTime())&&(console.log(`Unable to convert value "${t}" to Date object`),e=!1),e}function M(t){let e="\\s|\\.|-|/|\\\\|,|\\$|\\!|\\?|:|;";return new RegExp("(^|>|"+e+")("+t+")($|<|"+e+")","g")}function k(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class C{constructor(){let{type:t,date:e,dp:i,opts:s,body:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};k(this,"focus",(()=>{this.$cell.classList.add("-focus-"),this.focused=!0})),k(this,"removeFocus",(()=>{this.$cell.classList.remove("-focus-"),this.focused=!1})),k(this,"select",(()=>{this.$cell.classList.add("-selected-"),this.selected=!0})),k(this,"removeSelect",(()=>{this.$cell.classList.remove("-selected-","-range-from-","-range-to-"),this.selected=!1})),k(this,"onChangeSelectedDate",(()=>{this.isDisabled||(this._handleSelectedStatus(),this.opts.range&&this._handleRangeStatus())})),k(this,"onChangeFocusDate",(t=>{if(!t)return void(this.focused&&this.removeFocus());let e=b(t,this.date,this.type);e?this.focus():!e&&this.focused&&this.removeFocus(),this.opts.range&&this._handleRangeStatus()})),k(this,"render",(()=>(this.$cell.innerHTML=this._getHtml(),this._handleClasses(),this.$cell))),this.type=t,this.singleType=this.type.slice(0,-1),this.date=e,this.dp=i,this.opts=s,this.body=n,this.customData=!1,this.init()}init(){var t;let{onRenderCell:e}=this.opts;e&&(this.customData=e({date:this.date,cellType:this.singleType,datepicker:this.dp})),this._createElement(),this._bindDatepickerEvents(),null!==(t=this.customData)&&void 0!==t&&t.disabled&&this.dp.disableDate(this.date)}_bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeFocusDate,this.onChangeFocusDate)}unbindDatepickerEvents(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeFocusDate,this.onChangeFocusDate)}_createElement(){var t;let{year:e,month:i,date:s}=h(this.date),n=(null===(t=this.customData)||void 0===t?void 0:t.attrs)||{};this.$cell=o({attrs:{"data-year":e,"data-month":i,"data-date":s,...n}}),this.$cell.adpCell=this}_getClassName(){var t;let e=new Date,{selectOtherMonths:s,selectOtherYears:n}=this.opts,{minDate:o,maxDate:r,isDateDisabled:c}=this.dp,{day:d}=h(this.date),u=this._isOutOfMinMaxRange(),p=c(this.date),v=m("air-datepicker-cell",`-${this.singleType}-`,{"-current-":b(e,this.date,this.type),"-min-date-":o&&b(o,this.date,this.type),"-max-date-":r&&b(r,this.date,this.type)}),y="";switch(this.type){case i.days:y=m({"-weekend-":this.dp.isWeekend(d),"-other-month-":this.isOtherMonth,"-disabled-":this.isOtherMonth&&!s||u||p});break;case i.months:y=m({"-disabled-":u});break;case i.years:y=m({"-other-decade-":this.isOtherDecade,"-disabled-":u||this.isOtherDecade&&!n})}return m(v,y,null===(t=this.customData)||void 0===t?void 0:t.classes).split(" ")}_getHtml(){var t;let{year:e,month:s,date:n}=h(this.date),{showOtherMonths:o,showOtherYears:r}=this.opts;if(null!==(t=this.customData)&&void 0!==t&&t.html)return this.customData.html;switch(this.type){case i.days:return!o&&this.isOtherMonth?"":n;case i.months:return this.dp.locale[this.opts.monthsField][s];case i.years:return!r&&this.isOtherDecade?"":e}}_isOutOfMinMaxRange(){let{minDate:t,maxDate:e}=this.dp,{type:s,date:n}=this,{month:o,year:r,date:c}=h(n),d=s===i.days,u=s===i.years,p=!!t&&new Date(r,u?t.getMonth():o,d?c:t.getDate()),m=!!e&&new Date(r,u?e.getMonth():o,d?c:e.getDate());return t&&e?y(p,t)||v(m,e):t?y(p,t):e?v(m,e):void 0}destroy(){this.unbindDatepickerEvents()}_handleRangeStatus(){const{selectedDates:t,focusDate:e,rangeDateTo:i,rangeDateFrom:s}=this.dp,n=t.length;if(!n)return;let o=s,r=i;if(1===n&&e){const i=v(e,t[0]);o=i?t[0]:e,r=i?e:t[0]}let c=m({"-in-range-":o&&r&&(h=this.date,d=o,u=r,v(h,d)&&y(h,u)),"-range-from-":o&&b(this.date,o,this.type),"-range-to-":r&&b(this.date,r,this.type)});var h,d,u;this.$cell.classList.remove("-range-from-","-range-to-","-in-range-"),c&&this.$cell.classList.add(...c.split(" "))}_handleSelectedStatus(){let t=this.dp._checkIfDateIsSelected(this.date,this.type);t?this.select():!t&&this.selected&&this.removeSelect()}_handleInitialFocusStatus(){b(this.dp.focusDate,this.date,this.type)&&this.focus()}_handleClasses(){this.$cell.setAttribute("class",""),this._handleInitialFocusStatus(),this.dp.hasSelectedDates&&(this._handleSelectedStatus(),this.dp.opts.range&&this._handleRangeStatus()),this.$cell.classList.add(...this._getClassName())}get isDisabled(){return this.$cell.matches(".-disabled-")}get isOtherMonth(){return this.dp.isOtherMonth(this.date)}get isOtherDecade(){return this.dp.isOtherDecade(this.date)}}function P(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let N={[i.days]:`<div class="air-datepicker-body--day-names"></div><div class="air-datepicker-body--cells -${i.days}-"></div>`,[i.months]:`<div class="air-datepicker-body--cells -${i.months}-"></div>`,[i.years]:`<div class="air-datepicker-body--cells -${i.years}-"></div>`};const B=".air-datepicker-cell";class T{constructor(t){let{dp:e,type:s,opts:n}=t;P(this,"handleClick",(t=>{let e=t.target.closest(B).adpCell;if(e.isDisabled)return;if(!this.dp.isMinViewReached)return void this.dp.down();let i=this.dp._checkIfDateIsSelected(e.date,e.type);i?this.dp._handleAlreadySelectedDates(i,e.date):this.dp.selectDate(e.date)})),P(this,"handleDayNameClick",(t=>{let e=t.target.getAttribute("data-day-index");this.opts.onClickDayName({dayIndex:Number(e),datepicker:this.dp})})),P(this,"onChangeCurrentView",(t=>{t!==this.type?this.hide():(this.show(),this.render())})),P(this,"onMouseOverCell",(t=>{let e=w(t.target,B);this.dp.setFocusDate(!!e&&e.adpCell.date)})),P(this,"onMouseOutCell",(()=>{this.dp.setFocusDate(!1)})),P(this,"onClickBody",(t=>{let{onClickDayName:e}=this.opts,i=t.target;i.closest(B)&&this.handleClick(t),e&&i.closest(".air-datepicker-body--day-name")&&this.handleDayNameClick(t)})),P(this,"onMouseDown",(t=>{this.pressed=!0;let e=w(t.target,B),i=e&&e.adpCell;b(i.date,this.dp.rangeDateFrom)&&(this.rangeFromFocused=!0),b(i.date,this.dp.rangeDateTo)&&(this.rangeToFocused=!0)})),P(this,"onMouseMove",(t=>{if(!this.pressed||!this.dp.isMinViewReached)return;t.preventDefault();let e=w(t.target,B),i=e&&e.adpCell,{selectedDates:s,rangeDateTo:n,rangeDateFrom:o}=this.dp;if(!i||i.isDisabled)return;let{date:r}=i;if(2===s.length){if(this.rangeFromFocused&&!v(r,n)){let{hours:t,minutes:e}=h(o);r.setHours(t),r.setMinutes(e),this.dp.rangeDateFrom=r,this.dp.replaceDate(o,r)}if(this.rangeToFocused&&!y(r,o)){let{hours:t,minutes:e}=h(n);r.setHours(t),r.setMinutes(e),this.dp.rangeDateTo=r,this.dp.replaceDate(n,r)}}})),P(this,"onMouseUp",(()=>{this.pressed=!1,this.rangeFromFocused=!1,this.rangeToFocused=!1})),P(this,"onChangeViewDate",((t,e)=>{if(!this.isVisible)return;let s=p(t),n=p(e);switch(this.dp.currentView){case i.days:if(b(t,e,i.months))return;break;case i.months:if(b(t,e,i.years))return;break;case i.years:if(s[0]===n[0]&&s[1]===n[1])return}this.render()})),P(this,"render",(()=>{this.destroyCells(),this._generateCells(),this.cells.forEach((t=>{this.$cells.appendChild(t.render())}))})),this.dp=e,this.type=s,this.opts=n,this.cells=[],this.$el="",this.pressed=!1,this.isVisible=!0,this.init()}init(){this._buildBaseHtml(),this.type===i.days&&this.renderDayNames(),this.render(),this._bindEvents(),this._bindDatepickerEvents()}_bindEvents(){let{range:t,dynamicRange:e}=this.opts;x(this.$el,"mouseover",this.onMouseOverCell),x(this.$el,"mouseout",this.onMouseOutCell),x(this.$el,"click",this.onClickBody),t&&e&&(x(this.$el,"mousedown",this.onMouseDown),x(this.$el,"mousemove",this.onMouseMove),x(window.document,"mouseup",this.onMouseUp))}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView)}_buildBaseHtml(){this.$el=o({className:`air-datepicker-body -${this.type}-`,innerHtml:N[this.type]}),this.$names=n(".air-datepicker-body--day-names",this.$el),this.$cells=n(".air-datepicker-body--cells",this.$el)}_getDayNamesHtml(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dp.locale.firstDay,e="",s=this.dp.isWeekend,{onClickDayName:n}=this.opts,o=t,r=0;for(;r<7;){let t=o%7;e+=`<div class="${m("air-datepicker-body--day-name",{[i.cssClassWeekend]:s(t),"-clickable-":!!n})}" data-day-index='${t}'>${this.dp.locale.daysMin[t]}</div>`,r++,o++}return e}renderDayNames(){this.$names.innerHTML=this._getDayNamesHtml()}_generateCell(t){let{type:e,dp:i,opts:s}=this;return new C({type:e,dp:i,opts:s,date:t,body:this})}_generateCells(){T.getDatesFunction(this.type)(this.dp,(t=>{this.cells.push(this._generateCell(t))}))}show(){this.isVisible=!0,this.$el.classList.remove("-hidden-")}hide(){this.isVisible=!1,this.$el.classList.add("-hidden-")}destroyCells(){this.cells.forEach((t=>t.destroy())),this.cells=[],this.$cells.innerHTML=""}destroy(){this.destroyCells(),this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView)}static getDaysDates(t,e){let{viewDate:i,opts:{fixedHeight:s},locale:{firstDay:n}}=t,o=c(i),{year:r,month:d}=h(i),u=new Date(r,d,1),p=new Date(r,d,o),m=u.getDay()-n,b=6-p.getDay()+n;m=m<0?m+7:m,b=b>6?b-7:b;let v=function(t,e){let{year:i,month:s,date:n}=h(t);return new Date(i,s,n-e)}(u,m),y=o+m+b,E=v.getDate(),{year:x,month:w}=h(v),S=0;s&&(y=42);const O=[];for(;S<y;){let t=new Date(x,w,E+S);e&&e(t),O.push(t),S++}return O}static getMonthsDates(t,e){let{year:i}=t.parsedViewDate,s=0,n=[];for(;s<12;){const t=new Date(i,s);n.push(t),e&&e(t),s++}return n}static getYearsDates(t,e){let i=p(t.viewDate),s=i[0]-1,n=i[1]+1,o=s,r=[];for(;o<=n;){const t=new Date(o,0);r.push(t),e&&e(t),o++}return r}static getDatesFunction(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.days;return{[i.days]:T.getDaysDates,[i.months]:T.getMonthsDates,[i.years]:T.getYearsDates}[t]}}function F(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class V{constructor(t){let{dp:e,opts:i}=t;F(this,"onClickNav",(t=>{let e=w(t.target,".air-datepicker-nav--action");if(!e)return;let i=e.dataset.action;this.dp[i]()})),F(this,"onChangeViewDate",(()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()})),F(this,"onChangeCurrentView",(()=>{this.render(),this._resetNavStatus(),this.handleNavStatus()})),F(this,"onClickNavTitle",(()=>{this.dp.isFinalView||this.dp.up()})),F(this,"update",(()=>{let{prevHtml:t,nextHtml:e}=this.opts;this.$prev.innerHTML=t,this.$next.innerHTML=e,this._resetNavStatus(),this.render(),this.handleNavStatus()})),F(this,"renderDelay",(()=>{setTimeout(this.render)})),F(this,"render",(()=>{this.$title.innerHTML=this._getTitle(),function(t,e){for(let i in e)e[i]?t.classList.add(i):t.classList.remove(i)}(this.$title,{"-disabled-":this.dp.isFinalView})})),this.dp=e,this.opts=i,this.init()}init(){this._createElement(),this._buildBaseHtml(),this._defineDOM(),this.render(),this.handleNavStatus(),this._bindEvents(),this._bindDatepickerEvents()}_defineDOM(){this.$title=n(".air-datepicker-nav--title",this.$el),this.$prev=n('[data-action="prev"]',this.$el),this.$next=n('[data-action="next"]',this.$el)}_bindEvents(){this.$el.addEventListener("click",this.onClickNav),this.$title.addEventListener("click",this.onClickNavTitle)}_bindDatepickerEvents(){this.dp.on(i.eventChangeViewDate,this.onChangeViewDate),this.dp.on(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.on(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.on(i.eventChangeTime,this.render))}destroy(){this.dp.off(i.eventChangeViewDate,this.onChangeViewDate),this.dp.off(i.eventChangeCurrentView,this.onChangeCurrentView),this.isNavIsFunction&&(this.dp.off(i.eventChangeSelectedDate,this.renderDelay),this.dp.opts.timepicker&&this.dp.off(i.eventChangeTime,this.render))}_createElement(){this.$el=o({tagName:"nav",className:"air-datepicker-nav"})}_getTitle(){let{dp:t,opts:e}=this,i=e.navTitles[t.currentView];return"function"==typeof i?i(t):t.formatDate(t.viewDate,i)}handleNavStatus(){let{disableNavWhenOutOfRange:t}=this.opts,{minDate:e,maxDate:s}=this.dp;if(!e&&!s||!t)return;let{year:n,month:o}=this.dp.parsedViewDate,r=!!e&&h(e),c=!!s&&h(s);switch(this.dp.currentView){case i.days:e&&r.month>=o&&r.year>=n&&this._disableNav("prev"),s&&c.month<=o&&c.year<=n&&this._disableNav("next");break;case i.months:e&&r.year>=n&&this._disableNav("prev"),s&&c.year<=n&&this._disableNav("next");break;case i.years:{let t=p(this.dp.viewDate);e&&r.year>=t[0]&&this._disableNav("prev"),s&&c.year<=t[1]&&this._disableNav("next");break}}}_disableNav(t){n('[data-action="'+t+'"]',this.$el).classList.add("-disabled-")}_resetNavStatus(){!function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];t.length?t.forEach((t=>{t.classList.remove(...i)})):t.classList.remove(...i)}(this.$el.querySelectorAll(".air-datepicker-nav--action"),"-disabled-")}_buildBaseHtml(){let{prevHtml:t,nextHtml:e}=this.opts;this.$el.innerHTML=`<div class="air-datepicker-nav--action" data-action="prev">${t}</div><div class="air-datepicker-nav--title"></div><div class="air-datepicker-nav--action" data-action="next">${e}</div>`}get isNavIsFunction(){let{navTitles:t}=this.opts;return Object.keys(t).find((e=>"function"==typeof t[e]))}}var q={today:{content:t=>t.locale.today,onClick:t=>t.setViewDate(new Date)},clear:{content:t=>t.locale.clear,onClick:t=>t.clear()}};class H{constructor(t){let{dp:e,opts:i}=t;this.dp=e,this.opts=i,this.init()}init(){this.createElement(),this.render()}createElement(){this.$el=o({className:"air-datepicker-buttons"})}destroy(){this.$el.parentNode.removeChild(this.$el)}clearHtml(){return this.$el.innerHTML="",this}generateButtons(){let{buttons:t}=this.opts;Array.isArray(t)||(t=[t]),t.forEach((t=>{let e=t;"string"==typeof t&&q[t]&&(e=q[t]);let i=this.createButton(e);e.onClick&&this.attachEventToButton(i,e.onClick),this.$el.appendChild(i)}))}attachEventToButton(t,e){t.addEventListener("click",(()=>{e(this.dp)}))}createButton(t){let{content:e,className:i,tagName:s="button",attrs:n={}}=t;return o({tagName:s,innerHtml:`<span tabindex='-1'>${"function"==typeof e?e(this.dp):e}</span>`,className:m("air-datepicker-button",i),attrs:n})}render(){this.generateButtons()}}function j(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class L{constructor(){let{opts:t,dp:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};j(this,"toggleTimepickerIsActive",(t=>{this.dp.timepickerIsActive=t})),j(this,"onChangeSelectedDate",(t=>{let{date:e,updateTime:i=!1}=t;e&&(this.setMinMaxTime(e),this.setCurrentTime(!!i&&e),this.addTimeToDate(e))})),j(this,"onChangeLastSelectedDate",(t=>{t&&(this.setTime(t),this.render())})),j(this,"onChangeInputRange",(t=>{let e=t.target;this[e.getAttribute("name")]=e.value,this.updateText(),this.dp.trigger(i.eventChangeTime,{hours:this.hours,minutes:this.minutes})})),j(this,"onMouseEnterLeave",(t=>{let e=t.target.getAttribute("name"),i=this.$minutesText;"hours"===e&&(i=this.$hoursText),i.classList.toggle("-focus-")})),j(this,"onFocus",(()=>{this.toggleTimepickerIsActive(!0)})),j(this,"onBlur",(()=>{this.toggleTimepickerIsActive(!1)})),this.opts=t,this.dp=e;let{timeFormat:s}=this.dp.locale;s&&(s.match(M("h"))||s.match(M("hh")))&&(this.ampm=!0),this.init()}init(){this.setTime(this.dp.lastSelectedDate||this.dp.viewDate),this.createElement(),this.buildHtml(),this.defineDOM(),this.render(),this.bindDatepickerEvents(),this.bindDOMEvents()}bindDatepickerEvents(){this.dp.on(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.on(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate)}bindDOMEvents(){let t="input";navigator.userAgent.match(/trident/gi)&&(t="change"),x(this.$ranges,t,this.onChangeInputRange),x(this.$ranges,"mouseenter",this.onMouseEnterLeave),x(this.$ranges,"mouseleave",this.onMouseEnterLeave),x(this.$ranges,"focus",this.onFocus),x(this.$ranges,"mousedown",this.onFocus),x(this.$ranges,"blur",this.onBlur)}createElement(){this.$el=o({className:m("air-datepicker-time",{"-am-pm-":this.dp.ampm})})}destroy(){this.dp.off(i.eventChangeSelectedDate,this.onChangeSelectedDate),this.dp.off(i.eventChangeLastSelectedDate,this.onChangeLastSelectedDate),this.$el.parentNode.removeChild(this.$el)}buildHtml(){let{ampm:t,hours:e,displayHours:i,minutes:s,minHours:n,minMinutes:o,maxHours:r,maxMinutes:c,dayPeriod:h,opts:{hoursStep:d,minutesStep:p}}=this;this.$el.innerHTML=`<div class="air-datepicker-time--current">   <span class="air-datepicker-time--current-hours">${u(i)}</span>   <span class="air-datepicker-time--current-colon">:</span>   <span class="air-datepicker-time--current-minutes">${u(s)}</span>   `+(t?`<span class='air-datepicker-time--current-ampm'>${h}</span>`:"")+'</div><div class="air-datepicker-time--sliders">   <div class="air-datepicker-time--row">'+`      <input type="range" name="hours" value="${e}" min="${n}" max="${r}" step="${d}"/>   </div>   <div class="air-datepicker-time--row">`+`      <input type="range" name="minutes" value="${s}" min="${o}" max="${c}" step="${p}"/>   </div></div>`}defineDOM(){let t=t=>n(t,this.$el);this.$ranges=this.$el.querySelectorAll('[type="range"]'),this.$hours=t('[name="hours"]'),this.$minutes=t('[name="minutes"]'),this.$hoursText=t(".air-datepicker-time--current-hours"),this.$minutesText=t(".air-datepicker-time--current-minutes"),this.$ampm=t(".air-datepicker-time--current-ampm")}setTime(t){this.setMinMaxTime(t),this.setCurrentTime(t)}addTimeToDate(t){t&&(t.setHours(this.hours),t.setMinutes(this.minutes))}setMinMaxTime(t){if(this.setMinMaxTimeFromOptions(),t){let{minDate:e,maxDate:i}=this.dp;e&&b(t,e)&&this.setMinTimeFromMinDate(e),i&&b(t,i)&&this.setMaxTimeFromMaxDate(i)}}setCurrentTime(t){let{hours:e,minutes:i}=t?h(t):this;this.hours=S(e,this.minHours,this.maxHours),this.minutes=S(i,this.minMinutes,this.maxMinutes)}setMinMaxTimeFromOptions(){let{minHours:t,minMinutes:e,maxHours:i,maxMinutes:s}=this.opts;this.minHours=S(t,0,23),this.minMinutes=S(e,0,59),this.maxHours=S(i,0,23),this.maxMinutes=S(s,0,59)}setMinTimeFromMinDate(t){let{lastSelectedDate:e}=this.dp;this.minHours=t.getHours(),e&&e.getHours()>t.getHours()?this.minMinutes=this.opts.minMinutes:this.minMinutes=t.getMinutes()}setMaxTimeFromMaxDate(t){let{lastSelectedDate:e}=this.dp;this.maxHours=t.getHours(),e&&e.getHours()<t.getHours()?this.maxMinutes=this.opts.maxMinutes:this.maxMinutes=t.getMinutes()}updateSliders(){r(this.$hours,{min:this.minHours,max:this.maxHours}).value=this.hours,r(this.$minutes,{min:this.minMinutes,max:this.maxMinutes}).value=this.minutes}updateText(){this.$hoursText.innerHTML=u(this.displayHours),this.$minutesText.innerHTML=u(this.minutes),this.ampm&&(this.$ampm.innerHTML=this.dayPeriod)}set hours(t){this._hours=t;let{hours:e,dayPeriod:i}=d(t);this.displayHours=this.ampm?e:t,this.dayPeriod=i}get hours(){return this._hours}render(){this.updateSliders(),this.updateText()}}function z(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}class A{constructor(t){let{dp:e,opts:i}=t;z(this,"pressedKeys",new Set),z(this,"hotKeys",new Map([[[["Control","ArrowRight"],["Control","ArrowUp"]],t=>t.month++],[[["Control","ArrowLeft"],["Control","ArrowDown"]],t=>t.month--],[[["Shift","ArrowRight"],["Shift","ArrowUp"]],t=>t.year++],[[["Shift","ArrowLeft"],["Shift","ArrowDown"]],t=>t.year--],[[["Alt","ArrowRight"],["Alt","ArrowUp"]],t=>t.year+=10],[[["Alt","ArrowLeft"],["Alt","ArrowDown"]],t=>t.year-=10],[["Control","Shift","ArrowUp"],(t,e)=>e.up()]])),z(this,"handleHotKey",(t=>{let e=this.hotKeys.get(t),i=h(this.getInitialFocusDate());e(i,this.dp);let{year:s,month:n,date:o}=i,r=c(new Date(s,n));r<o&&(o=r);let d=this.dp.getClampedDate(new Date(s,n,o));this.dp.setFocusDate(d,{viewDateTransition:!0})})),z(this,"isHotKeyPressed",(()=>{let t=!1,e=this.pressedKeys.size,i=t=>this.pressedKeys.has(t);for(let[s]of this.hotKeys){if(t)break;if(Array.isArray(s[0]))s.forEach((n=>{t||e!==n.length||(t=n.every(i)&&s)}));else{if(e!==s.length)continue;t=s.every(i)&&s}}return t})),z(this,"isArrow",(t=>t>=37&&t<=40)),z(this,"onKeyDown",(t=>{let{key:e,which:i}=t,{dp:s,dp:{focusDate:n},opts:o}=this;this.registerKey(e);let r=this.isHotKeyPressed();if(r)return t.preventDefault(),void this.handleHotKey(r);if(this.isArrow(i))return t.preventDefault(),void this.focusNextCell(e);if("Enter"===e){if(s.currentView!==o.minView)return void s.down();if(n){let t=s._checkIfDateIsSelected(n);return void(t?s._handleAlreadySelectedDates(t,n):s.selectDate(n))}}"Escape"===e&&this.dp.hide()})),z(this,"onKeyUp",(t=>{this.removeKey(t.key)})),this.dp=e,this.opts=i,this.init()}init(){this.bindKeyboardEvents()}bindKeyboardEvents(){let{$el:t}=this.dp;t.addEventListener("keydown",this.onKeyDown),t.addEventListener("keyup",this.onKeyUp)}destroy(){let{$el:t}=this.dp;t.removeEventListener("keydown",this.onKeyDown),t.removeEventListener("keyup",this.onKeyUp),this.hotKeys=null,this.pressedKeys=null}getInitialFocusDate(){let{focusDate:t,currentView:e,selectedDates:s,parsedViewDate:{year:n,month:o}}=this.dp,r=t||s[s.length-1];if(!r)switch(e){case i.days:r=new Date(n,o,(new Date).getDate());break;case i.months:r=new Date(n,o,1);break;case i.years:r=new Date(n,0,1)}return r}focusNextCell(t){let e=this.getInitialFocusDate(),{currentView:s}=this.dp,{days:n,months:o,years:r}=i,c=h(e),d=c.year,u=c.month,p=c.date;switch(t){case"ArrowLeft":s===n&&(p-=1),s===o&&(u-=1),s===r&&(d-=1);break;case"ArrowUp":s===n&&(p-=7),s===o&&(u-=3),s===r&&(d-=4);break;case"ArrowRight":s===n&&(p+=1),s===o&&(u+=1),s===r&&(d+=1);break;case"ArrowDown":s===n&&(p+=7),s===o&&(u+=3),s===r&&(d+=4)}let m=this.dp.getClampedDate(new Date(d,u,p));this.dp.setFocusDate(m,{viewDateTransition:!0})}registerKey(t){this.pressedKeys.add(t)}removeKey(t){this.pressedKeys.delete(t)}}let $={on(t,e){this.__events||(this.__events={}),this.__events[t]?this.__events[t].push(e):this.__events[t]=[e]},off(t,e){this.__events&&this.__events[t]&&(this.__events[t]=this.__events[t].filter((t=>t!==e)))},removeAllEvents(){this.__events={}},trigger(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];this.__events&&this.__events[t]&&this.__events[t].forEach((t=>{t(...i)}))}};function U(t,e,i){return(e=function(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var s=i.call(t,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}let G="",Y="",X=!1;class R{static buildGlobalContainer(t){X=!0,G=o({className:t,id:t}),n("body").appendChild(G)}constructor(t,e){var r=this;if(U(this,"viewIndexes",[i.days,i.months,i.years]),U(this,"next",(()=>{let{year:t,month:e}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(t,e+1,1));break;case i.months:this.setViewDate(new Date(t+1,e,1));break;case i.years:this.setViewDate(new Date(t+10,0,1))}})),U(this,"prev",(()=>{let{year:t,month:e}=this.parsedViewDate;switch(this.currentView){case i.days:this.setViewDate(new Date(t,e-1,1));break;case i.months:this.setViewDate(new Date(t-1,e,1));break;case i.years:this.setViewDate(new Date(t-10,0,1))}})),U(this,"_finishHide",(()=>{this.hideAnimation=!1,this._destroyComponents(),this.$container.removeChild(this.$datepicker)})),U(this,"setPosition",(function(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("function"==typeof(t=t||r.opts.position))return void(r.customHide=t({$datepicker:r.$datepicker,$target:r.$el,$pointer:r.$pointer,isViewChange:e,done:r._finishHide}));let i,s,{isMobile:n}=r.opts,o=r.$el.getBoundingClientRect(),c=r.$el.getBoundingClientRect(),h=r.$datepicker.offsetParent,d=r.$el.offsetParent,u=r.$datepicker.getBoundingClientRect(),p=t.split(" "),m=window.scrollY,b=window.scrollX,v=r.opts.offset,y=p[0],E=p[1];if(n)r.$datepicker.style.cssText="left: 50%; top: 50%";else{if(h===d&&h!==document.body&&(c={top:r.$el.offsetTop,left:r.$el.offsetLeft,width:o.width,height:r.$el.offsetHeight},m=0,b=0),h!==d&&h!==document.body){let t=h.getBoundingClientRect();c={top:o.top-t.top,left:o.left-t.left,width:o.width,height:o.height},m=0,b=0}switch(y){case"top":i=c.top-u.height-v;break;case"right":s=c.left+c.width+v;break;case"bottom":i=c.top+c.height+v;break;case"left":s=c.left-u.width-v}switch(E){case"top":i=c.top;break;case"right":s=c.left+c.width-u.width;break;case"bottom":i=c.top+c.height-u.height;break;case"left":s=c.left;break;case"center":/left|right/.test(y)?i=c.top+c.height/2-u.height/2:s=c.left+c.width/2-u.width/2}r.$datepicker.style.cssText=`left: ${s+b}px; top: ${i+m}px`}})),U(this,"_setInputValue",(()=>{let{opts:t,$altField:e,locale:{dateFormat:i}}=this,{altFieldDateFormat:s,altField:n}=t;n&&e&&(e.value=this._getInputValue(s)),this.$el.value=this._getInputValue(i)})),U(this,"_getInputValue",(t=>{let{selectedDates:e,opts:i}=this,{multipleDates:s,multipleDatesSeparator:n}=i;if(!e.length)return"";let o="function"==typeof t,r=o?t(s?e:e[0]):e.map((e=>this.formatDate(e,t)));return r=o?r:r.join(n),r})),U(this,"_checkIfDateIsSelected",(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.days,s=!1;return r.selectedDates.some((i=>{let n=b(t,i,e);return s=n&&i,n})),s})),U(this,"_scheduleCallAfterTransition",(t=>{this._cancelScheduledCall(),t&&t(!1),this._onTransitionEnd=()=>{t&&t(!0)},this.$datepicker.addEventListener("transitionend",this._onTransitionEnd,{once:!0})})),U(this,"_cancelScheduledCall",(()=>{this.$datepicker.removeEventListener("transitionend",this._onTransitionEnd)})),U(this,"setViewDate",(t=>{if(!((t=D(t))instanceof Date))return;if(b(t,this.viewDate))return;let e=this.viewDate;this.viewDate=t;let{onChangeViewDate:s}=this.opts;if(s){let{month:t,year:e}=this.parsedViewDate;s({month:t,year:e,decade:this.curDecade})}this.trigger(i.eventChangeViewDate,t,e)})),U(this,"setFocusDate",(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t||(t=D(t))instanceof Date)&&(r.focusDate=t,r.trigger(i.eventChangeFocusDate,t,e))})),U(this,"setCurrentView",(function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(r.viewIndexes.includes(t)){if(r.currentView=t,r.elIsInput&&r.visible&&r.setPosition(void 0,!0),r.trigger(i.eventChangeCurrentView,t),!r.views[t]){let e=r.views[t]=new T({dp:r,opts:r.opts,type:t});r.shouldUpdateDOM&&r.$content.appendChild(e.$el)}r.opts.onChangeView&&!e.silent&&r.opts.onChangeView(t)}})),U(this,"_updateLastSelectedDate",(t=>{this.lastSelectedDate=t,this.trigger(i.eventChangeLastSelectedDate,t)})),U(this,"destroy",(()=>{if(this.isDestroyed)return;let{showEvent:t,isMobile:e}=this.opts,i=this.$datepicker.parentNode;i&&i.removeChild(this.$datepicker),this.$el.removeEventListener(t,this._onFocus),this.$el.removeEventListener("blur",this._onBlur),window.removeEventListener("resize",this._onResize),e&&this._removeMobileAttributes(),this.keyboardNav&&this.keyboardNav.destroy(),this.views=null,this.nav=null,this.$datepicker=null,this.opts={},this.$customContainer=null,this.viewDate=null,this.focusDate=null,this.selectedDates=[],this.rangeDateFrom=null,this.rangeDateTo=null,this.isDestroyed=!0})),U(this,"update",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=O({},r.opts),{silent:n}=e;O(r.opts,t);let{timepicker:o,buttons:c,range:h,selectedDates:d,isMobile:u}=r.opts,p=r.visible||r.treatAsInline;r._createMinMaxDates(),r._limitViewDateByMaxMinDates(),r._handleLocale(),d&&(r.selectedDates=[],r.selectDate(d,{silent:n})),t.view&&r.setCurrentView(t.view,{silent:n}),r._setInputValue(),s.range&&!h?(r.rangeDateTo=!1,r.rangeDateFrom=!1):!s.range&&h&&r.selectedDates.length&&(r.rangeDateFrom=r.selectedDates[0],r.rangeDateTo=r.selectedDates[1]),s.timepicker&&!o?(p&&r.timepicker.destroy(),r.timepicker=!1,r.$timepicker.parentNode.removeChild(r.$timepicker)):!s.timepicker&&o&&r._addTimepicker(),!s.buttons&&c?r._addButtons():s.buttons&&!c?(r.buttons.destroy(),r.$buttons.parentNode.removeChild(r.$buttons)):p&&s.buttons&&c&&r.buttons.clearHtml().render(),!s.isMobile&&u?(r.treatAsInline||Y||r._createMobileOverlay(),r._addMobileAttributes(),r.visible&&r._showMobileOverlay()):s.isMobile&&!u&&(r._removeMobileAttributes(),r.visible&&(Y.classList.remove("-active-"),"function"!=typeof r.opts.position&&r.setPosition())),p&&(r.nav.update(),r.views[r.currentView].render(),r.currentView===i.days&&r.views[r.currentView].renderDayNames())})),U(this,"disableDate",((t,e)=>{(Array.isArray(t)?t:[t]).forEach((t=>{let i=D(t);if(!i)return;let s=e?"delete":"add";this.disabledDates[s](this.formatDate(i,"yyyy-MM-dd"));let n=this.getCell(i,this.currentViewSingular);n&&n.adpCell.render()}),[])})),U(this,"enableDate",(t=>{this.disableDate(t,!0)})),U(this,"isDateDisabled",(t=>{let e=D(t);return this.disabledDates.has(this.formatDate(e,"yyyy-MM-dd"))})),U(this,"isOtherMonth",(t=>{let{month:e}=h(t);return e!==this.parsedViewDate.month})),U(this,"isOtherYear",(t=>{let{year:e}=h(t);return e!==this.parsedViewDate.year})),U(this,"isOtherDecade",(t=>{let{year:e}=h(t),[i,s]=p(this.viewDate);return e<i||e>s})),U(this,"_onChangeSelectedDate",(t=>{let{silent:e}=t;setTimeout((()=>{this._setInputValue(),this.opts.onSelect&&!e&&this._triggerOnSelect()}))})),U(this,"_onChangeFocusedDate",(function(t){let{viewDateTransition:e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)return;let i=!1;e&&(i=r.isOtherMonth(t)||r.isOtherYear(t)||r.isOtherDecade(t)),i&&r.setViewDate(t),r.opts.onFocus&&r.opts.onFocus({datepicker:r,date:t})})),U(this,"_onChangeTime",(t=>{let{hours:e,minutes:i}=t,s=new Date,{lastSelectedDate:n,opts:{onSelect:o}}=this,r=n;n||(r=s);let c=this.getCell(r,this.currentViewSingular),h=c&&c.adpCell;h&&h.isDisabled||(r.setHours(e),r.setMinutes(i),n?(this._setInputValue(),o&&this._triggerOnSelect()):this.selectDate(r))})),U(this,"_onFocus",(t=>{this.visible||this.show()})),U(this,"_onBlur",(t=>{this.inFocus||!this.visible||this.opts.isMobile||this.hide()})),U(this,"_onMouseDown",(t=>{this.inFocus=!0})),U(this,"_onMouseUp",(t=>{this.inFocus=!1,this.$el.focus()})),U(this,"_onResize",(()=>{this.visible&&"function"!=typeof this.opts.position&&this.setPosition()})),U(this,"_onClickOverlay",(()=>{this.visible&&this.hide()})),U(this,"getViewDates",(function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i.days;return T.getDatesFunction(t)(r)})),U(this,"isWeekend",(t=>this.opts.weekends.includes(t))),U(this,"getClampedDate",(t=>{let{minDate:e,maxDate:i}=this,s=t;return i&&v(t,i)?s=i:e&&y(t,e)&&(s=e),s})),this.$el=n(t),!this.$el)return;this.$datepicker=o({className:"air-datepicker"}),this.opts=O({},s,e),this.$customContainer=!!this.opts.container&&n(this.opts.container),this.$altField=n(this.opts.altField||!1);let{view:c,startDate:d}=this.opts;d||(this.opts.startDate=new Date),"INPUT"===this.$el.nodeName&&(this.elIsInput=!0),this.inited=!1,this.visible=!1,this.viewDate=D(this.opts.startDate),this.focusDate=!1,this.initialReadonly=this.$el.getAttribute("readonly"),this.customHide=!1,this.currentView=c,this.selectedDates=[],this.disabledDates=new Set,this.isDestroyed=!1,this.views={},this.keys=[],this.rangeDateFrom="",this.rangeDateTo="",this.timepickerIsActive=!1,this.treatAsInline=this.opts.inline||!this.elIsInput,this.init()}init(){let{opts:t,treatAsInline:e,opts:{inline:i,isMobile:s,selectedDates:o,keyboardNav:r,onlyTimepicker:c}}=this,h=n("body");(!X||X&&G&&!h.contains(G))&&!i&&this.elIsInput&&!this.$customContainer&&R.buildGlobalContainer(R.defaultGlobalContainerId),!s||Y||e||this._createMobileOverlay(),this._handleLocale(),this._bindSubEvents(),this._createMinMaxDates(),this._limitViewDateByMaxMinDates(),this.elIsInput&&(i||this._bindEvents(),r&&!c&&(this.keyboardNav=new A({dp:this,opts:t}))),o&&this.selectDate(o,{silent:!0}),this.opts.visible&&!e&&this.show(),s&&!e&&this.$el.setAttribute("readonly",!0),e&&this._createComponents()}_createMobileOverlay(){Y=o({className:"air-datepicker-overlay"}),G.appendChild(Y)}_createComponents(){let{opts:t,treatAsInline:e,opts:{inline:i,buttons:s,timepicker:n,position:o,classes:r,onlyTimepicker:c,isMobile:h}}=this;this._buildBaseHtml(),this.elIsInput&&(i||this._setPositionClasses(o)),!i&&this.elIsInput||this.$datepicker.classList.add("-inline-"),r&&this.$datepicker.classList.add(...r.split(" ")),c&&this.$datepicker.classList.add("-only-timepicker-"),h&&!e&&this._addMobileAttributes(),this.views[this.currentView]=new T({dp:this,type:this.currentView,opts:t}),this.nav=new V({dp:this,opts:t}),n&&this._addTimepicker(),s&&this._addButtons(),this.$content.appendChild(this.views[this.currentView].$el),this.$nav.appendChild(this.nav.$el)}_destroyComponents(){for(let t in this.views)this.views[t].destroy();this.views={},this.nav.destroy(),this.timepicker&&this.timepicker.destroy()}_addMobileAttributes(){Y.addEventListener("click",this._onClickOverlay),this.$datepicker.classList.add("-is-mobile-"),this.$el.setAttribute("readonly",!0)}_removeMobileAttributes(){Y.removeEventListener("click",this._onClickOverlay),this.$datepicker.classList.remove("-is-mobile-"),this.initialReadonly||""===this.initialReadonly||this.$el.removeAttribute("readonly")}_createMinMaxDates(){let{minDate:t,maxDate:e}=this.opts;this.minDate=!!t&&D(t),this.maxDate=!!e&&D(e)}_addTimepicker(){this.$timepicker=o({className:"air-datepicker--time"}),this.$datepicker.appendChild(this.$timepicker),this.timepicker=new L({dp:this,opts:this.opts}),this.$timepicker.appendChild(this.timepicker.$el)}_addButtons(){this.$buttons=o({className:"air-datepicker--buttons"}),this.$datepicker.appendChild(this.$buttons),this.buttons=new H({dp:this,opts:this.opts}),this.$buttons.appendChild(this.buttons.$el)}_bindSubEvents(){this.on(i.eventChangeSelectedDate,this._onChangeSelectedDate),this.on(i.eventChangeFocusDate,this._onChangeFocusedDate),this.on(i.eventChangeTime,this._onChangeTime)}_buildBaseHtml(){let{inline:t}=this.opts;var e,i;this.elIsInput?t?(e=this.$datepicker,(i=this.$el).parentNode.insertBefore(e,i.nextSibling)):this.$container.appendChild(this.$datepicker):this.$el.appendChild(this.$datepicker),this.$datepicker.innerHTML='<i class="air-datepicker--pointer"></i><div class="air-datepicker--navigation"></div><div class="air-datepicker--content"></div>',this.$content=n(".air-datepicker--content",this.$datepicker),this.$pointer=n(".air-datepicker--pointer",this.$datepicker),this.$nav=n(".air-datepicker--navigation",this.$datepicker)}_handleLocale(){let{locale:t,dateFormat:e,firstDay:i,timepicker:s,onlyTimepicker:n,timeFormat:o,dateTimeSeparator:r}=this.opts;var c;this.locale=(c=t,JSON.parse(JSON.stringify(c))),e&&(this.locale.dateFormat=e),void 0!==o&&""!==o&&(this.locale.timeFormat=o);let{timeFormat:h}=this.locale;if(""!==i&&(this.locale.firstDay=i),s&&"function"!=typeof e){let t=h?r:"";this.locale.dateFormat=[this.locale.dateFormat,h||""].join(t)}n&&"function"!=typeof e&&(this.locale.dateFormat=this.locale.timeFormat)}_setPositionClasses(t){if("function"==typeof t)return void this.$datepicker.classList.add("-custom-position-");let e=(t=t.split(" "))[0],i=`air-datepicker -${e}-${t[1]}- -from-${e}-`;this.$datepicker.classList.add(...i.split(" "))}_bindEvents(){this.$el.addEventListener(this.opts.showEvent,this._onFocus),this.$el.addEventListener("blur",this._onBlur),this.$datepicker.addEventListener("mousedown",this._onMouseDown),this.$datepicker.addEventListener("mouseup",this._onMouseUp),window.addEventListener("resize",this._onResize)}_limitViewDateByMaxMinDates(){let{viewDate:t,minDate:e,maxDate:i}=this;i&&v(t,i)&&this.setViewDate(i),e&&y(t,e)&&this.setViewDate(e)}formatDate(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewDate,e=arguments.length>1?arguments[1]:void 0;if(t=D(t),!(t instanceof Date))return;let i=e,s=this.locale,n=h(t),o=n.dayPeriod,r=p(t),c=R.replacer,d={T:t.getTime(),m:n.minutes,mm:n.fullMinutes,h:n.hours12,hh:n.fullHours12,H:n.hours,HH:n.fullHours,aa:o,AA:o.toUpperCase(),E:s.daysShort[n.day],EEEE:s.days[n.day],d:n.date,dd:n.fullDate,M:n.month+1,MM:n.fullMonth,MMM:s.monthsShort[n.month],MMMM:s.months[n.month],yy:n.year.toString().slice(-2),yyyy:n.year,yyyy1:r[0],yyyy2:r[1]};for(let[t,e]of Object.entries(d))i=c(i,M(t),e);return i}down(t){this._handleUpDownActions(t,"down")}up(t){this._handleUpDownActions(t,"up")}selectDate(t){let e,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{currentView:n,parsedViewDate:o,selectedDates:r}=this,{updateTime:c}=s,{moveToOtherMonthsOnSelect:h,moveToOtherYearsOnSelect:d,multipleDates:u,range:p,autoClose:m,onBeforeSelect:b}=this.opts,y=r.length;if(Array.isArray(t))return t.forEach((t=>{this.selectDate(t,s)})),new Promise((t=>{setTimeout(t)}));if((t=D(t))instanceof Date){if(b&&!b({date:t,datepicker:this}))return Promise.resolve();if(n===i.days&&t.getMonth()!==o.month&&h&&(e=new Date(t.getFullYear(),t.getMonth(),1)),n===i.years&&t.getFullYear()!==o.year&&d&&(e=new Date(t.getFullYear(),0,1)),e&&this.setViewDate(e),u&&!p){if(y===u)return;this._checkIfDateIsSelected(t)||r.push(t)}else if(p)switch(y){case 1:r.push(t),this.rangeDateTo||(this.rangeDateTo=t),v(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=t),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[t],this.rangeDateFrom=t,this.rangeDateTo="";break;default:this.selectedDates=[t],this.rangeDateFrom=t}else this.selectedDates=[t];return this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,silent:null==s?void 0:s.silent,date:t,updateTime:c}),this._updateLastSelectedDate(t),m&&!this.timepickerIsActive&&this.visible&&(u||p?p&&1===y&&this.hide():this.hide()),new Promise((t=>{setTimeout(t)}))}}unselectDate(t){let e=this.selectedDates,s=this;if((t=D(t))instanceof Date)return e.some(((n,o)=>{if(b(n,t))return e.splice(o,1),s.selectedDates.length?(s.rangeDateTo="",s.rangeDateFrom=e[0],s._updateLastSelectedDate(s.selectedDates[s.selectedDates.length-1])):(s.rangeDateFrom="",s.rangeDateTo="",s._updateLastSelectedDate(!1)),this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,date:t}),!0}))}replaceDate(t,e){let s=this.selectedDates.find((e=>b(e,t,this.currentView))),n=this.selectedDates.indexOf(s);n<0||b(this.selectedDates[n],e,this.currentView)||(this.selectedDates[n]=e,this.trigger(i.eventChangeSelectedDate,{action:i.actionSelectDate,date:e,updateTime:!0}),this._updateLastSelectedDate(e))}clear(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.selectedDates=[],this.rangeDateFrom=!1,this.rangeDateTo=!1,this.lastSelectedDate=!1,this.trigger(i.eventChangeSelectedDate,{action:i.actionUnselectDate,silent:t.silent}),new Promise((t=>{setTimeout(t)}))}show(){let{onShow:t,isMobile:e}=this.opts;this._cancelScheduledCall(),this.visible||this.hideAnimation||this._createComponents(),this.setPosition(this.opts.position),this.$datepicker.classList.add("-active-"),this.visible=!0,t&&this._scheduleCallAfterTransition(t),e&&this._showMobileOverlay()}hide(){let{onHide:t,isMobile:e}=this.opts,i=this._hasTransition();this.visible=!1,this.hideAnimation=!0,this.$datepicker.classList.remove("-active-"),this.customHide&&this.customHide(),this.elIsInput&&this.$el.blur(),this._scheduleCallAfterTransition((e=>{!this.customHide&&(e&&i||!e&&!i)&&this._finishHide(),t&&t(e)})),e&&Y.classList.remove("-active-")}_triggerOnSelect(){let t=[],e=[],{selectedDates:i,locale:s,opts:{onSelect:n,multipleDates:o,range:r}}=this,c=o||r,h="function"==typeof s.dateFormat;i.length&&(t=i.map(E),e=h?o?s.dateFormat(t):t.map((t=>s.dateFormat(t))):t.map((t=>this.formatDate(t,s.dateFormat)))),n({date:c?t:t[0],formattedDate:c?e:e[0],datepicker:this})}_handleAlreadySelectedDates(t,e){let{selectedDates:i,rangeDateFrom:s,rangeDateTo:n}=this,{range:o,toggleSelected:r}=this.opts,c=i.length,h="function"==typeof r?r({datepicker:this,date:e}):r,d=Boolean(o&&1===c&&t),u=d?E(e):e;o&&!h&&(2!==c&&this.selectDate(u),2===c&&b(s,n))||(h?this.unselectDate(u):this._updateLastSelectedDate(d?u:t))}_handleUpDownActions(t,e){if(!((t=D(t||this.focusDate||this.viewDate))instanceof Date))return;let i="up"===e?this.viewIndex+1:this.viewIndex-1;i>2&&(i=2),i<0&&(i=0),this.setViewDate(new Date(t.getFullYear(),t.getMonth(),1)),this.setCurrentView(this.viewIndexes[i])}getCell(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.day;if(!((t=D(t))instanceof Date))return;let{year:s,month:n,date:o}=h(t),r=`[data-year="${s}"]`,c=`[data-month="${n}"]`,d={[i.day]:`${r}${c}[data-date="${o}"]`,[i.month]:`${r}${c}`,[i.year]:`${r}`};return this.views[this.currentView]?this.views[this.currentView].$el.querySelector(d[e]):void 0}_showMobileOverlay(){Y.classList.add("-active-")}_hasTransition(){return window.getComputedStyle(this.$datepicker).getPropertyValue("transition-duration").split(", ").reduce(((t,e)=>parseFloat(e)+t),0)>0}get shouldUpdateDOM(){return this.visible||this.treatAsInline}get parsedViewDate(){return h(this.viewDate)}get currentViewSingular(){return this.currentView.slice(0,-1)}get curDecade(){return p(this.viewDate)}get viewIndex(){return this.viewIndexes.indexOf(this.currentView)}get isFinalView(){return this.currentView===i.years}get hasSelectedDates(){return this.selectedDates.length>0}get isMinViewReached(){return this.currentView===this.opts.minView||this.currentView===i.days}get $container(){return this.$customContainer||G}static replacer(t,e,i){return t.replace(e,(function(t,e,s,n){return e+i+n}))}}var K;return U(R,"defaults",s),U(R,"version","3.5.3"),U(R,"defaultGlobalContainerId","air-datepicker-global-container"),K=R.prototype,Object.assign(K,$),e.default}()),p.exports),b=d(m);
/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */
function v(t){return t+.5|0}document.addEventListener("DOMContentLoaded",(()=>{function t(t){return"date"===t?"yyyy-MM-dd":"datetime"===t?t=>Array.isArray(t)?t.map((t=>(t.setSeconds((new Date).getSeconds()),t.toISOString().split(".")[0].replace("T"," ")))):(t.setSeconds((new Date).getSeconds()),t.toISOString().split(".")[0].replace("T"," ")):"month"===t?"yyyy-MM":"time"===t?"HH:mm":"T"}document.querySelectorAll("input[data-picker]").forEach((e=>{const i=e.getAttribute("data-picker")||"date",s=e.value.length?e.value.split(" - "):[],n=document.createElement("input");n.setAttribute("hidden",!0),n.setAttribute("name",e.name),e.removeAttribute("name"),e.before(n);const o={selectedDates:s,altField:n,altFieldDateFormat:t(i),multipleDates:!!e.hasAttribute("data-multiple"),multipleDatesSeparator:" - ",range:!!e.hasAttribute("data-range"),timepicker:!!i.includes("time"),onlyTimepicker:"time"===i,minDate:e.hasAttribute("data-min")?e.getAttribute("data-min"):"",maxDate:e.hasAttribute("data-max")?e.getAttribute("data-max"):"",minHours:e.hasAttribute("data-min-hour")?e.getAttribute("data-min-hour"):0,maxHours:e.hasAttribute("data-max-hour")?e.getAttribute("data-max-hour"):23,minMinutes:e.hasAttribute("data-min-minute")?e.getAttribute("data-min-minute"):0,maxMinutes:e.hasAttribute("data-max-minute")?e.getAttribute("data-max-minute"):59,hoursStep:e.hasAttribute("data-hour-step")?e.getAttribute("data-hour-step"):1,minutesStep:e.hasAttribute("data-minute-step")?e.getAttribute("data-minute-step"):1,position:e.getAttribute("data-position")||"bottom left"};i.includes("date")&&!e.required&&(o.buttons=i.includes("date")&&!e.required?["clear"]:[]),"month"===i&&(o.view="months",o.minView="months",o.dateFormat="MMMM yyyy"),window?.Engine?.translation?.datepicker&&(o.locale=window.Engine.translation.datepicker),o.onSelect=({date:t,datepicker:e})=>{e.opts.range&&2===t.length?e.hide():e.opts.multipleDates||e.opts.range||i.includes("time")||e.hide()},o.onHide=t=>{const i=s.map((t=>new Date(t))),n=e.instance&&e.instance.selectedDates?e.instance.selectedDates:[],o=!!(e.instance&&e.instance.opts&&e.instance.opts.range)&&e.instance.opts.range;t&&JSON.stringify(i)!==JSON.stringify(n)&&(o&&1!==n.length||!o)&&e.dispatchEvent(new CustomEvent("change",{bubbles:!0}))};const r=new b(e,o);e.instance=r,e.setAttribute("readonly",!0)})),document.querySelectorAll("[data-calendar]").forEach((t=>{const e=t.getAttribute("data-calendar")||"date",i=t.textContent.trim()||"",s=i.length?i.split(" - "):[];t.textContent="";let n={inline:!0,selectedDates:s,multipleDates:s.length>2,range:2===s.length,buttons:[],timepicker:!1};"month"===e&&(n={...n,view:"months",minView:"months",dateFormat:"MMMM yyyy"}),window?.Engine?.translation?.datepicker&&(n={...n,locale:window.Engine.translation.datepicker});const o=new b(t,n);t.instance=o}))}));const y=(t,e,i)=>Math.max(Math.min(t,i),e);function E(t){return y(v(2.55*t),0,255)}function x(t){return y(v(255*t),0,255)}function w(t){return y(v(t/2.55)/100,0,1)}function S(t){return y(v(100*t),0,100)}const O={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},D=[..."0123456789ABCDEF"],M=t=>D[15&t],k=t=>D[(240&t)>>4]+D[15&t],P=t=>(240&t)>>4==(15&t);function N(t){var e=(t=>P(t.r)&&P(t.g)&&P(t.b)&&P(t.a))(t)?M:k;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}const B=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function F(t,e,i){const s=e*Math.min(i,1-i),n=(e,n=(e+t/30)%12)=>i-s*Math.max(Math.min(n-3,9-n,1),-1);return[n(0),n(8),n(4)]}function q(t,e,i){const s=(s,n=(s+t/60)%6)=>i-i*e*Math.max(Math.min(n,4-n,1),0);return[s(5),s(3),s(1)]}function j(t,e,i){const s=F(t,1,.5);let n;for(e+i>1&&(n=1/(e+i),e*=n,i*=n),n=0;n<3;n++)s[n]*=1-e-i,s[n]+=e;return s}function z(t){const e=t.r/255,i=t.g/255,s=t.b/255,n=Math.max(e,i,s),o=Math.min(e,i,s),r=(n+o)/2;let c,h,d;return n!==o&&(d=n-o,h=r>.5?d/(2-n-o):d/(n+o),c=function(t,e,i,s,n){return t===n?(e-i)/s+(e<i?6:0):e===n?(i-t)/s+2:(t-e)/s+4}(e,i,s,d,n),c=60*c+.5),[0|c,h||0,r]}function $(t,e,i,s){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,i,s)).map(x)}function U(t,e,i){return $(F,t,e,i)}function G(t){return(t%360+360)%360}function Y(t){const e=B.exec(t);let i,s=255;if(!e)return;e[5]!==i&&(s=e[6]?E(+e[5]):x(+e[5]));const n=G(+e[2]),o=+e[3]/100,r=+e[4]/100;return i="hwb"===e[1]?function(t,e,i){return $(j,t,e,i)}(n,o,r):"hsv"===e[1]?function(t,e,i){return $(q,t,e,i)}(n,o,r):U(n,o,r),{r:i[0],g:i[1],b:i[2],a:s}}const X={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},K={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let J;function tt(t){J||(J=function(){const t={},e=Object.keys(K),i=Object.keys(X);let s,n,o,r,c;for(s=0;s<e.length;s++){for(r=c=e[s],n=0;n<i.length;n++)o=i[n],c=c.replace(o,X[o]);o=parseInt(K[r],16),t[c]=[o>>16&255,o>>8&255,255&o]}return t}(),J.transparent=[0,0,0,0]);const e=J[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}const et=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const it=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,st=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function nt(t,e,i){if(t){let s=z(t);s[e]=Math.max(0,Math.min(s[e]+s[e]*i,0===e?360:1)),s=U(s),t.r=s[0],t.g=s[1],t.b=s[2]}}function ot(t,e){return t?Object.assign(e||{},t):t}function rt(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=x(t[3]))):(e=ot(t,{r:0,g:0,b:0,a:1})).a=x(e.a),e}function at(t){return"r"===t.charAt(0)?function(t){const e=et.exec(t);let i,s,n,o=255;if(e){if(e[7]!==i){const t=+e[7];o=e[8]?E(t):y(255*t,0,255)}return i=+e[1],s=+e[3],n=+e[5],i=255&(e[2]?E(i):y(i,0,255)),s=255&(e[4]?E(s):y(s,0,255)),n=255&(e[6]?E(n):y(n,0,255)),{r:i,g:s,b:n,a:o}}}(t):Y(t)}class Color{constructor(t){if(t instanceof Color)return t;const e=typeof t;let i;var s,n,o;"object"===e?i=rt(t):"string"===e&&(o=(s=t).length,"#"===s[0]&&(4===o||5===o?n={r:255&17*O[s[1]],g:255&17*O[s[2]],b:255&17*O[s[3]],a:5===o?17*O[s[4]]:255}:7!==o&&9!==o||(n={r:O[s[1]]<<4|O[s[2]],g:O[s[3]]<<4|O[s[4]],b:O[s[5]]<<4|O[s[6]],a:9===o?O[s[7]]<<4|O[s[8]]:255})),i=n||tt(t)||at(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=ot(this._rgb);return t&&(t.a=w(t.a)),t}set rgb(t){this._rgb=rt(t)}rgbString(){return this._valid?function(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${w(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}(this._rgb):void 0}hexString(){return this._valid?N(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=z(t),i=e[0],s=S(e[1]),n=S(e[2]);return t.a<255?`hsla(${i}, ${s}%, ${n}%, ${w(t.a)})`:`hsl(${i}, ${s}%, ${n}%)`}(this._rgb):void 0}mix(t,e){if(t){const i=this.rgb,s=t.rgb;let n;const o=e===n?.5:e,r=2*o-1,c=i.a-s.a,h=((r*c==-1?r:(r+c)/(1+r*c))+1)/2;n=1-h,i.r=255&h*i.r+n*s.r+.5,i.g=255&h*i.g+n*s.g+.5,i.b=255&h*i.b+n*s.b+.5,i.a=o*i.a+(1-o)*s.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,i){const s=st(w(t.r)),n=st(w(t.g)),o=st(w(t.b));return{r:x(it(s+i*(st(w(e.r))-s))),g:x(it(n+i*(st(w(e.g))-n))),b:x(it(o+i*(st(w(e.b))-o))),a:t.a+i*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new Color(this.rgb)}alpha(t){return this._rgb.a=x(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=v(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return nt(this._rgb,2,t),this}darken(t){return nt(this._rgb,2,-t),this}saturate(t){return nt(this._rgb,1,t),this}desaturate(t){return nt(this._rgb,1,-t),this}rotate(t){return function(t,e){var i=z(t);i[0]=G(i[0]+e),i=U(i),t.r=i[0],t.g=i[1],t.b=i[2]}(this._rgb,t),this}}
/*!
 * Chart.js v4.4.4
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */function lt(){}const ct=(()=>{let t=0;return()=>t++})();function ht(t){return null==t}function dt(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function ut(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function pt(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function ft(t,e){return pt(t)?t:e}function gt(t,e){return void 0===t?e:t}const mt=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function bt(t,e,i){if(t&&"function"==typeof t.call)return t.apply(i,e)}function vt(t,e,i,s){let n,o,r;if(dt(t))for(o=t.length,n=0;n<o;n++)e.call(i,t[n],n);else if(ut(t))for(r=Object.keys(t),o=r.length,n=0;n<o;n++)e.call(i,t[r[n]],r[n])}function yt(t,e){let i,s,n,o;if(!t||!e||t.length!==e.length)return!1;for(i=0,s=t.length;i<s;++i)if(n=t[i],o=e[i],n.datasetIndex!==o.datasetIndex||n.index!==o.index)return!1;return!0}function Et(t){if(dt(t))return t.map(Et);if(ut(t)){const e=Object.create(null),i=Object.keys(t),s=i.length;let n=0;for(;n<s;++n)e[i[n]]=Et(t[i[n]]);return e}return t}function _t(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function xt(t,e,i,s){if(!_t(t))return;const n=e[t],o=i[t];ut(n)&&ut(o)?Tt(n,o,s):e[t]=Et(o)}function Tt(t,e,i){const s=dt(e)?e:[e],n=s.length;if(!ut(t))return t;const o=(i=i||{}).merger||xt;let r;for(let e=0;e<n;++e){if(r=s[e],!ut(r))continue;const n=Object.keys(r);for(let e=0,s=n.length;e<s;++e)o(n[e],t,r,i)}return t}function At(t,e){return Tt(t,e,{merger:St})}function St(t,e,i){if(!_t(t))return;const s=e[t],n=i[t];ut(s)&&ut(n)?At(s,n):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Et(n))}const Ot={"":t=>t,x:t=>t.x,y:t=>t.y};function Ct(t,e){const i=Ot[e]||(Ot[e]=function(t){const e=function(t){const e=t.split("."),i=[];let s="";for(const t of e)s+=t,s.endsWith("\\")?s=s.slice(0,-1)+".":(i.push(s),s="");return i}(t);return t=>{for(const i of e){if(""===i)break;t=t&&t[i]}return t}}(e));return i(t)}function Mt(t){return t.charAt(0).toUpperCase()+t.slice(1)}const kt=t=>void 0!==t,Rt=t=>"function"==typeof t,Pt=(t,e)=>{if(t.size!==e.size)return!1;for(const i of t)if(!e.has(i))return!1;return!0};const Nt=Math.PI,Bt=2*Nt,Ft=Bt+Nt,qt=Number.POSITIVE_INFINITY,jt=Nt/180,zt=Nt/2,Vt=Nt/4,Ht=2*Nt/3,$t=Math.log10,Ut=Math.sign;function Gt(t,e,i){return Math.abs(t-e)<i}function Wt(t){const e=Math.round(t);t=Gt(t,e,t/1e3)?e:t;const i=Math.pow(10,Math.floor($t(t))),s=t/i;return(s<=1?1:s<=2?2:s<=5?5:10)*i}function Xt(t){return!isNaN(parseFloat(t))&&isFinite(t)}function Zt(t,e,i){let s,n,o;for(s=0,n=t.length;s<n;s++)o=t[s][i],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Kt(t){return t*(Nt/180)}function Jt(t){return t*(180/Nt)}function te(t){if(!pt(t))return;let e=1,i=0;for(;Math.round(t*e)/e!==t;)e*=10,i++;return i}function ee(t,e){const i=e.x-t.x,s=e.y-t.y,n=Math.sqrt(i*i+s*s);let o=Math.atan2(s,i);return o<-.5*Nt&&(o+=Bt),{angle:o,distance:n}}function ie(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function se(t,e){return(t-e+Ft)%Bt-Nt}function ne(t){return(t%Bt+Bt)%Bt}function oe(t,e,i,s){const n=ne(t),o=ne(e),r=ne(i),c=ne(o-n),h=ne(r-n),d=ne(n-o),u=ne(n-r);return n===o||n===r||s&&o===r||c>h&&d<u}function re(t,e,i){return Math.max(e,Math.min(i,t))}function ae(t,e,i,s=1e-6){return t>=Math.min(e,i)-s&&t<=Math.max(e,i)+s}function le(t,e,i){i=i||(i=>t[i]<e);let s,n=t.length-1,o=0;for(;n-o>1;)s=o+n>>1,i(s)?o=s:n=s;return{lo:o,hi:n}}const ce=(t,e,i,s)=>le(t,i,s?s=>{const n=t[s][e];return n<i||n===i&&t[s+1][e]===i}:s=>t[s][e]<i),he=(t,e,i)=>le(t,i,(s=>t[s][e]>=i));const de=["push","pop","shift","splice","unshift"];function ue(t,e){const i=t._chartjs;if(!i)return;const s=i.listeners,n=s.indexOf(e);-1!==n&&s.splice(n,1),s.length>0||(de.forEach((e=>{delete t[e]})),delete t._chartjs)}function pe(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const fe="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function ge(t,e){let i=[],s=!1;return function(...n){i=n,s||(s=!0,fe.call(window,(()=>{s=!1,t.apply(e,i)})))}}const me=t=>"start"===t?"left":"end"===t?"right":"center",be=(t,e,i)=>"start"===t?e:"end"===t?i:(e+i)/2;function ve(t,e,i){const s=e.length;let n=0,o=s;if(t._sorted){const{iScale:r,_parsed:c}=t,h=r.axis,{min:d,max:u,minDefined:p,maxDefined:m}=r.getUserBounds();p&&(n=re(Math.min(ce(c,h,d).lo,i?s:ce(e,h,r.getPixelForValue(d)).lo),0,s-1)),o=m?re(Math.max(ce(c,r.axis,u,!0).hi+1,i?0:ce(e,h,r.getPixelForValue(u),!0).hi+1),n,s)-n:s-n}return{start:n,count:o}}function ye(t){const{xScale:e,yScale:i,_scaleRanges:s}=t,n={xmin:e.min,xmax:e.max,ymin:i.min,ymax:i.max};if(!s)return t._scaleRanges=n,!0;const o=s.xmin!==e.min||s.xmax!==e.max||s.ymin!==i.min||s.ymax!==i.max;return Object.assign(s,n),o}const Ee=t=>0===t||1===t,_e=(t,e,i)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*Bt/i),xe=(t,e,i)=>Math.pow(2,-10*t)*Math.sin((t-e)*Bt/i)+1,we={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*zt),easeOutSine:t=>Math.sin(t*zt),easeInOutSine:t=>-.5*(Math.cos(Nt*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Ee(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Ee(t)?t:_e(t,.075,.3),easeOutElastic:t=>Ee(t)?t:xe(t,.075,.3),easeInOutElastic(t){const e=.1125;return Ee(t)?t:t<.5?.5*_e(2*t,e,.45):.5+.5*xe(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-we.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,i=2.75;return t<1/i?e*t*t:t<2/i?e*(t-=1.5/i)*t+.75:t<2.5/i?e*(t-=2.25/i)*t+.9375:e*(t-=2.625/i)*t+.984375},easeInOutBounce:t=>t<.5?.5*we.easeInBounce(2*t):.5*we.easeOutBounce(2*t-1)+.5};function Te(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function Ae(t){return Te(t)?t:new Color(t)}function Se(t){return Te(t)?t:new Color(t).saturate(.5).darken(.1).hexString()}const De=["x","y","borderWidth","radius","tension"],Ce=["color","borderColor","backgroundColor"];const Ie=new Map;function Me(t,e,i){return function(t,e){e=e||{};const i=t+JSON.stringify(e);let s=Ie.get(i);return s||(s=new Intl.NumberFormat(t,e),Ie.set(i,s)),s}(e,i).format(t)}const Le={values:t=>dt(t)?t:""+t,numeric(t,e,i){if(0===t)return"0";const s=this.chart.options.locale;let n,o=t;if(i.length>1){const e=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(e<1e-4||e>1e15)&&(n="scientific"),o=function(t,e){let i=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;Math.abs(i)>=1&&t!==Math.floor(t)&&(i=t-Math.floor(t));return i}(t,i)}const r=$t(Math.abs(o)),c=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),h={notation:n,minimumFractionDigits:c,maximumFractionDigits:c};return Object.assign(h,this.options.ticks.format),Me(t,s,h)},logarithmic(t,e,i){if(0===t)return"0";const s=i[e].significand||t/Math.pow(10,Math.floor($t(t)));return[1,2,3,5,10,15].includes(s)||e>.8*i.length?Le.numeric.call(this,t,e,i):""}};var ke={formatters:Le};const Re=Object.create(null),Pe=Object.create(null);function Ne(t,e){if(!e)return t;const i=e.split(".");for(let e=0,s=i.length;e<s;++e){const s=i[e];t=t[s]||(t[s]=Object.create(null))}return t}function Be(t,e,i){return"string"==typeof e?Tt(Ne(t,e),i):Tt(Ne(t,""),e)}class Defaults{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>Se(e.backgroundColor),this.hoverBorderColor=(t,e)=>Se(e.borderColor),this.hoverColor=(t,e)=>Se(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return Be(this,t,e)}get(t){return Ne(this,t)}describe(t,e){return Be(Pe,t,e)}override(t,e){return Be(Re,t,e)}route(t,e,i,s){const n=Ne(this,t),o=Ne(this,i),r="_"+e;Object.defineProperties(n,{[r]:{value:n[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[r],e=o[s];return ut(t)?Object.assign({},e,t):gt(t,e)},set(t){this[r]=t}}})}apply(t){t.forEach((t=>t(this)))}}var Fe=new Defaults({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:Ce},numbers:{type:"number",properties:De}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ke.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function qe(t,e,i,s,n){let o=e[n];return o||(o=e[n]=t.measureText(n).width,i.push(n)),o>s&&(s=o),s}function je(t,e,i,s){let n=(s=s||{}).data=s.data||{},o=s.garbageCollect=s.garbageCollect||[];s.font!==e&&(n=s.data={},o=s.garbageCollect=[],s.font=e),t.save(),t.font=e;let r=0;const c=i.length;let h,d,u,p,m;for(h=0;h<c;h++)if(p=i[h],null==p||dt(p)){if(dt(p))for(d=0,u=p.length;d<u;d++)m=p[d],null==m||dt(m)||(r=qe(t,n,o,r,m))}else r=qe(t,n,o,r,p);t.restore();const b=o.length/2;if(b>i.length){for(h=0;h<b;h++)delete n[o[h]];o.splice(0,b)}return r}function ze(t,e,i){const s=t.currentDevicePixelRatio,n=0!==i?Math.max(i/2,.5):0;return Math.round((e-n)*s)/s+n}function Ve(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function He(t,e,i,s){$e(t,e,i,s,null)}function $e(t,e,i,s,n){let o,r,c,h,d,u,p,m;const b=e.pointStyle,v=e.rotation,y=e.radius;let E=(v||0)*jt;if(b&&"object"==typeof b&&(o=b.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(i,s),t.rotate(E),t.drawImage(b,-b.width/2,-b.height/2,b.width,b.height),void t.restore();if(!(isNaN(y)||y<=0)){switch(t.beginPath(),b){default:n?t.ellipse(i,s,n/2,y,0,0,Bt):t.arc(i,s,y,0,Bt),t.closePath();break;case"triangle":u=n?n/2:y,t.moveTo(i+Math.sin(E)*u,s-Math.cos(E)*y),E+=Ht,t.lineTo(i+Math.sin(E)*u,s-Math.cos(E)*y),E+=Ht,t.lineTo(i+Math.sin(E)*u,s-Math.cos(E)*y),t.closePath();break;case"rectRounded":d=.516*y,h=y-d,r=Math.cos(E+Vt)*h,p=Math.cos(E+Vt)*(n?n/2-d:h),c=Math.sin(E+Vt)*h,m=Math.sin(E+Vt)*(n?n/2-d:h),t.arc(i-p,s-c,d,E-Nt,E-zt),t.arc(i+m,s-r,d,E-zt,E),t.arc(i+p,s+c,d,E,E+zt),t.arc(i-m,s+r,d,E+zt,E+Nt),t.closePath();break;case"rect":if(!v){h=Math.SQRT1_2*y,u=n?n/2:h,t.rect(i-u,s-h,2*u,2*h);break}E+=Vt;case"rectRot":p=Math.cos(E)*(n?n/2:y),r=Math.cos(E)*y,c=Math.sin(E)*y,m=Math.sin(E)*(n?n/2:y),t.moveTo(i-p,s-c),t.lineTo(i+m,s-r),t.lineTo(i+p,s+c),t.lineTo(i-m,s+r),t.closePath();break;case"crossRot":E+=Vt;case"cross":p=Math.cos(E)*(n?n/2:y),r=Math.cos(E)*y,c=Math.sin(E)*y,m=Math.sin(E)*(n?n/2:y),t.moveTo(i-p,s-c),t.lineTo(i+p,s+c),t.moveTo(i+m,s-r),t.lineTo(i-m,s+r);break;case"star":p=Math.cos(E)*(n?n/2:y),r=Math.cos(E)*y,c=Math.sin(E)*y,m=Math.sin(E)*(n?n/2:y),t.moveTo(i-p,s-c),t.lineTo(i+p,s+c),t.moveTo(i+m,s-r),t.lineTo(i-m,s+r),E+=Vt,p=Math.cos(E)*(n?n/2:y),r=Math.cos(E)*y,c=Math.sin(E)*y,m=Math.sin(E)*(n?n/2:y),t.moveTo(i-p,s-c),t.lineTo(i+p,s+c),t.moveTo(i+m,s-r),t.lineTo(i-m,s+r);break;case"line":r=n?n/2:Math.cos(E)*y,c=Math.sin(E)*y,t.moveTo(i-r,s-c),t.lineTo(i+r,s+c);break;case"dash":t.moveTo(i,s),t.lineTo(i+Math.cos(E)*(n?n/2:y),s+Math.sin(E)*y);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function Ue(t,e,i){return i=i||.5,!e||t&&t.x>e.left-i&&t.x<e.right+i&&t.y>e.top-i&&t.y<e.bottom+i}function Ge(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function We(t){t.restore()}function Ye(t,e,i,s,n){if(!e)return t.lineTo(i.x,i.y);if("middle"===n){const s=(e.x+i.x)/2;t.lineTo(s,e.y),t.lineTo(s,i.y)}else"after"===n!=!!s?t.lineTo(e.x,i.y):t.lineTo(i.x,e.y);t.lineTo(i.x,i.y)}function Xe(t,e,i,s){if(!e)return t.lineTo(i.x,i.y);t.bezierCurveTo(s?e.cp1x:e.cp2x,s?e.cp1y:e.cp2y,s?i.cp2x:i.cp1x,s?i.cp2y:i.cp1y,i.x,i.y)}function Qe(t,e,i,s,n){if(n.strikethrough||n.underline){const o=t.measureText(s),r=e-o.actualBoundingBoxLeft,c=e+o.actualBoundingBoxRight,h=i-o.actualBoundingBoxAscent,d=i+o.actualBoundingBoxDescent,u=n.strikethrough?(h+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=n.decorationWidth||2,t.moveTo(r,u),t.lineTo(c,u),t.stroke()}}function Ze(t,e){const i=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=i}function Ke(t,e,i,s,n,o={}){const r=dt(e)?e:[e],c=o.strokeWidth>0&&""!==o.strokeColor;let h,d;for(t.save(),t.font=n.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ht(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),h=0;h<r.length;++h)d=r[h],o.backdrop&&Ze(t,o.backdrop),c&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),ht(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(d,i,s,o.maxWidth)),t.fillText(d,i,s,o.maxWidth),Qe(t,i,s,d,o),s+=Number(n.lineHeight);t.restore()}function Je(t,e){const{x:i,y:s,w:n,h:o,radius:r}=e;t.arc(i+r.topLeft,s+r.topLeft,r.topLeft,1.5*Nt,Nt,!0),t.lineTo(i,s+o-r.bottomLeft),t.arc(i+r.bottomLeft,s+o-r.bottomLeft,r.bottomLeft,Nt,zt,!0),t.lineTo(i+n-r.bottomRight,s+o),t.arc(i+n-r.bottomRight,s+o-r.bottomRight,r.bottomRight,zt,0,!0),t.lineTo(i+n,s+r.topRight),t.arc(i+n-r.topRight,s+r.topRight,r.topRight,0,-zt,!0),t.lineTo(i+r.topLeft,s)}const ti=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ei=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ii(t,e){const i=(""+t).match(ti);if(!i||"normal"===i[1])return 1.2*e;switch(t=+i[2],i[3]){case"px":return t;case"%":t/=100}return e*t}const si=t=>+t||0;function ni(t,e){const i={},s=ut(e),n=s?Object.keys(e):e,o=ut(t)?s?i=>gt(t[i],t[e[i]]):e=>t[e]:()=>t;for(const t of n)i[t]=si(o(t));return i}function oi(t){return ni(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ri(t){return ni(t,["topLeft","topRight","bottomLeft","bottomRight"])}function ai(t){const e=oi(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function li(t,e){t=t||{},e=e||Fe.font;let i=gt(t.size,e.size);"string"==typeof i&&(i=parseInt(i,10));let s=gt(t.style,e.style);s&&!(""+s).match(ei)&&(console.warn('Invalid font style specified: "'+s+'"'),s=void 0);const n={family:gt(t.family,e.family),lineHeight:ii(gt(t.lineHeight,e.lineHeight),i),size:i,style:s,weight:gt(t.weight,e.weight),string:""};return n.string=function(t){return!t||ht(t.size)||ht(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(n),n}function ci(t,e,i,s){let n,o,r;for(n=0,o=t.length;n<o;++n)if(r=t[n],void 0!==r&&void 0!==r)return r}function hi(t,e){return Object.assign(Object.create(t),e)}function di(t,e=[""],i,s,n=(()=>t[0])){const o=i||t;void 0===s&&(s=xi("_fallback",t));const r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:s,_getTarget:n,override:i=>di([i,...t],e,o,s)};return new Proxy(r,{deleteProperty:(e,i)=>(delete e[i],delete e._keys,delete t[0][i],!0),get:(i,s)=>mi(i,s,(()=>function(t,e,i,s){let n;for(const o of e)if(n=xi(fi(o,t),i),void 0!==n)return gi(t,n)?Ei(i,s,t,n):n}(s,e,t,i))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>wi(t).includes(e),ownKeys:t=>wi(t),set(t,e,i){const s=t._storage||(t._storage=n());return t[e]=s[e]=i,delete t._keys,!0}})}function ui(t,e,i,s){const n={_cacheable:!1,_proxy:t,_context:e,_subProxy:i,_stack:new Set,_descriptors:pi(t,s),setContext:e=>ui(t,e,i,s),override:n=>ui(t.override(n),e,i,s)};return new Proxy(n,{deleteProperty:(e,i)=>(delete e[i],delete t[i],!0),get:(t,e,i)=>mi(t,e,(()=>function(t,e,i){const{_proxy:s,_context:n,_subProxy:o,_descriptors:r}=t;let c=s[e];Rt(c)&&r.isScriptable(e)&&(c=function(t,e,i,s){const{_proxy:n,_context:o,_subProxy:r,_stack:c}=i;if(c.has(t))throw new Error("Recursion detected: "+Array.from(c).join("->")+"->"+t);c.add(t);let h=e(o,r||s);c.delete(t),gi(t,h)&&(h=Ei(n._scopes,n,t,h));return h}(e,c,t,i));dt(c)&&c.length&&(c=function(t,e,i,s){const{_proxy:n,_context:o,_subProxy:r,_descriptors:c}=i;if(void 0!==o.index&&s(t))return e[o.index%e.length];if(ut(e[0])){const i=e,s=n._scopes.filter((t=>t!==i));e=[];for(const h of i){const i=Ei(s,n,t,h);e.push(ui(i,o,r&&r[t],c))}}return e}(e,c,t,r.isIndexable));gi(e,c)&&(c=ui(c,n,o&&o[e],r));return c}(t,e,i))),getOwnPropertyDescriptor:(e,i)=>e._descriptors.allKeys?Reflect.has(t,i)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,i),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,i)=>Reflect.has(t,i),ownKeys:()=>Reflect.ownKeys(t),set:(e,i,s)=>(t[i]=s,delete e[i],!0)})}function pi(t,e={scriptable:!0,indexable:!0}){const{_scriptable:i=e.scriptable,_indexable:s=e.indexable,_allKeys:n=e.allKeys}=t;return{allKeys:n,scriptable:i,indexable:s,isScriptable:Rt(i)?i:()=>i,isIndexable:Rt(s)?s:()=>s}}const fi=(t,e)=>t?t+Mt(e):e,gi=(t,e)=>ut(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function mi(t,e,i){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const s=i();return t[e]=s,s}function bi(t,e,i){return Rt(t)?t(e,i):t}const vi=(t,e)=>!0===t?e:"string"==typeof t?Ct(e,t):void 0;function yi(t,e,i,s,n){for(const o of e){const e=vi(i,o);if(e){t.add(e);const o=bi(e._fallback,i,n);if(void 0!==o&&o!==i&&o!==s)return o}else if(!1===e&&void 0!==s&&i!==s)return null}return!1}function Ei(t,e,i,s){const n=e._rootScopes,o=bi(e._fallback,i,s),r=[...t,...n],c=new Set;c.add(s);let h=_i(c,r,i,o||i,s);return null!==h&&((void 0===o||o===i||(h=_i(c,r,o,h,s),null!==h))&&di(Array.from(c),[""],n,o,(()=>function(t,e,i){const s=t._getTarget();e in s||(s[e]={});const n=s[e];if(dt(n)&&ut(i))return i;return n||{}}(e,i,s))))}function _i(t,e,i,s,n){for(;i;)i=yi(t,e,i,s,n);return i}function xi(t,e){for(const i of e){if(!i)continue;const e=i[t];if(void 0!==e)return e}}function wi(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const i of t)for(const t of Object.keys(i).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function Ti(t,e,i,s){const{iScale:n}=t,{key:o="r"}=this._parsing,r=new Array(s);let c,h,d,u;for(c=0,h=s;c<h;++c)d=c+i,u=e[d],r[c]={r:n.parse(Ct(u,o),d)};return r}const Ai=Number.EPSILON||1e-14,Si=(t,e)=>e<t.length&&!t[e].skip&&t[e],Oi=t=>"x"===t?"y":"x";function Di(t,e,i,s){const n=t.skip?e:t,o=e,r=i.skip?e:i,c=ie(o,n),h=ie(r,o);let d=c/(c+h),u=h/(c+h);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const p=s*d,m=s*u;return{previous:{x:o.x-p*(r.x-n.x),y:o.y-p*(r.y-n.y)},next:{x:o.x+m*(r.x-n.x),y:o.y+m*(r.y-n.y)}}}function Ci(t,e="x"){const i=Oi(e),s=t.length,n=Array(s).fill(0),o=Array(s);let r,c,h,d=Si(t,0);for(r=0;r<s;++r)if(c=h,h=d,d=Si(t,r+1),h){if(d){const t=d[e]-h[e];n[r]=0!==t?(d[i]-h[i])/t:0}o[r]=c?d?Ut(n[r-1])!==Ut(n[r])?0:(n[r-1]+n[r])/2:n[r-1]:n[r]}!function(t,e,i){const s=t.length;let n,o,r,c,h,d=Si(t,0);for(let u=0;u<s-1;++u)h=d,d=Si(t,u+1),h&&d&&(Gt(e[u],0,Ai)?i[u]=i[u+1]=0:(n=i[u]/e[u],o=i[u+1]/e[u],c=Math.pow(n,2)+Math.pow(o,2),c<=9||(r=3/Math.sqrt(c),i[u]=n*r*e[u],i[u+1]=o*r*e[u])))}(t,n,o),function(t,e,i="x"){const s=Oi(i),n=t.length;let o,r,c,h=Si(t,0);for(let d=0;d<n;++d){if(r=c,c=h,h=Si(t,d+1),!c)continue;const n=c[i],u=c[s];r&&(o=(n-r[i])/3,c[`cp1${i}`]=n-o,c[`cp1${s}`]=u-o*e[d]),h&&(o=(h[i]-n)/3,c[`cp2${i}`]=n+o,c[`cp2${s}`]=u+o*e[d])}}(t,o,e)}function Ii(t,e,i){return Math.max(Math.min(t,i),e)}function Mi(t,e,i,s,n){let o,r,c,h;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)Ci(t,n);else{let i=s?t[t.length-1]:t[0];for(o=0,r=t.length;o<r;++o)c=t[o],h=Di(i,c,t[Math.min(o+1,r-(s?0:1))%r],e.tension),c.cp1x=h.previous.x,c.cp1y=h.previous.y,c.cp2x=h.next.x,c.cp2y=h.next.y,i=c}e.capBezierPoints&&function(t,e){let i,s,n,o,r,c=Ue(t[0],e);for(i=0,s=t.length;i<s;++i)r=o,o=c,c=i<s-1&&Ue(t[i+1],e),o&&(n=t[i],r&&(n.cp1x=Ii(n.cp1x,e.left,e.right),n.cp1y=Ii(n.cp1y,e.top,e.bottom)),c&&(n.cp2x=Ii(n.cp2x,e.left,e.right),n.cp2y=Ii(n.cp2y,e.top,e.bottom)))}(t,i)}function Li(){return"undefined"!=typeof window&&"undefined"!=typeof document}function ki(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function Ri(t,e,i){let s;return"string"==typeof t?(s=parseInt(t,10),-1!==t.indexOf("%")&&(s=s/100*e.parentNode[i])):s=t,s}const Pi=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);const Ni=["top","right","bottom","left"];function Bi(t,e,i){const s={};i=i?"-"+i:"";for(let n=0;n<4;n++){const o=Ni[n];s[o]=parseFloat(t[e+"-"+o+i])||0}return s.width=s.left+s.right,s.height=s.top+s.bottom,s}const Fi=(t,e,i)=>(t>0||e>0)&&(!i||!i.shadowRoot);function qi(t,e){if("native"in t)return t;const{canvas:i,currentDevicePixelRatio:s}=e,n=Pi(i),o="border-box"===n.boxSizing,r=Bi(n,"padding"),c=Bi(n,"border","width"),{x:h,y:d,box:u}=function(t,e){const i=t.touches,s=i&&i.length?i[0]:t,{offsetX:n,offsetY:o}=s;let r,c,h=!1;if(Fi(n,o,t.target))r=n,c=o;else{const t=e.getBoundingClientRect();r=s.clientX-t.left,c=s.clientY-t.top,h=!0}return{x:r,y:c,box:h}}(t,i),p=r.left+(u&&c.left),m=r.top+(u&&c.top);let{width:b,height:v}=e;return o&&(b-=r.width+c.width,v-=r.height+c.height),{x:Math.round((h-p)/b*i.width/s),y:Math.round((d-m)/v*i.height/s)}}const ji=t=>Math.round(10*t)/10;function zi(t,e,i,s){const n=Pi(t),o=Bi(n,"margin"),r=Ri(n.maxWidth,t,"clientWidth")||qt,c=Ri(n.maxHeight,t,"clientHeight")||qt,h=function(t,e,i){let s,n;if(void 0===e||void 0===i){const o=t&&ki(t);if(o){const t=o.getBoundingClientRect(),r=Pi(o),c=Bi(r,"border","width"),h=Bi(r,"padding");e=t.width-h.width-c.width,i=t.height-h.height-c.height,s=Ri(r.maxWidth,o,"clientWidth"),n=Ri(r.maxHeight,o,"clientHeight")}else e=t.clientWidth,i=t.clientHeight}return{width:e,height:i,maxWidth:s||qt,maxHeight:n||qt}}(t,e,i);let{width:d,height:u}=h;if("content-box"===n.boxSizing){const t=Bi(n,"border","width"),e=Bi(n,"padding");d-=e.width+t.width,u-=e.height+t.height}d=Math.max(0,d-o.width),u=Math.max(0,s?d/s:u-o.height),d=ji(Math.min(d,r,h.maxWidth)),u=ji(Math.min(u,c,h.maxHeight)),d&&!u&&(u=ji(d/2));return(void 0!==e||void 0!==i)&&s&&h.height&&u>h.height&&(u=h.height,d=ji(Math.floor(u*s))),{width:d,height:u}}function Vi(t,e,i){const s=e||1,n=Math.floor(t.height*s),o=Math.floor(t.width*s);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const r=t.canvas;return r.style&&(i||!r.style.height&&!r.style.width)&&(r.style.height=`${t.height}px`,r.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==s||r.height!==n||r.width!==o)&&(t.currentDevicePixelRatio=s,r.height=n,r.width=o,t.ctx.setTransform(s,0,0,s,0,0),!0)}const Hi=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Li()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function $i(t,e){const i=function(t,e){return Pi(t).getPropertyValue(e)}(t,e),s=i&&i.match(/^(\d+)(\.\d+)?px$/);return s?+s[1]:void 0}function Ui(t,e,i,s){return{x:t.x+i*(e.x-t.x),y:t.y+i*(e.y-t.y)}}function Gi(t,e,i,s){return{x:t.x+i*(e.x-t.x),y:"middle"===s?i<.5?t.y:e.y:"after"===s?i<1?t.y:e.y:i>0?e.y:t.y}}function Wi(t,e,i,s){const n={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},r=Ui(t,n,i),c=Ui(n,o,i),h=Ui(o,e,i),d=Ui(r,c,i),u=Ui(c,h,i);return Ui(d,u,i)}function Yi(t,e,i){return t?function(t,e){return{x:i=>t+t+e-i,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,i):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function Xi(t,e){let i,s;"ltr"!==e&&"rtl"!==e||(i=t.canvas.style,s=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",e,"important"),t.prevTextDirection=s)}function Qi(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Zi(t){return"angle"===t?{between:oe,compare:se,normalize:ne}:{between:ae,compare:(t,e)=>t-e,normalize:t=>t}}function Ki({start:t,end:e,count:i,loop:s,style:n}){return{start:t%i,end:e%i,loop:s&&(e-t+1)%i==0,style:n}}function Ji(t,e,i){if(!i)return[t];const{property:s,start:n,end:o}=i,r=e.length,{compare:c,between:h,normalize:d}=Zi(s),{start:u,end:p,loop:m,style:b}=function(t,e,i){const{property:s,start:n,end:o}=i,{between:r,normalize:c}=Zi(s),h=e.length;let d,u,{start:p,end:m,loop:b}=t;if(b){for(p+=h,m+=h,d=0,u=h;d<u&&r(c(e[p%h][s]),n,o);++d)p--,m--;p%=h,m%=h}return m<p&&(m+=h),{start:p,end:m,loop:b,style:t.style}}(t,e,i),v=[];let y,E,x,w=!1,S=null;const O=()=>w||h(n,x,y)&&0!==c(n,x),D=()=>!w||0===c(o,y)||h(o,x,y);for(let t=u,i=u;t<=p;++t)E=e[t%r],E.skip||(y=d(E[s]),y!==x&&(w=h(y,n,o),null===S&&O()&&(S=0===c(y,n)?t:i),null!==S&&D()&&(v.push(Ki({start:S,end:t,loop:m,count:r,style:b})),S=null),i=t,x=y));return null!==S&&v.push(Ki({start:S,end:p,loop:m,count:r,style:b})),v}function ts(t,e){const i=[],s=t.segments;for(let n=0;n<s.length;n++){const o=Ji(s[n],t.points,e);o.length&&i.push(...o)}return i}function es(t,e,i,s){return s&&s.setContext&&i?function(t,e,i,s){const n=t._chart.getContext(),o=is(t.options),{_datasetIndex:r,options:{spanGaps:c}}=t,h=i.length,d=[];let u=o,p=e[0].start,m=p;function b(t,e,s,n){const o=c?-1:1;if(t!==e){for(t+=h;i[t%h].skip;)t-=o;for(;i[e%h].skip;)e+=o;t%h!=e%h&&(d.push({start:t%h,end:e%h,loop:s,style:n}),u=n,p=e%h)}}for(const t of e){p=c?p:t.start;let e,o=i[p%h];for(m=p+1;m<=t.end;m++){const c=i[m%h];e=is(s.setContext(hi(n,{type:"segment",p0:o,p1:c,p0DataIndex:(m-1)%h,p1DataIndex:m%h,datasetIndex:r}))),ss(e,u)&&b(p,m-1,t.loop,u),o=c,u=e}p<m-1&&b(p,m-1,t.loop,u)}return d}(t,e,i,s):e}function is(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function ss(t,e){if(!e)return!1;const i=[],s=function(t,e){return Te(e)?(i.includes(e)||i.push(e),i.indexOf(e)):e};return JSON.stringify(t,s)!==JSON.stringify(e,s)}
/*!
 * Chart.js v4.4.4
 * https://www.chartjs.org
 * (c) 2024 Chart.js Contributors
 * Released under the MIT License
 */class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,s){const n=e.listeners[s],o=e.duration;n.forEach((s=>s({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=fe.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((i,s)=>{if(!i.running||!i.items.length)return;const n=i.items;let o,r=n.length-1,c=!1;for(;r>=0;--r)o=n[r],o._active?(o._total>i.duration&&(i.duration=o._total),o.tick(t),c=!0):(n[r]=n[n.length-1],n.pop());c&&(s.draw(),this._notify(s,i,t,"progress")),n.length||(i.running=!1,this._notify(s,i,t,"complete"),i.initial=!1),e+=n.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const i=e.items;let s=i.length-1;for(;s>=0;--s)i[s].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var ns=new Animator;const os="transparent",rs={boolean:(t,e,i)=>i>.5?e:t,color(t,e,i){const s=Ae(t||os),n=s.valid&&Ae(e||os);return n&&n.valid?n.mix(s,i).hexString():e},number:(t,e,i)=>t+(e-t)*i};class Animation{constructor(t,e,i,s){const n=e[i];s=ci([t.to,s,n,t.from]);const o=ci([t.from,n,s]);this._active=!0,this._fn=t.fn||rs[t.type||typeof o],this._easing=we[t.easing]||we.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=s,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);const s=this._target[this._prop],n=i-this._start,o=this._duration-n;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=n,this._loop=!!t.loop,this._to=ci([t.to,e,s,t.from]),this._from=ci([t.from,s,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,i=this._duration,s=this._prop,n=this._from,o=this._loop,r=this._to;let c;if(this._active=n!==r&&(o||e<i),!this._active)return this._target[s]=r,void this._notify(!0);e<0?this._target[s]=n:(c=e/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[s]=this._fn(n,r,c))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,i)=>{t.push({res:e,rej:i})}))}_notify(t){const e=t?"res":"rej",i=this._promises||[];for(let t=0;t<i.length;t++)i[t][e]()}}class Animations{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!ut(t))return;const e=Object.keys(Fe.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach((s=>{const n=t[s];if(!ut(n))return;const o={};for(const t of e)o[t]=n[t];(dt(n.properties)&&n.properties||[s]).forEach((t=>{t!==s&&i.has(t)||i.set(t,o)}))}))}_animateOptions(t,e){const i=e.options,s=function(t,e){if(!e)return;let i=t.options;if(!i)return void(t.options=e);i.$shared&&(t.options=i=Object.assign({},i,{$shared:!1,$animations:{}}));return i}(t,i);if(!s)return[];const n=this._createAnimations(s,i);return i.$shared&&function(t,e){const i=[],s=Object.keys(e);for(let e=0;e<s.length;e++){const n=t[s[e]];n&&n.active()&&i.push(n.wait())}return Promise.all(i)}(t.options.$animations,i).then((()=>{t.options=i}),(()=>{})),n}_createAnimations(t,e){const i=this._properties,s=[],n=t.$animations||(t.$animations={}),o=Object.keys(e),r=Date.now();let c;for(c=o.length-1;c>=0;--c){const h=o[c];if("$"===h.charAt(0))continue;if("options"===h){s.push(...this._animateOptions(t,e));continue}const d=e[h];let u=n[h];const p=i.get(h);if(u){if(p&&u.active()){u.update(p,d,r);continue}u.cancel()}p&&p.duration?(n[h]=u=new Animation(p,t,h,d),s.push(u)):t[h]=d}return s}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const i=this._createAnimations(t,e);return i.length?(ns.add(this._chart,i),!0):void 0}}function as(t,e){const i=t&&t.options||{},s=i.reverse,n=void 0===i.min?e:0,o=void 0===i.max?e:0;return{start:s?o:n,end:s?n:o}}function ls(t,e){const i=[],s=t._getSortedDatasetMetas(e);let n,o;for(n=0,o=s.length;n<o;++n)i.push(s[n].index);return i}function cs(t,e,i,s={}){const n=t.keys,o="single"===s.mode;let r,c,h,d;if(null!==e){for(r=0,c=n.length;r<c;++r){if(h=+n[r],h===i){if(s.all)continue;break}d=t.values[h],pt(d)&&(o||0===e||Ut(e)===Ut(d))&&(e+=d)}return e}}function hs(t,e){const i=t&&t.options.stacked;return i||void 0===i&&void 0!==e.stack}function ds(t,e,i){const s=t[e]||(t[e]={});return s[i]||(s[i]={})}function us(t,e,i,s){for(const n of e.getMatchingVisibleMetas(s).reverse()){const e=t[n.index];if(i&&e>0||!i&&e<0)return n.index}return null}function ps(t,e){const{chart:i,_cachedMeta:s}=t,n=i._stacks||(i._stacks={}),{iScale:o,vScale:r,index:c}=s,h=o.axis,d=r.axis,u=function(t,e,i){return`${t.id}.${e.id}.${i.stack||i.type}`}(o,r,s),p=e.length;let m;for(let t=0;t<p;++t){const i=e[t],{[h]:o,[d]:p}=i;m=(i._stacks||(i._stacks={}))[d]=ds(n,u,o),m[c]=p,m._top=us(m,r,!0,s.type),m._bottom=us(m,r,!1,s.type);(m._visualValues||(m._visualValues={}))[c]=p}}function fs(t,e){const i=t.scales;return Object.keys(i).filter((t=>i[t].axis===e)).shift()}function gs(t,e){const i=t.controller.index,s=t.vScale&&t.vScale.axis;if(s){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[s]||void 0===e[s][i])return;delete e[s][i],void 0!==e[s]._visualValues&&void 0!==e[s]._visualValues[i]&&delete e[s]._visualValues[i]}}}const ms=t=>"reset"===t||"none"===t,bs=(t,e)=>e?t:Object.assign({},t);class DatasetController{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=hs(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&gs(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,i=this.getDataset(),s=(t,e,i,s)=>"x"===t?e:"r"===t?s:i,n=e.xAxisID=gt(i.xAxisID,fs(t,"x")),o=e.yAxisID=gt(i.yAxisID,fs(t,"y")),r=e.rAxisID=gt(i.rAxisID,fs(t,"r")),c=e.indexAxis,h=e.iAxisID=s(c,n,o,r),d=e.vAxisID=s(c,o,n,r);e.xScale=this.getScaleForId(n),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(r),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&ue(this._data,this),t._stacked&&gs(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(ut(e)){const t=this._cachedMeta;this._data=function(t,e){const{iScale:i,vScale:s}=e,n="x"===i.axis?"x":"y",o="x"===s.axis?"x":"y",r=Object.keys(t),c=new Array(r.length);let h,d,u;for(h=0,d=r.length;h<d;++h)u=r[h],c[h]={[n]:u,[o]:t[u]};return c}(e,t)}else if(i!==e){if(i){ue(i,this);const t=this._cachedMeta;gs(t),t._parsed=[]}e&&Object.isExtensible(e)&&(n=this,(s=e)._chartjs?s._chartjs.listeners.push(n):(Object.defineProperty(s,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[n]}}),de.forEach((t=>{const e="_onData"+Mt(t),i=s[t];Object.defineProperty(s,t,{configurable:!0,enumerable:!1,value(...t){const n=i.apply(this,t);return s._chartjs.listeners.forEach((i=>{"function"==typeof i[e]&&i[e](...t)})),n}})})))),this._syncList=[],this._data=e}var s,n}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,i=this.getDataset();let s=!1;this._dataCheck();const n=e._stacked;e._stacked=hs(e.vScale,e),e.stack!==i.stack&&(s=!0,gs(e),e.stack=i.stack),this._resyncElements(t),(s||n!==e._stacked)&&ps(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:i,_data:s}=this,{iScale:n,_stacked:o}=i,r=n.axis;let c,h,d,u=0===t&&e===s.length||i._sorted,p=t>0&&i._parsed[t-1];if(!1===this._parsing)i._parsed=s,i._sorted=!0,d=s;else{d=dt(s[t])?this.parseArrayData(i,s,t,e):ut(s[t])?this.parseObjectData(i,s,t,e):this.parsePrimitiveData(i,s,t,e);const n=()=>null===h[r]||p&&h[r]<p[r];for(c=0;c<e;++c)i._parsed[c+t]=h=d[c],u&&(n()&&(u=!1),p=h);i._sorted=u}o&&ps(this,d)}parsePrimitiveData(t,e,i,s){const{iScale:n,vScale:o}=t,r=n.axis,c=o.axis,h=n.getLabels(),d=n===o,u=new Array(s);let p,m,b;for(p=0,m=s;p<m;++p)b=p+i,u[p]={[r]:d||n.parse(h[b],b),[c]:o.parse(e[b],b)};return u}parseArrayData(t,e,i,s){const{xScale:n,yScale:o}=t,r=new Array(s);let c,h,d,u;for(c=0,h=s;c<h;++c)d=c+i,u=e[d],r[c]={x:n.parse(u[0],d),y:o.parse(u[1],d)};return r}parseObjectData(t,e,i,s){const{xScale:n,yScale:o}=t,{xAxisKey:r="x",yAxisKey:c="y"}=this._parsing,h=new Array(s);let d,u,p,m;for(d=0,u=s;d<u;++d)p=d+i,m=e[p],h[d]={x:n.parse(Ct(m,r),p),y:o.parse(Ct(m,c),p)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){const s=this.chart,n=this._cachedMeta,o=e[t.axis];return cs({keys:ls(s,!0),values:e._stacks[t.axis]._visualValues},o,n.index,{mode:i})}updateRangeFromParsed(t,e,i,s){const n=i[e.axis];let o=null===n?NaN:n;const r=s&&i._stacks[e.axis];s&&r&&(s.values=r,o=cs(s,n,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const i=this._cachedMeta,s=i._parsed,n=i._sorted&&t===i.iScale,o=s.length,r=this._getOtherScale(t),c=((t,e,i)=>t&&!e.hidden&&e._stacked&&{keys:ls(i,!0),values:null})(e,i,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:u}=function(t){const{min:e,max:i,minDefined:s,maxDefined:n}=t.getUserBounds();return{min:s?e:Number.NEGATIVE_INFINITY,max:n?i:Number.POSITIVE_INFINITY}}(r);let p,m;function b(){m=s[p];const e=m[r.axis];return!pt(m[t.axis])||d>e||u<e}for(p=0;p<o&&(b()||(this.updateRangeFromParsed(h,t,m,c),!n));++p);if(n)for(p=o-1;p>=0;--p)if(!b()){this.updateRangeFromParsed(h,t,m,c);break}return h}getAllParsedValues(t){const e=this._cachedMeta._parsed,i=[];let s,n,o;for(s=0,n=e.length;s<n;++s)o=e[s][t.axis],pt(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,i=e.iScale,s=e.vScale,n=this.getParsed(t);return{label:i?""+i.getLabelForValue(n[i.axis]):"",value:s?""+s.getLabelForValue(n[s.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,i,s,n;return ut(t)?(e=t.top,i=t.right,s=t.bottom,n=t.left):e=i=s=n=t,{top:e,right:i,bottom:s,left:n,disabled:!1===t}}(gt(this.options.clip,function(t,e,i){if(!1===i)return!1;const s=as(t,i),n=as(e,i);return{top:n.end,right:s.end,bottom:n.start,left:s.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,i=this._cachedMeta,s=i.data||[],n=e.chartArea,o=[],r=this._drawStart||0,c=this._drawCount||s.length-r,h=this.options.drawActiveElementsOnTop;let d;for(i.dataset&&i.dataset.draw(t,n,r,c),d=r;d<r+c;++d){const e=s[d];e.hidden||(e.active&&h?o.push(e):e.draw(t,n))}for(d=0;d<o.length;++d)o[d].draw(t,n)}getStyle(t,e){const i=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){const s=this.getDataset();let n;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];n=e.$context||(e.$context=function(t,e,i){return hi(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:i,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),n.parsed=this.getParsed(t),n.raw=s.data[t],n.index=n.dataIndex=t}else n=this.$context||(this.$context=function(t,e){return hi(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),n.dataset=s,n.index=n.datasetIndex=this.index;return n.active=!!e,n.mode=i,n}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){const s="active"===e,n=this._cachedDataOpts,o=t+"-"+e,r=n[o],c=this.enableOptionSharing&&kt(i);if(r)return bs(r,c);const h=this.chart.config,d=h.datasetElementScopeKeys(this._type,t),u=s?[`${t}Hover`,"hover",t,""]:[t,""],p=h.getOptionScopes(this.getDataset(),d),m=Object.keys(Fe.elements[t]),b=h.resolveNamedOptions(p,m,(()=>this.getContext(i,s,e)),u);return b.$shared&&(b.$shared=c,n[o]=Object.freeze(bs(b,c))),b}_resolveAnimations(t,e,i){const s=this.chart,n=this._cachedDataOpts,o=`animation-${e}`,r=n[o];if(r)return r;let c;if(!1!==s.options.animation){const s=this.chart.config,n=s.datasetAnimationScopeKeys(this._type,e),o=s.getOptionScopes(this.getDataset(),n);c=s.createResolver(o,this.getContext(t,i,e))}const h=new Animations(s,c&&c.animations);return c&&c._cacheable&&(n[o]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||ms(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const i=this.resolveDataElementOptions(t,e),s=this._sharedOptions,n=this.getSharedOptions(i),o=this.includeOptions(e,n)||n!==s;return this.updateSharedOptions(n,e,i),{sharedOptions:n,includeOptions:o}}updateElement(t,e,i,s){ms(s)?Object.assign(t,i):this._resolveAnimations(e,s).update(t,i)}updateSharedOptions(t,e,i){t&&!ms(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,s){t.active=s;const n=this.getStyle(e,s);this._resolveAnimations(e,i,s).update(t,{options:!s&&this.getSharedOptions(n)||n})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,i=this._cachedMeta.data;for(const[t,e,i]of this._syncList)this[t](e,i);this._syncList=[];const s=i.length,n=e.length,o=Math.min(n,s);o&&this.parse(0,o),n>s?this._insertElements(s,n-s,t):n<s&&this._removeElements(n,s-n)}_insertElements(t,e,i=!0){const s=this._cachedMeta,n=s.data,o=t+e;let r;const c=t=>{for(t.length+=e,r=t.length-1;r>=o;r--)t[r]=t[r-e]};for(c(n),r=t;r<o;++r)n[r]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(t,e),i&&this.updateElements(n,t,e,"reset")}updateElements(t,e,i,s){}_removeElements(t,e){const i=this._cachedMeta;if(this._parsing){const s=i._parsed.splice(t,e);i._stacked&&gs(i,s)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,i,s]=t;this[e](i,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function vs(t){const e=t.iScale,i=function(t,e){if(!t._cache.$bar){const i=t.getMatchingVisibleMetas(e);let s=[];for(let e=0,n=i.length;e<n;e++)s=s.concat(i[e].controller.getAllParsedValues(t));t._cache.$bar=pe(s.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let s,n,o,r,c=e._length;const h=()=>{32767!==o&&-32768!==o&&(kt(r)&&(c=Math.min(c,Math.abs(o-r)||c)),r=o)};for(s=0,n=i.length;s<n;++s)o=e.getPixelForValue(i[s]),h();for(r=void 0,s=0,n=e.ticks.length;s<n;++s)o=e.getPixelForTick(s),h();return c}function ys(t,e,i,s){return dt(t)?function(t,e,i,s){const n=i.parse(t[0],s),o=i.parse(t[1],s),r=Math.min(n,o),c=Math.max(n,o);let h=r,d=c;Math.abs(r)>Math.abs(c)&&(h=c,d=r),e[i.axis]=d,e._custom={barStart:h,barEnd:d,start:n,end:o,min:r,max:c}}(t,e,i,s):e[i.axis]=i.parse(t,s),e}function Es(t,e,i,s){const n=t.iScale,o=t.vScale,r=n.getLabels(),c=n===o,h=[];let d,u,p,m;for(d=i,u=i+s;d<u;++d)m=e[d],p={},p[n.axis]=c||n.parse(r[d],d),h.push(ys(m,p,o,d));return h}function _s(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function xs(t,e,i,s){let n=e.borderSkipped;const o={};if(!n)return void(t.borderSkipped=o);if(!0===n)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:r,end:c,reverse:h,top:d,bottom:u}=function(t){let e,i,s,n,o;return t.horizontal?(e=t.base>t.x,i="left",s="right"):(e=t.base<t.y,i="bottom",s="top"),e?(n="end",o="start"):(n="start",o="end"),{start:i,end:s,reverse:e,top:n,bottom:o}}(t);"middle"===n&&i&&(t.enableBorderRadius=!0,(i._top||0)===s?n=d:(i._bottom||0)===s?n=u:(o[ws(u,r,c,h)]=!0,n=d)),o[ws(n,r,c,h)]=!0,t.borderSkipped=o}function ws(t,e,i,s){var n,o,r;return s?(r=i,t=Ts(t=(n=t)===(o=e)?r:n===r?o:n,i,e)):t=Ts(t,e,i),t}function Ts(t,e,i){return"start"===t?e:"end"===t?i:t}function As(t,{inflateAmount:e},i){t.inflateAmount="auto"===e?1===i?.33:0:e}class DoughnutController extends DatasetController{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map(((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:s,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const i=this.getDataset().data,s=this._cachedMeta;if(!1===this._parsing)s._parsed=i;else{let n,o,r=t=>+i[t];if(ut(i[t])){const{key:t="value"}=this._parsing;r=e=>+Ct(i[e],t)}for(n=t,o=t+e;n<o;++n)s._parsed[n]=r(n)}}_getRotation(){return Kt(this.options.rotation-90)}_getCircumference(){return Kt(this.options.circumference)}_getRotationExtents(){let t=Bt,e=-Bt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const s=this.chart.getDatasetMeta(i).controller,n=s._getRotation(),o=s._getCircumference();t=Math.min(t,n),e=Math.max(e,n+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:i}=e,s=this._cachedMeta,n=s.data,o=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,r=Math.max((Math.min(i.width,i.height)-o)/2,0),c=Math.min((h=this.options.cutout,d=r,"string"==typeof h&&h.endsWith("%")?parseFloat(h)/100:+h/d),1);var h,d;const u=this._getRingWeight(this.index),{circumference:p,rotation:m}=this._getRotationExtents(),{ratioX:b,ratioY:v,offsetX:y,offsetY:E}=function(t,e,i){let s=1,n=1,o=0,r=0;if(e<Bt){const c=t,h=c+e,d=Math.cos(c),u=Math.sin(c),p=Math.cos(h),m=Math.sin(h),b=(t,e,s)=>oe(t,c,h,!0)?1:Math.max(e,e*i,s,s*i),v=(t,e,s)=>oe(t,c,h,!0)?-1:Math.min(e,e*i,s,s*i),y=b(0,d,p),E=b(zt,u,m),x=v(Nt,d,p),w=v(Nt+zt,u,m);s=(y-x)/2,n=(E-w)/2,o=-(y+x)/2,r=-(E+w)/2}return{ratioX:s,ratioY:n,offsetX:o,offsetY:r}}(m,p,c),x=(i.width-o)/b,w=(i.height-o)/v,S=Math.max(Math.min(x,w)/2,0),O=mt(this.options.radius,S),D=(O-Math.max(O*c,0))/this._getVisibleDatasetWeightTotal();this.offsetX=y*O,this.offsetY=E*O,s.total=this.calculateTotal(),this.outerRadius=O-D*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-D*u,0),this.updateElements(n,0,n.length,t)}_circumference(t,e){const i=this.options,s=this._cachedMeta,n=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||null===s._parsed[t]||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*n/Bt)}updateElements(t,e,i,s){const n="reset"===s,o=this.chart,r=o.chartArea,c=o.options.animation,h=(r.left+r.right)/2,d=(r.top+r.bottom)/2,u=n&&c.animateScale,p=u?0:this.innerRadius,m=u?0:this.outerRadius,{sharedOptions:b,includeOptions:v}=this._getSharedOptions(e,s);let y,E=this._getRotation();for(y=0;y<e;++y)E+=this._circumference(y,n);for(y=e;y<e+i;++y){const e=this._circumference(y,n),i=t[y],o={x:h+this.offsetX,y:d+this.offsetY,startAngle:E,endAngle:E+e,circumference:e,outerRadius:m,innerRadius:p};v&&(o.options=b||this.resolveDataElementOptions(y,i.active?"active":s)),E+=e,this.updateElement(i,y,o,s)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let i,s=0;for(i=0;i<e.length;i++){const n=t._parsed[i];null===n||isNaN(n)||!this.chart.getDataVisibility(i)||e[i].hidden||(s+=Math.abs(n))}return s}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Bt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],n=Me(e._parsed[t],i.options.locale);return{label:s[t]||"",value:n}}getMaxBorderWidth(t){let e=0;const i=this.chart;let s,n,o,r,c;if(!t)for(s=0,n=i.data.datasets.length;s<n;++s)if(i.isDatasetVisible(s)){o=i.getDatasetMeta(s),t=o.data,r=o.controller;break}if(!t)return 0;for(s=0,n=t.length;s<n;++s)c=r.resolveDataElementOptions(s),"inner"!==c.borderAlign&&(e=Math.max(e,c.borderWidth||0,c.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,s=t.length;i<s;++i){const t=this.resolveDataElementOptions(i);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(gt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class PolarAreaController extends DatasetController{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:i,color:s}}=t.legend.options;return e.labels.map(((e,n)=>{const o=t.getDatasetMeta(0).controller.getStyle(n);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:s,lineWidth:o.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(n),index:n}}))}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart,s=i.data.labels||[],n=Me(e._parsed[t].r,i.options.locale);return{label:s[t]||"",value:n}}parseObjectData(t,e,i,s){return Ti.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,i)=>{const s=this.getParsed(i).r;!isNaN(s)&&this.chart.getDataVisibility(i)&&(s<e.min&&(e.min=s),s>e.max&&(e.max=s))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,i=t.options,s=Math.min(e.right-e.left,e.bottom-e.top),n=Math.max(s/2,0),o=(n-Math.max(i.cutoutPercentage?n/100*i.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=n-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,i,s){const n="reset"===s,o=this.chart,r=o.options.animation,c=this._cachedMeta.rScale,h=c.xCenter,d=c.yCenter,u=c.getIndexAngle(0)-.5*Nt;let p,m=u;const b=360/this.countVisibleElements();for(p=0;p<e;++p)m+=this._computeAngle(p,s,b);for(p=e;p<e+i;p++){const e=t[p];let i=m,v=m+this._computeAngle(p,s,b),y=o.getDataVisibility(p)?c.getDistanceFromCenterForValue(this.getParsed(p).r):0;m=v,n&&(r.animateScale&&(y=0),r.animateRotate&&(i=v=u));const E={x:h,y:d,innerRadius:0,outerRadius:y,startAngle:i,endAngle:v,options:this.resolveDataElementOptions(p,e.active?"active":s)};this.updateElement(e,p,E,s)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++})),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Kt(this.resolveDataElementOptions(t,e).angle||i):0}}var Ss=Object.freeze({__proto__:null,BarController:class BarController extends DatasetController{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,s){return Es(t,e,i,s)}parseArrayData(t,e,i,s){return Es(t,e,i,s)}parseObjectData(t,e,i,s){const{iScale:n,vScale:o}=t,{xAxisKey:r="x",yAxisKey:c="y"}=this._parsing,h="x"===n.axis?r:c,d="x"===o.axis?r:c,u=[];let p,m,b,v;for(p=i,m=i+s;p<m;++p)v=e[p],b={},b[n.axis]=n.parse(Ct(v,h),p),u.push(ys(Ct(v,d),b,o,p));return u}updateRangeFromParsed(t,e,i,s){super.updateRangeFromParsed(t,e,i,s);const n=i._custom;n&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,n.min),t.max=Math.max(t.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:i,vScale:s}=e,n=this.getParsed(t),o=n._custom,r=_s(o)?"["+o.start+", "+o.end+"]":""+s.getLabelForValue(n[s.axis]);return{label:""+i.getLabelForValue(n[i.axis]),value:r}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,s){const n="reset"===s,{index:o,_cachedMeta:{vScale:r}}=this,c=r.getBasePixel(),h=r.isHorizontal(),d=this._getRuler(),{sharedOptions:u,includeOptions:p}=this._getSharedOptions(e,s);for(let m=e;m<e+i;m++){const e=this.getParsed(m),i=n||ht(e[r.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),b=this._calculateBarIndexPixels(m,d),v=(e._stacks||{})[r.axis],y={horizontal:h,base:i.base,enableBorderRadius:!v||_s(e._custom)||o===v._top||o===v._bottom,x:h?i.head:b.center,y:h?b.center:i.head,height:h?b.size:Math.abs(i.size),width:h?Math.abs(i.size):b.size};p&&(y.options=u||this.resolveDataElementOptions(m,t[m].active?"active":s));const E=y.options||t[m].options;xs(y,E,v,o),As(y,E,d.ratio),this.updateElement(t[m],m,y,s)}}_getStacks(t,e){const{iScale:i}=this._cachedMeta,s=i.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),n=i.options.stacked,o=[],r=this._cachedMeta.controller.getParsed(e),c=r&&r[i.axis],h=t=>{const e=t._parsed.find((t=>t[i.axis]===c)),s=e&&e[t.vScale.axis];if(ht(s)||isNaN(s))return!0};for(const i of s)if((void 0===e||!h(i))&&((!1===n||-1===o.indexOf(i.stack)||void 0===n&&void 0===i.stack)&&o.push(i.stack),i.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,i){const s=this._getStacks(t,i),n=void 0!==e?s.indexOf(e):-1;return-1===n?s.length-1:n}_getRuler(){const t=this.options,e=this._cachedMeta,i=e.iScale,s=[];let n,o;for(n=0,o=e.data.length;n<o;++n)s.push(i.getPixelForValue(this.getParsed(n)[i.axis],n));const r=t.barThickness;return{min:r||vs(e),pixels:s,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:r?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:i,index:s},options:{base:n,minBarLength:o}}=this,r=n||0,c=this.getParsed(t),h=c._custom,d=_s(h);let u,p,m=c[e.axis],b=0,v=i?this.applyStack(e,c,i):m;v!==m&&(b=v-m,v=m),d&&(m=h.barStart,v=h.barEnd-h.barStart,0!==m&&Ut(m)!==Ut(h.barEnd)&&(b=0),b+=m);const y=ht(n)||d?b:n;let E=e.getPixelForValue(y);if(u=this.chart.getDataVisibility(t)?e.getPixelForValue(b+v):E,p=u-E,Math.abs(p)<o){p=function(t,e,i){return 0!==t?Ut(t):(e.isHorizontal()?1:-1)*(e.min>=i?1:-1)}(p,e,r)*o,m===r&&(E-=p/2);const t=e.getPixelForDecimal(0),n=e.getPixelForDecimal(1),h=Math.min(t,n),b=Math.max(t,n);E=Math.max(Math.min(E,b),h),u=E+p,i&&!d&&(c._stacks[e.axis]._visualValues[s]=e.getValueForPixel(u)-e.getValueForPixel(E))}if(E===e.getPixelForValue(r)){const t=Ut(p)*e.getLineWidthForValue(r)/2;E+=t,p-=t}return{size:p,base:E,head:u,center:u+p/2}}_calculateBarIndexPixels(t,e){const i=e.scale,s=this.options,n=s.skipNull,o=gt(s.maxBarThickness,1/0);let r,c;if(e.grouped){const i=n?this._getStackCount(t):e.stackCount,h="flex"===s.barThickness?function(t,e,i,s){const n=e.pixels,o=n[t];let r=t>0?n[t-1]:null,c=t<n.length-1?n[t+1]:null;const h=i.categoryPercentage;null===r&&(r=o-(null===c?e.end-e.start:c-o)),null===c&&(c=o+o-r);const d=o-(o-Math.min(r,c))/2*h;return{chunk:Math.abs(c-r)/2*h/s,ratio:i.barPercentage,start:d}}(t,e,s,i):function(t,e,i,s){const n=i.barThickness;let o,r;return ht(n)?(o=e.min*i.categoryPercentage,r=i.barPercentage):(o=n*s,r=1),{chunk:o/s,ratio:r,start:e.pixels[t]-o/2}}(t,e,s,i),d=this._getStackIndex(this.index,this._cachedMeta.stack,n?t:void 0);r=h.start+h.chunk*d+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else r=i.getPixelForValue(this.getParsed(t)[i.axis],t),c=Math.min(o,e.min*e.ratio);return{base:r-c/2,head:r+c/2,center:r,size:c}}draw(){const t=this._cachedMeta,e=t.vScale,i=t.data,s=i.length;let n=0;for(;n<s;++n)null===this.getParsed(n)[e.axis]||i[n].hidden||i[n].draw(this._ctx)}},BubbleController:class BubbleController extends DatasetController{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,s){const n=super.parsePrimitiveData(t,e,i,s);for(let t=0;t<n.length;t++)n[t]._custom=this.resolveDataElementOptions(t+i).radius;return n}parseArrayData(t,e,i,s){const n=super.parseArrayData(t,e,i,s);for(let t=0;t<n.length;t++){const s=e[i+t];n[t]._custom=gt(s[2],this.resolveDataElementOptions(t+i).radius)}return n}parseObjectData(t,e,i,s){const n=super.parseObjectData(t,e,i,s);for(let t=0;t<n.length;t++){const s=e[i+t];n[t]._custom=gt(s&&s.r&&+s.r,this.resolveDataElementOptions(t+i).radius)}return n}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:n}=e,o=this.getParsed(t),r=s.getLabelForValue(o.x),c=n.getLabelForValue(o.y),h=o._custom;return{label:i[t]||"",value:"("+r+", "+c+(h?", "+h:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,s){const n="reset"===s,{iScale:o,vScale:r}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(e,s),d=o.axis,u=r.axis;for(let p=e;p<e+i;p++){const e=t[p],i=!n&&this.getParsed(p),m={},b=m[d]=n?o.getPixelForDecimal(.5):o.getPixelForValue(i[d]),v=m[u]=n?r.getBasePixel():r.getPixelForValue(i[u]);m.skip=isNaN(b)||isNaN(v),h&&(m.options=c||this.resolveDataElementOptions(p,e.active?"active":s),n&&(m.options.radius=0)),this.updateElement(e,p,m,s)}}resolveDataElementOptions(t,e){const i=this.getParsed(t);let s=super.resolveDataElementOptions(t,e);s.$shared&&(s=Object.assign({},s,{$shared:!1}));const n=s.radius;return"active"!==e&&(s.radius=0),s.radius+=gt(i&&i._custom,n),s}},DoughnutController:DoughnutController,LineController:class LineController extends DatasetController{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:i,data:s=[],_dataset:n}=e,o=this.chart._animationsDisabled;let{start:r,count:c}=ve(e,s,o);this._drawStart=r,this._drawCount=c,ye(e)&&(r=0,c=s.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!n._decimated,i.points=s;const h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:h},t),this.updateElements(s,r,c,t)}updateElements(t,e,i,s){const n="reset"===s,{iScale:o,vScale:r,_stacked:c,_dataset:h}=this._cachedMeta,{sharedOptions:d,includeOptions:u}=this._getSharedOptions(e,s),p=o.axis,m=r.axis,{spanGaps:b,segment:v}=this.options,y=Xt(b)?b:Number.POSITIVE_INFINITY,E=this.chart._animationsDisabled||n||"none"===s,x=e+i,w=t.length;let S=e>0&&this.getParsed(e-1);for(let i=0;i<w;++i){const b=t[i],w=E?b:{};if(i<e||i>=x){w.skip=!0;continue}const O=this.getParsed(i),D=ht(O[m]),M=w[p]=o.getPixelForValue(O[p],i),k=w[m]=n||D?r.getBasePixel():r.getPixelForValue(c?this.applyStack(r,O,c):O[m],i);w.skip=isNaN(M)||isNaN(k)||D,w.stop=i>0&&Math.abs(O[p]-S[p])>y,v&&(w.parsed=O,w.raw=h.data[i]),u&&(w.options=d||this.resolveDataElementOptions(i,b.active?"active":s)),E||this.updateElement(b,i,w,s),S=O}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,s=t.data||[];if(!s.length)return i;const n=s[0].size(this.resolveDataElementOptions(0)),o=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(i,n,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},PieController:class PieController extends DoughnutController{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:PolarAreaController,RadarController:class RadarController extends DatasetController{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,s){return Ti.bind(this)(t,e,i,s)}update(t){const e=this._cachedMeta,i=e.dataset,s=e.data||[],n=e.iScale.getLabels();if(i.points=s,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:n.length===s.length,options:e};this.updateElement(i,void 0,o,t)}this.updateElements(s,0,s.length,t)}updateElements(t,e,i,s){const n=this._cachedMeta.rScale,o="reset"===s;for(let r=e;r<e+i;r++){const e=t[r],i=this.resolveDataElementOptions(r,e.active?"active":s),c=n.getPointPositionForValue(r,this.getParsed(r).r),h=o?n.xCenter:c.x,d=o?n.yCenter:c.y,u={x:h,y:d,angle:c.angle,skip:isNaN(h)||isNaN(d),options:i};this.updateElement(e,r,u,s)}}},ScatterController:class ScatterController extends DatasetController{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:s,yScale:n}=e,o=this.getParsed(t),r=s.getLabelForValue(o.x),c=n.getLabelForValue(o.y);return{label:i[t]||"",value:"("+r+", "+c+")"}}update(t){const e=this._cachedMeta,{data:i=[]}=e,s=this.chart._animationsDisabled;let{start:n,count:o}=ve(e,i,s);if(this._drawStart=n,this._drawCount=o,ye(e)&&(n=0,o=i.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:n,_dataset:o}=e;n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!o._decimated,n.points=i;const r=this.resolveDatasetElementOptions(t);r.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:r},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,n,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,s){const n="reset"===s,{iScale:o,vScale:r,_stacked:c,_dataset:h}=this._cachedMeta,d=this.resolveDataElementOptions(e,s),u=this.getSharedOptions(d),p=this.includeOptions(s,u),m=o.axis,b=r.axis,{spanGaps:v,segment:y}=this.options,E=Xt(v)?v:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||n||"none"===s;let w=e>0&&this.getParsed(e-1);for(let d=e;d<e+i;++d){const e=t[d],i=this.getParsed(d),v=x?e:{},S=ht(i[b]),O=v[m]=o.getPixelForValue(i[m],d),D=v[b]=n||S?r.getBasePixel():r.getPixelForValue(c?this.applyStack(r,i,c):i[b],d);v.skip=isNaN(O)||isNaN(D)||S,v.stop=d>0&&Math.abs(i[m]-w[m])>E,y&&(v.parsed=i,v.raw=h.data[d]),p&&(v.options=u||this.resolveDataElementOptions(d,e.active?"active":s)),x||this.updateElement(e,d,v,s),w=i}this.updateSharedOptions(u,s,d)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let i=e.length-1;i>=0;--i)t=Math.max(t,e[i].size(this.resolveDataElementOptions(i))/2);return t>0&&t}const i=t.dataset,s=i.options&&i.options.borderWidth||0;if(!e.length)return s;const n=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(s,n,o)/2}}});function Os(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapterBase{static override(t){Object.assign(DateAdapterBase.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Os()}parse(){return Os()}format(){return Os()}add(){return Os()}diff(){return Os()}startOf(){return Os()}endOf(){return Os()}}var Ds=DateAdapterBase;function Cs(t,e,i,s){const{controller:n,data:o,_sorted:r}=t,c=n._cachedMeta.iScale;if(c&&e===c.axis&&"r"!==e&&r&&o.length){const t=c._reversePixels?he:ce;if(!s)return t(o,e,i);if(n._sharedOptions){const s=o[0],n="function"==typeof s.getRange&&s.getRange(e);if(n){const s=t(o,e,i-n),r=t(o,e,i+n);return{lo:s.lo,hi:r.hi}}}}return{lo:0,hi:o.length-1}}function Is(t,e,i,s,n){const o=t.getSortedVisibleDatasetMetas(),r=i[e];for(let t=0,i=o.length;t<i;++t){const{index:i,data:c}=o[t],{lo:h,hi:d}=Cs(o[t],e,r,n);for(let t=h;t<=d;++t){const e=c[t];e.skip||s(e,i,t)}}}function Ms(t,e,i,s,n){const o=[];if(!n&&!t.isPointInArea(e))return o;return Is(t,i,e,(function(i,r,c){(n||Ue(i,t.chartArea,0))&&i.inRange(e.x,e.y,s)&&o.push({element:i,datasetIndex:r,index:c})}),!0),o}function Ls(t,e,i,s,n,o){let r=[];const c=function(t){const e=-1!==t.indexOf("x"),i=-1!==t.indexOf("y");return function(t,s){const n=e?Math.abs(t.x-s.x):0,o=i?Math.abs(t.y-s.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}}(i);let h=Number.POSITIVE_INFINITY;return Is(t,i,e,(function(i,d,u){const p=i.inRange(e.x,e.y,n);if(s&&!p)return;const m=i.getCenterPoint(n);if(!(!!o||t.isPointInArea(m))&&!p)return;const b=c(e,m);b<h?(r=[{element:i,datasetIndex:d,index:u}],h=b):b===h&&r.push({element:i,datasetIndex:d,index:u})})),r}function ks(t,e,i,s,n,o){return o||t.isPointInArea(e)?"r"!==i||s?Ls(t,e,i,s,n,o):function(t,e,i,s){let n=[];return Is(t,i,e,(function(t,i,o){const{startAngle:r,endAngle:c}=t.getProps(["startAngle","endAngle"],s),{angle:h}=ee(t,{x:e.x,y:e.y});oe(h,r,c)&&n.push({element:t,datasetIndex:i,index:o})})),n}(t,e,i,n):[]}function Rs(t,e,i,s,n){const o=[],r="x"===i?"inXRange":"inYRange";let c=!1;return Is(t,i,e,((t,s,h)=>{t[r]&&t[r](e[i],n)&&(o.push({element:t,datasetIndex:s,index:h}),c=c||t.inRange(e.x,e.y,n))})),s&&!c?[]:o}var Ps={evaluateInteractionItems:Is,modes:{index(t,e,i,s){const n=qi(e,t),o=i.axis||"x",r=i.includeInvisible||!1,c=i.intersect?Ms(t,n,o,s,r):ks(t,n,o,!1,s,r),h=[];return c.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=c[0].index,i=t.data[e];i&&!i.skip&&h.push({element:i,datasetIndex:t.index,index:e})})),h):[]},dataset(t,e,i,s){const n=qi(e,t),o=i.axis||"xy",r=i.includeInvisible||!1;let c=i.intersect?Ms(t,n,o,s,r):ks(t,n,o,!1,s,r);if(c.length>0){const e=c[0].datasetIndex,i=t.getDatasetMeta(e).data;c=[];for(let t=0;t<i.length;++t)c.push({element:i[t],datasetIndex:e,index:t})}return c},point:(t,e,i,s)=>Ms(t,qi(e,t),i.axis||"xy",s,i.includeInvisible||!1),nearest(t,e,i,s){const n=qi(e,t),o=i.axis||"xy",r=i.includeInvisible||!1;return ks(t,n,o,i.intersect,s,r)},x:(t,e,i,s)=>Rs(t,qi(e,t),"x",i.intersect,s),y:(t,e,i,s)=>Rs(t,qi(e,t),"y",i.intersect,s)}};const Ns=["left","top","right","bottom"];function Bs(t,e){return t.filter((t=>t.pos===e))}function Fs(t,e){return t.filter((t=>-1===Ns.indexOf(t.pos)&&t.box.axis===e))}function qs(t,e){return t.sort(((t,i)=>{const s=e?i:t,n=e?t:i;return s.weight===n.weight?s.index-n.index:s.weight-n.weight}))}function js(t,e){const i=function(t){const e={};for(const i of t){const{stack:t,pos:s,stackWeight:n}=i;if(!t||!Ns.includes(s))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=n}return e}(t),{vBoxMaxWidth:s,hBoxMaxHeight:n}=e;let o,r,c;for(o=0,r=t.length;o<r;++o){c=t[o];const{fullSize:r}=c.box,h=i[c.stack],d=h&&c.stackWeight/h.weight;c.horizontal?(c.width=d?d*s:r&&e.availableWidth,c.height=n):(c.width=s,c.height=d?d*n:r&&e.availableHeight)}return i}function zs(t,e,i,s){return Math.max(t[i],e[i])+Math.max(t[s],e[s])}function Vs(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Hs(t,e,i,s){const{pos:n,box:o}=i,r=t.maxPadding;if(!ut(n)){i.size&&(t[n]-=i.size);const e=s[i.stack]||{size:0,count:1};e.size=Math.max(e.size,i.horizontal?o.height:o.width),i.size=e.size/e.count,t[n]+=i.size}o.getPadding&&Vs(r,o.getPadding());const c=Math.max(0,e.outerWidth-zs(r,t,"left","right")),h=Math.max(0,e.outerHeight-zs(r,t,"top","bottom")),d=c!==t.w,u=h!==t.h;return t.w=c,t.h=h,i.horizontal?{same:d,other:u}:{same:u,other:d}}function $s(t,e){const i=e.maxPadding;function s(t){const s={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{s[t]=Math.max(e[t],i[t])})),s}return s(t?["left","right"]:["top","bottom"])}function Us(t,e,i,s){const n=[];let o,r,c,h,d,u;for(o=0,r=t.length,d=0;o<r;++o){c=t[o],h=c.box,h.update(c.width||e.w,c.height||e.h,$s(c.horizontal,e));const{same:r,other:p}=Hs(e,i,c,s);d|=r&&n.length,u=u||p,h.fullSize||n.push(c)}return d&&Us(n,e,i,s)||u}function Gs(t,e,i,s,n){t.top=i,t.left=e,t.right=e+s,t.bottom=i+n,t.width=s,t.height=n}function Ws(t,e,i,s){const n=i.padding;let{x:o,y:r}=e;for(const c of t){const t=c.box,h=s[c.stack]||{count:1,placed:0,weight:1},d=c.stackWeight/h.weight||1;if(c.horizontal){const s=e.w*d,o=h.size||t.height;kt(h.start)&&(r=h.start),t.fullSize?Gs(t,n.left,r,i.outerWidth-n.right-n.left,o):Gs(t,e.left+h.placed,r,s,o),h.start=r,h.placed+=s,r=t.bottom}else{const s=e.h*d,r=h.size||t.width;kt(h.start)&&(o=h.start),t.fullSize?Gs(t,o,n.top,r,i.outerHeight-n.bottom-n.top):Gs(t,o,e.top+h.placed,r,s),h.start=o,h.placed+=s,o=t.right}}e.x=o,e.y=r}var Ys={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const i=t.boxes?t.boxes.indexOf(e):-1;-1!==i&&t.boxes.splice(i,1)},configure(t,e,i){e.fullSize=i.fullSize,e.position=i.position,e.weight=i.weight},update(t,e,i,s){if(!t)return;const n=ai(t.options.layout.padding),o=Math.max(e-n.width,0),r=Math.max(i-n.height,0),c=function(t){const e=function(t){const e=[];let i,s,n,o,r,c;for(i=0,s=(t||[]).length;i<s;++i)n=t[i],({position:o,options:{stack:r,stackWeight:c=1}}=n),e.push({index:i,box:n,pos:o,horizontal:n.isHorizontal(),weight:n.weight,stack:r&&o+r,stackWeight:c});return e}(t),i=qs(e.filter((t=>t.box.fullSize)),!0),s=qs(Bs(e,"left"),!0),n=qs(Bs(e,"right")),o=qs(Bs(e,"top"),!0),r=qs(Bs(e,"bottom")),c=Fs(e,"x"),h=Fs(e,"y");return{fullSize:i,leftAndTop:s.concat(o),rightAndBottom:n.concat(h).concat(r).concat(c),chartArea:Bs(e,"chartArea"),vertical:s.concat(n).concat(h),horizontal:o.concat(r).concat(c)}}(t.boxes),h=c.vertical,d=c.horizontal;vt(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const u=h.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,p=Object.freeze({outerWidth:e,outerHeight:i,padding:n,availableWidth:o,availableHeight:r,vBoxMaxWidth:o/2/u,hBoxMaxHeight:r/2}),m=Object.assign({},n);Vs(m,ai(s));const b=Object.assign({maxPadding:m,w:o,h:r,x:n.left,y:n.top},n),v=js(h.concat(d),p);Us(c.fullSize,b,p,v),Us(h,b,p,v),Us(d,b,p,v)&&Us(h,b,p,v),function(t){const e=t.maxPadding;function i(i){const s=Math.max(e[i]-t[i],0);return t[i]+=s,s}t.y+=i("top"),t.x+=i("left"),i("right"),i("bottom")}(b),Ws(c.leftAndTop,b,p,v),b.x+=b.w,b.y+=b.h,Ws(c.rightAndBottom,b,p,v),t.chartArea={left:b.left,top:b.top,right:b.left+b.w,bottom:b.top+b.h,height:b.h,width:b.w},vt(c.chartArea,(e=>{const i=e.box;Object.assign(i,t.chartArea),i.update(b.w,b.h,{left:0,top:0,right:0,bottom:0})}))}};class BasePlatform{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,s){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,s?Math.floor(e/s):i)}}isAttached(t){return!0}updateConfig(t){}}class BasicPlatform extends BasePlatform{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Xs="$chartjs",Qs={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Zs=t=>null===t||""===t;const Ks=!!Hi&&{passive:!0};function Js(t,e,i){t&&t.canvas&&t.canvas.removeEventListener(e,i,Ks)}function tn(t,e){for(const i of t)if(i===e||i.contains(e))return!0}function en(t,e,i){const s=t.canvas,n=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||tn(i.addedNodes,s),e=e&&!tn(i.removedNodes,s);e&&i()}));return n.observe(document,{childList:!0,subtree:!0}),n}function sn(t,e,i){const s=t.canvas,n=new MutationObserver((t=>{let e=!1;for(const i of t)e=e||tn(i.removedNodes,s),e=e&&!tn(i.addedNodes,s);e&&i()}));return n.observe(document,{childList:!0,subtree:!0}),n}const nn=new Map;let on=0;function rn(){const t=window.devicePixelRatio;t!==on&&(on=t,nn.forEach(((e,i)=>{i.currentDevicePixelRatio!==t&&e()})))}function an(t,e,i){const s=t.canvas,n=s&&ki(s);if(!n)return;const o=ge(((t,e)=>{const s=n.clientWidth;i(t,e),s<n.clientWidth&&i()}),window),r=new ResizeObserver((t=>{const e=t[0],i=e.contentRect.width,s=e.contentRect.height;0===i&&0===s||o(i,s)}));return r.observe(n),function(t,e){nn.size||window.addEventListener("resize",rn),nn.set(t,e)}(t,o),r}function ln(t,e,i){i&&i.disconnect(),"resize"===e&&function(t){nn.delete(t),nn.size||window.removeEventListener("resize",rn)}(t)}function cn(t,e,i){const s=t.canvas,n=ge((e=>{null!==t.ctx&&i(function(t,e){const i=Qs[t.type]||t.type,{x:s,y:n}=qi(t,e);return{type:i,chart:e,native:t,x:void 0!==s?s:null,y:void 0!==n?n:null}}(e,t))}),t);return function(t,e,i){t&&t.addEventListener(e,i,Ks)}(s,e,n),n}class DomPlatform extends BasePlatform{acquireContext(t,e){const i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(function(t,e){const i=t.style,s=t.getAttribute("height"),n=t.getAttribute("width");if(t[Xs]={initial:{height:s,width:n,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",Zs(n)){const e=$i(t,"width");void 0!==e&&(t.width=e)}if(Zs(s))if(""===t.style.height)t.height=t.width/(e||2);else{const e=$i(t,"height");void 0!==e&&(t.height=e)}}(t,e),i):null}releaseContext(t){const e=t.canvas;if(!e[Xs])return!1;const i=e[Xs].initial;["height","width"].forEach((t=>{const s=i[t];ht(s)?e.removeAttribute(t):e.setAttribute(t,s)}));const s=i.style||{};return Object.keys(s).forEach((t=>{e.style[t]=s[t]})),e.width=e.width,delete e[Xs],!0}addEventListener(t,e,i){this.removeEventListener(t,e);const s=t.$proxies||(t.$proxies={}),n={attach:en,detach:sn,resize:an}[e]||cn;s[e]=n(t,e,i)}removeEventListener(t,e){const i=t.$proxies||(t.$proxies={}),s=i[e];if(!s)return;({attach:ln,detach:ln,resize:ln}[e]||Js)(t,e,s),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,s){return zi(t,e,i,s)}isAttached(t){const e=t&&ki(t);return!(!e||!e.isConnected)}}let hn=class Element{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return Xt(this.x)&&Xt(this.y)}getProps(t,e){const i=this.$animations;if(!e||!i)return this;const s={};return t.forEach((t=>{s[t]=i[t]&&i[t].active()?i[t]._to:this[t]})),s}};function dn(t,e){const i=t.options.ticks,s=function(t){const e=t.options.offset,i=t._tickSize(),s=t._length/i+(e?0:1),n=t._maxLength/i;return Math.floor(Math.min(s,n))}(t),n=Math.min(i.maxTicksLimit||s,s),o=i.major.enabled?function(t){const e=[];let i,s;for(i=0,s=t.length;i<s;i++)t[i].major&&e.push(i);return e}(e):[],r=o.length,c=o[0],h=o[r-1],d=[];if(r>n)return function(t,e,i,s){let n,o=0,r=i[0];for(s=Math.ceil(s),n=0;n<t.length;n++)n===r&&(e.push(t[n]),o++,r=i[o*s])}(e,d,o,r/n),d;const u=function(t,e,i){const s=function(t){const e=t.length;let i,s;if(e<2)return!1;for(s=t[0],i=1;i<e;++i)if(t[i]-t[i-1]!==s)return!1;return s}(t),n=e.length/i;if(!s)return Math.max(n,1);const o=function(t){const e=[],i=Math.sqrt(t);let s;for(s=1;s<i;s++)t%s==0&&(e.push(s),e.push(t/s));return i===(0|i)&&e.push(i),e.sort(((t,e)=>t-e)).pop(),e}(s);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>n)return e}return Math.max(n,1)}(o,e,n);if(r>0){let t,i;const s=r>1?Math.round((h-c)/(r-1)):null;for(un(e,d,u,ht(s)?0:c-s,c),t=0,i=r-1;t<i;t++)un(e,d,u,o[t],o[t+1]);return un(e,d,u,h,ht(s)?e.length:h+s),d}return un(e,d,u),d}function un(t,e,i,s,n){const o=gt(s,0),r=Math.min(gt(n,t.length),t.length);let c,h,d,u=0;for(i=Math.ceil(i),n&&(c=n-s,i=c/Math.floor(c/i)),d=o;d<0;)u++,d=Math.round(o+u*i);for(h=Math.max(o,0);h<r;h++)h===d&&(e.push(t[h]),u++,d=Math.round(o+u*i))}const pn=(t,e,i)=>"top"===e||"left"===e?t[e]+i:t[e]-i,fn=(t,e)=>Math.min(e||t,t);function gn(t,e){const i=[],s=t.length/e,n=t.length;let o=0;for(;o<n;o+=s)i.push(t[Math.floor(o)]);return i}function mn(t,e,i){const s=t.ticks.length,n=Math.min(e,s-1),o=t._startPixel,r=t._endPixel,c=1e-6;let h,d=t.getPixelForTick(n);if(!(i&&(h=1===s?Math.max(d-o,r-d):0===e?(t.getPixelForTick(1)-d)/2:(d-t.getPixelForTick(n-1))/2,d+=n<e?h:-h,d<o-c||d>r+c)))return d}function bn(t){return t.drawTicks?t.tickLength:0}function vn(t,e){if(!t.display)return 0;const i=li(t.font,e),s=ai(t.padding);return(dt(t.text)?t.text.length:1)*i.lineHeight+s.height}function yn(t,e,i){let s=me(t);return(i&&"right"!==e||!i&&"right"===e)&&(s=(t=>"left"===t?"right":"right"===t?"left":t)(s)),s}class Scale extends hn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:s}=this;return t=ft(t,Number.POSITIVE_INFINITY),e=ft(e,Number.NEGATIVE_INFINITY),i=ft(i,Number.POSITIVE_INFINITY),s=ft(s,Number.NEGATIVE_INFINITY),{min:ft(t,i),max:ft(e,s),minDefined:pt(t),maxDefined:pt(e)}}getMinMax(t){let e,{min:i,max:s,minDefined:n,maxDefined:o}=this.getUserBounds();if(n&&o)return{min:i,max:s};const r=this.getMatchingVisibleMetas();for(let c=0,h=r.length;c<h;++c)e=r[c].controller.getMinMax(this,t),n||(i=Math.min(i,e.min)),o||(s=Math.max(s,e.max));return i=o&&i>s?s:i,s=n&&i>s?i:s,{min:ft(i,ft(s,i)),max:ft(s,ft(i,s))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){bt(this.options.beforeUpdate,[this])}update(t,e,i){const{beginAtZero:s,grace:n,ticks:o}=this.options,r=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,i){const{min:s,max:n}=t,o=mt(e,(n-s)/2),r=(t,e)=>i&&0===t?0:t+e;return{min:r(s,-Math.abs(o)),max:r(n,o)}}(this,n,s),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=r<this.ticks.length;this._convertTicksToLabels(c?gn(this.ticks,r):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=dn(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,i=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,i=!i),this._startPixel=t,this._endPixel=e,this._reversePixels=i,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){bt(this.options.afterUpdate,[this])}beforeSetDimensions(){bt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){bt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),bt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){bt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let i,s,n;for(i=0,s=t.length;i<s;i++)n=t[i],n.label=bt(e.callback,[n.value,i,t],this)}afterTickToLabelConversion(){bt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){bt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,i=fn(this.ticks.length,t.ticks.maxTicksLimit),s=e.minRotation||0,n=e.maxRotation;let o,r,c,h=s;if(!this._isVisible()||!e.display||s>=n||i<=1||!this.isHorizontal())return void(this.labelRotation=s);const d=this._getLabelSizes(),u=d.widest.width,p=d.highest.height,m=re(this.chart.width-u,0,this.maxWidth);o=t.offset?this.maxWidth/i:m/(i-1),u+6>o&&(o=m/(i-(t.offset?.5:1)),r=this.maxHeight-bn(t.grid)-e.padding-vn(t.title,this.chart.options.font),c=Math.sqrt(u*u+p*p),h=Jt(Math.min(Math.asin(re((d.highest.height+6)/o,-1,1)),Math.asin(re(r/c,-1,1))-Math.asin(re(p/c,-1,1)))),h=Math.max(s,Math.min(n,h))),this.labelRotation=h}afterCalculateLabelRotation(){bt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){bt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:i,title:s,grid:n}}=this,o=this._isVisible(),r=this.isHorizontal();if(o){const o=vn(s,e.options.font);if(r?(t.width=this.maxWidth,t.height=bn(n)+o):(t.height=this.maxHeight,t.width=bn(n)+o),i.display&&this.ticks.length){const{first:e,last:s,widest:n,highest:o}=this._getLabelSizes(),c=2*i.padding,h=Kt(this.labelRotation),d=Math.cos(h),u=Math.sin(h);if(r){const e=i.mirror?0:u*n.width+d*o.height;t.height=Math.min(this.maxHeight,t.height+e+c)}else{const e=i.mirror?0:d*n.width+u*o.height;t.width=Math.min(this.maxWidth,t.width+e+c)}this._calculatePadding(e,s,u,d)}}this._handleMargins(),r?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,s){const{ticks:{align:n,padding:o},position:r}=this.options,c=0!==this.labelRotation,h="top"!==r&&"x"===this.axis;if(this.isHorizontal()){const r=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,p=0;c?h?(u=s*t.width,p=i*e.height):(u=i*t.height,p=s*e.width):"start"===n?p=e.width:"end"===n?u=t.width:"inner"!==n&&(u=t.width/2,p=e.width/2),this.paddingLeft=Math.max((u-r+o)*this.width/(this.width-r),0),this.paddingRight=Math.max((p-d+o)*this.width/(this.width-d),0)}else{let i=e.height/2,s=t.height/2;"start"===n?(i=0,s=t.height):"end"===n&&(i=e.height,s=0),this.paddingTop=i+o,this.paddingBottom=s+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){bt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,i;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,i=t.length;e<i;e++)ht(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let i=this.ticks;e<i.length&&(i=gn(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){const{ctx:s,_longestTextCache:n}=this,o=[],r=[],c=Math.floor(e/fn(e,i));let h,d,u,p,m,b,v,y,E,x,w,S=0,O=0;for(h=0;h<e;h+=c){if(p=t[h].label,m=this._resolveTickFontOptions(h),s.font=b=m.string,v=n[b]=n[b]||{data:{},gc:[]},y=m.lineHeight,E=x=0,ht(p)||dt(p)){if(dt(p))for(d=0,u=p.length;d<u;++d)w=p[d],ht(w)||dt(w)||(E=qe(s,v.data,v.gc,E,w),x+=y)}else E=qe(s,v.data,v.gc,E,p),x=y;o.push(E),r.push(x),S=Math.max(E,S),O=Math.max(x,O)}!function(t,e){vt(t,(t=>{const i=t.gc,s=i.length/2;let n;if(s>e){for(n=0;n<s;++n)delete t.data[i[n]];i.splice(0,s)}}))}(n,e);const D=o.indexOf(S),M=r.indexOf(O),k=t=>({width:o[t]||0,height:r[t]||0});return{first:k(0),last:k(e-1),widest:k(D),highest:k(M),widths:o,heights:r}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return re(this._alignToPixels?ze(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const i=e[t];return i.$context||(i.$context=function(t,e,i){return hi(t,{tick:i,index:e,type:"tick"})}(this.getContext(),t,i))}return this.$context||(this.$context=hi(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=Kt(this.labelRotation),i=Math.abs(Math.cos(e)),s=Math.abs(Math.sin(e)),n=this._getLabelSizes(),o=t.autoSkipPadding||0,r=n?n.widest.width+o:0,c=n?n.highest.height+o:0;return this.isHorizontal()?c*i>r*s?r/i:c/s:c*s<r*i?c/i:r/s}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,i=this.chart,s=this.options,{grid:n,position:o,border:r}=s,c=n.offset,h=this.isHorizontal(),d=this.ticks.length+(c?1:0),u=bn(n),p=[],m=r.setContext(this.getContext()),b=m.display?m.width:0,v=b/2,y=function(t){return ze(i,t,b)};let E,x,w,S,O,D,M,k,P,N,B,F;if("top"===o)E=y(this.bottom),D=this.bottom-u,k=E-v,N=y(t.top)+v,F=t.bottom;else if("bottom"===o)E=y(this.top),N=t.top,F=y(t.bottom)-v,D=E+v,k=this.top+u;else if("left"===o)E=y(this.right),O=this.right-u,M=E-v,P=y(t.left)+v,B=t.right;else if("right"===o)E=y(this.left),P=t.left,B=y(t.right)-v,O=E+v,M=this.left+u;else if("x"===e){if("center"===o)E=y((t.top+t.bottom)/2+.5);else if(ut(o)){const t=Object.keys(o)[0],e=o[t];E=y(this.chart.scales[t].getPixelForValue(e))}N=t.top,F=t.bottom,D=E+v,k=D+u}else if("y"===e){if("center"===o)E=y((t.left+t.right)/2);else if(ut(o)){const t=Object.keys(o)[0],e=o[t];E=y(this.chart.scales[t].getPixelForValue(e))}O=E-v,M=O-u,P=t.left,B=t.right}const q=gt(s.ticks.maxTicksLimit,d),j=Math.max(1,Math.ceil(d/q));for(x=0;x<d;x+=j){const t=this.getContext(x),e=n.setContext(t),s=r.setContext(t),o=e.lineWidth,d=e.color,u=s.dash||[],m=s.dashOffset,b=e.tickWidth,v=e.tickColor,y=e.tickBorderDash||[],E=e.tickBorderDashOffset;w=mn(this,x,c),void 0!==w&&(S=ze(i,w,o),h?O=M=P=B=S:D=k=N=F=S,p.push({tx1:O,ty1:D,tx2:M,ty2:k,x1:P,y1:N,x2:B,y2:F,width:o,color:d,borderDash:u,borderDashOffset:m,tickWidth:b,tickColor:v,tickBorderDash:y,tickBorderDashOffset:E}))}return this._ticksLength=d,this._borderValue=E,p}_computeLabelItems(t){const e=this.axis,i=this.options,{position:s,ticks:n}=i,o=this.isHorizontal(),r=this.ticks,{align:c,crossAlign:h,padding:d,mirror:u}=n,p=bn(i.grid),m=p+d,b=u?-d:m,v=-Kt(this.labelRotation),y=[];let E,x,w,S,O,D,M,k,P,N,B,F,q="middle";if("top"===s)D=this.bottom-b,M=this._getXAxisLabelAlignment();else if("bottom"===s)D=this.top+b,M=this._getXAxisLabelAlignment();else if("left"===s){const t=this._getYAxisLabelAlignment(p);M=t.textAlign,O=t.x}else if("right"===s){const t=this._getYAxisLabelAlignment(p);M=t.textAlign,O=t.x}else if("x"===e){if("center"===s)D=(t.top+t.bottom)/2+m;else if(ut(s)){const t=Object.keys(s)[0],e=s[t];D=this.chart.scales[t].getPixelForValue(e)+m}M=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===s)O=(t.left+t.right)/2-m;else if(ut(s)){const t=Object.keys(s)[0],e=s[t];O=this.chart.scales[t].getPixelForValue(e)}M=this._getYAxisLabelAlignment(p).textAlign}"y"===e&&("start"===c?q="top":"end"===c&&(q="bottom"));const j=this._getLabelSizes();for(E=0,x=r.length;E<x;++E){w=r[E],S=w.label;const t=n.setContext(this.getContext(E));k=this.getPixelForTick(E)+n.labelOffset,P=this._resolveTickFontOptions(E),N=P.lineHeight,B=dt(S)?S.length:1;const e=B/2,i=t.color,c=t.textStrokeColor,d=t.textStrokeWidth;let p,m=M;if(o?(O=k,"inner"===M&&(m=E===x-1?this.options.reverse?"left":"right":0===E?this.options.reverse?"right":"left":"center"),F="top"===s?"near"===h||0!==v?-B*N+N/2:"center"===h?-j.highest.height/2-e*N+N:-j.highest.height+N/2:"near"===h||0!==v?N/2:"center"===h?j.highest.height/2-e*N:j.highest.height-B*N,u&&(F*=-1),0===v||t.showLabelBackdrop||(O+=N/2*Math.sin(v))):(D=k,F=(1-B)*N/2),t.showLabelBackdrop){const e=ai(t.backdropPadding),i=j.heights[E],s=j.widths[E];let n=F-e.top,o=0-e.left;switch(q){case"middle":n-=i/2;break;case"bottom":n-=i}switch(M){case"center":o-=s/2;break;case"right":o-=s;break;case"inner":E===x-1?o-=s:E>0&&(o-=s/2)}p={left:o,top:n,width:s+e.width,height:i+e.height,color:t.backdropColor}}y.push({label:S,font:P,textOffset:F,options:{rotation:v,color:i,strokeColor:c,strokeWidth:d,textAlign:m,textBaseline:q,translation:[O,D],backdrop:p}})}return y}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Kt(this.labelRotation))return"top"===t?"left":"right";let i="center";return"start"===e.align?i="left":"end"===e.align?i="right":"inner"===e.align&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:i,mirror:s,padding:n}}=this.options,o=t+n,r=this._getLabelSizes().widest.width;let c,h;return"left"===e?s?(h=this.right+n,"near"===i?c="left":"center"===i?(c="center",h+=r/2):(c="right",h+=r)):(h=this.right-o,"near"===i?c="right":"center"===i?(c="center",h-=r/2):(c="left",h=this.left)):"right"===e?s?(h=this.left+n,"near"===i?c="right":"center"===i?(c="center",h-=r/2):(c="left",h-=r)):(h=this.left+o,"near"===i?c="left":"center"===i?(c="center",h+=r/2):(c="right",h=this.right)):c="right",{textAlign:c,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:i,top:s,width:n,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,s,n,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex((e=>e.value===t));if(i>=0){return e.setContext(this.getContext(i)).lineWidth}return 0}drawGrid(t){const e=this.options.grid,i=this.ctx,s=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let n,o;const r=(t,e,s)=>{s.width&&s.color&&(i.save(),i.lineWidth=s.width,i.strokeStyle=s.color,i.setLineDash(s.borderDash||[]),i.lineDashOffset=s.borderDashOffset,i.beginPath(),i.moveTo(t.x,t.y),i.lineTo(e.x,e.y),i.stroke(),i.restore())};if(e.display)for(n=0,o=s.length;n<o;++n){const t=s[n];e.drawOnChartArea&&r({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&r({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:i,grid:s}}=this,n=i.setContext(this.getContext()),o=i.display?n.width:0;if(!o)return;const r=s.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let h,d,u,p;this.isHorizontal()?(h=ze(t,this.left,o)-o/2,d=ze(t,this.right,r)+r/2,u=p=c):(u=ze(t,this.top,o)-o/2,p=ze(t,this.bottom,r)+r/2,h=d=c),e.save(),e.lineWidth=n.width,e.strokeStyle=n.color,e.beginPath(),e.moveTo(h,u),e.lineTo(d,p),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,i=this._computeLabelArea();i&&Ge(e,i);const s=this.getLabelItems(t);for(const t of s){const i=t.options,s=t.font;Ke(e,t.label,0,t.textOffset,s,i)}i&&We(e)}drawTitle(){const{ctx:t,options:{position:e,title:i,reverse:s}}=this;if(!i.display)return;const n=li(i.font),o=ai(i.padding),r=i.align;let c=n.lineHeight/2;"bottom"===e||"center"===e||ut(e)?(c+=o.bottom,dt(i.text)&&(c+=n.lineHeight*(i.text.length-1))):c+=o.top;const{titleX:h,titleY:d,maxWidth:u,rotation:p}=function(t,e,i,s){const{top:n,left:o,bottom:r,right:c,chart:h}=t,{chartArea:d,scales:u}=h;let p,m,b,v=0;const y=r-n,E=c-o;if(t.isHorizontal()){if(m=be(s,o,c),ut(i)){const t=Object.keys(i)[0],s=i[t];b=u[t].getPixelForValue(s)+y-e}else b="center"===i?(d.bottom+d.top)/2+y-e:pn(t,i,e);p=c-o}else{if(ut(i)){const t=Object.keys(i)[0],s=i[t];m=u[t].getPixelForValue(s)-E+e}else m="center"===i?(d.left+d.right)/2-E+e:pn(t,i,e);b=be(s,r,n),v="left"===i?-zt:zt}return{titleX:m,titleY:b,maxWidth:p,rotation:v}}(this,c,e,r);Ke(t,i.text,0,0,n,{color:i.color,maxWidth:u,rotation:p,textAlign:yn(r,e,s),textBaseline:"middle",translation:[h,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,i=gt(t.grid&&t.grid.z,-1),s=gt(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Scale.prototype.draw?[{z:i,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:s,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",s=[];let n,o;for(n=0,o=e.length;n<o;++n){const o=e[n];o[i]!==this.id||t&&o.type!==t||s.push(o)}return s}_resolveTickFontOptions(t){return li(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class TypedRegistry{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let i;(function(t){return"id"in t&&"defaults"in t})(e)&&(i=this.register(e));const s=this.items,n=t.id,o=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+t);return n in s||(s[n]=t,function(t,e,i){const s=Tt(Object.create(null),[i?Fe.get(i):{},Fe.get(e),t.defaults]);Fe.set(e,s),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((i=>{const s=i.split("."),n=s.pop(),o=[t].concat(s).join("."),r=e[i].split("."),c=r.pop(),h=r.join(".");Fe.route(o,n,h,c)}))}(e,t.defaultRoutes);t.descriptors&&Fe.describe(e,t.descriptors)}(t,o,i),this.override&&Fe.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,i=t.id,s=this.scope;i in e&&delete e[i],s&&i in Fe[s]&&(delete Fe[s][i],this.override&&delete Re[i])}}let En=class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(hn,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach((e=>{const s=i||this._getRegistryForType(e);i||s.isForType(e)||s===this.plugins&&e.id?this._exec(t,s,e):vt(e,(e=>{const s=i||this._getRegistryForType(e);this._exec(t,s,e)}))}))}_exec(t,e,i){const s=Mt(t);bt(i["before"+s],[],i),e[t](i),bt(i["after"+s],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){const s=e.get(t);if(void 0===s)throw new Error('"'+t+'" is not a registered '+i+".");return s}};var _n=new En;class PluginService{constructor(){this._init=[]}notify(t,e,i,s){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const n=s?this._descriptors(t).filter(s):this._descriptors(t),o=this._notify(n,t,e,i);return"afterDestroy"===e&&(this._notify(n,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,s){s=s||{};for(const n of t){const t=n.plugin;if(!1===bt(t[i],[e,s,n.options],t)&&s.cancelable)return!1}return!0}invalidate(){ht(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const i=t&&t.config,s=gt(i.options&&i.options.plugins,{}),n=function(t){const e={},i=[],s=Object.keys(_n.plugins.items);for(let t=0;t<s.length;t++)i.push(_n.getPlugin(s[t]));const n=t.plugins||[];for(let t=0;t<n.length;t++){const s=n[t];-1===i.indexOf(s)&&(i.push(s),e[s.id]=!0)}return{plugins:i,localIds:e}}(i);return!1!==s||e?function(t,{plugins:e,localIds:i},s,n){const o=[],r=t.getContext();for(const c of e){const e=c.id,h=xn(s[e],n);null!==h&&o.push({plugin:c,options:wn(t.config,{plugin:c,local:i[e]},h,r)})}return o}(t,n,s,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],i=this._cache,s=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(s(e,i),t,"stop"),this._notify(s(i,e),t,"start")}}function xn(t,e){return e||!1!==t?!0===t?{}:t:null}function wn(t,{plugin:e,local:i},s,n){const o=t.pluginScopeKeys(e),r=t.getOptionScopes(s,o);return i&&e.defaults&&r.push(e.defaults),t.createResolver(r,n,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Tn(t,e){const i=Fe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||i.indexAxis||"x"}function An(t){if("x"===t||"y"===t||"r"===t)return t}function Sn(t,...e){if(An(t))return t;for(const s of e){const e=s.axis||("top"===(i=s.position)||"bottom"===i?"x":"left"===i||"right"===i?"y":void 0)||t.length>1&&An(t[0].toLowerCase());if(e)return e}var i;throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function On(t,e,i){if(i[e+"AxisID"]===t)return{axis:e}}function Dn(t,e){const i=Re[t.type]||{scales:{}},s=e.scales||{},n=Tn(t.type,e),o=Object.create(null);return Object.keys(s).forEach((e=>{const r=s[e];if(!ut(r))return console.error(`Invalid scale configuration for scale: ${e}`);if(r._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const c=Sn(e,r,function(t,e){if(e.data&&e.data.datasets){const i=e.data.datasets.filter((e=>e.xAxisID===t||e.yAxisID===t));if(i.length)return On(t,"x",i[0])||On(t,"y",i[0])}return{}}(e,t),Fe.scales[r.type]),h=function(t,e){return t===e?"_index_":"_value_"}(c,n),d=i.scales||{};o[e]=At(Object.create(null),[{axis:c},r,d[c],d[h]])})),t.data.datasets.forEach((i=>{const n=i.type||t.type,r=i.indexAxis||Tn(n,e),c=(Re[n]||{}).scales||{};Object.keys(c).forEach((t=>{const e=function(t,e){let i=t;return"_index_"===t?i=e:"_value_"===t&&(i="x"===e?"y":"x"),i}(t,r),n=i[e+"AxisID"]||e;o[n]=o[n]||Object.create(null),At(o[n],[{axis:e},s[n],c[t]])}))})),Object.keys(o).forEach((t=>{const e=o[t];At(e,[Fe.scales[e.type],Fe.scale])})),o}function Cn(t){const e=t.options||(t.options={});e.plugins=gt(e.plugins,{}),e.scales=Dn(t,e)}function In(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const Mn=new Map,Ln=new Set;function kn(t,e){let i=Mn.get(t);return i||(i=e(),Mn.set(t,i),Ln.add(i)),i}const Rn=(t,e,i)=>{const s=Ct(e,i);void 0!==s&&t.add(s)};class Config{constructor(t){this._config=function(t){return(t=t||{}).data=In(t.data),Cn(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=In(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Cn(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return kn(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return kn(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return kn(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return kn(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const i=this._scopeCache;let s=i.get(t);return s&&!e||(s=new Map,i.set(t,s)),s}getOptionScopes(t,e,i){const{options:s,type:n}=this,o=this._cachedScopes(t,i),r=o.get(e);if(r)return r;const c=new Set;e.forEach((e=>{t&&(c.add(t),e.forEach((e=>Rn(c,t,e)))),e.forEach((t=>Rn(c,s,t))),e.forEach((t=>Rn(c,Re[n]||{},t))),e.forEach((t=>Rn(c,Fe,t))),e.forEach((t=>Rn(c,Pe,t)))}));const h=Array.from(c);return 0===h.length&&h.push(Object.create(null)),Ln.has(e)&&o.set(e,h),h}chartOptionScopes(){const{options:t,type:e}=this;return[t,Re[e]||{},Fe.datasets[e]||{},{type:e},Fe,Pe]}resolveNamedOptions(t,e,i,s=[""]){const n={$shared:!0},{resolver:o,subPrefixes:r}=Pn(this._resolverCache,t,s);let c=o;if(function(t,e){const{isScriptable:i,isIndexable:s}=pi(t);for(const n of e){const e=i(n),o=s(n),r=(o||e)&&t[n];if(e&&(Rt(r)||Nn(r))||o&&dt(r))return!0}return!1}(o,e)){n.$shared=!1;c=ui(o,i=Rt(i)?i():i,this.createResolver(t,i,r))}for(const t of e)n[t]=c[t];return n}createResolver(t,e,i=[""],s){const{resolver:n}=Pn(this._resolverCache,t,i);return ut(e)?ui(n,e,void 0,s):n}}function Pn(t,e,i){let s=t.get(e);s||(s=new Map,t.set(e,s));const n=i.join();let o=s.get(n);if(!o){o={resolver:di(e,i),subPrefixes:i.filter((t=>!t.toLowerCase().includes("hover")))},s.set(n,o)}return o}const Nn=t=>ut(t)&&Object.getOwnPropertyNames(t).some((e=>Rt(t[e])));const Bn=["top","bottom","left","right","chartArea"];function Fn(t,e){return"top"===t||"bottom"===t||-1===Bn.indexOf(t)&&"x"===e}function qn(t,e){return function(i,s){return i[t]===s[t]?i[e]-s[e]:i[t]-s[t]}}function jn(t){const e=t.chart,i=e.options.animation;e.notifyPlugins("afterRender"),bt(i&&i.onComplete,[t],e)}function zn(t){const e=t.chart,i=e.options.animation;bt(i&&i.onProgress,[t],e)}function Vn(t){return Li()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Hn={},$n=t=>{const e=Vn(t);return Object.values(Hn).filter((t=>t.canvas===e)).pop()};function Un(t,e,i){const s=Object.keys(t);for(const n of s){const s=+n;if(s>=e){const o=t[n];delete t[n],(i>0||s>e)&&(t[s+i]=o)}}}function Gn(t,e,i){return t.options.clip?t[i]:e[i]}class Chart{static defaults=Fe;static instances=Hn;static overrides=Re;static registry=_n;static version="4.4.4";static getChart=$n;static register(...t){_n.add(...t),Wn()}static unregister(...t){_n.remove(...t),Wn()}constructor(t,e){const i=this.config=new Config(e),s=Vn(t),n=$n(s);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||function(t){return!Li()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?BasicPlatform:DomPlatform}(s)),this.platform.updateConfig(i);const r=this.platform.acquireContext(s,o.aspectRatio),c=r&&r.canvas,h=c&&c.height,d=c&&c.width;this.id=ct(),this.ctx=r,this.canvas=c,this.width=d,this.height=h,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let i;return function(...s){return e?(clearTimeout(i),i=setTimeout(t,e,s)):t.apply(this,s),e}}((t=>this.update(t)),o.resizeDelay||0),this._dataChanges=[],Hn[this.id]=this,r&&c?(ns.listen(this,"complete",jn),ns.listen(this,"progress",zn),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:s,_aspectRatio:n}=this;return ht(t)?e&&n?n:s?i/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return _n}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Vi(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ve(this.canvas,this.ctx),this}stop(){return ns.stop(this),this}resize(t,e){ns.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const i=this.options,s=this.canvas,n=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(s,t,e,n),r=i.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Vi(this,r,!0)&&(this.notifyPlugins("resize",{size:o}),bt(i.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){vt(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,i=this.scales,s=Object.keys(i).reduce(((t,e)=>(t[e]=!1,t)),{});let n=[];e&&(n=n.concat(Object.keys(e).map((t=>{const i=e[t],s=Sn(t,i),n="r"===s,o="x"===s;return{options:i,dposition:n?"chartArea":o?"bottom":"left",dtype:n?"radialLinear":o?"category":"linear"}})))),vt(n,(e=>{const n=e.options,o=n.id,r=Sn(o,n),c=gt(n.type,e.dtype);void 0!==n.position&&Fn(n.position,r)===Fn(e.dposition)||(n.position=e.dposition),s[o]=!0;let h=null;if(o in i&&i[o].type===c)h=i[o];else{h=new(_n.getScale(c))({id:o,type:c,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(n,t)})),vt(s,((t,e)=>{t||delete i[e]})),vt(i,(t=>{Ys.configure(this,t,t.options),Ys.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort(((t,e)=>t.index-e.index)),i>e){for(let t=e;t<i;++t)this._destroyDatasetMeta(t);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(qn("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,i)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(i)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let i,s;for(this._removeUnreferencedMetasets(),i=0,s=e.length;i<s;i++){const s=e[i];let n=this.getDatasetMeta(i);const o=s.type||this.config.type;if(n.type&&n.type!==o&&(this._destroyDatasetMeta(i),n=this.getDatasetMeta(i)),n.type=o,n.indexAxis=s.indexAxis||Tn(o,this.options),n.order=s.order||0,n.index=i,n.label=""+s.label,n.visible=this.isDatasetVisible(i),n.controller)n.controller.updateIndex(i),n.controller.linkScales();else{const e=_n.getController(o),{datasetElementType:s,dataElementType:r}=Fe.datasets[o];Object.assign(e,{dataElementType:_n.getElement(r),datasetElementType:s&&_n.getElement(s)}),n.controller=new e(this,i),t.push(n.controller)}}return this._updateMetasets(),t}_resetElements(){vt(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),i=!s&&-1===n.indexOf(e);e.buildOrUpdateElements(i),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),s||vt(n,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(qn("z","_idx"));const{_active:r,_lastEvent:c}=this;c?this._eventHandler(c,!0):r.length&&this._updateHoverStyles(r,r,!0),this.render()}_updateScales(){vt(this.scales,(t=>{Ys.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);Pt(e,i)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:i,start:s,count:n}of e){Un(t,s,"_removeElements"===i?-n:n)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,i=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),s=i(0);for(let t=1;t<e;t++)if(!Pt(s,i(t)))return;return Array.from(s).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Ys.update(this,this.width,this.height,t);const e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],vt(this.boxes,(t=>{i&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,Rt(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const i=this.getDatasetMeta(t),s={meta:i,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",s)&&(i.controller._update(e),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(ns.has(this)?this.attached&&!ns.running(this)&&ns.start(this):(this.draw(),jn({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,i=[];let s,n;for(s=0,n=e.length;s<n;++s){const n=e[s];t&&!n.visible||i.push(n)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,i=t._clip,s=!i.disabled,n=function(t,e){const{xScale:i,yScale:s}=t;return i&&s?{left:Gn(i,e,"left"),right:Gn(i,e,"right"),top:Gn(s,e,"top"),bottom:Gn(s,e,"bottom")}:e}(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(s&&Ge(e,{left:!1===i.left?0:n.left-i.left,right:!1===i.right?this.width:n.right+i.right,top:!1===i.top?0:n.top-i.top,bottom:!1===i.bottom?this.height:n.bottom+i.bottom}),t.controller.draw(),s&&We(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return Ue(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,s){const n=Ps.modes[e];return"function"==typeof n?n(this,t,i,s):[]}getDatasetMeta(t){const e=this.data.datasets[t],i=this._metasets;let s=i.filter((t=>t&&t._dataset===e)).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(s)),s}getContext(){return this.$context||(this.$context=hi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const i=this.getDatasetMeta(t);return"boolean"==typeof i.hidden?!i.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){const s=i?"show":"hide",n=this.getDatasetMeta(t),o=n.controller._resolveAnimations(void 0,s);kt(e)?(n.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),o.update(n,{visible:i}),this.update((e=>e.datasetIndex===t?s:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),ns.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Ve(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Hn[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,i=(i,s)=>{e.addEventListener(this,i,s),t[i]=s},s=(t,e,i)=>{t.offsetX=e,t.offsetY=i,this._eventHandler(t)};vt(this.options.events,(t=>i(t,s)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,i=(i,s)=>{e.addEventListener(this,i,s),t[i]=s},s=(i,s)=>{t[i]&&(e.removeEventListener(this,i,s),delete t[i])},n=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const r=()=>{s("attach",r),this.attached=!0,this.resize(),i("resize",n),i("detach",o)};o=()=>{this.attached=!1,s("resize",n),this._stop(),this._resize(0,0),i("attach",r)},e.isAttached(this.canvas)?r():o()}unbindEvents(){vt(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},vt(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){const s=i?"set":"remove";let n,o,r,c;for("dataset"===e&&(n=this.getDatasetMeta(t[0].datasetIndex),n.controller["_"+s+"DatasetHoverStyle"]()),r=0,c=t.length;r<c;++r){o=t[r];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[s+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],i=t.map((({datasetIndex:t,index:e})=>{const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[e],index:e}}));!yt(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,i){const s=this.options.hover,n=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=n(e,t),r=i?t:n(t,e);o.length&&this.updateHoverStyle(o,s.mode,!1),r.length&&s.mode&&this.updateHoverStyle(r,s.mode,!0)}_eventHandler(t,e){const i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},s=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",i,s))return;const n=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,s),(n||i.changed)&&this.render(),this}_handleEvent(t,e,i){const{_active:s=[],options:n}=this,o=e,r=this._getActiveElements(t,s,i,o),c=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),h=function(t,e,i,s){return i&&"mouseout"!==t.type?s?e:t:null}(t,this._lastEvent,i,c);i&&(this._lastEvent=null,bt(n.onHover,[t,r,this],this),c&&bt(n.onClick,[t,r,this],this));const d=!yt(r,s);return(d||e)&&(this._active=r,this._updateHoverStyles(r,s,e)),this._lastEvent=h,d}_getActiveElements(t,e,i,s){if("mouseout"===t.type)return[];if(!i)return e;const n=this.options.hover;return this.getElementsAtEventForMode(t,n.mode,n,s)}}function Wn(){return vt(Chart.instances,(t=>t._plugins.invalidate()))}function Yn(t,e,i,s){const n=ni(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const o=(i-e)/2,r=Math.min(o,s*e/2),c=t=>{const e=(i-Math.min(o,t))*s/2;return re(t,0,Math.min(o,e))};return{outerStart:c(n.outerStart),outerEnd:c(n.outerEnd),innerStart:re(n.innerStart,0,r),innerEnd:re(n.innerEnd,0,r)}}function Xn(t,e,i,s){return{x:i+t*Math.cos(e),y:s+t*Math.sin(e)}}function Qn(t,e,i,s,n,o){const{x:r,y:c,startAngle:h,pixelMargin:d,innerRadius:u}=e,p=Math.max(e.outerRadius+s+i-d,0),m=u>0?u+s+i+d:0;let b=0;const v=n-h;if(s){const t=((u>0?u-s:0)+(p>0?p-s:0))/2;b=(v-(0!==t?v*t/(t+s):v))/2}const y=(v-Math.max(.001,v*p-i/Nt)/p)/2,E=h+y+b,x=n-y-b,{outerStart:w,outerEnd:S,innerStart:O,innerEnd:D}=Yn(e,m,p,x-E),M=p-w,k=p-S,P=E+w/M,N=x-S/k,B=m+O,F=m+D,q=E+O/B,j=x-D/F;if(t.beginPath(),o){const e=(P+N)/2;if(t.arc(r,c,p,P,e),t.arc(r,c,p,e,N),S>0){const e=Xn(k,N,r,c);t.arc(e.x,e.y,S,N,x+zt)}const i=Xn(F,x,r,c);if(t.lineTo(i.x,i.y),D>0){const e=Xn(F,j,r,c);t.arc(e.x,e.y,D,x+zt,j+Math.PI)}const s=(x-D/m+(E+O/m))/2;if(t.arc(r,c,m,x-D/m,s,!0),t.arc(r,c,m,s,E+O/m,!0),O>0){const e=Xn(B,q,r,c);t.arc(e.x,e.y,O,q+Math.PI,E-zt)}const n=Xn(M,E,r,c);if(t.lineTo(n.x,n.y),w>0){const e=Xn(M,P,r,c);t.arc(e.x,e.y,w,E-zt,P)}}else{t.moveTo(r,c);const e=Math.cos(P)*p+r,i=Math.sin(P)*p+c;t.lineTo(e,i);const s=Math.cos(N)*p+r,n=Math.sin(N)*p+c;t.lineTo(s,n)}t.closePath()}function Zn(t,e,i,s,n){const{fullCircles:o,startAngle:r,circumference:c,options:h}=e,{borderWidth:d,borderJoinStyle:u,borderDash:p,borderDashOffset:m}=h,b="inner"===h.borderAlign;if(!d)return;t.setLineDash(p||[]),t.lineDashOffset=m,b?(t.lineWidth=2*d,t.lineJoin=u||"round"):(t.lineWidth=d,t.lineJoin=u||"bevel");let v=e.endAngle;if(o){Qn(t,e,i,s,v,n);for(let e=0;e<o;++e)t.stroke();isNaN(c)||(v=r+(c%Bt||Bt))}b&&function(t,e,i){const{startAngle:s,pixelMargin:n,x:o,y:r,outerRadius:c,innerRadius:h}=e;let d=n/c;t.beginPath(),t.arc(o,r,c,s-d,i+d),h>n?(d=n/h,t.arc(o,r,h,i+d,s-d,!0)):t.arc(o,r,n,i+zt,s-zt),t.closePath(),t.clip()}(t,e,v),o||(Qn(t,e,i,s,v,n),t.stroke())}function Kn(t,e,i=e){t.lineCap=gt(i.borderCapStyle,e.borderCapStyle),t.setLineDash(gt(i.borderDash,e.borderDash)),t.lineDashOffset=gt(i.borderDashOffset,e.borderDashOffset),t.lineJoin=gt(i.borderJoinStyle,e.borderJoinStyle),t.lineWidth=gt(i.borderWidth,e.borderWidth),t.strokeStyle=gt(i.borderColor,e.borderColor)}function Jn(t,e,i){t.lineTo(i.x,i.y)}function to(t,e,i={}){const s=t.length,{start:n=0,end:o=s-1}=i,{start:r,end:c}=e,h=Math.max(n,r),d=Math.min(o,c),u=n<r&&o<r||n>c&&o>c;return{count:s,start:h,loop:e.loop,ilen:d<h&&!u?s+d-h:d-h}}function eo(t,e,i,s){const{points:n,options:o}=e,{count:r,start:c,loop:h,ilen:d}=to(n,i,s),u=function(t){return t.stepped?Ye:t.tension||"monotone"===t.cubicInterpolationMode?Xe:Jn}(o);let p,m,b,{move:v=!0,reverse:y}=s||{};for(p=0;p<=d;++p)m=n[(c+(y?d-p:p))%r],m.skip||(v?(t.moveTo(m.x,m.y),v=!1):u(t,b,m,y,o.stepped),b=m);return h&&(m=n[(c+(y?d:0))%r],u(t,b,m,y,o.stepped)),!!h}function io(t,e,i,s){const n=e.points,{count:o,start:r,ilen:c}=to(n,i,s),{move:h=!0,reverse:d}=s||{};let u,p,m,b,v,y,E=0,x=0;const w=t=>(r+(d?c-t:t))%o,S=()=>{b!==v&&(t.lineTo(E,v),t.lineTo(E,b),t.lineTo(E,y))};for(h&&(p=n[w(0)],t.moveTo(p.x,p.y)),u=0;u<=c;++u){if(p=n[w(u)],p.skip)continue;const e=p.x,i=p.y,s=0|e;s===m?(i<b?b=i:i>v&&(v=i),E=(x*E+e)/++x):(S(),t.lineTo(e,i),m=s,x=0,b=v=i),y=i}S()}function so(t){const e=t.options,i=e.borderDash&&e.borderDash.length;return!(t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||i)?io:eo}const no="function"==typeof Path2D;function oo(t,e,i,s){no&&!e.options.segment?function(t,e,i,s){let n=e._path;n||(n=e._path=new Path2D,e.path(n,i,s)&&n.closePath()),Kn(t,e.options),t.stroke(n)}(t,e,i,s):function(t,e,i,s){const{segments:n,options:o}=e,r=so(e);for(const c of n)Kn(t,o,c.style),t.beginPath(),r(t,e,c,{start:i,end:i+s-1})&&t.closePath(),t.stroke()}(t,e,i,s)}class LineElement extends hn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const i=this.options;if((i.tension||"monotone"===i.cubicInterpolationMode)&&!i.stepped&&!this._pointsUpdated){const s=i.spanGaps?this._loop:this._fullLoop;Mi(this._points,i,t,s,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const i=t.points,s=t.options.spanGaps,n=i.length;if(!n)return[];const o=!!t._loop,{start:r,end:c}=function(t,e,i,s){let n=0,o=e-1;if(i&&!s)for(;n<e&&!t[n].skip;)n++;for(;n<e&&t[n].skip;)n++;for(n%=e,i&&(o+=n);o>n&&t[o%e].skip;)o--;return o%=e,{start:n,end:o}}(i,n,o,s);return es(t,!0===s?[{start:r,end:c,loop:o}]:function(t,e,i,s){const n=t.length,o=[];let r,c=e,h=t[e];for(r=e+1;r<=i;++r){const i=t[r%n];i.skip||i.stop?h.skip||(s=!1,o.push({start:e%n,end:(r-1)%n,loop:s}),e=c=i.stop?r:null):(c=r,h.skip&&(e=r)),h=i}return null!==c&&o.push({start:e%n,end:c%n,loop:s}),o}(i,r,c<r?c+n:c,!!t._fullLoop&&0===r&&c===n-1),i,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){const i=this.options,s=t[e],n=this.points,o=ts(this,{property:e,start:s,end:s});if(!o.length)return;const r=[],c=function(t){return t.stepped?Gi:t.tension||"monotone"===t.cubicInterpolationMode?Wi:Ui}(i);let h,d;for(h=0,d=o.length;h<d;++h){const{start:d,end:u}=o[h],p=n[d],m=n[u];if(p===m){r.push(p);continue}const b=c(p,m,Math.abs((s-p[e])/(m[e]-p[e])),i.stepped);b[e]=t[e],r.push(b)}return 1===r.length?r[0]:r}pathSegment(t,e,i){return so(this)(t,this,e,i)}path(t,e,i){const s=this.segments,n=so(this);let o=this._loop;e=e||0,i=i||this.points.length-e;for(const r of s)o&=n(t,this,r,{start:e,end:e+i-1});return!!o}draw(t,e,i,s){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(t.save(),oo(t,this,i,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ro(t,e,i,s){const n=t.options,{[i]:o}=t.getProps([i],s);return Math.abs(e-o)<n.radius+n.hitRadius}function ao(t,e){const{x:i,y:s,base:n,width:o,height:r}=t.getProps(["x","y","base","width","height"],e);let c,h,d,u,p;return t.horizontal?(p=r/2,c=Math.min(i,n),h=Math.max(i,n),d=s-p,u=s+p):(p=o/2,c=i-p,h=i+p,d=Math.min(s,n),u=Math.max(s,n)),{left:c,top:d,right:h,bottom:u}}function lo(t,e,i,s){return t?0:re(e,i,s)}function co(t){const e=ao(t),i=e.right-e.left,s=e.bottom-e.top,n=function(t,e,i){const s=t.options.borderWidth,n=t.borderSkipped,o=oi(s);return{t:lo(n.top,o.top,0,i),r:lo(n.right,o.right,0,e),b:lo(n.bottom,o.bottom,0,i),l:lo(n.left,o.left,0,e)}}(t,i/2,s/2),o=function(t,e,i){const{enableBorderRadius:s}=t.getProps(["enableBorderRadius"]),n=t.options.borderRadius,o=ri(n),r=Math.min(e,i),c=t.borderSkipped,h=s||ut(n);return{topLeft:lo(!h||c.top||c.left,o.topLeft,0,r),topRight:lo(!h||c.top||c.right,o.topRight,0,r),bottomLeft:lo(!h||c.bottom||c.left,o.bottomLeft,0,r),bottomRight:lo(!h||c.bottom||c.right,o.bottomRight,0,r)}}(t,i/2,s/2);return{outer:{x:e.left,y:e.top,w:i,h:s,radius:o},inner:{x:e.left+n.l,y:e.top+n.t,w:i-n.l-n.r,h:s-n.t-n.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(n.t,n.l)),topRight:Math.max(0,o.topRight-Math.max(n.t,n.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(n.b,n.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(n.b,n.r))}}}}function ho(t,e,i,s){const n=null===e,o=null===i,r=t&&!(n&&o)&&ao(t,s);return r&&(n||ae(e,r.left,r.right))&&(o||ae(i,r.top,r.bottom))}function uo(t,e){t.rect(e.x,e.y,e.w,e.h)}function po(t,e,i={}){const s=t.x!==i.x?-e:0,n=t.y!==i.y?-e:0,o=(t.x+t.w!==i.x+i.w?e:0)-s,r=(t.y+t.h!==i.y+i.h?e:0)-n;return{x:t.x+s,y:t.y+n,w:t.w+o,h:t.h+r,radius:t.radius}}var fo=Object.freeze({__proto__:null,ArcElement:class ArcElement extends hn{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.getProps(["x","y"],i),{angle:n,distance:o}=ee(s,{x:t,y:e}),{startAngle:r,endAngle:c,innerRadius:h,outerRadius:d,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,m=gt(u,c-r),b=oe(n,r,c)&&r!==c,v=m>=Bt||b,y=ae(o,h+p,d+p);return v&&y}getCenterPoint(t){const{x:e,y:i,startAngle:s,endAngle:n,innerRadius:o,outerRadius:r}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:h}=this.options,d=(s+n)/2,u=(o+r+h+c)/2;return{x:e+Math.cos(d)*u,y:i+Math.sin(d)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:i}=this,s=(e.offset||0)/4,n=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=i>Bt?Math.floor(i/Bt):0,0===i||this.innerRadius<0||this.outerRadius<0)return;t.save();const r=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(r)*s,Math.sin(r)*s);const c=s*(1-Math.sin(Math.min(Nt,i||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,i,s,n){const{fullCircles:o,startAngle:r,circumference:c}=e;let h=e.endAngle;if(o){Qn(t,e,i,s,h,n);for(let e=0;e<o;++e)t.fill();isNaN(c)||(h=r+(c%Bt||Bt))}Qn(t,e,i,s,h,n),t.fill()}(t,this,c,n,o),Zn(t,this,c,n,o),t.restore()}},BarElement:class BarElement extends hn{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:i,backgroundColor:s}}=this,{inner:n,outer:o}=co(this),r=(c=o.radius).topLeft||c.topRight||c.bottomLeft||c.bottomRight?Je:uo;var c;t.save(),o.w===n.w&&o.h===n.h||(t.beginPath(),r(t,po(o,e,n)),t.clip(),r(t,po(n,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),r(t,po(n,e)),t.fillStyle=s,t.fill(),t.restore()}inRange(t,e,i){return ho(this,t,e,i)}inXRange(t,e){return ho(this,t,null,e)}inYRange(t,e){return ho(this,null,t,e)}getCenterPoint(t){const{x:e,y:i,base:s,horizontal:n}=this.getProps(["x","y","base","horizontal"],t);return{x:n?(e+s)/2:e,y:n?i:(i+s)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:LineElement,PointElement:class PointElement extends hn{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){const s=this.options,{x:n,y:o}=this.getProps(["x","y"],i);return Math.pow(t-n,2)+Math.pow(e-o,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,e){return ro(this,t,"x",e)}inYRange(t,e){return ro(this,t,"y",e)}getCenterPoint(t){const{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){let e=(t=t||this.options||{}).radius||0;e=Math.max(e,e&&t.hoverRadius||0);return 2*(e+(e&&t.borderWidth||0))}draw(t,e){const i=this.options;this.skip||i.radius<.1||!Ue(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,He(t,i,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}});const go=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],mo=go.map((t=>t.replace("rgb(","rgba(").replace(")",", 0.5)")));function bo(t){return go[t%go.length]}function vo(t){return mo[t%mo.length]}function yo(t){let e=0;return(i,s)=>{const n=t.getDatasetMeta(s).controller;n instanceof DoughnutController?e=function(t,e){return t.backgroundColor=t.data.map((()=>bo(e++))),e}(i,e):n instanceof PolarAreaController?e=function(t,e){return t.backgroundColor=t.data.map((()=>vo(e++))),e}(i,e):n&&(e=function(t,e){return t.borderColor=bo(e),t.backgroundColor=vo(e),++e}(i,e))}}function Eo(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var _o={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,i){if(!i.enabled)return;const{data:{datasets:s},options:n}=t.config,{elements:o}=n;if(!i.forceOverride&&(Eo(s)||(r=n)&&(r.borderColor||r.backgroundColor)||o&&Eo(o)))return;var r;const c=yo(t);s.forEach(c)}};function xo(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function wo(t){t.data.datasets.forEach((t=>{xo(t)}))}var To={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,i)=>{if(!i.enabled)return void wo(t);const s=t.width;t.data.datasets.forEach(((e,n)=>{const{_data:o,indexAxis:r}=e,c=t.getDatasetMeta(n),h=o||e.data;if("y"===ci([r,t.options.indexAxis]))return;if(!c.controller.supportsDecimation)return;const d=t.scales[c.xAxisID];if("linear"!==d.type&&"time"!==d.type)return;if(t.options.parsing)return;let{start:u,count:p}=function(t,e){const i=e.length;let s,n=0;const{iScale:o}=t,{min:r,max:c,minDefined:h,maxDefined:d}=o.getUserBounds();return h&&(n=re(ce(e,o.axis,r).lo,0,i-1)),s=d?re(ce(e,o.axis,c).hi+1,n,i)-n:i-n,{start:n,count:s}}(c,h);if(p<=(i.threshold||4*s))return void xo(e);let m;switch(ht(o)&&(e._data=h,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),i.algorithm){case"lttb":m=function(t,e,i,s,n){const o=n.samples||s;if(o>=i)return t.slice(e,e+i);const r=[],c=(i-2)/(o-2);let h=0;const d=e+i-1;let u,p,m,b,v,y=e;for(r[h++]=t[y],u=0;u<o-2;u++){let s,n=0,o=0;const d=Math.floor((u+1)*c)+1+e,E=Math.min(Math.floor((u+2)*c)+1,i)+e,x=E-d;for(s=d;s<E;s++)n+=t[s].x,o+=t[s].y;n/=x,o/=x;const w=Math.floor(u*c)+1+e,S=Math.min(Math.floor((u+1)*c)+1,i)+e,{x:O,y:D}=t[y];for(m=b=-1,s=w;s<S;s++)b=.5*Math.abs((O-n)*(t[s].y-D)-(O-t[s].x)*(o-D)),b>m&&(m=b,p=t[s],v=s);r[h++]=p,y=v}return r[h++]=t[d],r}(h,u,p,s,i);break;case"min-max":m=function(t,e,i,s){let n,o,r,c,h,d,u,p,m,b,v=0,y=0;const E=[],x=e+i-1,w=t[e].x,S=t[x].x-w;for(n=e;n<e+i;++n){o=t[n],r=(o.x-w)/S*s,c=o.y;const e=0|r;if(e===h)c<m?(m=c,d=n):c>b&&(b=c,u=n),v=(y*v+o.x)/++y;else{const i=n-1;if(!ht(d)&&!ht(u)){const e=Math.min(d,u),s=Math.max(d,u);e!==p&&e!==i&&E.push({...t[e],x:v}),s!==p&&s!==i&&E.push({...t[s],x:v})}n>0&&i!==p&&E.push(t[i]),E.push(o),h=e,y=0,m=b=c,d=u=p=n}}return E}(h,u,p,s);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}e._decimated=m}))},destroy(t){wo(t)}};function Ao(t,e,i,s){if(s)return;let n=e[t],o=i[t];return"angle"===t&&(n=ne(n),o=ne(o)),{property:t,start:n,end:o}}function So(t,e,i){for(;e>t;e--){const t=i[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function Oo(t,e,i,s){return t&&e?s(t[i],e[i]):t?t[i]:e?e[i]:0}function Do(t,e){let i=[],s=!1;return dt(t)?(s=!0,i=t):i=function(t,e){const{x:i=null,y:s=null}=t||{},n=e.points,o=[];return e.segments.forEach((({start:t,end:e})=>{e=So(t,e,n);const r=n[t],c=n[e];null!==s?(o.push({x:r.x,y:s}),o.push({x:c.x,y:s})):null!==i&&(o.push({x:i,y:r.y}),o.push({x:i,y:c.y}))})),o}(t,e),i.length?new LineElement({points:i,options:{tension:0},_loop:s,_fullLoop:s}):null}function Co(t){return t&&!1!==t.fill}function Io(t,e,i){let s=t[e].fill;const n=[e];let o;if(!i)return s;for(;!1!==s&&-1===n.indexOf(s);){if(!pt(s))return s;if(o=t[s],!o)return!1;if(o.visible)return s;n.push(s),s=o.fill}return!1}function Mo(t,e,i){const s=function(t){const e=t.options,i=e.fill;let s=gt(i&&i.target,i);void 0===s&&(s=!!e.backgroundColor);if(!1===s||null===s)return!1;if(!0===s)return"origin";return s}(t);if(ut(s))return!isNaN(s.value)&&s;let n=parseFloat(s);return pt(n)&&Math.floor(n)===n?function(t,e,i,s){"-"!==t&&"+"!==t||(i=e+i);if(i===e||i<0||i>=s)return!1;return i}(s[0],e,n,i):["origin","start","end","stack","shape"].indexOf(s)>=0&&s}function Lo(t,e,i){const s=[];for(let n=0;n<i.length;n++){const o=i[n],{first:r,last:c,point:h}=ko(o,e,"x");if(!(!h||r&&c))if(r)s.unshift(h);else if(t.push(h),!c)break}t.push(...s)}function ko(t,e,i){const s=t.interpolate(e,i);if(!s)return{};const n=s[i],o=t.segments,r=t.points;let c=!1,h=!1;for(let t=0;t<o.length;t++){const e=o[t],s=r[e.start][i],d=r[e.end][i];if(ae(n,s,d)){c=n===s,h=n===d;break}}return{first:c,last:h,point:s}}class simpleArc{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){const{x:s,y:n,radius:o}=this;return e=e||{start:0,end:Bt},t.arc(s,n,o,e.end,e.start,!0),!i.bounds}interpolate(t){const{x:e,y:i,radius:s}=this,n=t.angle;return{x:e+Math.cos(n)*s,y:i+Math.sin(n)*s,angle:n}}}function Ro(t){const{chart:e,fill:i,line:s}=t;if(pt(i))return function(t,e){const i=t.getDatasetMeta(e),s=i&&t.isDatasetVisible(e);return s?i.dataset:null}(e,i);if("stack"===i)return function(t){const{scale:e,index:i,line:s}=t,n=[],o=s.segments,r=s.points,c=function(t,e){const i=[],s=t.getMatchingVisibleMetas("line");for(let t=0;t<s.length;t++){const n=s[t];if(n.index===e)break;n.hidden||i.unshift(n.dataset)}return i}(e,i);c.push(Do({x:null,y:e.bottom},s));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)Lo(n,r[t],c)}return new LineElement({points:n,options:{}})}(t);if("shape"===i)return!0;const n=function(t){const e=t.scale||{};if(e.getPointPositionForValue)return function(t){const{scale:e,fill:i}=t,s=e.options,n=e.getLabels().length,o=s.reverse?e.max:e.min,r=function(t,e,i){let s;return s="start"===t?i:"end"===t?e.options.reverse?e.min:e.max:ut(t)?t.value:e.getBaseValue(),s}(i,e,o),c=[];if(s.grid.circular){const t=e.getPointPositionForValue(0,o);return new simpleArc({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(r)})}for(let t=0;t<n;++t)c.push(e.getPointPositionForValue(t,r));return c}(t);return function(t){const{scale:e={},fill:i}=t,s=function(t,e){let i=null;return"start"===t?i=e.bottom:"end"===t?i=e.top:ut(t)?i=e.getPixelForValue(t.value):e.getBasePixel&&(i=e.getBasePixel()),i}(i,e);if(pt(s)){const t=e.isHorizontal();return{x:t?s:null,y:t?null:s}}return null}(t)}(t);return n instanceof simpleArc?n:Do(n,s)}function Po(t,e,i){const s=Ro(e),{line:n,scale:o,axis:r}=e,c=n.options,h=c.fill,d=c.backgroundColor,{above:u=d,below:p=d}=h||{};s&&n.points.length&&(Ge(t,i),function(t,e){const{line:i,target:s,above:n,below:o,area:r,scale:c}=e,h=i._loop?"angle":e.axis;t.save(),"x"===h&&o!==n&&(No(t,s,r.top),Bo(t,{line:i,target:s,color:n,scale:c,property:h}),t.restore(),t.save(),No(t,s,r.bottom));Bo(t,{line:i,target:s,color:o,scale:c,property:h}),t.restore()}(t,{line:n,target:s,above:u,below:p,area:i,scale:o,axis:r}),We(t))}function No(t,e,i){const{segments:s,points:n}=e;let o=!0,r=!1;t.beginPath();for(const c of s){const{start:s,end:h}=c,d=n[s],u=n[So(s,h,n)];o?(t.moveTo(d.x,d.y),o=!1):(t.lineTo(d.x,i),t.lineTo(d.x,d.y)),r=!!e.pathSegment(t,c,{move:r}),r?t.closePath():t.lineTo(u.x,i)}t.lineTo(e.first().x,i),t.closePath(),t.clip()}function Bo(t,e){const{line:i,target:s,property:n,color:o,scale:r}=e,c=function(t,e,i){const s=t.segments,n=t.points,o=e.points,r=[];for(const t of s){let{start:s,end:c}=t;c=So(s,c,n);const h=Ao(i,n[s],n[c],t.loop);if(!e.segments){r.push({source:t,target:h,start:n[s],end:n[c]});continue}const d=ts(e,h);for(const e of d){const s=Ao(i,o[e.start],o[e.end],e.loop),c=Ji(t,n,s);for(const t of c)r.push({source:t,target:e,start:{[i]:Oo(h,s,"start",Math.max)},end:{[i]:Oo(h,s,"end",Math.min)}})}}return r}(i,s,n);for(const{source:e,target:h,start:d,end:u}of c){const{style:{backgroundColor:c=o}={}}=e,p=!0!==s;t.save(),t.fillStyle=c,Fo(t,r,p&&Ao(n,d,u)),t.beginPath();const m=!!i.pathSegment(t,e);let b;if(p){m?t.closePath():qo(t,s,u,n);const e=!!s.pathSegment(t,h,{move:m,reverse:!0});b=m&&e,b||qo(t,s,d,n)}t.closePath(),t.fill(b?"evenodd":"nonzero"),t.restore()}}function Fo(t,e,i){const{top:s,bottom:n}=e.chart.chartArea,{property:o,start:r,end:c}=i||{};"x"===o&&(t.beginPath(),t.rect(r,s,c-r,n-s),t.clip())}function qo(t,e,i,s){const n=e.interpolate(i,s);n&&t.lineTo(n.x,n.y)}var jo={id:"filler",afterDatasetsUpdate(t,e,i){const s=(t.data.datasets||[]).length,n=[];let o,r,c,h;for(r=0;r<s;++r)o=t.getDatasetMeta(r),c=o.dataset,h=null,c&&c.options&&c instanceof LineElement&&(h={visible:t.isDatasetVisible(r),index:r,fill:Mo(c,r,s),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:c}),o.$filler=h,n.push(h);for(r=0;r<s;++r)h=n[r],h&&!1!==h.fill&&(h.fill=Io(n,r,i.propagate))},beforeDraw(t,e,i){const s="beforeDraw"===i.drawTime,n=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=n.length-1;e>=0;--e){const i=n[e].$filler;i&&(i.line.updateControlPoints(o,i.axis),s&&i.fill&&Po(t.ctx,i,o))}},beforeDatasetsDraw(t,e,i){if("beforeDatasetsDraw"!==i.drawTime)return;const s=t.getSortedVisibleDatasetMetas();for(let e=s.length-1;e>=0;--e){const i=s[e].$filler;Co(i)&&Po(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,i){const s=e.meta.$filler;Co(s)&&"beforeDatasetDraw"===i.drawTime&&Po(t.ctx,s,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const zo=(t,e)=>{let{boxHeight:i=e,boxWidth:s=e}=t;return t.usePointStyle&&(i=Math.min(i,e),s=t.pointStyleWidth||Math.min(s,e)),{boxWidth:s,boxHeight:i,itemHeight:Math.max(e,i)}};class Legend extends hn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=bt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,i)=>t.sort(e,i,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const i=t.labels,s=li(i.font),n=s.size,o=this._computeTitleHeight(),{boxWidth:r,itemHeight:c}=zo(i,n);let h,d;e.font=s.string,this.isHorizontal()?(h=this.maxWidth,d=this._fitRows(o,n,r,c)+10):(d=this.maxHeight,h=this._fitCols(o,s,r,c)+10),this.width=Math.min(h,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,s){const{ctx:n,maxWidth:o,options:{labels:{padding:r}}}=this,c=this.legendHitBoxes=[],h=this.lineWidths=[0],d=s+r;let u=t;n.textAlign="left",n.textBaseline="middle";let p=-1,m=-d;return this.legendItems.forEach(((t,b)=>{const v=i+e/2+n.measureText(t.text).width;(0===b||h[h.length-1]+v+2*r>o)&&(u+=d,h[h.length-(b>0?0:1)]=0,m+=d,p++),c[b]={left:0,top:m,row:p,width:v,height:s},h[h.length-1]+=v+r})),u}_fitCols(t,e,i,s){const{ctx:n,maxHeight:o,options:{labels:{padding:r}}}=this,c=this.legendHitBoxes=[],h=this.columnSizes=[],d=o-t;let u=r,p=0,m=0,b=0,v=0;return this.legendItems.forEach(((t,o)=>{const{itemWidth:y,itemHeight:E}=function(t,e,i,s,n){const o=function(t,e,i,s){let n=t.text;n&&"string"!=typeof n&&(n=n.reduce(((t,e)=>t.length>e.length?t:e)));return e+i.size/2+s.measureText(n).width}(s,t,e,i),r=function(t,e,i){let s=t;"string"!=typeof e.text&&(s=Vo(e,i));return s}(n,s,e.lineHeight);return{itemWidth:o,itemHeight:r}}(i,e,n,t,s);o>0&&m+E+2*r>d&&(u+=p+r,h.push({width:p,height:m}),b+=p+r,v++,p=m=0),c[o]={left:b,top:m,col:v,width:y,height:E},p=Math.max(p,y),m+=E+r})),u+=p,h.push({width:p,height:m}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:s},rtl:n}}=this,o=Yi(n,this.left,this.width);if(this.isHorizontal()){let n=0,r=be(i,this.left+s,this.right-this.lineWidths[n]);for(const c of e)n!==c.row&&(n=c.row,r=be(i,this.left+s,this.right-this.lineWidths[n])),c.top+=this.top+t+s,c.left=o.leftForLtr(o.x(r),c.width),r+=c.width+s}else{let n=0,r=be(i,this.top+t+s,this.bottom-this.columnSizes[n].height);for(const c of e)c.col!==n&&(n=c.col,r=be(i,this.top+t+s,this.bottom-this.columnSizes[n].height)),c.top=r,c.left+=this.left+s,c.left=o.leftForLtr(o.x(c.left),c.width),r+=c.height+s}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Ge(t,this),this._draw(),We(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:i,ctx:s}=this,{align:n,labels:o}=t,r=Fe.color,c=Yi(t.rtl,this.left,this.width),h=li(o.font),{padding:d}=o,u=h.size,p=u/2;let m;this.drawTitle(),s.textAlign=c.textAlign("left"),s.textBaseline="middle",s.lineWidth=.5,s.font=h.string;const{boxWidth:b,boxHeight:v,itemHeight:y}=zo(o,u),E=this.isHorizontal(),x=this._computeTitleHeight();m=E?{x:be(n,this.left+d,this.right-i[0]),y:this.top+d+x,line:0}:{x:this.left+d,y:be(n,this.top+x+d,this.bottom-e[0].height),line:0},Xi(this.ctx,t.textDirection);const w=y+d;this.legendItems.forEach(((S,O)=>{s.strokeStyle=S.fontColor,s.fillStyle=S.fontColor;const D=s.measureText(S.text).width,M=c.textAlign(S.textAlign||(S.textAlign=o.textAlign)),k=b+p+D;let P=m.x,N=m.y;c.setWidth(this.width),E?O>0&&P+k+d>this.right&&(N=m.y+=w,m.line++,P=m.x=be(n,this.left+d,this.right-i[m.line])):O>0&&N+w>this.bottom&&(P=m.x=P+e[m.line].width+d,m.line++,N=m.y=be(n,this.top+x+d,this.bottom-e[m.line].height));if(function(t,e,i){if(isNaN(b)||b<=0||isNaN(v)||v<0)return;s.save();const n=gt(i.lineWidth,1);if(s.fillStyle=gt(i.fillStyle,r),s.lineCap=gt(i.lineCap,"butt"),s.lineDashOffset=gt(i.lineDashOffset,0),s.lineJoin=gt(i.lineJoin,"miter"),s.lineWidth=n,s.strokeStyle=gt(i.strokeStyle,r),s.setLineDash(gt(i.lineDash,[])),o.usePointStyle){const r={radius:v*Math.SQRT2/2,pointStyle:i.pointStyle,rotation:i.rotation,borderWidth:n},h=c.xPlus(t,b/2);$e(s,r,h,e+p,o.pointStyleWidth&&b)}else{const o=e+Math.max((u-v)/2,0),r=c.leftForLtr(t,b),h=ri(i.borderRadius);s.beginPath(),Object.values(h).some((t=>0!==t))?Je(s,{x:r,y:o,w:b,h:v,radius:h}):s.rect(r,o,b,v),s.fill(),0!==n&&s.stroke()}s.restore()}(c.x(P),N,S),P=((t,e,i,s)=>t===(s?"left":"right")?i:"center"===t?(e+i)/2:e)(M,P+b+p,E?P+k:this.right,t.rtl),function(t,e,i){Ke(s,i.text,t,e+y/2,h,{strikethrough:i.hidden,textAlign:c.textAlign(i.textAlign)})}(c.x(P),N,S),E)m.x+=k+d;else if("string"!=typeof S.text){const t=h.lineHeight;m.y+=Vo(S,t)+d}else m.y+=w})),Qi(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,i=li(e.font),s=ai(e.padding);if(!e.display)return;const n=Yi(t.rtl,this.left,this.width),o=this.ctx,r=e.position,c=i.size/2,h=s.top+c;let d,u=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),d=this.top+h,u=be(t.align,u,this.right-p);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);d=h+be(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const m=be(r,u,u+p);o.textAlign=n.textAlign(me(r)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,Ke(o,e.text,m,d,i)}_computeTitleHeight(){const t=this.options.title,e=li(t.font),i=ai(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,s,n;if(ae(t,this.left,this.right)&&ae(e,this.top,this.bottom))for(n=this.legendHitBoxes,i=0;i<n.length;++i)if(s=n[i],ae(t,s.left,s.left+s.width)&&ae(e,s.top,s.top+s.height))return this.legendItems[i];return null}handleEvent(t){const e=this.options;if(!function(t,e){if(("mousemove"===t||"mouseout"===t)&&(e.onHover||e.onLeave))return!0;if(e.onClick&&("click"===t||"mouseup"===t))return!0;return!1}(t.type,e))return;const i=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const s=this._hoveredItem,n=((t,e)=>null!==t&&null!==e&&t.datasetIndex===e.datasetIndex&&t.index===e.index)(s,i);s&&!n&&bt(e.onLeave,[t,s,this],this),this._hoveredItem=i,i&&!n&&bt(e.onHover,[t,i,this],this)}else i&&bt(e.onClick,[t,i,this],this)}}function Vo(t,e){return e*(t.text?t.text.length:0)}var Ho={id:"legend",_element:Legend,start(t,e,i){const s=t.legend=new Legend({ctx:t.ctx,options:i,chart:t});Ys.configure(t,s,i),Ys.addBox(t,s)},stop(t){Ys.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,i){const s=t.legend;Ys.configure(t,s,i),s.options=i},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,i){const s=e.datasetIndex,n=i.chart;n.isDatasetVisible(s)?(n.hide(s),e.hidden=!0):(n.show(s),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:i,pointStyle:s,textAlign:n,color:o,useBorderRadius:r,borderRadius:c}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const h=t.controller.getStyle(i?0:void 0),d=ai(h.borderWidth);return{text:e[t.index].label,fillStyle:h.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:h.borderCapStyle,lineDash:h.borderDash,lineDashOffset:h.borderDashOffset,lineJoin:h.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:h.borderColor,pointStyle:s||h.pointStyle,rotation:h.rotation,textAlign:n||h.textAlign,borderRadius:r&&(c||h.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Title extends hn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const i=this.options;if(this.left=0,this.top=0,!i.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const s=dt(i.text)?i.text.length:1;this._padding=ai(i.padding);const n=s*li(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:i,bottom:s,right:n,options:o}=this,r=o.align;let c,h,d,u=0;return this.isHorizontal()?(h=be(r,i,n),d=e+t,c=n-i):("left"===o.position?(h=i+t,d=be(r,s,e),u=-.5*Nt):(h=n-t,d=be(r,e,s),u=.5*Nt),c=s-e),{titleX:h,titleY:d,maxWidth:c,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const i=li(e.font),s=i.lineHeight/2+this._padding.top,{titleX:n,titleY:o,maxWidth:r,rotation:c}=this._drawArgs(s);Ke(t,e.text,0,0,i,{color:e.color,maxWidth:r,rotation:c,textAlign:me(e.align),textBaseline:"middle",translation:[n,o]})}}var $o={id:"title",_element:Title,start(t,e,i){!function(t,e){const i=new Title({ctx:t.ctx,options:e,chart:t});Ys.configure(t,i,e),Ys.addBox(t,i),t.titleBlock=i}(t,i)},stop(t){const e=t.titleBlock;Ys.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,i){const s=t.titleBlock;Ys.configure(t,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Uo=new WeakMap;var Go={id:"subtitle",start(t,e,i){const s=new Title({ctx:t.ctx,options:i,chart:t});Ys.configure(t,s,i),Ys.addBox(t,s),Uo.set(t,s)},stop(t){Ys.removeBox(t,Uo.get(t)),Uo.delete(t)},beforeUpdate(t,e,i){const s=Uo.get(t);Ys.configure(t,s,i),s.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Wo={average(t){if(!t.length)return!1;let e,i,s=new Set,n=0,o=0;for(e=0,i=t.length;e<i;++e){const i=t[e].element;if(i&&i.hasValue()){const t=i.tooltipPosition();s.add(t.x),n+=t.y,++o}}if(0===o||0===s.size)return!1;const r=[...s].reduce(((t,e)=>t+e))/s.size;return{x:r,y:n/o}},nearest(t,e){if(!t.length)return!1;let i,s,n,o=e.x,r=e.y,c=Number.POSITIVE_INFINITY;for(i=0,s=t.length;i<s;++i){const s=t[i].element;if(s&&s.hasValue()){const t=ie(e,s.getCenterPoint());t<c&&(c=t,n=s)}}if(n){const t=n.tooltipPosition();o=t.x,r=t.y}return{x:o,y:r}}};function Yo(t,e){return e&&(dt(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Xo(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function Qo(t,e){const{element:i,datasetIndex:s,index:n}=e,o=t.getDatasetMeta(s).controller,{label:r,value:c}=o.getLabelAndValue(n);return{chart:t,label:r,parsed:o.getParsed(n),raw:t.data.datasets[s].data[n],formattedValue:c,dataset:o.getDataset(),dataIndex:n,datasetIndex:s,element:i}}function Zo(t,e){const i=t.chart.ctx,{body:s,footer:n,title:o}=t,{boxWidth:r,boxHeight:c}=e,h=li(e.bodyFont),d=li(e.titleFont),u=li(e.footerFont),p=o.length,m=n.length,b=s.length,v=ai(e.padding);let y=v.height,E=0,x=s.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);if(x+=t.beforeBody.length+t.afterBody.length,p&&(y+=p*d.lineHeight+(p-1)*e.titleSpacing+e.titleMarginBottom),x){y+=b*(e.displayColors?Math.max(c,h.lineHeight):h.lineHeight)+(x-b)*h.lineHeight+(x-1)*e.bodySpacing}m&&(y+=e.footerMarginTop+m*u.lineHeight+(m-1)*e.footerSpacing);let w=0;const S=function(t){E=Math.max(E,i.measureText(t).width+w)};return i.save(),i.font=d.string,vt(t.title,S),i.font=h.string,vt(t.beforeBody.concat(t.afterBody),S),w=e.displayColors?r+2+e.boxPadding:0,vt(s,(t=>{vt(t.before,S),vt(t.lines,S),vt(t.after,S)})),w=0,i.font=u.string,vt(t.footer,S),i.restore(),E+=v.width,{width:E,height:y}}function Ko(t,e,i,s){const{x:n,width:o}=i,{width:r,chartArea:{left:c,right:h}}=t;let d="center";return"center"===s?d=n<=(c+h)/2?"left":"right":n<=o/2?d="left":n>=r-o/2&&(d="right"),function(t,e,i,s){const{x:n,width:o}=s,r=i.caretSize+i.caretPadding;return"left"===t&&n+o+r>e.width||"right"===t&&n-o-r<0||void 0}(d,t,e,i)&&(d="center"),d}function Jo(t,e,i){const s=i.yAlign||e.yAlign||function(t,e){const{y:i,height:s}=e;return i<s/2?"top":i>t.height-s/2?"bottom":"center"}(t,i);return{xAlign:i.xAlign||e.xAlign||Ko(t,e,i,s),yAlign:s}}function tr(t,e,i,s){const{caretSize:n,caretPadding:o,cornerRadius:r}=t,{xAlign:c,yAlign:h}=i,d=n+o,{topLeft:u,topRight:p,bottomLeft:m,bottomRight:b}=ri(r);let v=function(t,e){let{x:i,width:s}=t;return"right"===e?i-=s:"center"===e&&(i-=s/2),i}(e,c);const y=function(t,e,i){let{y:s,height:n}=t;return"top"===e?s+=i:s-="bottom"===e?n+i:n/2,s}(e,h,d);return"center"===h?"left"===c?v+=d:"right"===c&&(v-=d):"left"===c?v-=Math.max(u,m)+n:"right"===c&&(v+=Math.max(p,b)+n),{x:re(v,0,s.width-e.width),y:re(y,0,s.height-e.height)}}function er(t,e,i){const s=ai(i.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-s.right:t.x+s.left}function ir(t){return Yo([],Xo(t))}function sr(t,e){const i=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return i?t.override(i):t}const nr={beforeTitle:lt,title(t){if(t.length>0){const e=t[0],i=e.chart.data.labels,s=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(s>0&&e.dataIndex<s)return i[e.dataIndex]}return""},afterTitle:lt,beforeBody:lt,beforeLabel:lt,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const i=t.formattedValue;return ht(i)||(e+=i),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:lt,afterBody:lt,beforeFooter:lt,footer:lt,afterFooter:lt};function or(t,e,i,s){const n=t[e].call(i,s);return void 0===n?nr[e].call(i,s):n}let rr=class Tooltip extends hn{static positioners=Wo;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,i=this.options.setContext(this.getContext()),s=i.enabled&&e.options.animation&&i.animations,n=new Animations(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=(t=this.chart.getContext(),e=this,i=this._tooltipItems,hi(t,{tooltip:e,tooltipItems:i,type:"tooltip"})));var t,e,i}getTitle(t,e){const{callbacks:i}=e,s=or(i,"beforeTitle",this,t),n=or(i,"title",this,t),o=or(i,"afterTitle",this,t);let r=[];return r=Yo(r,Xo(s)),r=Yo(r,Xo(n)),r=Yo(r,Xo(o)),r}getBeforeBody(t,e){return ir(or(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:i}=e,s=[];return vt(t,(t=>{const e={before:[],lines:[],after:[]},n=sr(i,t);Yo(e.before,Xo(or(n,"beforeLabel",this,t))),Yo(e.lines,or(n,"label",this,t)),Yo(e.after,Xo(or(n,"afterLabel",this,t))),s.push(e)})),s}getAfterBody(t,e){return ir(or(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:i}=e,s=or(i,"beforeFooter",this,t),n=or(i,"footer",this,t),o=or(i,"afterFooter",this,t);let r=[];return r=Yo(r,Xo(s)),r=Yo(r,Xo(n)),r=Yo(r,Xo(o)),r}_createItems(t){const e=this._active,i=this.chart.data,s=[],n=[],o=[];let r,c,h=[];for(r=0,c=e.length;r<c;++r)h.push(Qo(this.chart,e[r]));return t.filter&&(h=h.filter(((e,s,n)=>t.filter(e,s,n,i)))),t.itemSort&&(h=h.sort(((e,s)=>t.itemSort(e,s,i)))),vt(h,(e=>{const i=sr(t.callbacks,e);s.push(or(i,"labelColor",this,e)),n.push(or(i,"labelPointStyle",this,e)),o.push(or(i,"labelTextColor",this,e))})),this.labelColors=s,this.labelPointStyles=n,this.labelTextColors=o,this.dataPoints=h,h}update(t,e){const i=this.options.setContext(this.getContext()),s=this._active;let n,o=[];if(s.length){const t=Wo[i.position].call(this,s,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const e=this._size=Zo(this,i),r=Object.assign({},t,e),c=Jo(this.chart,i,r),h=tr(i,r,c,this.chart);this.xAlign=c.xAlign,this.yAlign=c.yAlign,n={opacity:1,x:h.x,y:h.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(n={opacity:0});this._tooltipItems=o,this.$context=void 0,n&&this._resolveAnimations().update(this,n),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,s){const n=this.getCaretPosition(t,i,s);e.lineTo(n.x1,n.y1),e.lineTo(n.x2,n.y2),e.lineTo(n.x3,n.y3)}getCaretPosition(t,e,i){const{xAlign:s,yAlign:n}=this,{caretSize:o,cornerRadius:r}=i,{topLeft:c,topRight:h,bottomLeft:d,bottomRight:u}=ri(r),{x:p,y:m}=t,{width:b,height:v}=e;let y,E,x,w,S,O;return"center"===n?(S=m+v/2,"left"===s?(y=p,E=y-o,w=S+o,O=S-o):(y=p+b,E=y+o,w=S-o,O=S+o),x=y):(E="left"===s?p+Math.max(c,d)+o:"right"===s?p+b-Math.max(h,u)-o:this.caretX,"top"===n?(w=m,S=w-o,y=E-o,x=E+o):(w=m+v,S=w+o,y=E+o,x=E-o),O=w),{x1:y,x2:E,x3:x,y1:w,y2:S,y3:O}}drawTitle(t,e,i){const s=this.title,n=s.length;let o,r,c;if(n){const h=Yi(i.rtl,this.x,this.width);for(t.x=er(this,i.titleAlign,i),e.textAlign=h.textAlign(i.titleAlign),e.textBaseline="middle",o=li(i.titleFont),r=i.titleSpacing,e.fillStyle=i.titleColor,e.font=o.string,c=0;c<n;++c)e.fillText(s[c],h.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+r,c+1===n&&(t.y+=i.titleMarginBottom-r)}}_drawColorBox(t,e,i,s,n){const o=this.labelColors[i],r=this.labelPointStyles[i],{boxHeight:c,boxWidth:h}=n,d=li(n.bodyFont),u=er(this,"left",n),p=s.x(u),m=c<d.lineHeight?(d.lineHeight-c)/2:0,b=e.y+m;if(n.usePointStyle){const e={radius:Math.min(h,c)/2,pointStyle:r.pointStyle,rotation:r.rotation,borderWidth:1},i=s.leftForLtr(p,h)+h/2,d=b+c/2;t.strokeStyle=n.multiKeyBackground,t.fillStyle=n.multiKeyBackground,He(t,e,i,d),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,He(t,e,i,d)}else{t.lineWidth=ut(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=s.leftForLtr(p,h),i=s.leftForLtr(s.xPlus(p,1),h-2),r=ri(o.borderRadius);Object.values(r).some((t=>0!==t))?(t.beginPath(),t.fillStyle=n.multiKeyBackground,Je(t,{x:e,y:b,w:h,h:c,radius:r}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Je(t,{x:i,y:b+1,w:h-2,h:c-2,radius:r}),t.fill()):(t.fillStyle=n.multiKeyBackground,t.fillRect(e,b,h,c),t.strokeRect(e,b,h,c),t.fillStyle=o.backgroundColor,t.fillRect(i,b+1,h-2,c-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){const{body:s}=this,{bodySpacing:n,bodyAlign:o,displayColors:r,boxHeight:c,boxWidth:h,boxPadding:d}=i,u=li(i.bodyFont);let p=u.lineHeight,m=0;const b=Yi(i.rtl,this.x,this.width),v=function(i){e.fillText(i,b.x(t.x+m),t.y+p/2),t.y+=p+n},y=b.textAlign(o);let E,x,w,S,O,D,M;for(e.textAlign=o,e.textBaseline="middle",e.font=u.string,t.x=er(this,y,i),e.fillStyle=i.bodyColor,vt(this.beforeBody,v),m=r&&"right"!==y?"center"===o?h/2+d:h+2+d:0,S=0,D=s.length;S<D;++S){for(E=s[S],x=this.labelTextColors[S],e.fillStyle=x,vt(E.before,v),w=E.lines,r&&w.length&&(this._drawColorBox(e,t,S,b,i),p=Math.max(u.lineHeight,c)),O=0,M=w.length;O<M;++O)v(w[O]),p=u.lineHeight;vt(E.after,v)}m=0,p=u.lineHeight,vt(this.afterBody,v),t.y-=n}drawFooter(t,e,i){const s=this.footer,n=s.length;let o,r;if(n){const c=Yi(i.rtl,this.x,this.width);for(t.x=er(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=c.textAlign(i.footerAlign),e.textBaseline="middle",o=li(i.footerFont),e.fillStyle=i.footerColor,e.font=o.string,r=0;r<n;++r)e.fillText(s[r],c.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+i.footerSpacing}}drawBackground(t,e,i,s){const{xAlign:n,yAlign:o}=this,{x:r,y:c}=t,{width:h,height:d}=i,{topLeft:u,topRight:p,bottomLeft:m,bottomRight:b}=ri(s.cornerRadius);e.fillStyle=s.backgroundColor,e.strokeStyle=s.borderColor,e.lineWidth=s.borderWidth,e.beginPath(),e.moveTo(r+u,c),"top"===o&&this.drawCaret(t,e,i,s),e.lineTo(r+h-p,c),e.quadraticCurveTo(r+h,c,r+h,c+p),"center"===o&&"right"===n&&this.drawCaret(t,e,i,s),e.lineTo(r+h,c+d-b),e.quadraticCurveTo(r+h,c+d,r+h-b,c+d),"bottom"===o&&this.drawCaret(t,e,i,s),e.lineTo(r+m,c+d),e.quadraticCurveTo(r,c+d,r,c+d-m),"center"===o&&"left"===n&&this.drawCaret(t,e,i,s),e.lineTo(r,c+u),e.quadraticCurveTo(r,c,r+u,c),e.closePath(),e.fill(),s.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,i=this.$animations,s=i&&i.x,n=i&&i.y;if(s||n){const i=Wo[t.position].call(this,this._active,this._eventPosition);if(!i)return;const o=this._size=Zo(this,t),r=Object.assign({},i,this._size),c=Jo(e,t,r),h=tr(t,r,c,e);s._to===h.x&&n._to===h.y||(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=o.width,this.height=o.height,this.caretX=i.x,this.caretY=i.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(e);const s={width:this.width,height:this.height},n={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=ai(e.padding),r=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&r&&(t.save(),t.globalAlpha=i,this.drawBackground(n,t,s,e),Xi(t,e.textDirection),n.y+=o.top,this.drawTitle(n,t,e),this.drawBody(n,t,e),this.drawFooter(n,t,e),Qi(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const i=this._active,s=t.map((({datasetIndex:t,index:e})=>{const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[e],index:e}})),n=!yt(i,s),o=this._positionChanged(s,e);(n||o)&&(this._active=s,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const s=this.options,n=this._active||[],o=this._getActiveElements(t,n,e,i),r=this._positionChanged(o,t),c=e||!yt(o,n)||r;return c&&(this._active=o,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),c}_getActiveElements(t,e,i,s){const n=this.options;if("mouseout"===t.type)return[];if(!s)return e.filter((t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index)));const o=this.chart.getElementsAtEventForMode(t,n.mode,n,i);return n.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:i,caretY:s,options:n}=this,o=Wo[n.position].call(this,t,e);return!1!==o&&(i!==o.x||s!==o.y)}};var ar={id:"tooltip",_element:rr,positioners:Wo,afterInit(t,e,i){i&&(t.tooltip=new rr({chart:t,options:i}))},beforeUpdate(t,e,i){t.tooltip&&t.tooltip.initialize(i)},reset(t,e,i){t.tooltip&&t.tooltip.initialize(i)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const i={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...i,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",i)}},afterEvent(t,e){if(t.tooltip){const i=e.replay;t.tooltip.handleEvent(e.event,i,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:nr},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},lr=Object.freeze({__proto__:null,Colors:_o,Decimation:To,Filler:jo,Legend:Ho,SubTitle:Go,Title:$o,Tooltip:ar});function cr(t,e,i,s){const n=t.indexOf(e);if(-1===n)return((t,e,i,s)=>("string"==typeof e?(i=t.push(e)-1,s.unshift({index:i,label:e})):isNaN(e)&&(i=null),i))(t,e,i,s);return n!==t.lastIndexOf(e)?i:n}function hr(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function dr(t,e){const i=[],{bounds:s,step:n,min:o,max:r,precision:c,count:h,maxTicks:d,maxDigits:u,includeBounds:p}=t,m=n||1,b=d-1,{min:v,max:y}=e,E=!ht(o),x=!ht(r),w=!ht(h),S=(y-v)/(u+1);let O,D,M,k,P=Wt((y-v)/b/m)*m;if(P<1e-14&&!E&&!x)return[{value:v},{value:y}];k=Math.ceil(y/P)-Math.floor(v/P),k>b&&(P=Wt(k*P/b/m)*m),ht(c)||(O=Math.pow(10,c),P=Math.ceil(P*O)/O),"ticks"===s?(D=Math.floor(v/P)*P,M=Math.ceil(y/P)*P):(D=v,M=y),E&&x&&n&&function(t,e){const i=Math.round(t);return i-e<=t&&i+e>=t}((r-o)/n,P/1e3)?(k=Math.round(Math.min((r-o)/P,d)),P=(r-o)/k,D=o,M=r):w?(D=E?o:D,M=x?r:M,k=h-1,P=(M-D)/k):(k=(M-D)/P,k=Gt(k,Math.round(k),P/1e3)?Math.round(k):Math.ceil(k));const N=Math.max(te(P),te(D));O=Math.pow(10,ht(c)?N:c),D=Math.round(D*O)/O,M=Math.round(M*O)/O;let B=0;for(E&&(p&&D!==o?(i.push({value:o}),D<o&&B++,Gt(Math.round((D+B*P)*O)/O,o,ur(o,S,t))&&B++):D<o&&B++);B<k;++B){const t=Math.round((D+B*P)*O)/O;if(x&&t>r)break;i.push({value:t})}return x&&p&&M!==r?i.length&&Gt(i[i.length-1].value,r,ur(r,S,t))?i[i.length-1].value=r:i.push({value:r}):x&&M!==r||i.push({value:M}),i}function ur(t,e,{horizontal:i,minRotation:s}){const n=Kt(s),o=(i?Math.sin(n):Math.cos(n))||.001,r=.75*e*(""+t).length;return Math.min(e/o,r)}class LinearScaleBase extends Scale{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ht(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds();let{min:s,max:n}=this;const o=t=>s=e?s:t,r=t=>n=i?n:t;if(t){const t=Ut(s),e=Ut(n);t<0&&e<0?r(0):t>0&&e>0&&o(0)}if(s===n){let e=0===n?1:Math.abs(.05*n);r(n+e),t||o(s-e)}this.min=s,this.max=n}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:i,stepSize:s}=t;return s?(e=Math.ceil(this.max/s)-Math.floor(this.min/s)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${s} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),i=i||11),i&&(e=Math.min(i,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let i=this.getTickLimit();i=Math.max(2,i);const s=dr({maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&Zt(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const t=this.ticks;let e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){const s=(i-e)/Math.max(t.length-1,1)/2;e-=s,i+=s}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Me(t,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{static id="linear";static defaults={ticks:{callback:ke.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=pt(t)?t:0,this.max=pt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,i=Kt(this.options.ticks.minRotation),s=(t?Math.sin(i):Math.cos(i))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,n.lineHeight/s))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const pr=t=>Math.floor($t(t)),fr=(t,e)=>Math.pow(10,pr(t)+e);function gr(t){return 1===t/Math.pow(10,pr(t))}function mr(t,e,i){const s=Math.pow(10,i),n=Math.floor(t/s);return Math.ceil(e/s)-n}function br(t,{min:e,max:i}){e=ft(t.min,e);const s=[],n=pr(e);let o=function(t,e){let i=pr(e-t);for(;mr(t,e,i)>10;)i++;for(;mr(t,e,i)<10;)i--;return Math.min(i,pr(t))}(e,i),r=o<0?Math.pow(10,Math.abs(o)):1;const c=Math.pow(10,o),h=n>o?Math.pow(10,n):0,d=Math.round((e-h)*r)/r,u=Math.floor((e-h)/c/10)*c*10;let p=Math.floor((d-u)/Math.pow(10,o)),m=ft(t.min,Math.round((h+u+p*Math.pow(10,o))*r)/r);for(;m<i;)s.push({value:m,major:gr(m),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(o++,p=2,r=o>=0?1:r),m=Math.round((h+u+p*Math.pow(10,o))*r)/r;const b=ft(t.max,m);return s.push({value:b,major:gr(b),significand:p}),s}class LogarithmicScale extends Scale{static id="logarithmic";static defaults={ticks:{callback:ke.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const i=LinearScaleBase.prototype.parse.apply(this,[t,e]);if(0!==i)return pt(i)&&i>0?i:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=pt(t)?Math.max(0,t):null,this.max=pt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!pt(this._userMin)&&(this.min=t===fr(this.min,0)?fr(this.min,-1):fr(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let i=this.min,s=this.max;const n=e=>i=t?i:e,o=t=>s=e?s:t;i===s&&(i<=0?(n(1),o(10)):(n(fr(i,-1)),o(fr(s,1)))),i<=0&&n(fr(s,-1)),s<=0&&o(fr(i,1)),this.min=i,this.max=s}buildTicks(){const t=this.options,e=br({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&Zt(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":Me(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=$t(t),this._valueRange=$t(this.max)-$t(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:($t(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function vr(t){const e=t.ticks;if(e.display&&t.display){const t=ai(e.backdropPadding);return gt(e.font&&e.font.size,Fe.font.size)+t.height}return 0}function yr(t,e,i,s,n){return t===s||t===n?{start:e-i/2,end:e+i/2}:t<s||t>n?{start:e-i,end:e}:{start:e,end:e+i}}function Er(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},i=Object.assign({},e),s=[],n=[],o=t._pointLabels.length,r=t.options.pointLabels,c=r.centerPointLabels?Nt/o:0;for(let p=0;p<o;p++){const o=r.setContext(t.getPointLabelContext(p));n[p]=o.padding;const m=t.getPointPosition(p,t.drawingArea+n[p],c),b=li(o.font),v=(h=t.ctx,d=b,u=dt(u=t._pointLabels[p])?u:[u],{w:je(h,d.string,u),h:u.length*d.lineHeight});s[p]=v;const y=ne(t.getIndexAngle(p)+c),E=Math.round(Jt(y));_r(i,e,y,yr(E,m.x,v.w,0,180),yr(E,m.y,v.h,90,270))}var h,d,u;t.setCenterPoint(e.l-i.l,i.r-e.r,e.t-i.t,i.b-e.b),t._pointLabelItems=function(t,e,i){const s=[],n=t._pointLabels.length,o=t.options,{centerPointLabels:r,display:c}=o.pointLabels,h={extra:vr(o)/2,additionalAngle:r?Nt/n:0};let d;for(let o=0;o<n;o++){h.padding=i[o],h.size=e[o];const n=xr(t,o,h);s.push(n),"auto"===c&&(n.visible=wr(n,d),n.visible&&(d=n))}return s}(t,s,n)}function _r(t,e,i,s,n){const o=Math.abs(Math.sin(i)),r=Math.abs(Math.cos(i));let c=0,h=0;s.start<e.l?(c=(e.l-s.start)/o,t.l=Math.min(t.l,e.l-c)):s.end>e.r&&(c=(s.end-e.r)/o,t.r=Math.max(t.r,e.r+c)),n.start<e.t?(h=(e.t-n.start)/r,t.t=Math.min(t.t,e.t-h)):n.end>e.b&&(h=(n.end-e.b)/r,t.b=Math.max(t.b,e.b+h))}function xr(t,e,i){const s=t.drawingArea,{extra:n,additionalAngle:o,padding:r,size:c}=i,h=t.getPointPosition(e,s+n+r,o),d=Math.round(Jt(ne(h.angle+zt))),u=function(t,e,i){90===i||270===i?t-=e/2:(i>270||i<90)&&(t-=e);return t}(h.y,c.h,d),p=function(t){if(0===t||180===t)return"center";if(t<180)return"left";return"right"}(d),m=function(t,e,i){"right"===i?t-=e:"center"===i&&(t-=e/2);return t}(h.x,c.w,p);return{visible:!0,x:h.x,y:u,textAlign:p,left:m,top:u,right:m+c.w,bottom:u+c.h}}function wr(t,e){if(!e)return!0;const{left:i,top:s,right:n,bottom:o}=t;return!(Ue({x:i,y:s},e)||Ue({x:i,y:o},e)||Ue({x:n,y:s},e)||Ue({x:n,y:o},e))}function Tr(t,e,i){const{left:s,top:n,right:o,bottom:r}=i,{backdropColor:c}=e;if(!ht(c)){const i=ri(e.borderRadius),h=ai(e.backdropPadding);t.fillStyle=c;const d=s-h.left,u=n-h.top,p=o-s+h.width,m=r-n+h.height;Object.values(i).some((t=>0!==t))?(t.beginPath(),Je(t,{x:d,y:u,w:p,h:m,radius:i}),t.fill()):t.fillRect(d,u,p,m)}}function Ar(t,e,i,s){const{ctx:n}=t;if(i)n.arc(t.xCenter,t.yCenter,e,0,Bt);else{let i=t.getPointPosition(0,e);n.moveTo(i.x,i.y);for(let o=1;o<s;o++)i=t.getPointPosition(o,e),n.lineTo(i.x,i.y)}}class RadialLinearScale extends LinearScaleBase{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ke.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ai(vr(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=pt(t)&&!isNaN(t)?t:0,this.max=pt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/vr(this.options))}generateTickLabels(t){LinearScaleBase.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const i=bt(this.options.pointLabels.callback,[t,e],this);return i||0===i?i:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?Er(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,s){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-s)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,s))}getIndexAngle(t){return ne(t*(Bt/(this._pointLabels.length||1))+Kt(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(ht(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(ht(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const i=e[t];return function(t,e,i){return hi(t,{label:i,index:e,type:"pointLabel"})}(this.getContext(),t,i)}}getPointPosition(t,e,i=0){const s=this.getIndexAngle(t)-zt+i;return{x:Math.cos(s)*e+this.xCenter,y:Math.sin(s)*e+this.yCenter,angle:s}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:i,right:s,bottom:n}=this._pointLabelItems[t];return{left:e,top:i,right:s,bottom:n}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const i=this.ctx;i.save(),i.beginPath(),Ar(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:i,grid:s,border:n}=e,o=this._pointLabels.length;let r,c,h;if(e.pointLabels.display&&function(t,e){const{ctx:i,options:{pointLabels:s}}=t;for(let n=e-1;n>=0;n--){const e=t._pointLabelItems[n];if(!e.visible)continue;const o=s.setContext(t.getPointLabelContext(n));Tr(i,o,e);const r=li(o.font),{x:c,y:h,textAlign:d}=e;Ke(i,t._pointLabels[n],c,h+r.lineHeight/2,r,{color:o.color,textAlign:d,textBaseline:"middle"})}}(this,o),s.display&&this.ticks.forEach(((t,e)=>{if(0!==e||0===e&&this.min<0){c=this.getDistanceFromCenterForValue(t.value);const i=this.getContext(e),r=s.setContext(i),h=n.setContext(i);!function(t,e,i,s,n){const o=t.ctx,r=e.circular,{color:c,lineWidth:h}=e;!r&&!s||!c||!h||i<0||(o.save(),o.strokeStyle=c,o.lineWidth=h,o.setLineDash(n.dash),o.lineDashOffset=n.dashOffset,o.beginPath(),Ar(t,i,r,s),o.closePath(),o.stroke(),o.restore())}(this,r,c,o,h)}})),i.display){for(t.save(),r=o-1;r>=0;r--){const s=i.setContext(this.getPointLabelContext(r)),{color:n,lineWidth:o}=s;o&&n&&(t.lineWidth=o,t.strokeStyle=n,t.setLineDash(s.borderDash),t.lineDashOffset=s.borderDashOffset,c=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),h=this.getPointPosition(r,c),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(h.x,h.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;const s=this.getIndexAngle(0);let n,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(s),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((s,r)=>{if(0===r&&this.min>=0&&!e.reverse)return;const c=i.setContext(this.getContext(r)),h=li(c.font);if(n=this.getDistanceFromCenterForValue(this.ticks[r].value),c.showLabelBackdrop){t.font=h.string,o=t.measureText(s.label).width,t.fillStyle=c.backdropColor;const e=ai(c.backdropPadding);t.fillRect(-o/2-e.left,-n-h.size/2-e.top,o+e.width,h.size+e.height)}Ke(t,s.label,0,-n,h,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})})),t.restore()}drawTitle(){}}const Sr={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Or=Object.keys(Sr);function Dr(t,e){return t-e}function Cr(t,e){if(ht(e))return null;const i=t._adapter,{parser:s,round:n,isoWeekday:o}=t._parseOpts;let r=e;return"function"==typeof s&&(r=s(r)),pt(r)||(r="string"==typeof s?i.parse(r,s):i.parse(r)),null===r?null:(n&&(r="week"!==n||!Xt(o)&&!0!==o?i.startOf(r,n):i.startOf(r,"isoWeek",o)),+r)}function Ir(t,e,i,s){const n=Or.length;for(let o=Or.indexOf(t);o<n-1;++o){const t=Sr[Or[o]],n=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((i-e)/(n*t.size))<=s)return Or[o]}return Or[n-1]}function Mr(t,e,i){if(i){if(i.length){const{lo:s,hi:n}=le(i,e);t[i[s]>=e?i[s]:i[n]]=!0}}else t[e]=!0}function Lr(t,e,i){const s=[],n={},o=e.length;let r,c;for(r=0;r<o;++r)c=e[r],n[c]=r,s.push({value:c,major:!1});return 0!==o&&i?function(t,e,i,s){const n=t._adapter,o=+n.startOf(e[0].value,s),r=e[e.length-1].value;let c,h;for(c=o;c<=r;c=+n.add(c,1,s))h=i[c],h>=0&&(e[h].major=!0);return e}(t,s,n,i):s}class TimeScale extends Scale{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const i=t.time||(t.time={}),s=this._adapter=new Ds(t.adapters.date);s.init(e),At(i.displayFormats,s.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:Cr(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,i=t.time.unit||"day";let{min:s,max:n,minDefined:o,maxDefined:r}=this.getUserBounds();function c(t){o||isNaN(t.min)||(s=Math.min(s,t.min)),r||isNaN(t.max)||(n=Math.max(n,t.max))}o&&r||(c(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||c(this.getMinMax(!1))),s=pt(s)&&!isNaN(s)?s:+e.startOf(Date.now(),i),n=pt(n)&&!isNaN(n)?n:+e.endOf(Date.now(),i)+1,this.min=Math.min(s,n-1),this.max=Math.max(s+1,n)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){const t=this.options,e=t.time,i=t.ticks,s="labels"===i.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);const n=this.min,o=function(t,e,i){let s=0,n=t.length;for(;s<n&&t[s]<e;)s++;for(;n>s&&t[n-1]>i;)n--;return s>0||n<t.length?t.slice(s,n):t}(s,n,this.max);return this._unit=e.unit||(i.autoSkip?Ir(e.minUnit,this.min,this.max,this._getLabelCapacity(n)):function(t,e,i,s,n){for(let o=Or.length-1;o>=Or.indexOf(i);o--){const i=Or[o];if(Sr[i].common&&t._adapter.diff(n,s,i)>=e-1)return i}return Or[i?Or.indexOf(i):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=i.major.enabled&&"year"!==this._unit?function(t){for(let e=Or.indexOf(t)+1,i=Or.length;e<i;++e)if(Sr[Or[e]].common)return Or[e]}(this._unit):void 0,this.initOffsets(s),t.reverse&&o.reverse(),Lr(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t=[]){let e,i,s=0,n=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),s=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,i=this.getDecimalForValue(t[t.length-1]),n=1===t.length?i:(i-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;s=re(s,0,o),n=re(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const t=this._adapter,e=this.min,i=this.max,s=this.options,n=s.time,o=n.unit||Ir(n.minUnit,e,i,this._getLabelCapacity(e)),r=gt(s.ticks.stepSize,1),c="week"===o&&n.isoWeekday,h=Xt(c)||!0===c,d={};let u,p,m=e;if(h&&(m=+t.startOf(m,"isoWeek",c)),m=+t.startOf(m,h?"day":o),t.diff(i,e,o)>1e5*r)throw new Error(e+" and "+i+" are too far apart with stepSize of "+r+" "+o);const b="data"===s.ticks.source&&this.getDataTimestamps();for(u=m,p=0;u<i;u=+t.add(u,r,o),p++)Mr(d,u,b);return u!==i&&"ticks"!==s.bounds&&1!==p||Mr(d,u,b),Object.keys(d).sort(Dr).map((t=>+t))}getLabelForValue(t){const e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,s=this._unit,n=e||i[s];return this._adapter.format(t,n)}_tickFormatFunction(t,e,i,s){const n=this.options,o=n.ticks.callback;if(o)return bt(o,[t,e,i],this);const r=n.time.displayFormats,c=this._unit,h=this._majorUnit,d=c&&r[c],u=h&&r[h],p=i[e],m=h&&u&&p&&p.major;return this._adapter.format(t,s||(m?u:d))}generateTickLabels(t){let e,i,s;for(e=0,i=t.length;e<i;++e)s=t[e],s.label=this._tickFormatFunction(s.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,i=this.ctx.measureText(t).width,s=Kt(this.isHorizontal()?e.maxRotation:e.minRotation),n=Math.cos(s),o=Math.sin(s),r=this._resolveTickFontOptions(0).size;return{w:i*n+r*o,h:i*o+r*n}}_getLabelCapacity(t){const e=this.options.time,i=e.displayFormats,s=i[e.unit]||i.millisecond,n=this._tickFormatFunction(t,0,Lr(this,[t],this._majorUnit),s),o=this._getLabelSize(n),r=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return r>0?r:1}getDataTimestamps(){let t,e,i=this._cache.data||[];if(i.length)return i;const s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(t=0,e=s.length;t<e;++t)i=i.concat(s[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(i)}getLabelTimestamps(){const t=this._cache.labels||[];let e,i;if(t.length)return t;const s=this.getLabels();for(e=0,i=s.length;e<i;++e)t.push(Cr(this,s[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return pe(t.sort(Dr))}}function kr(t,e,i){let s,n,o,r,c=0,h=t.length-1;i?(e>=t[c].pos&&e<=t[h].pos&&({lo:c,hi:h}=ce(t,"pos",e)),({pos:s,time:o}=t[c]),({pos:n,time:r}=t[h])):(e>=t[c].time&&e<=t[h].time&&({lo:c,hi:h}=ce(t,"time",e)),({time:s,pos:o}=t[c]),({time:n,pos:r}=t[h]));const d=n-s;return d?o+(r-o)*(e-s)/d:o}var Rr=Object.freeze({__proto__:null,CategoryScale:class CategoryScale extends Scale{static id="category";static defaults={ticks:{callback:hr}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:i,label:s}of e)t[i]===s&&t.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(ht(t))return null;const i=this.getLabels();return((t,e)=>null===t?null:re(Math.round(t),0,e))(e=isFinite(e)&&i[e]===t?e:cr(i,t,gt(e,t),this._addedLabels),i.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:i,max:s}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(i=0),e||(s=this.getLabels().length-1)),this.min=i,this.max=s}buildTicks(){const t=this.min,e=this.max,i=this.options.offset,s=[];let n=this.getLabels();n=0===t&&e===n.length-1?n:n.slice(t,e+1),this._valueRange=Math.max(n.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let i=t;i<=e;i++)s.push({value:i});return s}getLabelForValue(t){return hr.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:LinearScale,LogarithmicScale:LogarithmicScale,RadialLinearScale:RadialLinearScale,TimeScale:TimeScale,TimeSeriesScale:class TimeSeriesScale extends TimeScale{static id="timeseries";static defaults=TimeScale.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=kr(e,this.min),this._tableRange=kr(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:i}=this,s=[],n=[];let o,r,c,h,d;for(o=0,r=t.length;o<r;++o)h=t[o],h>=e&&h<=i&&s.push(h);if(s.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,r=s.length;o<r;++o)d=s[o+1],c=s[o-1],h=s[o],Math.round((d+c)/2)!==h&&n.push({time:h,pos:o/(r-1)});return n}_generate(){const t=this.min,e=this.max;let i=super.getDataTimestamps();return i.includes(t)&&i.length||i.splice(0,0,t),i.includes(e)&&1!==i.length||i.push(e),i.sort(((t,e)=>t-e))}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),i=this.getLabelTimestamps();return t=e.length&&i.length?this.normalize(e.concat(i)):e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(kr(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return kr(this._table,i*this._tableRange+this._minPos,!0)}}});const Pr=[Ss,fo,lr,Rr];function Nr(t,e=null,i=20){if(!t)return!1;let s=1;const n=setInterval((()=>{s<=0&&(clearInterval(n),e instanceof Function?e(t):t.remove()),t.style.opacity=s.toFixed(1),s-=.1}),i)}Chart.register(...Pr),window?.Engine?.theme?.color&&(Chart.defaults.backgroundColor=window.Engine.theme.color.box,Chart.defaults.borderColor=window.Engine.theme.color.border,Chart.defaults.color=window.Engine.theme.color.textMuted),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll(".chart").forEach((t=>{let e=t.textContent.trim();if(!function(t){let e="string"!=typeof t?JSON.stringify(t):t;try{e=JSON.parse(e)}catch(t){return!1}return"object"==typeof e&&null!==e}(e))return!1;if(e=JSON.parse(e),!e||!e.type||!e.data)return!1;const i=new Chart(t,e);t.instance=i}))}));class DataAction{constructor(t,e={}){this.node=t,this.options=e,this.action=this.node.getAttribute("data-action"),this.method=this.node.getAttribute("data-method")||"POST","get"===this.method.toLowerCase()&&(this.method="POST"),this.dataEvent=this.node.getAttribute("data-event")||"click",this.dataConfirm=this.node.getAttribute("data-confirm"),this.dataBody=this.node.getAttribute("data-body")||"[]",this.dataUnsetNull=!!this.node.hasAttribute("data-unset-null"),this.dataClass=this.node.getAttribute("data-class")||"submit",this.dataClassTarget=this.node.getAttribute("data-class-target"),this.dataRedirect=this.node.getAttribute("data-redirect"),this.dataIncrement=this.node.getAttribute("data-increment"),this.dataDecrement=this.node.getAttribute("data-decrement"),this.dataRemove=this.node.getAttribute("data-remove"),this.dataMessage=this.node.getAttribute("data-message"),this.api={delayMs:this.node.getAttribute("data-delay")?parseInt(this.node.getAttribute("data-delay"),10):this.options?.backend?.delayMs||500,timeoutMs:this.node.getAttribute("data-timeout")?parseInt(this.node.getAttribute("data-timeout"),10):this.options?.backend?.timeoutMs||15e3},this.action&&this.initialize()}initialize(){this.node.addEventListener(this.dataEvent,(async e=>{e.preventDefault(),e.stopImmediatePropagation();if(!await this.checkConfirmation())return!1;this.disableNodes();const i=await c(this.action,{headers:{},method:this.method,body:this.getFormData()},this.api.timeoutMs,this.api.delayMs);if("success"===i.status){this.successRedirect(i)||(this.successCounters(),this.successRemoveNodes(),t(this.dataMessage||i.message,i.status))}else t(i.message,i.status);this.enableNodes()}))}async checkConfirmation(){if(!this.dataConfirm)return!0;let t=!1;return t=await o(this.dataConfirm),t}getFormData(){const t=new FormData;let e=function(t){return!!/^[\],:{}\s]*$/.test(t.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))}(this.dataBody)?JSON.parse(this.dataBody):[];return function(t){return!!t&&t.constructor===Array}(e)&&(e={...e}),Object.keys(e).forEach((i=>{const s=e[i]||null;if(this.dataUnsetNull&&null===s)return!1;t.set(i,s)})),this.options?.csrf&&t.set(this.options.csrf.key,this.options.csrf.token),t}disableNodes(){return this.node.setAttribute("disabled","disabled"),this.node.classList.add("submit"),this.dataClass&&this.dataClassTarget?document.querySelectorAll(this.dataClassTarget).forEach((t=>{t.classList.add(this.dataClass)})):this.dataClass&&this.node.classList.add(this.dataClass),!0}enableNodes(){return this.node.removeAttribute("disabled","disabled"),this.node.classList.remove("submit"),this.dataClass&&this.dataClassTarget?document.querySelectorAll(this.dataClassTarget).forEach((t=>{t.classList.remove(this.dataClass)})):this.dataClass&&this.node.classList.remove(this.dataClass),!0}successRedirect(t){return"this"===this.dataRedirect?document.location.reload():this.dataRedirect&&(window.location.href=decodeURI(this.dataRedirect).replaceAll(/(\$[\w\d\-_]+)/g,t?.data)),!!this.dataRedirect}successCounters(){this.dataIncrement&&document.querySelectorAll(this.dataIncrement).forEach((t=>{const e=parseInt(t.textContent,10);t.textContent=e+1})),this.dataDecrement&&document.querySelectorAll(this.dataDecrement).forEach((t=>{const e=parseInt(t.textContent,10);t.textContent=e-1}))}successRemoveNodes(){if(!this.dataRemove)return!1;if("this"===this.dataRemove)return Nr(this.node),!0;if("trow"===this.dataRemove){return Nr(this.node.closest("tr"),(t=>{const e=t.parentNode;t.remove(),0===e.childElementCount&&window.location.reload()})),!0}return document.querySelectorAll(this.dataRemove).forEach((t=>{Nr(t)})),!0}}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("[data-action]").forEach((t=>{const e=new DataAction(t,window.Engine);t.dataAction=e}))}));const Br=(t,e=1e4)=>(t=parseFloat(t+"")||0,Math.round((t+Number.EPSILON)*e)/e),Fr=function(t){if(!(t&&t instanceof Element&&t.offsetParent))return!1;const e=t.scrollHeight>t.clientHeight,i=window.getComputedStyle(t).overflowY,s=-1!==i.indexOf("hidden"),n=-1!==i.indexOf("visible");return e&&!s&&!n},qr=function(t,e=void 0){return!(!t||t===document.body||e&&t===e)&&(Fr(t)?t:qr(t.parentElement,e))},jr=function(t){var e=(new DOMParser).parseFromString(t,"text/html").body;if(e.childElementCount>1){for(var i=document.createElement("div");e.firstChild;)i.appendChild(e.firstChild);return i}return e.firstChild},zr=t=>`${t||""}`.split(" ").filter((t=>!!t)),Vr=(t,e,i)=>{t&&zr(e).forEach((e=>{t.classList.toggle(e,i||!1)}))};class a{constructor(t){Object.defineProperty(this,"pageX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pageY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"clientY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"time",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"nativePointer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.nativePointer=t,this.pageX=t.pageX,this.pageY=t.pageY,this.clientX=t.clientX,this.clientY=t.clientY,this.id=self.Touch&&t instanceof Touch?t.identifier:-1,this.time=Date.now()}}const Hr={passive:!1};class l{constructor(t,{start:e=(()=>!0),move:i=(()=>{}),end:s=(()=>{})}){Object.defineProperty(this,"element",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"moveCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"endCallback",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"currentPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"startPointers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),this.element=t,this.startCallback=e,this.moveCallback=i,this.endCallback=s;for(const t of["onPointerStart","onTouchStart","onMove","onTouchEnd","onPointerEnd","onWindowBlur"])this[t]=this[t].bind(this);this.element.addEventListener("mousedown",this.onPointerStart,Hr),this.element.addEventListener("touchstart",this.onTouchStart,Hr),this.element.addEventListener("touchmove",this.onMove,Hr),this.element.addEventListener("touchend",this.onTouchEnd),this.element.addEventListener("touchcancel",this.onTouchEnd)}onPointerStart(t){if(!t.buttons||0!==t.button)return;const e=new a(t);this.currentPointers.some((t=>t.id===e.id))||this.triggerPointerStart(e,t)&&(window.addEventListener("mousemove",this.onMove),window.addEventListener("mouseup",this.onPointerEnd),window.addEventListener("blur",this.onWindowBlur))}onTouchStart(t){for(const e of Array.from(t.changedTouches||[]))this.triggerPointerStart(new a(e),t);window.addEventListener("blur",this.onWindowBlur)}onMove(t){const e=this.currentPointers.slice(),i="changedTouches"in t?Array.from(t.changedTouches||[]).map((t=>new a(t))):[new a(t)],s=[];for(const t of i){const e=this.currentPointers.findIndex((e=>e.id===t.id));e<0||(s.push(t),this.currentPointers[e]=t)}s.length&&this.moveCallback(t,this.currentPointers.slice(),e)}onPointerEnd(t){t.buttons>0&&0!==t.button||(this.triggerPointerEnd(t,new a(t)),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur))}onTouchEnd(t){for(const e of Array.from(t.changedTouches||[]))this.triggerPointerEnd(t,new a(e))}triggerPointerStart(t,e){return!!this.startCallback(e,t,this.currentPointers.slice())&&(this.currentPointers.push(t),this.startPointers.push(t),!0)}triggerPointerEnd(t,e){const i=this.currentPointers.findIndex((t=>t.id===e.id));i<0||(this.currentPointers.splice(i,1),this.startPointers.splice(i,1),this.endCallback(t,e,this.currentPointers.slice()))}onWindowBlur(){this.clear()}clear(){for(;this.currentPointers.length;){const t=this.currentPointers[this.currentPointers.length-1];this.currentPointers.splice(this.currentPointers.length-1,1),this.startPointers.splice(this.currentPointers.length-1,1),this.endCallback(new Event("touchend",{bubbles:!0,cancelable:!0,clientX:t.clientX,clientY:t.clientY}),t,this.currentPointers.slice())}}stop(){this.element.removeEventListener("mousedown",this.onPointerStart,Hr),this.element.removeEventListener("touchstart",this.onTouchStart,Hr),this.element.removeEventListener("touchmove",this.onMove,Hr),this.element.removeEventListener("touchend",this.onTouchEnd),this.element.removeEventListener("touchcancel",this.onTouchEnd),window.removeEventListener("mousemove",this.onMove),window.removeEventListener("mouseup",this.onPointerEnd),window.removeEventListener("blur",this.onWindowBlur)}}function $r(t,e){return e?Math.sqrt(Math.pow(e.clientX-t.clientX,2)+Math.pow(e.clientY-t.clientY,2)):0}function Ur(t,e){return e?{clientX:(t.clientX+e.clientX)/2,clientY:(t.clientY+e.clientY)/2}:t}const Gr=t=>"object"==typeof t&&null!==t&&t.constructor===Object&&"[object Object]"===Object.prototype.toString.call(t),Wr=(t,...e)=>{const i=e.length;for(let s=0;s<i;s++){const i=e[s]||{};Object.entries(i).forEach((([e,i])=>{const s=Array.isArray(i)?[]:{};t[e]||Object.assign(t,{[e]:s}),Gr(i)?Object.assign(t[e],Wr(s,i)):Array.isArray(i)?Object.assign(t,{[e]:[...i]}):Object.assign(t,{[e]:i})}))}return t},Yr=function(t,e){return t.split(".").reduce(((t,e)=>"object"==typeof t?t[e]:void 0),e)};class f{constructor(t={}){Object.defineProperty(this,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"events",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),this.setOptions(t);for(const t of Object.getOwnPropertyNames(Object.getPrototypeOf(this)))t.startsWith("on")&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}setOptions(t){this.options=t?Wr({},this.constructor.defaults,t):{};for(const[t,e]of Object.entries(this.option("on")||{}))this.on(t,e)}option(t,...e){let i=Yr(t,this.options);return i&&"function"==typeof i&&(i=i.call(this,this,...e)),i}optionFor(t,e,i,...s){let n=Yr(e,t);var o;"string"!=typeof(o=n)||isNaN(o)||isNaN(parseFloat(o))||(n=parseFloat(n)),"true"===n&&(n=!0),"false"===n&&(n=!1),n&&"function"==typeof n&&(n=n.call(this,this,t,...s));let r=Yr(e,this.options);return r&&"function"==typeof r?n=r.call(this,this,t,...s,n):void 0===n&&(n=r),void 0===n?i:n}cn(t){const e=this.options.classes;return e&&e[t]||""}localize(t,e=[]){t=String(t).replace(/\{\{(\w+).?(\w+)?\}\}/g,((t,e,i)=>{let s="";return i?s=this.option(`${e[0]+e.toLowerCase().substring(1)}.l10n.${i}`):e&&(s=this.option(`l10n.${e}`)),s||(s=t),s}));for(let i=0;i<e.length;i++)t=t.split(e[i][0]).join(e[i][1]);return t.replace(/\{\{(.*?)\}\}/g,((t,e)=>e))}on(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),this.events||(this.events=new Map),i.forEach((t=>{let i=this.events.get(t);i||(this.events.set(t,[]),i=[]),i.includes(e)||i.push(e),this.events.set(t,i)}))}off(t,e){let i=[];"string"==typeof t?i=t.split(" "):Array.isArray(t)&&(i=t),i.forEach((t=>{const i=this.events.get(t);if(Array.isArray(i)){const t=i.indexOf(e);t>-1&&i.splice(t,1)}}))}emit(t,...e){[...this.events.get(t)||[]].forEach((t=>t(this,...e))),"*"!==t&&this.emit("*",t,...e)}}Object.defineProperty(f,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(f,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{}});class g extends f{constructor(t={}){super(t),Object.defineProperty(this,"plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}})}attachPlugins(t={}){const e=new Map;for(const[i,s]of Object.entries(t)){const t=this.option(i),n=this.plugins[i];n||!1===t?n&&!1===t&&(n.detach(),delete this.plugins[i]):e.set(i,new s(this,t||{}))}for(const[t,i]of e)this.plugins[t]=i,i.attach()}detachPlugins(t){t=t||Object.keys(this.plugins);for(const e of t){const t=this.plugins[e];t&&t.detach(),delete this.plugins[e]}return this.emit("detachPlugins"),this}}var Xr;!function(t){t[t.Init=0]="Init",t[t.Error=1]="Error",t[t.Ready=2]="Ready",t[t.Panning=3]="Panning",t[t.Mousemove=4]="Mousemove",t[t.Destroy=5]="Destroy"}(Xr||(Xr={}));const Qr=["a","b","c","d","e","f"],Zr={PANUP:"Move up",PANDOWN:"Move down",PANLEFT:"Move left",PANRIGHT:"Move right",ZOOMIN:"Zoom in",ZOOMOUT:"Zoom out",TOGGLEZOOM:"Toggle zoom level",TOGGLE1TO1:"Toggle zoom level",ITERATEZOOM:"Toggle zoom level",ROTATECCW:"Rotate counterclockwise",ROTATECW:"Rotate clockwise",FLIPX:"Flip horizontally",FLIPY:"Flip vertically",FITX:"Fit horizontally",FITY:"Fit vertically",RESET:"Reset",TOGGLEFS:"Toggle fullscreen"},Kr={content:null,width:"auto",height:"auto",panMode:"drag",touch:!0,dragMinThreshold:3,lockAxis:!1,mouseMoveFactor:1,mouseMoveFriction:.12,zoom:!0,pinchToZoom:!0,panOnlyZoomed:"auto",minScale:1,maxScale:2,friction:.25,dragFriction:.35,decelFriction:.05,click:"toggleZoom",dblClick:!1,wheel:"zoom",wheelLimit:7,spinner:!0,bounds:"auto",infinite:!1,rubberband:!0,bounce:!0,maxVelocity:75,transformParent:!1,classes:{content:"f-panzoom__content",isLoading:"is-loading",canZoomIn:"can-zoom_in",canZoomOut:"can-zoom_out",isDraggable:"is-draggable",isDragging:"is-dragging",inFullscreen:"in-fullscreen",htmlHasFullscreen:"with-panzoom-in-fullscreen"},l10n:Zr},Jr='<circle cx="25" cy="25" r="20"></circle>',ta='<div class="f-spinner"><svg viewBox="0 0 50 50">'+Jr+Jr+"</svg></div>",ea=t=>t&&null!==t&&t instanceof Element&&"nodeType"in t,ia=(t,e)=>{t&&zr(e).forEach((e=>{t.classList.remove(e)}))},sa=(t,e)=>{t&&zr(e).forEach((e=>{t.classList.add(e)}))},na={a:1,b:0,c:0,d:1,e:0,f:0},oa=1e4,ra="mousemove",aa="drag",la="content",ca="auto";let ha=null,da=null,ua=class I extends g{get fits(){return this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1}get isTouchDevice(){return null===da&&(da=window.matchMedia("(hover: none)").matches),da}get isMobile(){return null===ha&&(ha=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)),ha}get panMode(){return this.options.panMode!==ra||this.isTouchDevice?aa:ra}get panOnlyZoomed(){const t=this.options.panOnlyZoomed;return t===ca?this.isTouchDevice:t}get isInfinite(){return this.option("infinite")}get angle(){return 180*Math.atan2(this.current.b,this.current.a)/Math.PI||0}get targetAngle(){return 180*Math.atan2(this.target.b,this.target.a)/Math.PI||0}get scale(){const{a:t,b:e}=this.current;return Math.sqrt(t*t+e*e)||1}get targetScale(){const{a:t,b:e}=this.target;return Math.sqrt(t*t+e*e)||1}get minScale(){return this.option("minScale")||1}get fullScale(){const{contentRect:t}=this;return t.fullWidth/t.fitWidth||1}get maxScale(){return this.fullScale*(this.option("maxScale")||1)||1}get coverScale(){const{containerRect:t,contentRect:e}=this,i=Math.max(t.height/e.fitHeight,t.width/e.fitWidth)||1;return Math.min(this.fullScale,i)}get isScaling(){return Math.abs(this.targetScale-this.scale)>1e-5&&!this.isResting}get isContentLoading(){const t=this.content;return!!(t&&t instanceof HTMLImageElement)&&!t.complete}get isResting(){if(this.isBouncingX||this.isBouncingY)return!1;for(const t of Qr){const e="e"==t||"f"===t?1e-4:1e-5;if(Math.abs(this.target[t]-this.current[t])>e)return!1}return!(!this.ignoreBounds&&!this.checkBounds().inBounds)}constructor(t,e={},i={}){var s;if(super(e),Object.defineProperty(this,"pointerTracker",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"resizeObserver",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"updateTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"rAF",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isTicking",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ignoreBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingX",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isBouncingY",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"clicks",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"trackingPoints",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"cwd",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"pmme",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"friction",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:Xr.Init}),Object.defineProperty(this,"isDragging",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"content",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"spinner",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"containerRect",{enumerable:!0,configurable:!0,writable:!0,value:{width:0,height:0,innerWidth:0,innerHeight:0}}),Object.defineProperty(this,"contentRect",{enumerable:!0,configurable:!0,writable:!0,value:{top:0,right:0,bottom:0,left:0,fullWidth:0,fullHeight:0,fitWidth:0,fitHeight:0,width:0,height:0}}),Object.defineProperty(this,"dragStart",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,top:0,left:0,time:0}}),Object.defineProperty(this,"dragOffset",{enumerable:!0,configurable:!0,writable:!0,value:{x:0,y:0,time:0}}),Object.defineProperty(this,"current",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},na)}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:Object.assign({},na)}),Object.defineProperty(this,"velocity",{enumerable:!0,configurable:!0,writable:!0,value:{a:0,b:0,c:0,d:0,e:0,f:0}}),Object.defineProperty(this,"lockedAxis",{enumerable:!0,configurable:!0,writable:!0,value:!1}),!t)throw new Error("Container Element Not Found");this.container=t,this.initContent(),this.attachPlugins(Object.assign(Object.assign({},I.Plugins),i)),this.emit("attachPlugins"),this.emit("init");const n=this.content;if(n.addEventListener("load",this.onLoad),n.addEventListener("error",this.onError),this.isContentLoading){if(this.option("spinner")){t.classList.add(this.cn("isLoading"));const e=jr(ta);!t.contains(n)||n.parentElement instanceof HTMLPictureElement?this.spinner=t.appendChild(e):this.spinner=(null===(s=n.parentElement)||void 0===s?void 0:s.insertBefore(e,n))||null}this.emit("beforeLoad")}else queueMicrotask((()=>{this.enable()}))}initContent(){const{container:t}=this,e=this.cn(la);let i=this.option(la)||t.querySelector(`.${e}`);if(i||(i=t.querySelector("img,picture")||t.firstElementChild,i&&sa(i,e)),i instanceof HTMLPictureElement&&(i=i.querySelector("img")),!i)throw new Error("No content found");this.content=i}onLoad(){const{spinner:t,container:e,state:i}=this;t&&(t.remove(),this.spinner=null),this.option("spinner")&&e.classList.remove(this.cn("isLoading")),this.emit("afterLoad"),i===Xr.Init?this.enable():this.updateMetrics()}onError(){this.state!==Xr.Destroy&&(this.spinner&&(this.spinner.remove(),this.spinner=null),this.stop(),this.detachEvents(),this.state=Xr.Error,this.emit("error"))}getNextScale(t){const{fullScale:e,targetScale:i,coverScale:s,maxScale:n,minScale:o}=this;let r=o;switch(t){case"toggleMax":r=i-o<.5*(n-o)?n:o;break;case"toggleCover":r=i-o<.5*(s-o)?s:o;break;case"toggleZoom":r=i-o<.5*(e-o)?e:o;break;case"iterateZoom":let t=[1,e,n].sort(((t,e)=>t-e)),c=t.findIndex((t=>t>i+1e-5));r=t[c]||1}return r}attachObserver(){var t;const e=()=>{const{container:t,containerRect:e}=this;return Math.abs(e.width-t.getBoundingClientRect().width)>.1||Math.abs(e.height-t.getBoundingClientRect().height)>.1};this.resizeObserver||void 0===window.ResizeObserver||(this.resizeObserver=new ResizeObserver((()=>{this.updateTimer||(e()?(this.onResize(),this.isMobile&&(this.updateTimer=setTimeout((()=>{e()&&this.onResize(),this.updateTimer=null}),500))):this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null))}))),null===(t=this.resizeObserver)||void 0===t||t.observe(this.container)}detachObserver(){var t;null===(t=this.resizeObserver)||void 0===t||t.disconnect()}attachEvents(){const{container:t}=this;t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("wheel",this.onWheel,{passive:!1}),this.pointerTracker=new l(t,{start:this.onPointerDown,move:this.onPointerMove,end:this.onPointerUp}),document.addEventListener(ra,this.onMouseMove)}detachEvents(){var t;const{container:e}=this;e.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),e.removeEventListener("wheel",this.onWheel,{passive:!1}),null===(t=this.pointerTracker)||void 0===t||t.stop(),this.pointerTracker=null,document.removeEventListener(ra,this.onMouseMove),document.removeEventListener("keydown",this.onKeydown,!0),this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null),this.updateTimer&&(clearTimeout(this.updateTimer),this.updateTimer=null)}animate(){this.setTargetForce();const t=this.friction,e=this.option("maxVelocity");for(const i of Qr)t?(this.velocity[i]*=1-t,e&&!this.isScaling&&(this.velocity[i]=Math.max(Math.min(this.velocity[i],e),-1*e)),this.current[i]+=this.velocity[i]):this.current[i]=this.target[i];this.setTransform(),this.setEdgeForce(),!this.isResting||this.isDragging?this.rAF=requestAnimationFrame((()=>this.animate())):this.stop("current")}setTargetForce(){for(const t of Qr)"e"===t&&this.isBouncingX||"f"===t&&this.isBouncingY||(this.velocity[t]=(1/(1-this.friction)-1)*(this.target[t]-this.current[t]))}checkBounds(t=0,e=0){const{current:i}=this,s=i.e+t,n=i.f+e,o=this.getBounds(),{x:r,y:c}=o,h=r.min,d=r.max,u=c.min,p=c.max;let m=0,b=0;return h!==1/0&&s<h?m=h-s:d!==1/0&&s>d&&(m=d-s),u!==1/0&&n<u?b=u-n:p!==1/0&&n>p&&(b=p-n),Math.abs(m)<1e-4&&(m=0),Math.abs(b)<1e-4&&(b=0),Object.assign(Object.assign({},o),{xDiff:m,yDiff:b,inBounds:!m&&!b})}clampTargetBounds(){const{target:t}=this,{x:e,y:i}=this.getBounds();e.min!==1/0&&(t.e=Math.max(t.e,e.min)),e.max!==1/0&&(t.e=Math.min(t.e,e.max)),i.min!==1/0&&(t.f=Math.max(t.f,i.min)),i.max!==1/0&&(t.f=Math.min(t.f,i.max))}calculateContentDim(t=this.current){const{content:e,contentRect:i}=this,{fitWidth:s,fitHeight:n,fullWidth:o,fullHeight:r}=i;let c=o,h=r;if(this.option("zoom")||0!==this.angle){const i=!(e instanceof HTMLImageElement||"none"!==window.getComputedStyle(e).maxWidth&&"none"!==window.getComputedStyle(e).maxHeight),d=i?o:s,u=i?r:n,p=this.getMatrix(t),m=new DOMPoint(0,0).matrixTransform(p),b=new DOMPoint(0+d,0).matrixTransform(p),v=new DOMPoint(0+d,0+u).matrixTransform(p),y=new DOMPoint(0,0+u).matrixTransform(p),E=Math.abs(v.x-m.x),x=Math.abs(v.y-m.y),w=Math.abs(y.x-b.x),S=Math.abs(y.y-b.y);c=Math.max(E,w),h=Math.max(x,S)}return{contentWidth:c,contentHeight:h}}setEdgeForce(){if(this.ignoreBounds||this.isDragging||this.panMode===ra||this.targetScale<this.scale)return this.isBouncingX=!1,void(this.isBouncingY=!1);const{target:t}=this,{x:e,y:i,xDiff:s,yDiff:n}=this.checkBounds(),o=this.option("maxVelocity");let r=this.velocity.e,c=this.velocity.f;0!==s?(this.isBouncingX=!0,s*r<=0?r+=.14*s:(r=.14*s,e.min!==1/0&&(this.target.e=Math.max(t.e,e.min)),e.max!==1/0&&(this.target.e=Math.min(t.e,e.max))),o&&(r=Math.max(Math.min(r,o),-1*o))):this.isBouncingX=!1,0!==n?(this.isBouncingY=!0,n*c<=0?c+=.14*n:(c=.14*n,i.min!==1/0&&(this.target.f=Math.max(t.f,i.min)),i.max!==1/0&&(this.target.f=Math.min(t.f,i.max))),o&&(c=Math.max(Math.min(c,o),-1*o))):this.isBouncingY=!1,this.isBouncingX&&(this.velocity.e=r),this.isBouncingY&&(this.velocity.f=c)}enable(){const{content:t}=this,e=new DOMMatrixReadOnly(window.getComputedStyle(t).transform);for(const t of Qr)this.current[t]=this.target[t]=e[t];this.updateMetrics(),this.attachObserver(),this.attachEvents(),this.state=Xr.Ready,this.emit("ready")}onClick(t){var e;"click"===t.type&&0===t.detail&&(this.dragOffset.x=0,this.dragOffset.y=0),this.isDragging&&(null===(e=this.pointerTracker)||void 0===e||e.clear(),this.trackingPoints=[],this.startDecelAnim());const i=t.target;if(!i||t.defaultPrevented)return;if(i.hasAttribute("disabled"))return t.preventDefault(),void t.stopPropagation();if((()=>{const t=window.getSelection();return t&&"Range"===t.type})()&&!i.closest("button"))return;const s=i.closest("[data-panzoom-action]"),n=i.closest("[data-panzoom-change]"),o=s||n,r=o&&ea(o)?o.dataset:null;if(r){const e=r.panzoomChange,i=r.panzoomAction;if((e||i)&&t.preventDefault(),e){let i={};try{i=JSON.parse(e)}catch(t){console&&console.warn("The given data was not valid JSON")}return void this.applyChange(i)}if(i)return void(this[i]&&this[i]())}if(Math.abs(this.dragOffset.x)>3||Math.abs(this.dragOffset.y)>3)return t.preventDefault(),void t.stopPropagation();if(i.closest("[data-fancybox]"))return;const c=this.content.getBoundingClientRect(),h=this.dragStart;if(h.time&&!this.canZoomOut()&&(Math.abs(c.x-h.x)>2||Math.abs(c.y-h.y)>2))return;this.dragStart.time=0;const d=e=>{this.option("zoom",t)&&e&&"string"==typeof e&&/(iterateZoom)|(toggle(Zoom|Full|Cover|Max)|(zoomTo(Fit|Cover|Max)))/.test(e)&&"function"==typeof this[e]&&(t.preventDefault(),this[e]({event:t}))},u=this.option("click",t),p=this.option("dblClick",t);p?(this.clicks++,1==this.clicks&&(this.clickTimer=setTimeout((()=>{1===this.clicks?(this.emit("click",t),!t.defaultPrevented&&u&&d(u)):(this.emit("dblClick",t),t.defaultPrevented||d(p)),this.clicks=0,this.clickTimer=null}),350))):(this.emit("click",t),!t.defaultPrevented&&u&&d(u))}addTrackingPoint(t){const e=this.trackingPoints.filter((t=>t.time>Date.now()-100));e.push(t),this.trackingPoints=e}onPointerDown(t,e,i){var s;if(!1===this.option("touch",t))return!1;this.pwt=0,this.dragOffset={x:0,y:0,time:0},this.trackingPoints=[];const n=this.content.getBoundingClientRect();if(this.dragStart={x:n.x,y:n.y,top:n.top,left:n.left,time:Date.now()},this.clickTimer)return!1;if(this.panMode===ra&&this.targetScale>1)return t.preventDefault(),t.stopPropagation(),!1;const o=t.composedPath()[0];if(!i.length){if(["TEXTAREA","OPTION","INPUT","SELECT","VIDEO","IFRAME"].includes(o.nodeName)||o.closest("[contenteditable],[data-selectable],[data-draggable],[data-clickable],[data-panzoom-change],[data-panzoom-action]"))return!1;null===(s=window.getSelection())||void 0===s||s.removeAllRanges()}if("mousedown"===t.type)["A","BUTTON"].includes(o.nodeName)||t.preventDefault();else if(Math.abs(this.velocity.a)>.3)return!1;return this.target.e=this.current.e,this.target.f=this.current.f,this.stop(),this.isDragging||(this.isDragging=!0,this.addTrackingPoint(e),this.emit("touchStart",t)),!0}onPointerMove(t,e,i){if(!1===this.option("touch",t))return;if(!this.isDragging)return;if(e.length<2&&this.panOnlyZoomed&&Br(this.targetScale)<=Br(this.minScale))return;if(this.emit("touchMove",t),t.defaultPrevented)return;this.addTrackingPoint(e[0]);const{content:s}=this,n=Ur(i[0],i[1]),o=Ur(e[0],e[1]);let r=0,c=0;if(e.length>1){const t=s.getBoundingClientRect();r=n.clientX-t.left-.5*t.width,c=n.clientY-t.top-.5*t.height}const h=$r(i[0],i[1]),d=$r(e[0],e[1]);let u=h?d/h:1,p=o.clientX-n.clientX,m=o.clientY-n.clientY;this.dragOffset.x+=p,this.dragOffset.y+=m,this.dragOffset.time=Date.now()-this.dragStart.time;let b=Br(this.targetScale)===Br(this.minScale)&&this.option("lockAxis");if(b&&!this.lockedAxis)if("xy"===b||"y"===b||"touchmove"===t.type){if(Math.abs(this.dragOffset.x)<6&&Math.abs(this.dragOffset.y)<6)return void t.preventDefault();const e=Math.abs(180*Math.atan2(this.dragOffset.y,this.dragOffset.x)/Math.PI);this.lockedAxis=e>45&&e<135?"y":"x",this.dragOffset.x=0,this.dragOffset.y=0,p=0,m=0}else this.lockedAxis=b;if(qr(t.target,this.content)&&(b="x",this.dragOffset.y=0),b&&"xy"!==b&&this.lockedAxis!==b&&Br(this.targetScale)===Br(this.minScale))return;t.cancelable&&t.preventDefault(),this.container.classList.add(this.cn("isDragging"));const v=this.checkBounds(p,m);this.option("rubberband")?("x"!==this.isInfinite&&(v.xDiff>0&&p<0||v.xDiff<0&&p>0)&&(p*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitWidth*v.xDiff))),"y"!==this.isInfinite&&(v.yDiff>0&&m<0||v.yDiff<0&&m>0)&&(m*=Math.max(0,.5-Math.abs(.75/this.contentRect.fitHeight*v.yDiff)))):(v.xDiff&&(p=0),v.yDiff&&(m=0));const y=this.targetScale,E=this.minScale,x=this.maxScale;y<.5*E&&(u=Math.max(u,E)),y>1.5*x&&(u=Math.min(u,x)),"y"===this.lockedAxis&&Br(y)===Br(E)&&(p=0),"x"===this.lockedAxis&&Br(y)===Br(E)&&(m=0),this.applyChange({originX:r,originY:c,panX:p,panY:m,scale:u,friction:this.option("dragFriction"),ignoreBounds:!0})}onPointerUp(t,e,i){if(i.length)return this.dragOffset.x=0,this.dragOffset.y=0,void(this.trackingPoints=[]);this.container.classList.remove(this.cn("isDragging")),this.isDragging&&(this.addTrackingPoint(e),this.panOnlyZoomed&&this.contentRect.width-this.contentRect.fitWidth<1&&this.contentRect.height-this.contentRect.fitHeight<1&&(this.trackingPoints=[]),qr(t.target,this.content)&&"y"===this.lockedAxis&&(this.trackingPoints=[]),this.emit("touchEnd",t),this.isDragging=!1,this.lockedAxis=!1,this.state!==Xr.Destroy&&(t.defaultPrevented||this.startDecelAnim()))}startDecelAnim(){var t;const e=this.isScaling;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const t of Qr)this.velocity[t]=0;this.target.e=this.current.e,this.target.f=this.current.f,ia(this.container,"is-scaling"),ia(this.container,"is-animating"),this.isTicking=!1;const{trackingPoints:i}=this,s=i[0],n=i[i.length-1];let o=0,r=0,c=0;n&&s&&(o=n.clientX-s.clientX,r=n.clientY-s.clientY,c=n.time-s.time);const h=(null===(t=window.visualViewport)||void 0===t?void 0:t.scale)||1;1!==h&&(o*=h,r*=h);let d=0,u=0,p=0,m=0,b=this.option("decelFriction");const v=this.targetScale;if(c>0){p=Math.abs(o)>3?o/(c/30):0,m=Math.abs(r)>3?r/(c/30):0;const t=this.option("maxVelocity");t&&(p=Math.max(Math.min(p,t),-1*t),m=Math.max(Math.min(m,t),-1*t))}p&&(d=p/(1/(1-b)-1)),m&&(u=m/(1/(1-b)-1)),("y"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"y"===this.lockedAxis&&Br(v)===this.minScale)&&(d=p=0),("x"===this.option("lockAxis")||"xy"===this.option("lockAxis")&&"x"===this.lockedAxis&&Br(v)===this.minScale)&&(u=m=0);const y=this.dragOffset.x,E=this.dragOffset.y,x=this.option("dragMinThreshold")||0;Math.abs(y)<x&&Math.abs(E)<x&&(d=u=0,p=m=0),(this.option("zoom")&&(v<this.minScale-1e-5||v>this.maxScale+1e-5)||e&&!d&&!u)&&(b=.35),this.applyChange({panX:d,panY:u,friction:b}),this.emit("decel",p,m,y,E)}onWheel(t){var e=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce((function(t,e){return Math.abs(e)>Math.abs(t)?e:t}));const i=Math.max(-1,Math.min(1,e));if(this.emit("wheel",t,i),this.panMode===ra)return;if(t.defaultPrevented)return;const s=this.option("wheel");"pan"===s?(t.preventDefault(),this.panOnlyZoomed&&!this.canZoomOut()||this.applyChange({panX:2*-t.deltaX,panY:2*-t.deltaY,bounce:!1})):"zoom"===s&&!1!==this.option("zoom")&&this.zoomWithWheel(t)}onMouseMove(t){this.panWithMouse(t)}onKeydown(t){"Escape"===t.key&&this.toggleFS()}onResize(){this.updateMetrics(),this.checkBounds().inBounds||this.requestTick()}setTransform(){this.emit("beforeTransform");const{current:t,target:e,content:i,contentRect:s}=this,n=Object.assign({},na);for(const i of Qr){const s="e"==i||"f"===i?oa:1e5;n[i]=Br(t[i],s),Math.abs(e[i]-t[i])<("e"==i||"f"===i?.51:.001)&&(t[i]=e[i])}let{a:o,b:r,c:c,d:h,e:d,f:u}=n,p=`matrix(${o}, ${r}, ${c}, ${h}, ${d}, ${u})`,m=i.parentElement instanceof HTMLPictureElement?i.parentElement:i;if(this.option("transformParent")&&(m=m.parentElement||m),m.style.transform===p)return;m.style.transform=p;const{contentWidth:b,contentHeight:v}=this.calculateContentDim();s.width=b,s.height=v,this.emit("afterTransform")}updateMetrics(t=!1){var e;if(!this||this.state===Xr.Destroy)return;if(this.isContentLoading)return;const i=Math.max(1,(null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1),{container:s,content:n}=this,o=n instanceof HTMLImageElement,r=s.getBoundingClientRect(),c=getComputedStyle(this.container);let h=r.width*i,d=r.height*i;const u=parseFloat(c.paddingTop)+parseFloat(c.paddingBottom),p=h-(parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)),m=d-u;this.containerRect={width:h,height:d,innerWidth:p,innerHeight:m};const b=parseFloat(n.dataset.width||"")||(t=>{let e=0;return e=t instanceof HTMLImageElement?t.naturalWidth:t instanceof SVGElement?t.width.baseVal.value:Math.max(t.offsetWidth,t.scrollWidth),e||0})(n),v=parseFloat(n.dataset.height||"")||(t=>{let e=0;return e=t instanceof HTMLImageElement?t.naturalHeight:t instanceof SVGElement?t.height.baseVal.value:Math.max(t.offsetHeight,t.scrollHeight),e||0})(n);let y=this.option("width",b)||ca,E=this.option("height",v)||ca;const x=y===ca,w=E===ca;"number"!=typeof y&&(y=b),"number"!=typeof E&&(E=v),x&&(y=b*(E/v)),w&&(E=v/(b/y));let S=n.parentElement instanceof HTMLPictureElement?n.parentElement:n;this.option("transformParent")&&(S=S.parentElement||S);const O=S.getAttribute("style")||"";S.style.setProperty("transform","none","important"),o&&(S.style.width="",S.style.height=""),S.offsetHeight;const D=n.getBoundingClientRect();let M=D.width*i,k=D.height*i,P=M,N=k;M=Math.min(M,y),k=Math.min(k,E),o?({width:M,height:k}=((t,e,i,s)=>{const n=i/t,o=s/e,r=Math.min(n,o);return{width:t*=r,height:e*=r}})(y,E,M,k)):(M=Math.min(M,y),k=Math.min(k,E));let B=.5*(N-k),F=.5*(P-M);this.contentRect=Object.assign(Object.assign({},this.contentRect),{top:D.top-r.top+B,bottom:r.bottom-D.bottom+B,left:D.left-r.left+F,right:r.right-D.right+F,fitWidth:M,fitHeight:k,width:M,height:k,fullWidth:y,fullHeight:E}),S.style.cssText=O,o&&(S.style.width=`${M}px`,S.style.height=`${k}px`),this.setTransform(),!0!==t&&this.emit("refresh"),this.ignoreBounds||(Br(this.targetScale)<Br(this.minScale)?this.zoomTo(this.minScale,{friction:0}):this.targetScale>this.maxScale?this.zoomTo(this.maxScale,{friction:0}):this.state===Xr.Init||this.checkBounds().inBounds||this.requestTick()),this.updateControls()}calculateBounds(){const{contentWidth:t,contentHeight:e}=this.calculateContentDim(this.target),{targetScale:i,lockedAxis:s}=this,{fitWidth:n,fitHeight:o}=this.contentRect;let r=0,c=0,h=0,d=0;const u=this.option("infinite");if(!0===u||s&&u===s)r=-1/0,h=1/0,c=-1/0,d=1/0;else{let{containerRect:s,contentRect:u}=this,p=Br(n*i,oa),m=Br(o*i,oa),{innerWidth:b,innerHeight:v}=s;if(s.width===p&&(b=s.width),s.width===m&&(v=s.height),t>b){h=.5*(t-b),r=-1*h;let e=.5*(u.right-u.left);r+=e,h+=e}if(n>b&&t<b&&(r-=.5*(n-b),h-=.5*(n-b)),e>v){d=.5*(e-v),c=-1*d;let t=.5*(u.bottom-u.top);c+=t,d+=t}o>v&&e<v&&(r-=.5*(o-v),h-=.5*(o-v))}return{x:{min:r,max:h},y:{min:c,max:d}}}getBounds(){const t=this.option("bounds");return t!==ca?t:this.calculateBounds()}updateControls(){const t=this,e=t.container,{panMode:i,contentRect:s,targetScale:n,minScale:o}=t;let r=o,c=t.option("click")||!1;c&&(r=t.getNextScale(c));let h=t.canZoomIn(),d=t.canZoomOut(),u=i===aa&&!!this.option("touch"),p=d&&u;if(u&&(Br(n)<Br(o)&&!this.panOnlyZoomed&&(p=!0),(Br(s.width,1)>Br(s.fitWidth,1)||Br(s.height,1)>Br(s.fitHeight,1))&&(p=!0)),Br(s.width*n,1)<Br(s.fitWidth,1)&&(p=!1),i===ra&&(p=!1),Vr(e,this.cn("isDraggable"),p),!this.option("zoom"))return;let m=h&&Br(r)>Br(n),b=!m&&!p&&d&&Br(r)<Br(n);Vr(e,this.cn("canZoomIn"),m),Vr(e,this.cn("canZoomOut"),b);for(const t of e.querySelectorAll("[data-panzoom-action]")){let e=!1,i=!1;switch(t.dataset.panzoomAction){case"zoomIn":h?e=!0:i=!0;break;case"zoomOut":d?e=!0:i=!0;break;case"toggleZoom":case"iterateZoom":h||d?e=!0:i=!0;const s=t.querySelector("g");s&&(s.style.display=h?"":"none")}e?(t.removeAttribute("disabled"),t.removeAttribute("tabindex")):i&&(t.setAttribute("disabled",""),t.setAttribute("tabindex","-1"))}}panTo({x:t=this.target.e,y:e=this.target.f,scale:i=this.targetScale,friction:s=this.option("friction"),angle:n=0,originX:o=0,originY:r=0,flipX:c=!1,flipY:h=!1,ignoreBounds:d=!1}){this.state!==Xr.Destroy&&this.applyChange({panX:t-this.target.e,panY:e-this.target.f,scale:i/this.targetScale,angle:n,originX:o,originY:r,friction:s,flipX:c,flipY:h,ignoreBounds:d})}applyChange({panX:t=0,panY:e=0,scale:i=1,angle:s=0,originX:n=-this.current.e,originY:o=-this.current.f,friction:r=this.option("friction"),flipX:c=!1,flipY:h=!1,ignoreBounds:d=!1,bounce:u=this.option("bounce")}){const p=this.state;if(p===Xr.Destroy)return;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.friction=r||0,this.ignoreBounds=d;const{current:m}=this,b=m.e,v=m.f,y=this.getMatrix(this.target);let E=(new DOMMatrix).translate(b,v).translate(n,o).translate(t,e);if(this.option("zoom")){if(!d){const t=this.targetScale,e=this.minScale,s=this.maxScale;t*i<e&&(i=e/t),t*i>s&&(i=s/t)}E=E.scale(i)}E=E.translate(-n,-o).translate(-b,-v).multiply(y),s&&(E=E.rotate(s)),c&&(E=E.scale(-1,1)),h&&(E=E.scale(1,-1));for(const t of Qr)"e"!==t&&"f"!==t&&(E[t]>this.minScale+1e-5||E[t]<this.minScale-1e-5)?this.target[t]=E[t]:this.target[t]=Br(E[t],oa);(this.targetScale<this.scale||Math.abs(i-1)>.1||this.panMode===ra||!1===u)&&!d&&this.clampTargetBounds(),p===Xr.Init?this.animate():this.isResting||(this.state=Xr.Panning,this.requestTick())}stop(t=!1){if(this.state===Xr.Init||this.state===Xr.Destroy)return;const e=this.isTicking;this.rAF&&(cancelAnimationFrame(this.rAF),this.rAF=null),this.isBouncingX=!1,this.isBouncingY=!1;for(const e of Qr)this.velocity[e]=0,"current"===t?this.current[e]=this.target[e]:"target"===t&&(this.target[e]=this.current[e]);this.setTransform(),ia(this.container,"is-scaling"),ia(this.container,"is-animating"),this.isTicking=!1,this.state=Xr.Ready,e&&(this.emit("endAnimation"),this.updateControls())}requestTick(){this.isTicking||(this.emit("startAnimation"),this.updateControls(),sa(this.container,"is-animating"),this.isScaling&&sa(this.container,"is-scaling")),this.isTicking=!0,this.rAF||(this.rAF=requestAnimationFrame((()=>this.animate())))}panWithMouse(t,e=this.option("mouseMoveFriction")){if(this.pmme=t,this.panMode!==ra||!t)return;if(Br(this.targetScale)<=Br(this.minScale))return;this.emit("mouseMove",t);const{container:i,containerRect:s,contentRect:n}=this,o=s.width,r=s.height,c=i.getBoundingClientRect(),h=(t.clientX||0)-c.left,d=(t.clientY||0)-c.top;let{contentWidth:u,contentHeight:p}=this.calculateContentDim(this.target);const m=this.option("mouseMoveFactor");m>1&&(u!==o&&(u*=m),p!==r&&(p*=m));let b=.5*(u-o)-h/o*100/100*(u-o);b+=.5*(n.right-n.left);let v=.5*(p-r)-d/r*100/100*(p-r);v+=.5*(n.bottom-n.top),this.applyChange({panX:b-this.target.e,panY:v-this.target.f,friction:e})}zoomWithWheel(t){if(this.state===Xr.Destroy||this.state===Xr.Init)return;const e=Date.now();if(e-this.pwt<45)return void t.preventDefault();this.pwt=e;var i=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce((function(t,e){return Math.abs(e)>Math.abs(t)?e:t}));const s=Math.max(-1,Math.min(1,i)),{targetScale:n,maxScale:o,minScale:r}=this;let c=n*(100+45*s)/100;Br(c)<Br(r)&&Br(n)<=Br(r)?(this.cwd+=Math.abs(s),c=r):Br(c)>Br(o)&&Br(n)>=Br(o)?(this.cwd+=Math.abs(s),c=o):(this.cwd=0,c=Math.max(Math.min(c,o),r)),this.cwd>this.option("wheelLimit")||(t.preventDefault(),Br(c)!==Br(n)&&this.zoomTo(c,{event:t}))}canZoomIn(){return this.option("zoom")&&(Br(this.contentRect.width,1)<Br(this.contentRect.fitWidth,1)||Br(this.targetScale)<Br(this.maxScale))}canZoomOut(){return this.option("zoom")&&Br(this.targetScale)>Br(this.minScale)}zoomIn(t=1.25,e){this.zoomTo(this.targetScale*t,e)}zoomOut(t=.8,e){this.zoomTo(this.targetScale*t,e)}zoomToFit(t){this.zoomTo("fit",t)}zoomToCover(t){this.zoomTo("cover",t)}zoomToFull(t){this.zoomTo("full",t)}zoomToMax(t){this.zoomTo("max",t)}toggleZoom(t){this.zoomTo(this.getNextScale("toggleZoom"),t)}toggleMax(t){this.zoomTo(this.getNextScale("toggleMax"),t)}toggleCover(t){this.zoomTo(this.getNextScale("toggleCover"),t)}iterateZoom(t){this.zoomTo("next",t)}zoomTo(t=1,{friction:e=ca,originX:i=ca,originY:s=ca,event:n}={}){if(this.isContentLoading||this.state===Xr.Destroy)return;const{targetScale:o,fullScale:r,maxScale:c,coverScale:h}=this;if(this.stop(),this.panMode===ra&&(n=this.pmme||n),n||i===ca||s===ca){const t=this.content.getBoundingClientRect(),e=this.container.getBoundingClientRect(),o=n?n.clientX:e.left+.5*e.width,r=n?n.clientY:e.top+.5*e.height;i=o-t.left-.5*t.width,s=r-t.top-.5*t.height}let d=1;"number"==typeof t?d=t:"full"===t?d=r:"cover"===t?d=h:"max"===t?d=c:"fit"===t?d=1:"next"===t&&(d=this.getNextScale("iterateZoom")),d=d/o||1,e=e===ca?d>1?.15:.25:e,this.applyChange({scale:d,originX:i,originY:s,friction:e}),n&&this.panMode===ra&&this.panWithMouse(n,e)}rotateCCW(){this.applyChange({angle:-90})}rotateCW(){this.applyChange({angle:90})}flipX(){this.applyChange({flipX:!0})}flipY(){this.applyChange({flipY:!0})}fitX(){this.stop("target");const{containerRect:t,contentRect:e,target:i}=this;this.applyChange({panX:.5*t.width-(e.left+.5*e.fitWidth)-i.e,panY:.5*t.height-(e.top+.5*e.fitHeight)-i.f,scale:t.width/e.fitWidth/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}fitY(){this.stop("target");const{containerRect:t,contentRect:e,target:i}=this;this.applyChange({panX:.5*t.width-(e.left+.5*e.fitWidth)-i.e,panY:.5*t.innerHeight-(e.top+.5*e.fitHeight)-i.f,scale:t.height/e.fitHeight/this.targetScale,originX:0,originY:0,ignoreBounds:!0})}toggleFS(){const{container:t}=this,e=this.cn("inFullscreen"),i=this.cn("htmlHasFullscreen");t.classList.toggle(e);const s=t.classList.contains(e);s?(document.documentElement.classList.add(i),document.addEventListener("keydown",this.onKeydown,!0)):(document.documentElement.classList.remove(i),document.removeEventListener("keydown",this.onKeydown,!0)),this.updateMetrics(),this.emit(s?"enterFS":"exitFS")}getMatrix(t=this.current){const{a:e,b:i,c:s,d:n,e:o,f:r}=t;return new DOMMatrix([e,i,s,n,o,r])}reset(t){if(this.state!==Xr.Init&&this.state!==Xr.Destroy){this.stop("current");for(const t of Qr)this.target[t]=na[t];this.target.a=this.minScale,this.target.d=this.minScale,this.clampTargetBounds(),this.isResting||(this.friction=void 0===t?this.option("friction"):t,this.state=Xr.Panning,this.requestTick())}}destroy(){this.stop(),this.state=Xr.Destroy,this.detachEvents(),this.detachObserver();const{container:t,content:e}=this,i=this.option("classes")||{};for(const e of Object.values(i))t.classList.remove(e+"");e&&(e.removeEventListener("load",this.onLoad),e.removeEventListener("error",this.onError)),this.detachPlugins()}};Object.defineProperty(ua,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:Kr}),Object.defineProperty(ua,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:{}});const pa=function(t,e){let i=!0;return(...s)=>{i&&(i=!1,t(...s),setTimeout((()=>{i=!0}),e))}},fa=(t,e)=>{let i=[];return t.childNodes.forEach((t=>{t.nodeType!==Node.ELEMENT_NODE||e&&!t.matches(e)||i.push(t)})),i};var ga;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Destroy=2]="Destroy"}(ga||(ga={}));const ma=t=>{if("string"==typeof t||t instanceof HTMLElement)t={html:t};else{const e=t.thumb;void 0!==e&&("string"==typeof e&&(t.thumbSrc=e),e instanceof HTMLImageElement&&(t.thumbEl=e,t.thumbElSrc=e.src,t.thumbSrc=e.src),delete t.thumb)}return Object.assign({html:"",el:null,isDom:!1,class:"",customClass:"",index:-1,dim:0,gap:0,pos:0,transition:!1},t)},ba=(t={})=>Object.assign({index:-1,slides:[],dim:0,pos:-1},t);class _ extends f{constructor(t,e){super(e),Object.defineProperty(this,"instance",{enumerable:!0,configurable:!0,writable:!0,value:t})}attach(){}detach(){}}let va=class W extends _{constructor(){super(...arguments),Object.defineProperty(this,"isDynamic",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"list",{enumerable:!0,configurable:!0,writable:!0,value:null})}onRefresh(){this.refresh()}build(){let t=this.list;if(!t){t=document.createElement("ul"),sa(t,this.cn("list")),t.setAttribute("role","tablist");const e=this.instance.container;e.appendChild(t),sa(e,this.cn("hasDots")),this.list=t}return t}refresh(){var t;const e=this.instance.pages.length,i=Math.min(2,this.option("minCount")),s=Math.max(2e3,this.option("maxCount")),n=this.option("dynamicFrom");if(e<i||e>s)return void this.cleanup();const o="number"==typeof n&&e>5&&e>=n,r=!this.list||this.isDynamic!==o||this.list.children.length!==e;r&&this.cleanup();const c=this.build();if(Vr(c,this.cn("isDynamic"),!!o),r)for(let t=0;t<e;t++)c.append(this.createItem(t));let h,d=0;for(const e of[...c.children]){const i=d===this.instance.page;i&&(h=e),Vr(e,this.cn("isCurrent"),i),null===(t=e.children[0])||void 0===t||t.setAttribute("aria-selected",i?"true":"false");for(const t of["isBeforePrev","isPrev","isNext","isAfterNext"])ia(e,this.cn(t));d++}if(h=h||c.firstChild,o&&h){const t=h.previousElementSibling,e=t&&t.previousElementSibling;sa(t,this.cn("isPrev")),sa(e,this.cn("isBeforePrev"));const i=h.nextElementSibling,s=i&&i.nextElementSibling;sa(i,this.cn("isNext")),sa(s,this.cn("isAfterNext"))}this.isDynamic=o}createItem(t=0){var e;const i=document.createElement("li");i.setAttribute("role","presentation");const s=jr(this.instance.localize(this.option("dotTpl"),[["%d",t+1]]).replace(/\%i/g,t+""));return i.appendChild(s),null===(e=i.children[0])||void 0===e||e.setAttribute("role","tab"),i}cleanup(){this.list&&(this.list.remove(),this.list=null),this.isDynamic=!1,ia(this.instance.container,this.cn("hasDots"))}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}};Object.defineProperty(va,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{list:"f-carousel__dots",isDynamic:"is-dynamic",hasDots:"has-dots",dot:"f-carousel__dot",isBeforePrev:"is-before-prev",isPrev:"is-prev",isCurrent:"is-current",isNext:"is-next",isAfterNext:"is-after-next"},dotTpl:'<button type="button" data-carousel-page="%i" aria-label="{{GOTO}}"><span class="f-carousel__dot" aria-hidden="true"></span></button>',dynamicFrom:11,maxCount:1/0,minCount:2}});const ya="disabled",Ea="next",_a="prev";class V extends _{constructor(){super(...arguments),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prev",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"next",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"isDom",{enumerable:!0,configurable:!0,writable:!0,value:!1})}onRefresh(){const t=this.instance,e=t.pages.length,i=t.page;if(e<2)return void this.cleanup();this.build();let s=this.prev,n=this.next;s&&n&&(s.removeAttribute(ya),n.removeAttribute(ya),t.isInfinite||(i<=0&&s.setAttribute(ya,""),i>=e-1&&n.setAttribute(ya,"")))}addBtn(t){var e;const i=this.instance,s=document.createElement("button");s.setAttribute("tabindex","0"),s.setAttribute("title",i.localize(`{{${t.toUpperCase()}}}`)),sa(s,this.cn("button")+" "+this.cn(t===Ea?"isNext":"isPrev"));const n=i.isRTL?t===Ea?_a:Ea:t;var o;return s.innerHTML=i.localize(this.option(`${n}Tpl`)),s.dataset[`carousel${o=t,o?o.match("^[a-z]")?o.charAt(0).toUpperCase()+o.substring(1):o:""}`]="true",null===(e=this.container)||void 0===e||e.appendChild(s),s}build(){const t=this.instance.container,e=this.cn("container");let{container:i,prev:s,next:n}=this;i||(i=t.querySelector("."+e),this.isDom=!!i),i||(i=document.createElement("div"),sa(i,e),t.appendChild(i)),this.container=i,n||(n=i.querySelector("[data-carousel-next]")),n||(n=this.addBtn(Ea)),this.next=n,s||(s=i.querySelector("[data-carousel-prev]")),s||(s=this.addBtn(_a)),this.prev=s}cleanup(){this.isDom||(this.prev&&this.prev.remove(),this.next&&this.next.remove(),this.container&&this.container.remove()),this.prev=null,this.next=null,this.container=null,this.isDom=!1}attach(){this.instance.on(["refresh","change"],this.onRefresh)}detach(){this.instance.off(["refresh","change"],this.onRefresh),this.cleanup()}}Object.defineProperty(V,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{classes:{container:"f-carousel__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"},nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>'}});class Z extends _{constructor(){super(...arguments),Object.defineProperty(this,"selectedIndex",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"target",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"nav",{enumerable:!0,configurable:!0,writable:!0,value:null})}addAsTargetFor(t){this.target=this.instance,this.nav=t,this.attachEvents()}addAsNavFor(t){this.nav=this.instance,this.target=t,this.attachEvents()}attachEvents(){const{nav:t,target:e}=this;t&&e&&(t.options.initialSlide=e.options.initialPage,t.state===ga.Ready?this.onNavReady(t):t.on("ready",this.onNavReady),e.state===ga.Ready?this.onTargetReady(e):e.on("ready",this.onTargetReady))}onNavReady(t){t.on("createSlide",this.onNavCreateSlide),t.on("Panzoom.click",this.onNavClick),t.on("Panzoom.touchEnd",this.onNavTouch),this.onTargetChange()}onTargetReady(t){t.on("change",this.onTargetChange),t.on("Panzoom.refresh",this.onTargetChange),this.onTargetChange()}onNavClick(t,e,i){this.onNavTouch(t,t.panzoom,i)}onNavTouch(t,e,i){var s,n;if(Math.abs(e.dragOffset.x)>3||Math.abs(e.dragOffset.y)>3)return;const o=i.target,{nav:r,target:c}=this;if(!r||!c||!o)return;const h=o.closest("[data-index]");if(i.stopPropagation(),i.preventDefault(),!h)return;const d=parseInt(h.dataset.index||"",10)||0,u=c.getPageForSlide(d),p=r.getPageForSlide(d);r.slideTo(p),c.slideTo(u,{friction:(null===(n=null===(s=this.nav)||void 0===s?void 0:s.plugins)||void 0===n?void 0:n.Sync.option("friction"))||0}),this.markSelectedSlide(d)}onNavCreateSlide(t,e){e.index===this.selectedIndex&&this.markSelectedSlide(e.index)}onTargetChange(){var t,e;const{target:i,nav:s}=this;if(!i||!s)return;if(s.state!==ga.Ready||i.state!==ga.Ready)return;const n=null===(e=null===(t=i.pages[i.page])||void 0===t?void 0:t.slides[0])||void 0===e?void 0:e.index,o=s.getPageForSlide(n);this.markSelectedSlide(n),s.slideTo(o,null===s.prevPage&&null===i.prevPage?{friction:0}:void 0)}markSelectedSlide(t){const e=this.nav;e&&e.state===ga.Ready&&(this.selectedIndex=t,[...e.slides].map((e=>{e.el&&e.el.classList[e.index===t?"add":"remove"]("is-nav-selected")})))}attach(){const t=this;let e=t.options.target,i=t.options.nav;e?t.addAsNavFor(e):i&&t.addAsTargetFor(i)}detach(){const t=this,e=t.nav,i=t.target;e&&(e.off("ready",t.onNavReady),e.off("createSlide",t.onNavCreateSlide),e.off("Panzoom.click",t.onNavClick),e.off("Panzoom.touchEnd",t.onNavTouch)),t.nav=null,i&&(i.off("ready",t.onTargetReady),i.off("refresh",t.onTargetChange),i.off("change",t.onTargetChange)),t.target=null}}Object.defineProperty(Z,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{friction:.35}});const xa={Navigation:V,Dots:va,Sync:Z},wa="animationend",Ta="isSelected",Aa="slide";class Q extends g{get axis(){return this.isHorizontal?"e":"f"}get isEnabled(){return this.state===ga.Ready}get isInfinite(){let t=!1;const{contentDim:e,viewportDim:i,pages:s,slides:n}=this,o=n[0];return s.length>=2&&o&&e+o.dim>=i&&(t=this.option("infinite")),t}get isRTL(){return"rtl"===this.option("direction")}get isHorizontal(){return"x"===this.option("axis")}constructor(t,e={},i={}){if(super(),Object.defineProperty(this,"bp",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"lp",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"userOptions",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ga.Init}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"prevPage",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"viewport",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"slides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"pages",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"panzoom",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"inTransition",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"contentDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"viewportDim",{enumerable:!0,configurable:!0,writable:!0,value:0}),"string"==typeof t&&(t=document.querySelector(t)),!t||!ea(t))throw new Error("No Element found");this.container=t,this.slideNext=pa(this.slideNext.bind(this),150),this.slidePrev=pa(this.slidePrev.bind(this),150),this.userOptions=e,this.userPlugins=i,queueMicrotask((()=>{this.processOptions()}))}processOptions(){var t,e;const i=Wr({},Q.defaults,this.userOptions);let s="";const n=i.breakpoints;if(n&&Gr(n))for(const[t,e]of Object.entries(n))window.matchMedia(t).matches&&Gr(e)&&(s+=t,Wr(i,e));s===this.bp&&this.state!==ga.Init||(this.bp=s,this.state===ga.Ready&&(i.initialSlide=(null===(e=null===(t=this.pages[this.page])||void 0===t?void 0:t.slides[0])||void 0===e?void 0:e.index)||0),this.state!==ga.Init&&this.destroy(),super.setOptions(i),!1===this.option("enabled")?this.attachEvents():setTimeout((()=>{this.init()}),0))}init(){this.state=ga.Init,this.emit("init"),this.attachPlugins(Object.assign(Object.assign({},Q.Plugins),this.userPlugins)),this.emit("attachPlugins"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.setInitialPosition(),this.initPanzoom(),this.attachEvents(),this.state=ga.Ready,this.emit("ready")}initLayout(){const{container:t}=this,e=this.option("classes");sa(t,this.cn("container")),Vr(t,e.isLTR,!this.isRTL),Vr(t,e.isRTL,this.isRTL),Vr(t,e.isVertical,!this.isHorizontal),Vr(t,e.isHorizontal,this.isHorizontal);let i=this.option("viewport")||t.querySelector(`.${e.viewport}`);i||(i=document.createElement("div"),sa(i,e.viewport),i.append(...fa(t,`.${e.slide}`)),t.prepend(i)),i.addEventListener("scroll",this.onScroll);let s=this.option("track")||t.querySelector(`.${e.track}`);s||(s=document.createElement("div"),sa(s,e.track),s.append(...Array.from(i.childNodes))),s.setAttribute("aria-live","polite"),i.contains(s)||i.prepend(s),this.viewport=i,this.track=s,this.emit("initLayout")}initSlides(){const{track:t}=this;if(!t)return;const e=[...this.slides],i=[];[...fa(t,`.${this.cn(Aa)}`)].forEach((t=>{if(ea(t)){const e=ma({el:t,isDom:!0,index:this.slides.length});i.push(e)}}));for(let t of[...this.option("slides",[])||[],...e])i.push(ma(t));this.slides=i;for(let t=0;t<this.slides.length;t++)this.slides[t].index=t;for(const t of i)this.emit("beforeInitSlide",t,t.index),this.emit("initSlide",t,t.index);this.emit("initSlides")}setInitialPage(){const t=this.option("initialSlide");this.page="number"==typeof t?this.getPageForSlide(t):parseInt(this.option("initialPage",0)+"",10)||0}setInitialPosition(){const{track:t,pages:e,isHorizontal:i}=this;if(!t||!e.length)return;let s=this.page;e[s]||(this.page=s=0);const n=(e[s].pos||0)*(this.isRTL&&i?1:-1),o=i?`${n}px`:"0",r=i?"0":`${n}px`;t.style.transform=`translate3d(${o}, ${r}, 0) scale(1)`,this.option("adaptiveHeight")&&this.setViewportHeight()}initPanzoom(){this.panzoom&&(this.panzoom.destroy(),this.panzoom=null);const t=this.option("Panzoom")||{};this.panzoom=new ua(this.viewport,Wr({},{content:this.track,zoom:!1,panOnlyZoomed:!1,lockAxis:this.isHorizontal?"x":"y",infinite:this.isInfinite,click:!1,dblClick:!1,touch:t=>!(this.pages.length<2&&!t.options.infinite),bounds:()=>this.getBounds(),maxVelocity:t=>Math.abs(t.target[this.axis]-t.current[this.axis])<2*this.viewportDim?100:0},t)),this.panzoom.on("*",((t,e,...i)=>{this.emit(`Panzoom.${e}`,t,...i)})),this.panzoom.on("decel",this.onDecel),this.panzoom.on("refresh",this.onRefresh),this.panzoom.on("beforeTransform",this.onBeforeTransform),this.panzoom.on("endAnimation",this.onEndAnimation)}attachEvents(){const t=this.container;t&&(t.addEventListener("click",this.onClick,{passive:!1,capture:!1}),t.addEventListener("slideTo",this.onSlideTo)),window.addEventListener("resize",this.onResize)}createPages(){let t=[];const{contentDim:e,viewportDim:i}=this;let s=this.option("slidesPerPage");s=("auto"===s||e<=i)&&!1!==this.option("fill")?1/0:parseFloat(s+"");let n=0,o=0,r=0;for(const e of this.slides)(!t.length||o+e.dim-i>.05||r>=s)&&(t.push(ba()),n=t.length-1,o=0,r=0),t[n].slides.push(e),o+=e.dim+e.gap,r++;return t}processPages(){const t=this.pages,{contentDim:e,viewportDim:i,isInfinite:s}=this,n=this.option("center"),o=this.option("fill"),r=o&&n&&e>i&&!s;if(t.forEach(((t,s)=>{var o;t.index=s,t.pos=(null===(o=t.slides[0])||void 0===o?void 0:o.pos)||0,t.dim=0;for(const[e,i]of t.slides.entries())t.dim+=i.dim,e<t.slides.length-1&&(t.dim+=i.gap);r&&t.pos+.5*t.dim<.5*i?t.pos=0:r&&t.pos+.5*t.dim>=e-.5*i?t.pos=e-i:n&&(t.pos+=-.5*(i-t.dim))})),t.forEach((t=>{o&&!s&&e>i&&(t.pos=Math.max(t.pos,0),t.pos=Math.min(t.pos,e-i)),t.pos=Br(t.pos,1e3),t.dim=Br(t.dim,1e3),Math.abs(t.pos)<=.1&&(t.pos=0)})),s)return t;const c=[];let h;return t.forEach((t=>{const e=Object.assign({},t);h&&e.pos===h.pos?(h.dim+=e.dim,h.slides=[...h.slides,...e.slides]):(e.index=c.length,h=e,c.push(e))})),c}getPageFromIndex(t=0){const e=this.pages.length;let i;return t=parseInt((t||0).toString())||0,i=this.isInfinite?(t%e+e)%e:Math.max(Math.min(t,e-1),0),i}getSlideMetrics(t){var e,i;const s=this.isHorizontal?"width":"height";let n=0,o=0,r=t.el;const c=!(!r||r.parentNode);if(r?n=parseFloat(r.dataset[s]||"")||0:(r=document.createElement("div"),r.style.visibility="hidden",(this.track||document.body).prepend(r)),sa(r,this.cn(Aa)+" "+t.class+" "+t.customClass),n)r.style[s]=`${n}px`,r.style["width"===s?"height":"width"]="";else{c&&(this.track||document.body).prepend(r),n=r.getBoundingClientRect()[s]*Math.max(1,(null===(e=window.visualViewport)||void 0===e?void 0:e.scale)||1);let t=r[this.isHorizontal?"offsetWidth":"offsetHeight"];t-1>n&&(n=t)}const h=getComputedStyle(r);return"content-box"===h.boxSizing&&(this.isHorizontal?(n+=parseFloat(h.paddingLeft)||0,n+=parseFloat(h.paddingRight)||0):(n+=parseFloat(h.paddingTop)||0,n+=parseFloat(h.paddingBottom)||0)),o=parseFloat(h[this.isHorizontal?"marginRight":"marginBottom"])||0,c?null===(i=r.parentElement)||void 0===i||i.removeChild(r):t.el||r.remove(),{dim:Br(n,1e3),gap:Br(o,1e3)}}getBounds(){const{isInfinite:t,isRTL:e,isHorizontal:i,pages:s}=this;let n={min:0,max:0};if(t)n={min:-1/0,max:1/0};else if(s.length){const t=s[0].pos,o=s[s.length-1].pos;n=e&&i?{min:t,max:o}:{min:-1*o,max:-1*t}}return{x:i?n:{min:0,max:0},y:i?{min:0,max:0}:n}}repositionSlides(){let t,{isHorizontal:e,isRTL:i,isInfinite:s,viewport:n,viewportDim:o,contentDim:r,page:c,pages:h,slides:d,panzoom:u}=this,p=0,m=0,b=0,v=0;u?v=-1*u.current[this.axis]:h[c]&&(v=h[c].pos||0),t=e?i?"right":"left":"top",i&&e&&(v*=-1);for(const e of d){const i=e.el;i?("top"===t?(i.style.right="",i.style.left=""):i.style.top="",e.index!==p?i.style[t]=0===m?"":`${Br(m,1e3)}px`:i.style[t]="",b+=e.dim+e.gap,p++):m+=e.dim+e.gap}if(s&&b&&n){let i=getComputedStyle(n),s="padding",c=e?"Right":"Bottom",h=parseFloat(i[s+(e?"Left":"Top")]);v-=h,o+=h,o+=parseFloat(i[s+c]);for(const e of d)e.el&&(Br(e.pos)<Br(o)&&Br(e.pos+e.dim+e.gap)<Br(v)&&Br(v)>Br(r-o)&&(e.el.style[t]=`${Br(m+b,1e3)}px`),Br(e.pos+e.gap)>=Br(r-o)&&Br(e.pos)>Br(v+o)&&Br(v)<Br(o)&&(e.el.style[t]=`-${Br(b,1e3)}px`))}let y,E,x=[...this.inTransition];if(x.length>1&&(y=h[x[0]],E=h[x[1]]),y&&E){let e=0;for(const i of d)i.el?this.inTransition.has(i.index)&&y.slides.indexOf(i)<0&&(i.el.style[t]=`${Br(e+(y.pos-E.pos),1e3)}px`):e+=i.dim+i.gap}}createSlideEl(t){const{track:e,slides:i}=this;if(!e||!t)return;if(t.el&&t.el.parentNode)return;const s=t.el||document.createElement("div");sa(s,this.cn(Aa)),sa(s,t.class),sa(s,t.customClass);const n=t.html;n&&(n instanceof HTMLElement?s.appendChild(n):s.innerHTML=t.html+"");const o=[];i.forEach(((t,e)=>{t.el&&o.push(e)}));const r=t.index;let c=null;o.length&&(c=i[o.reduce(((t,e)=>Math.abs(e-r)<Math.abs(t-r)?e:t))]);const h=c&&c.el&&c.el.parentNode?c.index<t.index?c.el.nextSibling:c.el:null;e.insertBefore(s,e.contains(h)?h:null),t.el=s,this.emit("createSlide",t)}removeSlideEl(t,e=!1){const i=null==t?void 0:t.el;if(!i||!i.parentNode)return;const s=this.cn(Ta);if(i.classList.contains(s)&&(ia(i,s),this.emit("unselectSlide",t)),t.isDom&&!e)return i.removeAttribute("aria-hidden"),i.removeAttribute("data-index"),void(i.style.left="");this.emit("removeSlide",t);const n=new CustomEvent(wa);i.dispatchEvent(n),t.el&&(t.el.remove(),t.el=null)}transitionTo(t=0,e=this.option("transition")){var i,s,n,o;if(!e)return!1;const r=this.page,{pages:c,panzoom:h}=this;t=parseInt((t||0).toString())||0;const d=this.getPageFromIndex(t);if(!h||!c[d]||c.length<2||Math.abs(((null===(s=null===(i=c[r])||void 0===i?void 0:i.slides[0])||void 0===s?void 0:s.dim)||0)-this.viewportDim)>1)return!1;let u=t>r?1:-1;this.isInfinite&&(0===r&&t===c.length-1&&(u=-1),r===c.length-1&&0===t&&(u=1));const p=c[d].pos*(this.isRTL?1:-1);if(r===d&&Math.abs(p-h.target[this.axis])<1)return!1;this.clearTransitions();const m=h.isResting;sa(this.container,this.cn("inTransition"));const b=(null===(n=c[r])||void 0===n?void 0:n.slides[0])||null,v=(null===(o=c[d])||void 0===o?void 0:o.slides[0])||null;this.inTransition.add(v.index),this.createSlideEl(v);let y=b.el,E=v.el;m||e===Aa||(e="fadeFast",y=null);const x=this.isRTL?"next":"prev",w=this.isRTL?"prev":"next";return y&&(this.inTransition.add(b.index),b.transition=e,y.addEventListener(wa,this.onAnimationEnd),y.classList.add(`f-${e}Out`,`to-${u>0?w:x}`)),E&&(v.transition=e,E.addEventListener(wa,this.onAnimationEnd),E.classList.add(`f-${e}In`,`from-${u>0?x:w}`)),h.current[this.axis]=p,h.target[this.axis]=p,h.requestTick(),this.onChange(d),!0}manageSlideVisiblity(){const t=new Set,e=new Set,i=this.getVisibleSlides(parseFloat(this.option("preload",0)+"")||0);for(const s of this.slides)i.has(s)?t.add(s):e.add(s);for(const e of this.inTransition)t.add(this.slides[e]);for(const e of t)this.createSlideEl(e),this.lazyLoadSlide(e);for(const i of e)t.has(i)||this.removeSlideEl(i);this.markSelectedSlides(),this.repositionSlides()}markSelectedSlides(){if(!this.pages[this.page]||!this.pages[this.page].slides)return;const t="aria-hidden";let e=this.cn(Ta);if(e)for(const i of this.slides){const s=i.el;s&&(s.dataset.index=`${i.index}`,s.classList.contains("f-thumbs__slide")?this.getVisibleSlides(0).has(i)?s.removeAttribute(t):s.setAttribute(t,"true"):this.pages[this.page].slides.includes(i)?(s.classList.contains(e)||(sa(s,e),this.emit("selectSlide",i)),s.removeAttribute(t)):(s.classList.contains(e)&&(ia(s,e),this.emit("unselectSlide",i)),s.setAttribute(t,"true")))}}flipInfiniteTrack(){const{axis:t,isHorizontal:e,isInfinite:i,isRTL:s,viewportDim:n,contentDim:o}=this,r=this.panzoom;if(!r||!i)return;let c=r.current[t],h=r.target[t]-c,d=0,u=.5*n;s&&e?(c<-u&&(d=-1,c+=o),c>o-u&&(d=1,c-=o)):(c>u&&(d=1,c-=o),c<-o+u&&(d=-1,c+=o)),d&&(r.current[t]=c,r.target[t]=c+h)}lazyLoadImg(t,e){const i=this,s="f-fadeIn",n="is-preloading";let o=!1,r=null;const c=()=>{o||(o=!0,r&&(r.remove(),r=null),ia(e,n),e.complete&&(sa(e,s),setTimeout((()=>{ia(e,s)}),350)),this.option("adaptiveHeight")&&t.el&&this.pages[this.page].slides.indexOf(t)>-1&&(i.updateMetrics(),i.setViewportHeight()),this.emit("load",t))};sa(e,n),e.src=e.dataset.lazySrcset||e.dataset.lazySrc||"",delete e.dataset.lazySrc,delete e.dataset.lazySrcset,e.addEventListener("error",(()=>{c()})),e.addEventListener("load",(()=>{c()})),setTimeout((()=>{const i=e.parentNode;i&&t.el&&(e.complete?c():o||(r=jr(ta),i.insertBefore(r,e)))}),300)}lazyLoadSlide(t){const e=t&&t.el;if(!e)return;const i=new Set;let s=Array.from(e.querySelectorAll("[data-lazy-src],[data-lazy-srcset]"));e.dataset.lazySrc&&s.push(e),s.map((t=>{t instanceof HTMLImageElement?i.add(t):t instanceof HTMLElement&&t.dataset.lazySrc&&(t.style.backgroundImage=`url('${t.dataset.lazySrc}')`,delete t.dataset.lazySrc)}));for(const e of i)this.lazyLoadImg(t,e)}onAnimationEnd(t){var e;const i=t.target,s=i?parseInt(i.dataset.index||"",10)||0:-1,n=this.slides[s],o=t.animationName;if(!i||!n||!o)return;const r=!!this.inTransition.has(s)&&n.transition;r&&o.substring(0,r.length+2)===`f-${r}`&&this.inTransition.delete(s),this.inTransition.size||this.clearTransitions(),s===this.page&&(null===(e=this.panzoom)||void 0===e?void 0:e.isResting)&&this.emit("settle")}onDecel(t,e=0,i=0,s=0,n=0){if(this.option("dragFree"))return void this.setPageFromPosition();const{isRTL:o,isHorizontal:r,axis:c,pages:h}=this,d=h.length,u=Math.abs(Math.atan2(i,e)/(Math.PI/180));let p=0;if(p=u>45&&u<135?r?0:i:r?e:0,!d)return;let m=this.page,b=o&&r?1:-1;const v=t.current[c]*b;let{pageIndex:y}=this.getPageFromPosition(v);Math.abs(p)>5?(h[m].dim<document.documentElement["client"+(this.isHorizontal?"Width":"Height")]-1&&(m=y),m=o&&r?p<0?m-1:m+1:p<0?m+1:m-1):m=0===s&&0===n?m:y,this.slideTo(m,{transition:!1,friction:t.option("decelFriction")})}onClick(t){const e=t.target,i=e&&ea(e)?e.dataset:null;let s,n;i&&(void 0!==i.carouselPage?(n="slideTo",s=i.carouselPage):void 0!==i.carouselNext?n="slideNext":void 0!==i.carouselPrev&&(n="slidePrev")),n?(t.preventDefault(),t.stopPropagation(),e&&!e.hasAttribute("disabled")&&this[n](s)):this.emit("click",t)}onSlideTo(t){const e=t.detail||0;this.slideTo(this.getPageForSlide(e),{friction:0})}onChange(t,e=0){const i=this.page;this.prevPage=i,this.page=t,this.option("adaptiveHeight")&&this.setViewportHeight(),t!==i&&(this.markSelectedSlides(),this.emit("change",t,i,e))}onRefresh(){let t=this.contentDim,e=this.viewportDim;this.updateMetrics(),this.contentDim===t&&this.viewportDim===e||this.slideTo(this.page,{friction:0,transition:!1})}onScroll(){var t;null===(t=this.viewport)||void 0===t||t.scroll(0,0)}onResize(){this.option("breakpoints")&&this.processOptions()}onBeforeTransform(t){this.lp!==t.current[this.axis]&&(this.flipInfiniteTrack(),this.manageSlideVisiblity()),this.lp=t.current.e}onEndAnimation(){this.inTransition.size||this.emit("settle")}reInit(t=null,e=null){this.destroy(),this.state=ga.Init,this.prevPage=null,this.userOptions=t||this.userOptions,this.userPlugins=e||this.userPlugins,this.processOptions()}slideTo(t=0,{friction:e=this.option("friction"),transition:i=this.option("transition")}={}){if(this.state===ga.Destroy)return;t=parseInt((t||0).toString())||0;const s=this.getPageFromIndex(t),{axis:n,isHorizontal:o,isRTL:r,pages:c,panzoom:h}=this,d=c.length,u=r&&o?1:-1;if(!h||!d)return;if(this.page!==s){const e=new Event("beforeChange",{bubbles:!0,cancelable:!0});if(this.emit("beforeChange",e,t),e.defaultPrevented)return}if(this.transitionTo(t,i))return;let p=c[s].pos;if(this.isInfinite){const e=this.contentDim,i=h.target[n]*u;2===d?p+=e*Math.floor(parseFloat(t+"")/2):p=[p,p-e,p+e].reduce((function(t,e){return Math.abs(e-i)<Math.abs(t-i)?e:t}))}p*=u,Math.abs(h.target[n]-p)<1||(h.panTo({x:o?p:0,y:o?0:p,friction:e}),this.onChange(s))}slideToClosest(t){if(this.panzoom){const{pageIndex:e}=this.getPageFromPosition();this.slideTo(e,t)}}slideNext(){this.slideTo(this.page+1)}slidePrev(){this.slideTo(this.page-1)}clearTransitions(){this.inTransition.clear(),ia(this.container,this.cn("inTransition"));const t=["to-prev","to-next","from-prev","from-next"];for(const e of this.slides){const i=e.el;if(i){i.removeEventListener(wa,this.onAnimationEnd),i.classList.remove(...t);const s=e.transition;s&&i.classList.remove(`f-${s}Out`,`f-${s}In`)}}this.manageSlideVisiblity()}addSlide(t,e){var i,s,n,o;const r=this.panzoom,c=(null===(i=this.pages[this.page])||void 0===i?void 0:i.pos)||0,h=(null===(s=this.pages[this.page])||void 0===s?void 0:s.dim)||0,d=this.contentDim<this.viewportDim;let u=Array.isArray(e)?e:[e];const p=[];for(const t of u)p.push(ma(t));this.slides.splice(t,0,...p);for(let t=0;t<this.slides.length;t++)this.slides[t].index=t;for(const t of p)this.emit("beforeInitSlide",t,t.index);if(this.page>=t&&(this.page+=p.length),this.updateMetrics(),r){const e=(null===(n=this.pages[this.page])||void 0===n?void 0:n.pos)||0,i=(null===(o=this.pages[this.page])||void 0===o?void 0:o.dim)||0,s=this.pages.length||1,u=this.isRTL?h-i:i-h,p=this.isRTL?c-e:e-c;d&&1===s?(t<=this.page&&(r.current[this.axis]-=u,r.target[this.axis]-=u),r.panTo({[this.isHorizontal?"x":"y"]:-1*e})):p&&t<=this.page&&(r.target[this.axis]-=p,r.current[this.axis]-=p,r.requestTick())}for(const t of p)this.emit("initSlide",t,t.index)}prependSlide(t){this.addSlide(0,t)}appendSlide(t){this.addSlide(this.slides.length,t)}removeSlide(t){const e=this.slides.length;t=(t%e+e)%e;const i=this.slides[t];if(i){this.removeSlideEl(i,!0),this.slides.splice(t,1);for(let t=0;t<this.slides.length;t++)this.slides[t].index=t;this.updateMetrics(),this.slideTo(this.page,{friction:0,transition:!1}),this.emit("destroySlide",i)}}updateMetrics(){const{panzoom:t,viewport:e,track:i,slides:s,isHorizontal:n,isInfinite:o}=this;if(!i)return;const r=n?"width":"height",c=n?"offsetWidth":"offsetHeight";if(e){let t=Math.max(e[c],Br(e.getBoundingClientRect()[r],1e3)),i=getComputedStyle(e),s="padding",o=n?"Right":"Bottom";t-=parseFloat(i[s+(n?"Left":"Top")])+parseFloat(i[s+o]),this.viewportDim=t}let h,d=0;for(const[t,e]of s.entries()){let i=0,n=0;!e.el&&h?(i=h.dim,n=h.gap):(({dim:i,gap:n}=this.getSlideMetrics(e)),h=e),i=Br(i,1e3),n=Br(n,1e3),e.dim=i,e.gap=n,e.pos=d,d+=i,(o||t<s.length-1)&&(d+=n)}d=Br(d,1e3),this.contentDim=d,t&&(t.contentRect[r]=d,t.contentRect[n?"fullWidth":"fullHeight"]=d),this.pages=this.createPages(),this.pages=this.processPages(),this.state===ga.Init&&this.setInitialPage(),this.page=Math.max(0,Math.min(this.page,this.pages.length-1)),this.manageSlideVisiblity(),this.emit("refresh")}getProgress(t,e=!1,i=!1){void 0===t&&(t=this.page);const s=this,n=s.panzoom,o=s.contentDim,r=s.pages[t]||0;if(!r||!n)return t>this.page?-1:1;let c=-1*n.current.e,h=Br((c-r.pos)/(1*r.dim),1e3),d=h,u=h;this.isInfinite&&!0!==i&&(d=Br((c-r.pos+o)/(1*r.dim),1e3),u=Br((c-r.pos-o)/(1*r.dim),1e3));let p=[h,d,u].reduce((function(t,e){return Math.abs(e)<Math.abs(t)?e:t}));return e?p:p>1?1:p<-1?-1:p}setViewportHeight(){const{page:t,pages:e,viewport:i,isHorizontal:s}=this;if(!i||!e[t])return;let n=0;s&&this.track&&(this.track.style.height="auto",e[t].slides.forEach((t=>{t.el&&(n=Math.max(n,t.el.offsetHeight))}))),i.style.height=n?`${n}px`:""}getPageForSlide(t){for(const e of this.pages)for(const i of e.slides)if(i.index===t)return e.index;return-1}getVisibleSlides(t=0){var e;const i=new Set;let{panzoom:s,contentDim:n,viewportDim:o,pages:r,page:c}=this;if(o){n=n+(null===(e=this.slides[this.slides.length-1])||void 0===e?void 0:e.gap)||0;let h=0;h=s&&s.state!==Xr.Init&&s.state!==Xr.Destroy?-1*s.current[this.axis]:r[c]&&r[c].pos||0,this.isInfinite&&(h-=Math.floor(h/n)*n),this.isRTL&&this.isHorizontal&&(h*=-1);const d=h-o*t,u=h+o*(t+1),p=this.isInfinite?[-1,0,1]:[0];for(const t of this.slides)for(const e of p){const s=t.pos+e*n,o=s+t.dim+t.gap;s<u&&o>d&&i.add(t)}}return i}getPageFromPosition(t){const{viewportDim:e,contentDim:i,slides:s,pages:n,panzoom:o}=this,r=n.length,c=s.length,h=s[0],d=s[c-1],u=this.option("center");let p=0,m=0,b=0,v=void 0===t?-1*((null==o?void 0:o.target[this.axis])||0):t;u&&(v+=.5*e),this.isInfinite?(v<h.pos-.5*d.gap&&(v-=i,b=-1),v>d.pos+d.dim+.5*d.gap&&(v-=i,b=1)):v=Math.max(h.pos||0,Math.min(v,d.pos));let y=d,E=s.find((t=>{const e=t.pos-.5*y.gap,i=t.pos+t.dim+.5*t.gap;return y=t,v>=e&&v<i}));return E||(E=d),m=this.getPageForSlide(E.index),p=m+b*r,{page:p,pageIndex:m}}setPageFromPosition(){const{pageIndex:t}=this.getPageFromPosition();this.onChange(t)}destroy(){if([ga.Destroy].includes(this.state))return;this.state=ga.Destroy;const{container:t,viewport:e,track:i,slides:s,panzoom:n}=this,o=this.option("classes");t.removeEventListener("click",this.onClick,{passive:!1,capture:!1}),t.removeEventListener("slideTo",this.onSlideTo),window.removeEventListener("resize",this.onResize),n&&(n.destroy(),this.panzoom=null),s&&s.forEach((t=>{this.removeSlideEl(t)})),this.detachPlugins(),e&&(e.removeEventListener("scroll",this.onScroll),e.offsetParent&&i&&i.offsetParent&&e.replaceWith(...i.childNodes));for(const[e,i]of Object.entries(o))"container"!==e&&i&&t.classList.remove(i);this.track=null,this.viewport=null,this.page=0,this.slides=[];const r=this.events.get("ready");this.events=new Map,r&&this.events.set("ready",r)}}Object.defineProperty(Q,"Panzoom",{enumerable:!0,configurable:!0,writable:!0,value:ua}),Object.defineProperty(Q,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{viewport:null,track:null,enabled:!0,slides:[],axis:"x",transition:"fade",preload:1,slidesPerPage:"auto",initialPage:0,friction:.12,Panzoom:{decelFriction:.12},center:!0,infinite:!0,fill:!0,dragFree:!1,adaptiveHeight:!1,direction:"ltr",classes:{container:"f-carousel",viewport:"f-carousel__viewport",track:"f-carousel__track",slide:"f-carousel__slide",isLTR:"is-ltr",isRTL:"is-rtl",isHorizontal:"is-horizontal",isVertical:"is-vertical",inTransition:"in-transition",isSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide #%d"}}}),Object.defineProperty(Q,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:xa});const Sa=function(t){if(!ea(t))return 0;const e=window.scrollY,i=window.innerHeight,s=e+i,n=t.getBoundingClientRect(),o=n.y+e,r=n.height,c=o+r;if(e>c||s<o)return 0;if(e<o&&s>c)return 100;if(o<e&&c>s)return 100;let h=r;o<e&&(h-=e-o),c>s&&(h-=c-s);const d=h/i*100;return Math.round(d)},Oa=!("undefined"==typeof window||!window.document||!window.document.createElement);let Da;const Ca=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden]):not(.fancybox-focus-guard)","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'].join(","),Ia=t=>{if(t&&Oa){void 0===Da&&document.createElement("div").focus({get preventScroll(){return Da=!0,!1}});try{if(Da)t.focus({preventScroll:!0});else{const e=window.scrollY||document.body.scrollTop,i=window.scrollX||document.body.scrollLeft;t.focus(),document.body.scrollTo({top:e,left:i,behavior:"auto"})}}catch(t){}}},Ma=()=>{const t=document;let e,i="",s="",n="";return t.fullscreenEnabled?(i="requestFullscreen",s="exitFullscreen",n="fullscreenElement"):t.webkitFullscreenEnabled&&(i="webkitRequestFullscreen",s="webkitExitFullscreen",n="webkitFullscreenElement"),i&&(e={request:function(e=t.documentElement){return"webkitRequestFullscreen"===i?e[i](Element.ALLOW_KEYBOARD_INPUT):e[i]()},exit:function(){return t[n]&&t[s]()},isFullscreen:function(){return t[n]}}),e},La={animated:!0,autoFocus:!0,backdropClick:"close",Carousel:{classes:{container:"fancybox__carousel",viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"}},closeButton:"auto",closeExisting:!1,commonCaption:!1,compact:()=>window.matchMedia("(max-width: 578px), (max-height: 578px)").matches,contentClick:"toggleZoom",contentDblClick:!1,defaultType:"image",defaultDisplay:"flex",dragToClose:!0,Fullscreen:{autoStart:!1},groupAll:!1,groupAttr:"data-fancybox",hideClass:"f-fadeOut",hideScrollbar:!0,idle:3500,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"prev",ArrowDown:"next",ArrowRight:"next",ArrowLeft:"prev"},l10n:Object.assign(Object.assign({},Zr),{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}),parentEl:null,placeFocusBack:!0,showClass:"f-zoomInUp",startIndex:0,tpl:{closeButton:'<button data-fancybox-close class="f-button is-close-btn" title="{{CLOSE}}"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg></button>',main:'<div class="fancybox__container" role="dialog" aria-modal="true" aria-label="{{MODAL}}" tabindex="-1">\n    <div class="fancybox__backdrop"></div>\n    <div class="fancybox__carousel"></div>\n    <div class="fancybox__footer"></div>\n  </div>'},trapFocus:!0,wheel:"zoom"};var ka,Ra;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Closing=2]="Closing",t[t.CustomClosing=3]="CustomClosing",t[t.Destroy=4]="Destroy"}(ka||(ka={})),function(t){t[t.Loading=0]="Loading",t[t.Opening=1]="Opening",t[t.Ready=2]="Ready",t[t.Closing=3]="Closing"}(Ra||(Ra={}));let Pa="",Na=!1,Ba=!1,Fa=null;const qa=()=>{let t="",e="";const i=Oe.getInstance();if(i){const s=i.carousel,n=i.getSlide();if(s&&n){let o=n.slug||void 0,r=n.triggerEl||void 0;e=o||i.option("slug")||"",!e&&r&&r.dataset&&(e=r.dataset.fancybox||""),e&&"true"!==e&&(t="#"+e+(!o&&s.slides.length>1?"-"+(n.index+1):""))}}return{hash:t,slug:e,index:1}},ja=()=>{const t=new URL(document.URL).hash,e=t.slice(1).split("-"),i=e[e.length-1],s=i&&/^\+?\d+$/.test(i)&&parseInt(e.pop()||"1",10)||1;return{hash:t,slug:e.join("-"),index:s}},za=()=>{const{slug:t,index:e}=ja();if(!t)return;let i=document.querySelector(`[data-slug="${t}"]`);if(i&&i.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),Oe.getInstance())return;const s=document.querySelectorAll(`[data-fancybox="${t}"]`);s.length&&(i=s[e-1],i&&i.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))},Va=()=>{if(!1===Oe.defaults.Hash)return;const t=Oe.getInstance();if(!1===(null==t?void 0:t.options.Hash))return;const{slug:e,index:i}=ja(),{slug:s}=qa();t&&(e===s?t.jumpTo(i-1):(Na=!0,t.close())),za()},Ha=()=>{Fa&&clearTimeout(Fa),queueMicrotask((()=>{Va()}))},$a=()=>{window.addEventListener("hashchange",Ha,!1),setTimeout((()=>{Va()}),500)};Oa&&(/complete|interactive|loaded/.test(document.readyState)?$a():document.addEventListener("DOMContentLoaded",$a));const Ua="is-zooming-in";class wt extends _{onCreateSlide(t,e,i){const s=this.instance.optionFor(i,"src")||"";i.el&&"image"===i.type&&"string"==typeof s&&this.setImage(i,s)}onRemoveSlide(t,e,i){i.panzoom&&i.panzoom.destroy(),i.panzoom=void 0,i.imageEl=void 0}onChange(t,e,i,s){ia(this.instance.container,Ua);for(const t of e.slides){const e=t.panzoom;e&&t.index!==i&&e.reset(.35)}}onClose(){var t;const e=this.instance,i=e.container,s=e.getSlide();if(!i||!i.parentElement||!s)return;const{el:n,contentEl:o,panzoom:r,thumbElSrc:c}=s;if(!n||!c||!o||!r||r.isContentLoading||r.state===Xr.Init||r.state===Xr.Destroy)return;r.updateMetrics();let h=this.getZoomInfo(s);if(!h)return;this.instance.state=ka.CustomClosing,i.classList.remove(Ua),i.classList.add("is-zooming-out"),o.style.backgroundImage=`url('${c}')`;const d=i.getBoundingClientRect();1===((null===(t=window.visualViewport)||void 0===t?void 0:t.scale)||1)&&Object.assign(i.style,{position:"absolute",top:`${i.offsetTop+window.scrollY}px`,left:`${i.offsetLeft+window.scrollX}px`,bottom:"auto",right:"auto",width:`${d.width}px`,height:`${d.height}px`,overflow:"hidden"});const{x:u,y:p,scale:m,opacity:b}=h;if(b){const t=((t,e,i,s)=>{const n=e-t;return e=>1+((e-t)/n*-1||0)})(r.scale,m);r.on("afterTransform",(()=>{o.style.opacity=t(r.scale)+""}))}r.on("endAnimation",(()=>{e.destroy()})),r.target.a=m,r.target.b=0,r.target.c=0,r.target.d=m,r.panTo({x:u,y:p,scale:m,friction:b?.2:.33,ignoreBounds:!0}),r.isResting&&e.destroy()}setImage(t,e){const i=this.instance;t.src=e,this.process(t,e).then((e=>{const{contentEl:s,imageEl:n,thumbElSrc:o,el:r}=t;if(i.isClosing()||!s||!n)return;s.offsetHeight;const c=!!i.isOpeningSlide(t)&&this.getZoomInfo(t);if(this.option("protected")&&r){r.addEventListener("contextmenu",(t=>{t.preventDefault()}));const t=document.createElement("div");sa(t,"fancybox-protected"),s.appendChild(t)}if(o&&c){const n=e.contentRect,r=Math.max(n.fullWidth,n.fullHeight);let d=null;!c.opacity&&r>1200&&(d=document.createElement("img"),sa(d,"fancybox-ghost"),d.src=o,s.appendChild(d));const u=()=>{d&&(sa(d,"f-fadeFastOut"),setTimeout((()=>{d&&(d.remove(),d=null)}),200))};(h=o,new Promise(((t,e)=>{const i=new Image;i.onload=t,i.onerror=e,i.src=h}))).then((()=>{i.hideLoading(t),t.state=Ra.Opening,this.instance.emit("reveal",t),this.zoomIn(t).then((()=>{u(),this.instance.done(t)}),(()=>{})),d&&setTimeout((()=>{u()}),r>2500?800:200)}),(()=>{i.hideLoading(t),i.revealContent(t)}))}else{const s=this.optionFor(t,"initialSize"),n=this.optionFor(t,"zoom"),o={event:i.prevMouseMoveEvent||i.options.event,friction:n?.12:0};let r=i.optionFor(t,"showClass")||void 0,c=!0;i.isOpeningSlide(t)&&("full"===s?e.zoomToFull(o):"cover"===s?e.zoomToCover(o):"max"===s?e.zoomToMax(o):c=!1,e.stop("current")),c&&r&&(r=e.isDragging?"f-fadeIn":""),i.hideLoading(t),i.revealContent(t,r)}var h}),(()=>{i.setError(t,"{{IMAGE_ERROR}}")}))}process(t,e){return new Promise(((i,s)=>{var n;const o=this.instance,r=t.el;o.clearContent(t),o.showLoading(t);let c=this.optionFor(t,"content");if("string"==typeof c&&(c=jr(c)),!c||!ea(c)){if(c=document.createElement("img"),c instanceof HTMLImageElement){let i="",s=t.caption;i="string"==typeof s&&s?s.replace(/<[^>]+>/gi,"").substring(0,1e3):`Image ${t.index+1} of ${(null===(n=o.carousel)||void 0===n?void 0:n.pages.length)||1}`,c.src=e||"",c.alt=i,c.draggable=!1,t.srcset&&c.setAttribute("srcset",t.srcset),this.instance.isOpeningSlide(t)&&(c.fetchPriority="high")}t.sizes&&c.setAttribute("sizes",t.sizes)}sa(c,"fancybox-image"),t.imageEl=c,o.setContent(t,c,!1),t.panzoom=new ua(r,Wr({transformParent:!0},this.option("Panzoom")||{},{content:c,width:(e,i)=>o.optionFor(t,"width","auto",i)||"auto",height:(e,i)=>o.optionFor(t,"height","auto",i)||"auto",wheel:()=>{const t=o.option("wheel");return("zoom"===t||"pan"==t)&&t},click:(e,i)=>{var s,n;if(o.isCompact||o.isClosing())return!1;if(t.index!==(null===(s=o.getSlide())||void 0===s?void 0:s.index))return!1;if(i){const t=i.composedPath()[0];if(["A","BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].includes(t.nodeName))return!1}let r=!i||i.target&&(null===(n=t.contentEl)||void 0===n?void 0:n.contains(i.target));return o.option(r?"contentClick":"backdropClick")||!1},dblClick:()=>o.isCompact?"toggleZoom":o.option("contentDblClick")||!1,spinner:!1,panOnlyZoomed:!0,wheelLimit:1/0,on:{ready:t=>{i(t)},error:()=>{s()},destroy:()=>{s()}}}))}))}zoomIn(t){return new Promise(((e,i)=>{const s=this.instance,n=s.container,{panzoom:o,contentEl:r,el:c}=t;o&&o.updateMetrics();const h=this.getZoomInfo(t);if(!(h&&c&&r&&o&&n))return void i();const{x:d,y:u,scale:p,opacity:m}=h,b=()=>{t.state!==Ra.Closing&&(m&&(r.style.opacity=Math.max(Math.min(1,1-(1-o.scale)/(1-p)),0)+""),o.scale>=1&&o.scale>o.targetScale-.1&&e(o))},v=t=>{(t.scale<.99||t.scale>1.01)&&!t.isDragging||(ia(n,Ua),r.style.opacity="",t.off("endAnimation",v),t.off("touchStart",v),t.off("afterTransform",b),e(t))};o.on("endAnimation",v),o.on("touchStart",v),o.on("afterTransform",b),o.on(["error","destroy"],(()=>{i()})),o.panTo({x:d,y:u,scale:p,friction:0,ignoreBounds:!0}),o.stop("current");const y={event:"mousemove"===o.panMode?s.prevMouseMoveEvent||s.options.event:void 0},E=this.optionFor(t,"initialSize");sa(n,Ua),s.hideLoading(t),"full"===E?o.zoomToFull(y):"cover"===E?o.zoomToCover(y):"max"===E?o.zoomToMax(y):o.reset(.172)}))}getZoomInfo(t){const{el:e,imageEl:i,thumbEl:s,panzoom:n}=t,o=this.instance,r=o.container;if(!e||!i||!s||!n||Sa(s)<3||!this.optionFor(t,"zoom")||!r||o.state===ka.Destroy)return!1;if("0"===getComputedStyle(r).getPropertyValue("--f-images-zoom"))return!1;const c=window.visualViewport||null;if(1!==(c?c.scale:1))return!1;let{top:h,left:d,width:u,height:p}=s.getBoundingClientRect(),{top:m,left:b,fitWidth:v,fitHeight:y}=n.contentRect;if(!(u&&p&&v&&y))return!1;const E=n.container.getBoundingClientRect();b+=E.left,m+=E.top;const x=-1*(b+.5*v-(d+.5*u)),w=-1*(m+.5*y-(h+.5*p)),S=u/v;let O=this.option("zoomOpacity")||!1;return"auto"===O&&(O=Math.abs(u/p-v/y)>.1),{x:x,y:w,scale:S,opacity:O}}attach(){const t=this,e=t.instance;e.on("Carousel.change",t.onChange),e.on("Carousel.createSlide",t.onCreateSlide),e.on("Carousel.removeSlide",t.onRemoveSlide),e.on("close",t.onClose)}detach(){const t=this,e=t.instance;e.off("Carousel.change",t.onChange),e.off("Carousel.createSlide",t.onCreateSlide),e.off("Carousel.removeSlide",t.onRemoveSlide),e.off("close",t.onClose)}}Object.defineProperty(wt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{initialSize:"fit",Panzoom:{maxScale:1},protected:!1,zoom:!0,zoomOpacity:"auto"}}),"function"==typeof SuppressedError&&SuppressedError;const Ga="html",Wa="image",Ya="map",Xa="youtube",Qa="vimeo",Za="html5video",Ka=(t,e={})=>{const i=new URL(t),s=new URLSearchParams(i.search),n=new URLSearchParams;for(const[t,i]of[...s,...Object.entries(e)]){let e=i+"";if("t"===t){let t=e.match(/((\d*)m)?(\d*)s?/);t&&n.set("start",60*parseInt(t[2]||"0")+parseInt(t[3]||"0")+"")}else n.set(t,e)}let o=n+"",r=t.match(/#t=((.*)?\d+s)/);return r&&(o+=`#t=${r[1]}`),o},Ja=["image","html","ajax","inline","clone","iframe","map","pdf","html5video","youtube","vimeo"];class Lt extends _{onBeforeInitSlide(t,e,i){this.processType(i)}onCreateSlide(t,e,i){this.setContent(i)}onClearContent(t,e){e.xhr&&(e.xhr.abort(),e.xhr=null);const i=e.iframeEl;i&&(i.onload=i.onerror=null,i.src="//about:blank",e.iframeEl=null);const s=e.contentEl,n=e.placeholderEl;if("inline"===e.type&&s&&n)s.classList.remove("fancybox__content"),"none"!==getComputedStyle(s).getPropertyValue("display")&&(s.style.display="none"),setTimeout((()=>{n&&(s&&n.parentNode&&n.parentNode.insertBefore(s,n),n.remove())}),0),e.contentEl=void 0,e.placeholderEl=void 0;else for(;e.el&&e.el.firstChild;)e.el.removeChild(e.el.firstChild)}onSelectSlide(t,e,i){i.state===Ra.Ready&&this.playVideo()}onUnselectSlide(t,e,i){var s,n;if(i.type===Za){try{null===(n=null===(s=i.el)||void 0===s?void 0:s.querySelector("video"))||void 0===n||n.pause()}catch(t){}return}let o;i.type===Qa?o={method:"pause",value:"true"}:i.type===Xa&&(o={event:"command",func:"pauseVideo"}),o&&i.iframeEl&&i.iframeEl.contentWindow&&i.iframeEl.contentWindow.postMessage(JSON.stringify(o),"*"),i.poller&&clearTimeout(i.poller)}onDone(t,e){t.isCurrentSlide(e)&&!t.isClosing()&&this.playVideo()}onRefresh(t,e){e.slides.forEach((t=>{t.el&&(this.resizeIframe(t),this.setAspectRatio(t))}))}onMessage(t){try{let e=JSON.parse(t.data);if("https://player.vimeo.com"===t.origin){if("ready"===e.event)for(let e of Array.from(document.getElementsByClassName("fancybox__iframe")))e instanceof HTMLIFrameElement&&e.contentWindow===t.source&&(e.dataset.ready="true")}else if(t.origin.match(/^https:\/\/(www.)?youtube(-nocookie)?.com$/)&&"onReady"===e.event){const t=document.getElementById(e.id);t&&(t.dataset.ready="true")}}catch(t){}}loadAjaxContent(t){const e=this.instance.optionFor(t,"src")||"";this.instance.showLoading(t);const i=this.instance,s=new XMLHttpRequest;i.showLoading(t),s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&i.state===ka.Ready&&(i.hideLoading(t),200===s.status?i.setContent(t,s.responseText):i.setError(t,404===s.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))};const n=t.ajax||null;s.open(n?"POST":"GET",e+""),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.setRequestHeader("X-Requested-With","XMLHttpRequest"),s.send(n),t.xhr=s}setInlineContent(t){let e=null;if(ea(t.src))e=t.src;else if("string"==typeof t.src){const i=t.src.split("#",2).pop();e=i?document.getElementById(i):null}if(e){if("clone"===t.type||e.closest(".fancybox__slide")){e=e.cloneNode(!0);const i=e.dataset.animationName;i&&(e.classList.remove(i),delete e.dataset.animationName);let s=e.getAttribute("id");s=s?`${s}--clone`:`clone-${this.instance.id}-${t.index}`,e.setAttribute("id",s)}else if(e.parentNode){const i=document.createElement("div");i.classList.add("fancybox-placeholder"),e.parentNode.insertBefore(i,e),t.placeholderEl=i}this.instance.setContent(t,e)}else this.instance.setError(t,"{{ELEMENT_NOT_FOUND}}")}setIframeContent(t){const{src:e,el:i}=t;if(!e||"string"!=typeof e||!i)return;i.classList.add("is-loading");const s=this.instance,n=document.createElement("iframe");n.className="fancybox__iframe",n.setAttribute("id",`fancybox__iframe_${s.id}_${t.index}`);for(const[e,i]of Object.entries(this.optionFor(t,"iframeAttr")||{}))n.setAttribute(e,i);n.onerror=()=>{s.setError(t,"{{IFRAME_ERROR}}")},t.iframeEl=n;const o=this.optionFor(t,"preload");if("iframe"!==t.type||!1===o)return n.setAttribute("src",t.src+""),s.setContent(t,n,!1),this.resizeIframe(t),void s.revealContent(t);s.showLoading(t),n.onload=()=>{if(!n.src.length)return;const e="true"!==n.dataset.ready;n.dataset.ready="true",this.resizeIframe(t),e?s.revealContent(t):s.hideLoading(t)},n.setAttribute("src",e),s.setContent(t,n,!1)}resizeIframe(t){const{type:e,iframeEl:i}=t;if(e===Xa||e===Qa)return;const s=null==i?void 0:i.parentElement;if(!i||!s)return;let n=t.autoSize;void 0===n&&(n=this.optionFor(t,"autoSize"));let o=t.width||0,r=t.height||0;o&&r&&(n=!1);const c=s&&s.style;if(!1!==t.preload&&!1!==n&&c)try{const t=window.getComputedStyle(s),e=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight),n=parseFloat(t.paddingTop)+parseFloat(t.paddingBottom),h=i.contentWindow;if(h){const t=h.document,i=t.getElementsByTagName(Ga)[0],s=t.body;c.width="",s.style.overflow="hidden",o=o||i.scrollWidth+e,c.width=`${o}px`,s.style.overflow="",c.flex="0 0 auto",c.height=`${s.scrollHeight}px`,r=i.scrollHeight+n}}catch(t){}if(o||r){const t={flex:"0 1 auto",width:"",height:""};o&&"auto"!==o&&(t.width=`${o}px`),r&&"auto"!==r&&(t.height=`${r}px`),Object.assign(c,t)}}playVideo(){const t=this.instance.getSlide();if(!t)return;const{el:e}=t;if(!e||!e.offsetParent)return;if(!this.optionFor(t,"videoAutoplay"))return;if(t.type===Za)try{const t=e.querySelector("video");if(t){const e=t.play();void 0!==e&&e.then((()=>{})).catch((e=>{t.muted=!0,t.play()}))}}catch(t){}if(t.type!==Xa&&t.type!==Qa)return;const i=()=>{if(t.iframeEl&&t.iframeEl.contentWindow){let e;if("true"===t.iframeEl.dataset.ready)return e=t.type===Xa?{event:"command",func:"playVideo"}:{method:"play",value:"true"},e&&t.iframeEl.contentWindow.postMessage(JSON.stringify(e),"*"),void(t.poller=void 0);t.type===Xa&&(e={event:"listening",id:t.iframeEl.getAttribute("id")},t.iframeEl.contentWindow.postMessage(JSON.stringify(e),"*"))}t.poller=setTimeout(i,250)};i()}processType(t){if(t.html)return t.type=Ga,t.src=t.html,void(t.html="");const e=this.instance.optionFor(t,"src","");if(!e||"string"!=typeof e)return;let i=t.type,s=null;if(s=e.match(/(youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|shorts\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){const n=this.optionFor(t,Xa),{nocookie:o}=n,r=function(t,e){var i={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(i[s]=t[s]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(s=Object.getOwnPropertySymbols(t);n<s.length;n++)e.indexOf(s[n])<0&&Object.prototype.propertyIsEnumerable.call(t,s[n])&&(i[s[n]]=t[s[n]])}return i}(n,["nocookie"]),c=`www.youtube${o?"-nocookie":""}.com`,h=Ka(e,r),d=encodeURIComponent(s[2]);t.videoId=d,t.src=`https://${c}/embed/${d}?${h}`,t.thumbSrc=t.thumbSrc||`https://i.ytimg.com/vi/${d}/mqdefault.jpg`,i=Xa}else if(s=e.match(/^.+vimeo.com\/(?:\/)?([\d]+)((\/|\?h=)([a-z0-9]+))?(.*)?/)){const n=Ka(e,this.optionFor(t,Qa)),o=encodeURIComponent(s[1]),r=s[4]||"";t.videoId=o,t.src=`https://player.vimeo.com/video/${o}?${r?`h=${r}${n?"&":""}`:""}${n}`,i=Qa}if(!i&&t.triggerEl){const e=t.triggerEl.dataset.type;Ja.includes(e)&&(i=e)}i||"string"==typeof e&&("#"===e.charAt(0)?i="inline":(s=e.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(i=Za,t.videoFormat=t.videoFormat||"video/"+("ogv"===s[1]?"ogg":s[1])):e.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?i=Wa:e.match(/\.(pdf)((\?|#).*)?$/i)&&(i="pdf")),(s=e.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(t.src=`https://maps.google.${s[1]}/?ll=${(s[2]?s[2]+"&z="+Math.floor(parseFloat(s[3]))+(s[4]?s[4].replace(/^\//,"&"):""):s[4]+"").replace(/\?/,"&")}&output=${s[4]&&s[4].indexOf("layer=c")>0?"svembed":"embed"}`,i=Ya):(s=e.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(t.src=`https://maps.google.${s[1]}/maps?q=${s[2].replace("query=","q=").replace("api=1","")}&output=embed`,i=Ya),i=i||this.instance.option("defaultType"),t.type=i,i===Wa&&(t.thumbSrc=t.thumbSrc||t.src)}setContent(t){const e=this.instance.optionFor(t,"src")||"";if(t&&t.type&&e){switch(t.type){case Ga:this.instance.setContent(t,e);break;case Za:const i=this.option("videoTpl");i&&this.instance.setContent(t,i.replace(/\{\{src\}\}/gi,e+"").replace(/\{\{format\}\}/gi,this.optionFor(t,"videoFormat")||"").replace(/\{\{poster\}\}/gi,t.poster||t.thumbSrc||""));break;case"inline":case"clone":this.setInlineContent(t);break;case"ajax":this.loadAjaxContent(t);break;case"pdf":case Ya:case Xa:case Qa:t.preload=!1;case"iframe":this.setIframeContent(t)}this.setAspectRatio(t)}}setAspectRatio(t){const e=t.contentEl;if(!(t.el&&e&&t.type&&[Xa,Qa,Za].includes(t.type)))return;let i,s=t.width||"auto",n=t.height||"auto";if("auto"===s||"auto"===n){i=this.optionFor(t,"videoRatio");const e=(i+"").match(/(\d+)\s*\/\s?(\d+)/);i=e&&e.length>2?parseFloat(e[1])/parseFloat(e[2]):parseFloat(i+"")}else s&&n&&(i=s/n);if(!i)return;e.style.aspectRatio="",e.style.width="",e.style.height="",e.offsetHeight;const o=e.getBoundingClientRect(),r=o.width||1,c=o.height||1;e.style.aspectRatio=i+"",i<r/c?(n="auto"===n?c:Math.min(c,n),e.style.width="auto",e.style.height=`${n}px`):(s="auto"===s?r:Math.min(r,s),e.style.width=`${s}px`,e.style.height="auto")}attach(){const t=this,e=t.instance;e.on("Carousel.beforeInitSlide",t.onBeforeInitSlide),e.on("Carousel.createSlide",t.onCreateSlide),e.on("Carousel.selectSlide",t.onSelectSlide),e.on("Carousel.unselectSlide",t.onUnselectSlide),e.on("Carousel.Panzoom.refresh",t.onRefresh),e.on("done",t.onDone),e.on("clearContent",t.onClearContent),window.addEventListener("message",t.onMessage)}detach(){const t=this,e=t.instance;e.off("Carousel.beforeInitSlide",t.onBeforeInitSlide),e.off("Carousel.createSlide",t.onCreateSlide),e.off("Carousel.selectSlide",t.onSelectSlide),e.off("Carousel.unselectSlide",t.onUnselectSlide),e.off("Carousel.Panzoom.refresh",t.onRefresh),e.off("done",t.onDone),e.off("clearContent",t.onClearContent),window.removeEventListener("message",t.onMessage)}}Object.defineProperty(Lt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{ajax:null,autoSize:!0,iframeAttr:{allow:"autoplay; fullscreen",scrolling:"auto"},preload:!0,videoAutoplay:!0,videoRatio:16/9,videoTpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />Sorry, your browser doesn\'t support embedded videos.</video>',videoFormat:"",vimeo:{byline:1,color:"00adef",controls:1,dnt:1,muted:0},youtube:{controls:1,enablejsapi:1,nocookie:1,rel:0,fs:1}}});const tl="play",el="pause",il="ready";class It extends _{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:il}),Object.defineProperty(this,"inHover",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"timer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"progressBar",{enumerable:!0,configurable:!0,writable:!0,value:null})}get isActive(){return this.state!==il}onReady(t){this.option("autoStart")&&(t.isInfinite||t.page<t.pages.length-1)&&this.start()}onChange(){this.removeProgressBar(),this.pause()}onSettle(){this.resume()}onVisibilityChange(){"visible"===document.visibilityState?this.resume():this.pause()}onMouseEnter(){this.inHover=!0,this.pause()}onMouseLeave(){var t;this.inHover=!1,(null===(t=this.instance.panzoom)||void 0===t?void 0:t.isResting)&&this.resume()}onTimerEnd(){const t=this.instance;"play"===this.state&&(t.isInfinite||t.page!==t.pages.length-1?t.slideNext():t.slideTo(0))}removeProgressBar(){this.progressBar&&(this.progressBar.remove(),this.progressBar=null)}createProgressBar(){var t;if(!this.option("showProgress"))return null;this.removeProgressBar();const e=this.instance,i=(null===(t=e.pages[e.page])||void 0===t?void 0:t.slides)||[];let s=this.option("progressParentEl");if(s||(s=(1===i.length?i[0].el:null)||e.viewport),!s)return null;const n=document.createElement("div");return sa(n,"f-progress"),s.prepend(n),this.progressBar=n,n.offsetHeight,n}set(){const t=this,e=t.instance;if(e.pages.length<2)return;if(t.timer)return;const i=t.option("timeout");t.state=tl,sa(e.container,"has-autoplay");let s=t.createProgressBar();s&&(s.style.transitionDuration=`${i}ms`,s.style.transform="scaleX(1)"),t.timer=setTimeout((()=>{t.timer=null,t.inHover||t.onTimerEnd()}),i),t.emit("set")}clear(){const t=this;t.timer&&(clearTimeout(t.timer),t.timer=null),t.removeProgressBar()}start(){const t=this;if(t.set(),t.state!==il){if(t.option("pauseOnHover")){const e=t.instance.container;e.addEventListener("mouseenter",t.onMouseEnter,!1),e.addEventListener("mouseleave",t.onMouseLeave,!1)}document.addEventListener("visibilitychange",t.onVisibilityChange,!1),t.emit("start")}}stop(){const t=this,e=t.state,i=t.instance.container;t.clear(),t.state=il,i.removeEventListener("mouseenter",t.onMouseEnter,!1),i.removeEventListener("mouseleave",t.onMouseLeave,!1),document.removeEventListener("visibilitychange",t.onVisibilityChange,!1),ia(i,"has-autoplay"),e!==il&&t.emit("stop")}pause(){const t=this;t.state===tl&&(t.state=el,t.clear(),t.emit(el))}resume(){const t=this,e=t.instance;if(e.isInfinite||e.page!==e.pages.length-1)if(t.state!==tl){if(t.state===el&&!t.inHover){const e=new Event("resume",{bubbles:!0,cancelable:!0});t.emit("resume",e),e.defaultPrevented||t.set()}}else t.set();else t.stop()}toggle(){this.state===tl||this.state===el?this.stop():this.start()}attach(){const t=this,e=t.instance;e.on("ready",t.onReady),e.on("Panzoom.startAnimation",t.onChange),e.on("Panzoom.endAnimation",t.onSettle),e.on("Panzoom.touchMove",t.onChange)}detach(){const t=this,e=t.instance;e.off("ready",t.onReady),e.off("Panzoom.startAnimation",t.onChange),e.off("Panzoom.endAnimation",t.onSettle),e.off("Panzoom.touchMove",t.onChange),t.stop()}}Object.defineProperty(It,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{autoStart:!0,pauseOnHover:!0,progressParentEl:null,showProgress:!0,timeout:3e3}});class Dt extends _{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null})}onPrepare(t){const e=t.carousel;if(!e)return;const i=t.container;i&&(e.options.Autoplay=Wr({autoStart:!1},this.option("Autoplay")||{},{pauseOnHover:!1,timeout:this.option("timeout"),progressParentEl:()=>this.option("progressParentEl")||null,on:{start:()=>{t.emit("startSlideshow")},set:e=>{var s;i.classList.add("has-slideshow"),(null===(s=t.getSlide())||void 0===s?void 0:s.state)!==Ra.Ready&&e.pause()},stop:()=>{i.classList.remove("has-slideshow"),t.isCompact||t.endIdle(),t.emit("endSlideshow")},resume:(e,i)=>{var s,n,o;!i||!i.cancelable||(null===(s=t.getSlide())||void 0===s?void 0:s.state)===Ra.Ready&&(null===(o=null===(n=t.carousel)||void 0===n?void 0:n.panzoom)||void 0===o?void 0:o.isResting)||i.preventDefault()}}}),e.attachPlugins({Autoplay:It}),this.ref=e.plugins.Autoplay)}onReady(t){const e=t.carousel,i=this.ref;i&&e&&this.option("playOnStart")&&(e.isInfinite||e.page<e.pages.length-1)&&i.start()}onDone(t,e){const i=this.ref,s=t.carousel;if(!i||!s)return;const n=e.panzoom;n&&n.on("startAnimation",(()=>{t.isCurrentSlide(e)&&i.stop()})),t.isCurrentSlide(e)&&i.resume()}onKeydown(t,e){var i;const s=this.ref;s&&e===this.option("key")&&"BUTTON"!==(null===(i=document.activeElement)||void 0===i?void 0:i.nodeName)&&s.toggle()}attach(){const t=this,e=t.instance;e.on("Carousel.init",t.onPrepare),e.on("Carousel.ready",t.onReady),e.on("done",t.onDone),e.on("keydown",t.onKeydown)}detach(){const t=this,e=t.instance;e.off("Carousel.init",t.onPrepare),e.off("Carousel.ready",t.onReady),e.off("done",t.onDone),e.off("keydown",t.onKeydown)}}Object.defineProperty(Dt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{key:" ",playOnStart:!1,progressParentEl:t=>{var e;return(null===(e=t.instance.container)||void 0===e?void 0:e.querySelector(".fancybox__toolbar [data-fancybox-toggle-slideshow]"))||t.instance.container},timeout:3e3}});const sl={classes:{container:"f-thumbs f-carousel__thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide",isResting:"is-resting",isSelected:"is-selected",isLoading:"is-loading",hasThumbs:"has-thumbs"},minCount:2,parentEl:null,thumbTpl:'<button class="f-thumbs__slide__button" tabindex="0" type="button" aria-label="{{GOTO}}" data-carousel-index="%i"><img class="f-thumbs__slide__img" data-lazy-src="{{%s}}" alt="" /></button>',type:"modern"};var nl;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Hidden=2]="Hidden"}(nl||(nl={}));const ol="isResting",rl="thumbWidth",al="thumbHeight",ll="thumbClipWidth";let cl=class extends _{constructor(){super(...arguments),Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:"modern"}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"track",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"thumbWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbClipWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"thumbExtraGap",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:nl.Init})}get isModern(){return"modern"===this.type}onInitSlide(t,e){const i=e.el?e.el.dataset:void 0;i&&(e.thumbSrc=i.thumbSrc||e.thumbSrc||"",e[ll]=parseFloat(i[ll]||"")||e[ll]||0,e[al]=parseFloat(i.thumbHeight||"")||e[al]||0),this.addSlide(e)}onInitSlides(){this.build()}onChange(){var t;if(!this.isModern)return;const e=this.container,i=this.instance,s=i.panzoom,n=this.carousel,o=n?n.panzoom:null,r=i.page;if(s&&n&&o){if(s.isDragging){ia(e,this.cn(ol));let s=(null===(t=n.pages[r])||void 0===t?void 0:t.pos)||0;s+=i.getProgress(r)*(this[ll]+this.thumbGap);let c=o.getBounds();-1*s>c.x.min&&-1*s<c.x.max&&o.panTo({x:-1*s,friction:.12})}else Vr(e,this.cn(ol),s.isResting);this.shiftModern()}}onRefresh(){this.updateProps();for(const t of this.instance.slides||[])this.resizeModernSlide(t);this.shiftModern()}isDisabled(){const t=this.option("minCount")||0;if(t){const e=this.instance;let i=0;for(const t of e.slides||[])t.thumbSrc&&i++;if(i<t)return!0}const e=this.option("type");return["modern","classic"].indexOf(e)<0}getThumb(t){const e=this.option("thumbTpl")||"";return{html:this.instance.localize(e,[["%i",t.index],["%d",t.index+1],["%s",t.thumbSrc||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"]])}}addSlide(t){const e=this.carousel;e&&e.addSlide(t.index,this.getThumb(t))}getSlides(){const t=[];for(const e of this.instance.slides||[])t.push(this.getThumb(e));return t}resizeModernSlide(t){this.isModern&&(t[rl]=t[ll]&&t[al]?Math.round(this[al]*(t[ll]/t[al])):this[rl])}updateProps(){const t=this.container;if(!t)return;const e=e=>parseFloat(getComputedStyle(t).getPropertyValue("--f-thumb-"+e))||0;this.thumbGap=e("gap"),this.thumbExtraGap=e("extra-gap"),this[rl]=e("width")||40,this[ll]=e("clip-width")||40,this[al]=e("height")||40}build(){const t=this;if(t.state!==nl.Init)return;if(t.isDisabled())return void t.emit("disabled");const e=t.instance,i=e.container,s=t.getSlides(),n=t.option("type");t.type=n;const o=t.option("parentEl"),r=t.cn("container"),c=t.cn("track");let h=null==o?void 0:o.querySelector("."+r);h||(h=document.createElement("div"),sa(h,r),o?o.appendChild(h):i.after(h)),sa(h,`is-${n}`),sa(i,t.cn("hasThumbs")),t.container=h,t.updateProps();let d=h.querySelector("."+c);d||(d=document.createElement("div"),sa(d,t.cn("track")),h.appendChild(d)),t.track=d;const u=Wr({},{track:d,infinite:!1,center:!0,fill:"classic"===n,dragFree:!0,slidesPerPage:1,transition:!1,preload:.25,friction:.12,Panzoom:{maxVelocity:0},Dots:!1,Navigation:!1,classes:{container:"f-thumbs",viewport:"f-thumbs__viewport",track:"f-thumbs__track",slide:"f-thumbs__slide"}},t.option("Carousel")||{},{Sync:{target:e},slides:s}),p=new e.constructor(h,u);p.on("createSlide",((e,i)=>{t.setProps(i.index),t.emit("createSlide",i,i.el)})),p.on("ready",(()=>{t.shiftModern(),t.emit("ready")})),p.on("refresh",(()=>{t.shiftModern()})),p.on("Panzoom.click",((e,i,s)=>{t.onClick(s)})),t.carousel=p,t.state=nl.Ready}onClick(t){t.preventDefault(),t.stopPropagation();const e=this.instance,{pages:i,page:s}=e,n=t=>{if(t){const e=t.closest("[data-carousel-index]");if(e)return[parseInt(e.dataset.carouselIndex||"",10)||0,e]}return[-1,void 0]},o=(t,e)=>{const i=document.elementFromPoint(t,e);return i?n(i):[-1,void 0]};let[r,c]=n(t.target);if(r>-1)return;const h=this[ll],d=t.clientX,u=t.clientY;let[p,m]=o(d-h,u),[b,v]=o(d+h,u);m&&v?(r=Math.abs(d-m.getBoundingClientRect().right)<Math.abs(d-v.getBoundingClientRect().left)?p:b,r===s&&(r=r===p?b:p)):m?r=p:v&&(r=b),r>-1&&i[r]&&e.slideTo(r)}getShift(t){var e;const i=this,{instance:s}=i,n=i.carousel;if(!s||!n)return 0;const o=i[rl],r=i[ll],c=i.thumbGap,h=i.thumbExtraGap;if(!(null===(e=n.slides[t])||void 0===e?void 0:e.el))return 0;const d=.5*(o-r),u=s.pages.length-1;let p=s.getProgress(0),m=s.getProgress(u),b=s.getProgress(t,!1,!0),v=0,y=d+h+c;const E=p<0&&p>-1,x=m>0&&m<1;return 0===t?(v=y*Math.abs(p),x&&1===p&&(v-=y*Math.abs(m))):t===u?(v=y*Math.abs(m)*-1,E&&-1===m&&(v+=y*Math.abs(p))):E||x?(v=-1*y,v+=y*Math.abs(p),v+=y*(1-Math.abs(m))):v=y*b,v}setProps(t){var e;const i=this;if(!i.isModern)return;const{instance:s}=i,n=i.carousel;if(s&&n){const o=null===(e=n.slides[t])||void 0===e?void 0:e.el;if(o&&o.childNodes.length){let e=Br(1-Math.abs(s.getProgress(t))),n=Br(i.getShift(t));o.style.setProperty("--progress",e?e+"":""),o.style.setProperty("--shift",n+"")}}}shiftModern(){const t=this;if(!t.isModern)return;const{instance:e,track:i}=t,s=e.panzoom,n=t.carousel;if(!(e&&i&&s&&n))return;if(s.state===Xr.Init||s.state===Xr.Destroy)return;for(const i of e.slides)t.setProps(i.index);let o=(t[ll]+t.thumbGap)*(n.slides.length||0);i.style.setProperty("--width",o+"")}cleanup(){const t=this;t.carousel&&t.carousel.destroy(),t.carousel=null,t.container&&t.container.remove(),t.container=null,t.track&&t.track.remove(),t.track=null,t.state=nl.Init,ia(t.instance.container,t.cn("hasThumbs"))}attach(){const t=this,e=t.instance;e.on("initSlide",t.onInitSlide),e.state===ga.Init?e.on("initSlides",t.onInitSlides):t.onInitSlides(),e.on(["change","Panzoom.afterTransform"],t.onChange),e.on("Panzoom.refresh",t.onRefresh)}detach(){const t=this,e=t.instance;e.off("initSlide",t.onInitSlide),e.off("initSlides",t.onInitSlides),e.off(["change","Panzoom.afterTransform"],t.onChange),e.off("Panzoom.refresh",t.onRefresh),t.cleanup()}};Object.defineProperty(cl,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:sl});const hl=Object.assign(Object.assign({},sl),{key:"t",showOnStart:!0,parentEl:null}),dl="is-masked",ul="aria-hidden";class Yt extends _{constructor(){super(...arguments),Object.defineProperty(this,"ref",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"hidden",{enumerable:!0,configurable:!0,writable:!0,value:!1})}get isEnabled(){const t=this.ref;return t&&!t.isDisabled()}get isHidden(){return this.hidden}onClick(t,e){e.stopPropagation()}onCreateSlide(t,e){var i,s,n;const o=(null===(n=null===(s=null===(i=this.instance)||void 0===i?void 0:i.carousel)||void 0===s?void 0:s.slides[e.index])||void 0===n?void 0:n.type)||"",r=e.el;if(r&&o){let t=`for-${o}`;["video","youtube","vimeo","html5video"].includes(o)&&(t+=" for-video"),sa(r,t)}}onInit(){var t;const e=this,i=e.instance,s=i.carousel;if(e.ref||!s)return;const n=e.option("parentEl")||i.footer||i.container;if(!n)return;const o=Wr({},e.options,{parentEl:n,classes:{container:"f-thumbs fancybox__thumbs"},Carousel:{Sync:{friction:i.option("Carousel.friction")||0}},on:{ready:t=>{const i=t.container;i&&this.hidden&&(e.refresh(),i.style.transition="none",e.hide(),i.offsetHeight,queueMicrotask((()=>{i.style.transition="",e.show()})))}}});o.Carousel=o.Carousel||{},o.Carousel.on=Wr((null===(t=e.options.Carousel)||void 0===t?void 0:t.on)||{},{click:this.onClick,createSlide:this.onCreateSlide}),s.options.Thumbs=o,s.attachPlugins({Thumbs:cl}),e.ref=s.plugins.Thumbs,e.option("showOnStart")||(e.ref.state=nl.Hidden,e.hidden=!0)}onResize(){var t;const e=null===(t=this.ref)||void 0===t?void 0:t.container;e&&(e.style.maxHeight="")}onKeydown(t,e){const i=this.option("key");i&&i===e&&this.toggle()}toggle(){const t=this.ref;if(t&&!t.isDisabled())return t.state===nl.Hidden?(t.state=nl.Init,void t.build()):void(this.hidden?this.show():this.hide())}show(){const t=this.ref;if(!t||t.isDisabled())return;const e=t.container;e&&(this.refresh(),e.offsetHeight,e.removeAttribute(ul),e.classList.remove(dl),this.hidden=!1)}hide(){const t=this.ref,e=t&&t.container;e&&(this.refresh(),e.offsetHeight,e.classList.add(dl),e.setAttribute(ul,"true")),this.hidden=!0}refresh(){const t=this.ref;if(!t||!t.state)return;const e=t.container,i=(null==e?void 0:e.firstChild)||null;e&&i&&i.childNodes.length&&(e.style.maxHeight=`${i.getBoundingClientRect().height}px`)}attach(){const t=this,e=t.instance;e.state===ka.Init?e.on("Carousel.init",t.onInit):t.onInit(),e.on("resize",t.onResize),e.on("keydown",t.onKeydown)}detach(){var t;const e=this,i=e.instance;i.off("Carousel.init",e.onInit),i.off("resize",e.onResize),i.off("keydown",e.onKeydown),null===(t=i.carousel)||void 0===t||t.detachPlugins(["Thumbs"]),e.ref=null}}Object.defineProperty(Yt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:hl});const pl={panLeft:{icon:'<svg><path d="M5 12h14M5 12l6 6M5 12l6-6"/></svg>',change:{panX:-100}},panRight:{icon:'<svg><path d="M5 12h14M13 18l6-6M13 6l6 6"/></svg>',change:{panX:100}},panUp:{icon:'<svg><path d="M12 5v14M18 11l-6-6M6 11l6-6"/></svg>',change:{panY:-100}},panDown:{icon:'<svg><path d="M12 5v14M18 13l-6 6M6 13l6 6"/></svg>',change:{panY:100}},zoomIn:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M11 8v6M8 11h6"/></svg>',action:"zoomIn"},zoomOut:{icon:'<svg><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"zoomOut"},toggle1to1:{icon:'<svg><path d="M3.51 3.07c5.74.02 11.48-.02 17.22.02 1.37.1 2.34 1.64 2.18 3.13 0 4.08.02 8.16 0 12.23-.1 1.54-1.47 2.64-2.79 2.46-5.61-.01-11.24.02-16.86-.01-1.36-.12-2.33-1.65-2.17-3.14 0-4.07-.02-8.16 0-12.23.1-1.36 1.22-2.48 2.42-2.46Z"/><path d="M5.65 8.54h1.49v6.92m8.94-6.92h1.49v6.92M11.5 9.4v.02m0 5.18v0"/></svg>',action:"toggleZoom"},toggleZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"toggleZoom"},iterateZoom:{icon:'<svg><g><line x1="11" y1="8" x2="11" y2="14"></line></g><circle cx="11" cy="11" r="7.5"/><path d="m21 21-4.35-4.35M8 11h6"/></svg>',action:"iterateZoom"},rotateCCW:{icon:'<svg><path d="M15 4.55a8 8 0 0 0-6 14.9M9 15v5H4M18.37 7.16v.01M13 19.94v.01M16.84 18.37v.01M19.37 15.1v.01M19.94 11v.01"/></svg>',action:"rotateCCW"},rotateCW:{icon:'<svg><path d="M9 4.55a8 8 0 0 1 6 14.9M15 15v5h5M5.63 7.16v.01M4.06 11v.01M4.63 15.1v.01M7.16 18.37v.01M11 19.94v.01"/></svg>',action:"rotateCW"},flipX:{icon:'<svg style="stroke-width: 1.3"><path d="M12 3v18M16 7v10h5L16 7M8 7v10H3L8 7"/></svg>',action:"flipX"},flipY:{icon:'<svg style="stroke-width: 1.3"><path d="M3 12h18M7 16h10L7 21v-5M7 8h10L7 3v5"/></svg>',action:"flipY"},fitX:{icon:'<svg><path d="M4 12V6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v6M10 18H3M21 18h-7M6 15l-3 3 3 3M18 15l3 3-3 3"/></svg>',action:"fitX"},fitY:{icon:'<svg><path d="M12 20H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h6M18 14v7M18 3v7M15 18l3 3 3-3M15 6l3-3 3 3"/></svg>',action:"fitY"},reset:{icon:'<svg><path d="M20 11A8.1 8.1 0 0 0 4.5 9M4 5v4h4M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4"/></svg>',action:"reset"},toggleFS:{icon:'<svg><g><path d="M14.5 9.5 21 3m0 0h-6m6 0v6M3 21l6.5-6.5M3 21v-6m0 6h6"/></g><g><path d="m14 10 7-7m-7 7h6m-6 0V4M3 21l7-7m0 0v6m0-6H4"/></g></svg>',action:"toggleFS"}};var fl;!function(t){t[t.Init=0]="Init",t[t.Ready=1]="Ready",t[t.Disabled=2]="Disabled"}(fl||(fl={}));const gl={tabindex:"-1",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},ml="has-toolbar",bl="fancybox__toolbar";class Qt extends _{constructor(){super(...arguments),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:fl.Init}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null})}onReady(t){var e;if(!t.carousel)return;let i=this.option("display"),s=this.option("absolute"),n=this.option("enabled");if("auto"===n){const t=this.instance.carousel;let e=0;if(t)for(const i of t.slides)(i.panzoom||"image"===i.type)&&e++;e||(n=!1)}n||(i=void 0);let o=0;const r={left:[],middle:[],right:[]};if(i)for(const t of["left","middle","right"])for(const s of i[t]){const i=this.createEl(s);i&&(null===(e=r[t])||void 0===e||e.push(i),o++)}let c=null;if(o&&(c=this.createContainer()),c){for(const[t,e]of Object.entries(r)){const i=document.createElement("div");sa(i,bl+"__column is-"+t);for(const t of e)i.appendChild(t);"auto"!==s||"middle"!==t||e.length||(s=!0),c.appendChild(i)}!0===s&&sa(c,"is-absolute"),this.state=fl.Ready,this.onRefresh()}else this.state=fl.Disabled}onClick(t){var e,i;const s=this.instance,n=s.getSlide(),o=null==n?void 0:n.panzoom,r=t.target,c=r&&ea(r)?r.dataset:null;if(!c)return;if(void 0!==c.fancyboxToggleThumbs)return t.preventDefault(),t.stopPropagation(),void(null===(e=s.plugins.Thumbs)||void 0===e||e.toggle());if(void 0!==c.fancyboxToggleFullscreen)return t.preventDefault(),t.stopPropagation(),void this.instance.toggleFullscreen();if(void 0!==c.fancyboxToggleSlideshow){t.preventDefault(),t.stopPropagation();const e=null===(i=s.carousel)||void 0===i?void 0:i.plugins.Autoplay;let n=e.isActive;return o&&"mousemove"===o.panMode&&!n&&o.reset(),void(n?e.stop():e.start())}const h=c.panzoomAction,d=c.panzoomChange;if((d||h)&&(t.preventDefault(),t.stopPropagation()),d){let e={};try{e=JSON.parse(d)}catch(t){}o&&o.applyChange(e)}else h&&o&&o[h]&&o[h]()}onChange(){this.onRefresh()}onRefresh(){if(this.instance.isClosing())return;const t=this.container;if(!t)return;const e=this.instance.getSlide();if(!e||e.state!==Ra.Ready)return;const i=e&&!e.error&&e.panzoom;for(const e of t.querySelectorAll("[data-panzoom-action]"))i?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));let s=i&&i.canZoomIn(),n=i&&i.canZoomOut();for(const e of t.querySelectorAll('[data-panzoom-action="zoomIn"]'))s?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));for(const e of t.querySelectorAll('[data-panzoom-action="zoomOut"]'))n?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));for(const e of t.querySelectorAll('[data-panzoom-action="toggleZoom"],[data-panzoom-action="iterateZoom"]')){n||s?(e.removeAttribute("disabled"),e.removeAttribute("tabindex")):(e.setAttribute("disabled",""),e.setAttribute("tabindex","-1"));const t=e.querySelector("g");t&&(t.style.display=s?"":"none")}}onDone(t,e){var i;null===(i=e.panzoom)||void 0===i||i.on("afterTransform",(()=>{this.instance.isCurrentSlide(e)&&this.onRefresh()})),this.instance.isCurrentSlide(e)&&this.onRefresh()}createContainer(){const t=this.instance.container;if(!t)return null;const e=this.option("parentEl")||t;let i=e.querySelector("."+bl);return i||(i=document.createElement("div"),sa(i,bl),e.prepend(i)),i.addEventListener("click",this.onClick,{passive:!1,capture:!0}),t&&sa(t,ml),this.container=i,i}createEl(t){const e=this.instance,i=e.carousel;if(!i)return null;if("toggleFS"===t)return null;if("fullscreen"===t&&!Ma())return null;let s=null;const n=i.slides.length||0;let o=0,r=0;for(const t of i.slides)(t.panzoom||"image"===t.type)&&o++,("image"===t.type||t.downloadSrc)&&r++;if(n<2&&["infobar","prev","next"].includes(t))return s;if(void 0!==pl[t]&&!o)return null;if("download"===t&&!r)return null;if("thumbs"===t){const t=e.plugins.Thumbs;if(!t||!t.isEnabled)return null}if("slideshow"===t&&(!i.plugins.Autoplay||n<2))return null;if(void 0!==pl[t]){const e=pl[t];s=document.createElement("button"),s.setAttribute("title",this.instance.localize(`{{${t.toUpperCase()}}}`)),sa(s,"f-button"),e.action&&(s.dataset.panzoomAction=e.action),e.change&&(s.dataset.panzoomChange=JSON.stringify(e.change)),s.appendChild(jr(this.instance.localize(e.icon)))}else{const e=(this.option("items")||[])[t];e&&(s=jr(this.instance.localize(e.tpl)),"function"==typeof e.click&&s.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation(),"function"==typeof e.click&&e.click.call(this,this,t)})))}const c=null==s?void 0:s.querySelector("svg");if(c)for(const[t,e]of Object.entries(gl))c.getAttribute(t)||c.setAttribute(t,String(e));return s}removeContainer(){const t=this.container;t&&t.remove(),this.container=null,this.state=fl.Disabled;const e=this.instance.container;e&&ia(e,ml)}attach(){const t=this,e=t.instance;e.on("Carousel.initSlides",t.onReady),e.on("done",t.onDone),e.on(["reveal","Carousel.change"],t.onChange),t.onReady(t.instance)}detach(){const t=this,e=t.instance;e.off("Carousel.initSlides",t.onReady),e.off("done",t.onDone),e.off(["reveal","Carousel.change"],t.onChange),t.removeContainer()}}Object.defineProperty(Qt,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:{absolute:"auto",display:{left:["infobar"],middle:[],right:["iterateZoom","slideshow","fullscreen","thumbs","close"]},enabled:"auto",items:{infobar:{tpl:'<div class="fancybox__infobar" tabindex="-1"><span data-fancybox-current-index></span>/<span data-fancybox-count></span></div>'},download:{tpl:'<a class="f-button" title="{{DOWNLOAD}}" data-fancybox-download href="javasript:;"><svg><path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-2M7 11l5 5 5-5M12 4v12"/></svg></a>'},prev:{tpl:'<button class="f-button" title="{{PREV}}" data-fancybox-prev><svg><path d="m15 6-6 6 6 6"/></svg></button>'},next:{tpl:'<button class="f-button" title="{{NEXT}}" data-fancybox-next><svg><path d="m9 6 6 6-6 6"/></svg></button>'},slideshow:{tpl:'<button class="f-button" title="{{TOGGLE_SLIDESHOW}}" data-fancybox-toggle-slideshow><svg><g><path d="M8 4v16l13 -8z"></path></g><g><path d="M8 4v15M17 4v15"/></g></svg></button>'},fullscreen:{tpl:'<button class="f-button" title="{{TOGGLE_FULLSCREEN}}" data-fancybox-toggle-fullscreen><svg><g><path d="M4 8V6a2 2 0 0 1 2-2h2M4 16v2a2 2 0 0 0 2 2h2M16 4h2a2 2 0 0 1 2 2v2M16 20h2a2 2 0 0 0 2-2v-2"/></g><g><path d="M15 19v-2a2 2 0 0 1 2-2h2M15 5v2a2 2 0 0 0 2 2h2M5 15h2a2 2 0 0 1 2 2v2M5 9h2a2 2 0 0 0 2-2V5"/></g></svg></button>'},thumbs:{tpl:'<button class="f-button" title="{{TOGGLE_THUMBS}}" data-fancybox-toggle-thumbs><svg><circle cx="5.5" cy="5.5" r="1"/><circle cx="12" cy="5.5" r="1"/><circle cx="18.5" cy="5.5" r="1"/><circle cx="5.5" cy="12" r="1"/><circle cx="12" cy="12" r="1"/><circle cx="18.5" cy="12" r="1"/><circle cx="5.5" cy="18.5" r="1"/><circle cx="12" cy="18.5" r="1"/><circle cx="18.5" cy="18.5" r="1"/></svg></button>'},close:{tpl:'<button class="f-button" title="{{CLOSE}}" data-fancybox-close><svg><path d="m19.5 4.5-15 15M4.5 4.5l15 15"/></svg></button>'}},parentEl:null}});const vl={Hash:class extends _{onReady(){Na=!1}onChange(t){Fa&&clearTimeout(Fa);const{hash:e}=qa(),{hash:i}=ja(),s=t.isOpeningSlide(t.getSlide());s&&(Pa=i===e?"":i),e&&e!==i&&(Fa=setTimeout((()=>{try{if(t.state===ka.Ready){let t="replaceState";s&&!Ba&&(t="pushState",Ba=!0),window.history[t]({},document.title,window.location.pathname+window.location.search+e)}}catch(t){}}),300))}onClose(t){if(Fa&&clearTimeout(Fa),!Na&&Ba)return Ba=!1,Na=!1,void window.history.back();if(!Na)try{window.history.replaceState({},document.title,window.location.pathname+window.location.search+(Pa||""))}catch(t){}}attach(){const t=this.instance;t.on("ready",this.onReady),t.on(["Carousel.ready","Carousel.change"],this.onChange),t.on("close",this.onClose)}detach(){const t=this.instance;t.off("ready",this.onReady),t.off(["Carousel.ready","Carousel.change"],this.onChange),t.off("close",this.onClose)}static parseURL(){return ja()}static startFromUrl(){za()}static destroy(){window.removeEventListener("hashchange",Ha,!1)}},Html:Lt,Images:wt,Slideshow:Dt,Thumbs:Yt,Toolbar:Qt},yl="with-fancybox",El="hide-scrollbar",_l="--fancybox-scrollbar-compensate",xl="--fancybox-body-margin",wl="aria-hidden",Tl="is-using-tab",Al="is-animated",Sl="is-compact",Ol="is-loading",Dl="is-opening",Cl="has-caption",Il="disabled",Ml="tabindex",Ll="download",kl="href",Rl="src",Pl=t=>"string"==typeof t,Nl=function(){var t=window.getSelection();return!!t&&"Range"===t.type};let Bl,Fl=null,ql=null,jl=0,zl=0,Vl=0,Hl=0;const $l=new Map;let Ul=0;class Oe extends g{get isIdle(){return this.idle}get isCompact(){return this.option("compact")}constructor(t=[],e={},i={}){super(e),Object.defineProperty(this,"userSlides",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"userPlugins",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"idle",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"idleTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"clickTimer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"pwt",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"ignoreFocusChange",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"startedFs",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"state",{enumerable:!0,configurable:!0,writable:!0,value:ka.Init}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"container",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"footer",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"carousel",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"lastFocus",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"prevMouseMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Bl||(Bl=Ma()),this.id=e.id||++Ul,$l.set(this.id,this),this.userSlides=t,this.userPlugins=i,queueMicrotask((()=>{this.init()}))}init(){if(this.state===ka.Destroy)return;this.state=ka.Init,this.attachPlugins(Object.assign(Object.assign({},Oe.Plugins),this.userPlugins)),this.emit("init"),this.emit("attachPlugins"),!0===this.option("hideScrollbar")&&(()=>{if(!Oa)return;const t=document,e=t.body,i=t.documentElement;if(e.classList.contains(El))return;let s=window.innerWidth-i.getBoundingClientRect().width;const n=parseFloat(window.getComputedStyle(e).marginRight);s<0&&(s=0),i.style.setProperty(_l,`${s}px`),n&&e.style.setProperty(xl,`${n}px`),e.classList.add(El)})(),this.initLayout(),this.scale();const t=()=>{this.initCarousel(this.userSlides),this.state=ka.Ready,this.attachEvents(),this.emit("ready"),setTimeout((()=>{this.container&&this.container.setAttribute(wl,"false")}),16)};this.option("Fullscreen.autoStart")&&Bl&&!Bl.isFullscreen()?Bl.request().then((()=>{this.startedFs=!0,t()})).catch((()=>t())):t()}initLayout(){var t,e;const i=this.option("parentEl")||document.body,s=jr(this.localize(this.option("tpl.main")||""));if(s){if(s.setAttribute("id",`fancybox-${this.id}`),s.setAttribute("aria-label",this.localize("{{MODAL}}")),s.classList.toggle(Sl,this.isCompact),sa(s,this.option("mainClass")||""),sa(s,Dl),this.container=s,this.footer=s.querySelector(".fancybox__footer"),i.appendChild(s),sa(document.documentElement,yl),Fl&&ql||(Fl=document.createElement("span"),sa(Fl,"fancybox-focus-guard"),Fl.setAttribute(Ml,"0"),Fl.setAttribute(wl,"true"),Fl.setAttribute("aria-label","Focus guard"),ql=Fl.cloneNode(),null===(t=s.parentElement)||void 0===t||t.insertBefore(Fl,s),null===(e=s.parentElement)||void 0===e||e.append(ql)),s.addEventListener("mousedown",(t=>{jl=t.pageX,zl=t.pageY,ia(s,Tl)})),this.option("closeExisting"))for(const t of $l.values())t.id!==this.id&&t.close();else this.option("animated")&&(sa(s,Al),setTimeout((()=>{this.isClosing()||ia(s,Al)}),350));this.emit("initLayout")}}initCarousel(t){const e=this.container;if(!e)return;const i=e.querySelector(".fancybox__carousel");if(!i)return;const s=this.carousel=new Q(i,Wr({},{slides:t,transition:"fade",Panzoom:{lockAxis:this.option("dragToClose")?"xy":"x",infinite:!!this.option("dragToClose")&&"y"},Dots:!1,Navigation:{classes:{container:"fancybox__nav",button:"f-button",isNext:"is-next",isPrev:"is-prev"}},initialPage:this.option("startIndex"),l10n:this.option("l10n")},this.option("Carousel")||{}));s.on("*",((t,e,...i)=>{this.emit(`Carousel.${e}`,t,...i)})),s.on(["ready","change"],(()=>{this.manageCaption()})),this.on("Carousel.removeSlide",((t,e,i)=>{this.clearContent(i),i.state=void 0})),s.on("Panzoom.touchStart",(()=>{var t,e;this.isCompact||this.endIdle(),(null===(t=document.activeElement)||void 0===t?void 0:t.closest(".f-thumbs"))&&(null===(e=this.container)||void 0===e||e.focus())})),s.on("settle",(()=>{this.idleTimer||this.isCompact||!this.option("idle")||this.setIdle(),this.option("autoFocus")&&!this.isClosing&&this.checkFocus()})),this.option("dragToClose")&&(s.on("Panzoom.afterTransform",((t,e)=>{const i=this.getSlide();if(i&&Fr(i.el))return;const s=this.container;if(s){const t=Math.abs(e.current.f),i=t<1?"":Math.max(.5,Math.min(1,1-t/e.contentRect.fitHeight*1.5));s.style.setProperty("--fancybox-ts",i?"0s":""),s.style.setProperty("--fancybox-opacity",i+"")}})),s.on("Panzoom.touchEnd",((t,e,i)=>{var s;const n=this.getSlide();if(n&&Fr(n.el))return;if(e.isMobile&&document.activeElement&&-1!==["TEXTAREA","INPUT"].indexOf(null===(s=document.activeElement)||void 0===s?void 0:s.nodeName))return;const o=Math.abs(e.dragOffset.y);"y"===e.lockedAxis&&(o>=200||o>=50&&e.dragOffset.time<300)&&(i&&i.cancelable&&i.preventDefault(),this.close(i,"f-throwOut"+(e.current.f<0?"Up":"Down")))}))),s.on("change",(t=>{var e;let i=null===(e=this.getSlide())||void 0===e?void 0:e.triggerEl;if(i){const e=new CustomEvent("slideTo",{bubbles:!0,cancelable:!0,detail:t.page});i.dispatchEvent(e)}})),s.on(["refresh","change"],(t=>{const e=this.container;if(!e)return;for(const i of e.querySelectorAll("[data-fancybox-current-index]"))i.innerHTML=t.page+1;for(const i of e.querySelectorAll("[data-fancybox-count]"))i.innerHTML=t.pages.length;if(!t.isInfinite){for(const i of e.querySelectorAll("[data-fancybox-next]"))t.page<t.pages.length-1?(i.removeAttribute(Il),i.removeAttribute(Ml)):(i.setAttribute(Il,""),i.setAttribute(Ml,"-1"));for(const i of e.querySelectorAll("[data-fancybox-prev]"))t.page>0?(i.removeAttribute(Il),i.removeAttribute(Ml)):(i.setAttribute(Il,""),i.setAttribute(Ml,"-1"))}const i=this.getSlide();if(!i)return;let s=i.downloadSrc||"";s||"image"!==i.type||i.error||!Pl(i[Rl])||(s=i[Rl]);for(const t of e.querySelectorAll("[data-fancybox-download]")){const e=i.downloadFilename;s?(t.removeAttribute(Il),t.removeAttribute(Ml),t.setAttribute(kl,s),t.setAttribute(Ll,e||s),t.setAttribute("target","_blank")):(t.setAttribute(Il,""),t.setAttribute(Ml,"-1"),t.removeAttribute(kl),t.removeAttribute(Ll))}})),this.emit("initCarousel")}attachEvents(){const t=this,e=t.container;if(!e)return;e.addEventListener("click",t.onClick,{passive:!1,capture:!1}),e.addEventListener("wheel",t.onWheel,{passive:!1,capture:!1}),document.addEventListener("keydown",t.onKeydown,{passive:!1,capture:!0}),document.addEventListener("visibilitychange",t.onVisibilityChange,!1),document.addEventListener("mousemove",t.onMousemove),t.option("trapFocus")&&document.addEventListener("focus",t.onFocus,!0),window.addEventListener("resize",t.onResize);const i=window.visualViewport;i&&(i.addEventListener("scroll",t.onResize),i.addEventListener("resize",t.onResize))}detachEvents(){const t=this,e=t.container;if(!e)return;document.removeEventListener("keydown",t.onKeydown,{passive:!1,capture:!0}),e.removeEventListener("wheel",t.onWheel,{passive:!1,capture:!1}),e.removeEventListener("click",t.onClick,{passive:!1,capture:!1}),document.removeEventListener("mousemove",t.onMousemove),window.removeEventListener("resize",t.onResize);const i=window.visualViewport;i&&(i.removeEventListener("resize",t.onResize),i.removeEventListener("scroll",t.onResize)),document.removeEventListener("visibilitychange",t.onVisibilityChange,!1),document.removeEventListener("focus",t.onFocus,!0)}scale(){const t=this.container;if(!t)return;const e=window.visualViewport,i=Math.max(1,(null==e?void 0:e.scale)||1);let s="",n="",o="";if(e&&i>1){let t=`${e.offsetLeft}px`,r=`${e.offsetTop}px`;s=e.width*i+"px",n=e.height*i+"px",o=`translate3d(${t}, ${r}, 0) scale(${1/i})`}t.style.transform=o,t.style.width=s,t.style.height=n}onClick(t){var e;const{container:i,isCompact:s}=this;if(!i||this.isClosing())return;!s&&this.option("idle")&&this.resetIdle();const n=t.composedPath()[0];if(n.closest(".fancybox-spinner")||n.closest("[data-fancybox-close]"))return t.preventDefault(),void this.close(t);if(n.closest("[data-fancybox-prev]"))return t.preventDefault(),void this.prev();if(n.closest("[data-fancybox-next]"))return t.preventDefault(),void this.next();if("click"===t.type&&0===t.detail)return;if(Math.abs(t.pageX-jl)>30||Math.abs(t.pageY-zl)>30)return;const o=document.activeElement;if(Nl()&&o&&i.contains(o))return;if(s&&"image"===(null===(e=this.getSlide())||void 0===e?void 0:e.type))return void(this.clickTimer?(clearTimeout(this.clickTimer),this.clickTimer=null):this.clickTimer=setTimeout((()=>{this.toggleIdle(),this.clickTimer=null}),350));if(this.emit("click",t),t.defaultPrevented)return;let r=!1;if(n.closest(".fancybox__content")){if(o){if(o.closest("[contenteditable]"))return;n.matches(Ca)||o.blur()}if(Nl())return;r=this.option("contentClick")}else n.closest(".fancybox__carousel")&&!n.matches(Ca)&&(r=this.option("backdropClick"));"close"===r?(t.preventDefault(),this.close(t)):"next"===r?(t.preventDefault(),this.next()):"prev"===r&&(t.preventDefault(),this.prev())}onWheel(t){const e=t.target;let i=this.option("wheel",t);e.closest(".fancybox__thumbs")&&(i="slide");const s="slide"===i,n=[-t.deltaX||0,-t.deltaY||0,-t.detail||0].reduce((function(t,e){return Math.abs(e)>Math.abs(t)?e:t})),o=Math.max(-1,Math.min(1,n)),r=Date.now();this.pwt&&r-this.pwt<300?s&&t.preventDefault():(this.pwt=r,this.emit("wheel",t,o),t.defaultPrevented||("close"===i?(t.preventDefault(),this.close(t)):"slide"===i&&(qr(e)||(t.preventDefault(),this[o>0?"prev":"next"]()))))}onScroll(){window.scrollTo(Vl,Hl)}onKeydown(t){if(!this.isTopmost())return;this.isCompact||!this.option("idle")||this.isClosing()||this.resetIdle();const e=t.key,i=this.option("keyboard");if(!i)return;const s=t.composedPath()[0],n=document.activeElement&&document.activeElement.classList,o=n&&n.contains("f-button")||s.dataset.carouselPage||s.dataset.carouselIndex;if("Escape"!==e&&!o&&ea(s)&&(s.isContentEditable||-1!==["TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(s.nodeName)))return;if("Tab"===t.key?sa(this.container,Tl):ia(this.container,Tl),t.ctrlKey||t.altKey||t.shiftKey)return;this.emit("keydown",e,t);const r=i[e];r&&"function"==typeof this[r]&&(t.preventDefault(),this[r]())}onResize(){const t=this.container;if(!t)return;const e=this.isCompact;t.classList.toggle(Sl,e),this.manageCaption(this.getSlide()),this.isCompact?this.clearIdle():this.endIdle(),this.scale(),this.emit("resize")}onFocus(t){this.isTopmost()&&this.checkFocus(t)}onMousemove(t){this.prevMouseMoveEvent=t,!this.isCompact&&this.option("idle")&&this.resetIdle()}onVisibilityChange(){"visible"===document.visibilityState?this.checkFocus():this.endIdle()}manageCloseBtn(t){const e=this.optionFor(t,"closeButton")||!1;if("auto"===e){const t=this.plugins.Toolbar;if(t&&t.state===fl.Ready)return}if(!e)return;if(!t.contentEl||t.closeBtnEl)return;const i=this.option("tpl.closeButton");if(i){const e=jr(this.localize(i));t.closeBtnEl=t.contentEl.appendChild(e),t.el&&sa(t.el,"has-close-btn")}}manageCaption(t=void 0){var e,i;const s="fancybox__caption",n=this.container;if(!n)return;ia(n,Cl);const o=this.isCompact||this.option("commonCaption"),r=!o;if(this.caption&&this.stop(this.caption),r&&this.caption&&(this.caption.remove(),this.caption=null),o&&!this.caption)for(const t of(null===(e=this.carousel)||void 0===e?void 0:e.slides)||[])t.captionEl&&(t.captionEl.remove(),t.captionEl=void 0,ia(t.el,Cl),null===(i=t.el)||void 0===i||i.removeAttribute("aria-labelledby"));if(t||(t=this.getSlide()),!t||o&&!this.isCurrentSlide(t))return;const c=t.el;let h=this.optionFor(t,"caption","");if(!h)return void(o&&this.caption&&this.animate(this.caption,"f-fadeOut",(()=>{this.caption&&(this.caption.innerHTML="")})));let d=null;if(r){if(d=t.captionEl||null,c&&!d){const e=s+`_${this.id}_${t.index}`;d=document.createElement("div"),sa(d,s),d.setAttribute("id",e),t.captionEl=c.appendChild(d),sa(c,Cl),c.setAttribute("aria-labelledby",e)}}else d=this.caption,d||(d=n.querySelector("."+s)),d||(d=document.createElement("div"),d.dataset.fancyboxCaption="",sa(d,s),(this.footer||n).prepend(d)),sa(n,Cl),this.caption=d;d&&(d.innerHTML="",Pl(h)||"number"==typeof h?d.innerHTML=h+"":h instanceof HTMLElement&&d.appendChild(h))}checkFocus(t){this.focus(t)}focus(t){var e;if(this.ignoreFocusChange)return;const i=document.activeElement||null,s=(null==t?void 0:t.target)||null,n=this.container,o=null===(e=this.carousel)||void 0===e?void 0:e.viewport;if(!n||!o)return;if(!t&&i&&n.contains(i))return;const r=this.getSlide(),c=r&&r.state===Ra.Ready?r.el:null;if(!c||c.contains(i)||n===i)return;t&&t.cancelable&&t.preventDefault(),this.ignoreFocusChange=!0;const h=Array.from(n.querySelectorAll(Ca));let d=[],u=null;for(let t of h){const e=!t.offsetParent||!!t.closest('[aria-hidden="true"]'),i=c&&c.contains(t),s=!o.contains(t);if(t===n||(i||s)&&!e){d.push(t);const e=t.dataset.origTabindex;void 0!==e&&e&&(t.tabIndex=parseFloat(e)),t.removeAttribute("data-orig-tabindex"),!t.hasAttribute("autoFocus")&&u||(u=t)}else{const e=void 0===t.dataset.origTabindex?t.getAttribute("tabindex")||"":t.dataset.origTabindex;e&&(t.dataset.origTabindex=e),t.tabIndex=-1}}let p=null;t?(!s||d.indexOf(s)<0)&&(p=u||n,d.length&&(i===ql?p=d[0]:this.lastFocus!==n&&i!==Fl||(p=d[d.length-1]))):p=r&&"image"===r.type?n:u||n,p&&Ia(p),this.lastFocus=document.activeElement,this.ignoreFocusChange=!1}next(){const t=this.carousel;t&&t.pages.length>1&&t.slideNext()}prev(){const t=this.carousel;t&&t.pages.length>1&&t.slidePrev()}jumpTo(...t){this.carousel&&this.carousel.slideTo(...t)}isTopmost(){var t;return(null===(t=Oe.getInstance())||void 0===t?void 0:t.id)==this.id}animate(t=null,e="",i){if(!t||!e)return void(i&&i());this.stop(t);const s=n=>{n.target===t&&t.dataset.animationName&&(t.removeEventListener("animationend",s),delete t.dataset.animationName,i&&i(),ia(t,e))};t.dataset.animationName=e,t.addEventListener("animationend",s),sa(t,e)}stop(t){t&&t.dispatchEvent(new CustomEvent("animationend",{bubbles:!1,cancelable:!0,currentTarget:t}))}setContent(t,e="",i=!0){if(this.isClosing())return;const s=t.el;if(!s)return;let n=null;if(ea(e)?n=e:(n=jr(e+""),ea(n)||(n=document.createElement("div"),n.innerHTML=e+"")),["img","picture","iframe","video","audio"].includes(n.nodeName.toLowerCase())){const t=document.createElement("div");t.appendChild(n),n=t}ea(n)&&t.filter&&!t.error&&(n=n.querySelector(t.filter)),n&&ea(n)?(sa(n,"fancybox__content"),t.id&&n.setAttribute("id",t.id),s.classList.add(`has-${t.error?"error":t.type||"unknown"}`),s.prepend(n),"none"===n.style.display&&(n.style.display=""),"none"===getComputedStyle(n).getPropertyValue("display")&&(n.style.display=t.display||this.option("defaultDisplay")||"flex"),t.contentEl=n,i&&this.revealContent(t),this.manageCloseBtn(t),this.manageCaption(t)):this.setError(t,"{{ELEMENT_NOT_FOUND}}")}revealContent(t,e){const i=t.el,s=t.contentEl;i&&s&&(this.emit("reveal",t),this.hideLoading(t),t.state=Ra.Opening,(e=this.isOpeningSlide(t)?void 0===e?this.optionFor(t,"showClass"):e:"f-fadeIn")?this.animate(s,e,(()=>{this.done(t)})):this.done(t))}done(t){this.isClosing()||(t.state=Ra.Ready,this.emit("done",t),sa(t.el,"is-done"),this.isCurrentSlide(t)&&this.option("autoFocus")&&queueMicrotask((()=>{var e;null===(e=t.panzoom)||void 0===e||e.updateControls(),this.option("autoFocus")&&this.focus()})),this.isOpeningSlide(t)&&(ia(this.container,Dl),!this.isCompact&&this.option("idle")&&this.setIdle()))}isCurrentSlide(t){const e=this.getSlide();return!(!t||!e)&&e.index===t.index}isOpeningSlide(t){var e,i;return null===(null===(e=this.carousel)||void 0===e?void 0:e.prevPage)&&t&&t.index===(null===(i=this.getSlide())||void 0===i?void 0:i.index)}showLoading(t){t.state=Ra.Loading;const e=t.el;e&&(sa(e,Ol),this.emit("loading",t),t.spinnerEl||setTimeout((()=>{if(!this.isClosing()&&!t.spinnerEl&&t.state===Ra.Loading){let i=jr(ta);sa(i,"fancybox-spinner"),t.spinnerEl=i,e.prepend(i),this.animate(i,"f-fadeIn")}}),250))}hideLoading(t){const e=t.el;if(!e)return;const i=t.spinnerEl;this.isClosing()?null==i||i.remove():(ia(e,Ol),i&&this.animate(i,"f-fadeOut",(()=>{i.remove()})),t.state===Ra.Loading&&(this.emit("loaded",t),t.state=Ra.Ready))}setError(t,e){if(this.isClosing())return;const i=new Event("error",{bubbles:!0,cancelable:!0});if(this.emit("error",i,t),i.defaultPrevented)return;t.error=e,this.hideLoading(t),this.clearContent(t);const s=document.createElement("div");s.classList.add("fancybox-error"),s.innerHTML=this.localize(e||"<p>{{ERROR}}</p>"),this.setContent(t,s)}clearContent(t){if(void 0===t.state)return;this.emit("clearContent",t),t.contentEl&&(t.contentEl.remove(),t.contentEl=void 0);const e=t.el;e&&(ia(e,"has-error"),ia(e,"has-unknown"),ia(e,`has-${t.type||"unknown"}`)),t.closeBtnEl&&t.closeBtnEl.remove(),t.closeBtnEl=void 0,t.captionEl&&t.captionEl.remove(),t.captionEl=void 0,t.spinnerEl&&t.spinnerEl.remove(),t.spinnerEl=void 0}getSlide(){var t;const e=this.carousel;return(null===(t=null==e?void 0:e.pages[null==e?void 0:e.page])||void 0===t?void 0:t.slides[0])||void 0}close(t,e){if(this.isClosing())return;const i=new Event("shouldClose",{bubbles:!0,cancelable:!0});if(this.emit("shouldClose",i,t),i.defaultPrevented)return;t&&t.cancelable&&(t.preventDefault(),t.stopPropagation());const s=()=>{this.proceedClose(t,e)};this.startedFs&&Bl&&Bl.isFullscreen()?Promise.resolve(Bl.exit()).then((()=>s())):s()}clearIdle(){this.idleTimer&&clearTimeout(this.idleTimer),this.idleTimer=null}setIdle(t=!1){const e=()=>{this.clearIdle(),this.idle=!0,sa(this.container,"is-idle"),this.emit("setIdle")};if(this.clearIdle(),!this.isClosing())if(t)e();else{const t=this.option("idle");t&&(this.idleTimer=setTimeout(e,t))}}endIdle(){this.clearIdle(),this.idle&&!this.isClosing()&&(this.idle=!1,ia(this.container,"is-idle"),this.emit("endIdle"))}resetIdle(){this.endIdle(),this.setIdle()}toggleIdle(){this.idle?this.endIdle():this.setIdle(!0)}toggleFullscreen(){Bl&&(Bl.isFullscreen()?Bl.exit():Bl.request().then((()=>{this.startedFs=!0})))}isClosing(){return[ka.Closing,ka.CustomClosing,ka.Destroy].includes(this.state)}proceedClose(t,e){var i,s;this.state=ka.Closing,this.clearIdle(),this.detachEvents();const n=this.container,o=this.carousel,r=this.getSlide(),c=r&&this.option("placeFocusBack")?r.triggerEl||this.option("triggerEl"):null;if(c&&(Sa(c)?Ia(c):c.focus()),n&&(ia(n,Dl),sa(n,"is-closing"),n.setAttribute(wl,"true"),this.option("animated")&&sa(n,Al),n.style.pointerEvents="none"),o){o.clearTransitions(),null===(i=o.panzoom)||void 0===i||i.destroy(),null===(s=o.plugins.Navigation)||void 0===s||s.detach();for(const t of o.slides){t.state=Ra.Closing,this.hideLoading(t);const e=t.contentEl;e&&this.stop(e);const i=null==t?void 0:t.panzoom;i&&(i.stop(),i.detachEvents(),i.detachObserver()),this.isCurrentSlide(t)||o.emit("removeSlide",t)}}Vl=window.scrollX,Hl=window.scrollY,window.addEventListener("scroll",this.onScroll),this.emit("close",t),this.state!==ka.CustomClosing?(void 0===e&&r&&(e=this.optionFor(r,"hideClass")),e&&r?(this.animate(r.contentEl,e,(()=>{o&&o.emit("removeSlide",r)})),setTimeout((()=>{this.destroy()}),500)):this.destroy()):setTimeout((()=>{this.destroy()}),500)}destroy(){var t;if(this.state===ka.Destroy)return;window.removeEventListener("scroll",this.onScroll),this.state=ka.Destroy,null===(t=this.carousel)||void 0===t||t.destroy();const e=this.container;e&&e.remove(),$l.delete(this.id);const i=Oe.getInstance();i?i.focus():(Fl&&(Fl.remove(),Fl=null),ql&&(ql.remove(),ql=null),ia(document.documentElement,yl),(()=>{if(!Oa)return;const t=document,e=t.body;e.classList.remove(El),e.style.setProperty(xl,""),t.documentElement.style.setProperty(_l,"")})(),this.emit("destroy"))}static bind(t,e,i){if(!Oa)return;let s,n="",o={};if(void 0===t?s=document.body:Pl(t)?(s=document.body,n=t,"object"==typeof e&&(o=e||{})):(s=t,Pl(e)&&(n=e),"object"==typeof i&&(o=i||{})),!s||!ea(s))return;n=n||"[data-fancybox]";const r=Oe.openers.get(s)||new Map;r.set(n,o),Oe.openers.set(s,r),1===r.size&&s.addEventListener("click",Oe.fromEvent)}static unbind(t,e){let i,s="";if(Pl(t)?(i=document.body,s=t):(i=t,Pl(e)&&(s=e)),!i)return;const n=Oe.openers.get(i);n&&s&&n.delete(s),s&&n||(Oe.openers.delete(i),i.removeEventListener("click",Oe.fromEvent))}static destroy(){let t;for(;t=Oe.getInstance();)t.destroy();for(const t of Oe.openers.keys())t.removeEventListener("click",Oe.fromEvent);Oe.openers=new Map}static fromEvent(t){if(t.defaultPrevented)return;if(t.button&&0!==t.button)return;if(t.ctrlKey||t.metaKey||t.shiftKey)return;let e=t.composedPath()[0];const i=e.closest("[data-fancybox-trigger]");if(i){const t=i.dataset.fancyboxTrigger||"",s=document.querySelectorAll(`[data-fancybox="${t}"]`),n=parseInt(i.dataset.fancyboxIndex||"",10)||0;e=s[n]||e}if(!(e&&e instanceof Element))return;let s,n,o,r;if([...Oe.openers].reverse().find((([t,i])=>!(!t.contains(e)||![...i].reverse().find((([i,c])=>{let h=e.closest(i);return!!h&&(s=t,n=i,o=h,r=c,!0)}))))),!s||!n||!o)return;r=r||{},t.preventDefault(),e=o;let c=[],h=Wr({},La,r);h.event=t,h.triggerEl=e,h.delegate=i;const d=h.groupAll,u=h.groupAttr,p=u&&e?e.getAttribute(`${u}`):"";if((!e||p||d)&&(c=[].slice.call(s.querySelectorAll(n))),e&&!d&&(c=p?c.filter((t=>t.getAttribute(`${u}`)===p)):[e]),!c.length)return;const m=Oe.getInstance();return m&&m.options.triggerEl&&c.indexOf(m.options.triggerEl)>-1?void 0:(e&&(h.startIndex=c.indexOf(e)),Oe.fromNodes(c,h))}static fromSelector(t,e,i){let s=null,n="",o={};if(Pl(t)?(s=document.body,n=t,"object"==typeof e&&(o=e||{})):t instanceof HTMLElement&&Pl(e)&&(s=t,n=e,"object"==typeof i&&(o=i||{})),!s||!n)return!1;const r=Oe.openers.get(s);return!!r&&(o=Wr({},r.get(n)||{},o),!!o&&Oe.fromNodes(Array.from(s.querySelectorAll(n)),o))}static fromNodes(t,e){e=Wr({},La,e||{});const i=[];for(const s of t){const t=s.dataset||{},n=t[Rl]||s.getAttribute(kl)||s.getAttribute("currentSrc")||s.getAttribute(Rl)||void 0;let o;const r=e.delegate;let c;r&&i.length===e.startIndex&&(o=r instanceof HTMLImageElement?r:r.querySelector("img:not([aria-hidden])")),o||(o=s instanceof HTMLImageElement?s:s.querySelector("img:not([aria-hidden])")),o&&(c=o.currentSrc||o[Rl]||void 0,!c&&o.dataset&&(c=o.dataset.lazySrc||o.dataset[Rl]||void 0));const h={src:n,triggerEl:s,thumbEl:o,thumbElSrc:c,thumbSrc:c};for(const e in t){let i=t[e]+"";i="false"!==i&&("true"===i||i),h[e]=i}i.push(h)}return new Oe(i,e)}static getInstance(t){return t?$l.get(t):Array.from($l.values()).reverse().find((t=>!t.isClosing()&&t))||null}static getSlide(){var t;return(null===(t=Oe.getInstance())||void 0===t?void 0:t.getSlide())||null}static show(t=[],e={}){return new Oe(t,e)}static next(){const t=Oe.getInstance();t&&t.next()}static prev(){const t=Oe.getInstance();t&&t.prev()}static close(t=!0,...e){if(t)for(const t of $l.values())t.close(...e);else{const t=Oe.getInstance();t&&t.close(...e)}}}Object.defineProperty(Oe,"version",{enumerable:!0,configurable:!0,writable:!0,value:"5.0.36"}),Object.defineProperty(Oe,"defaults",{enumerable:!0,configurable:!0,writable:!0,value:La}),Object.defineProperty(Oe,"Plugins",{enumerable:!0,configurable:!0,writable:!0,value:vl}),Object.defineProperty(Oe,"openers",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),document.addEventListener("DOMContentLoaded",(()=>{let t={};window?.Engine?.translation?.fancybox&&(t={...t,l10n:window.Engine.translation.fancybox}),Oe.bind("[data-fancybox]",t)}));
/*!
 * FilePond 4.32.0
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */
const Gl=(t,e)=>{for(const i in t)t.hasOwnProperty(i)&&e(i,t[i])},Wl=t=>{const e={};return Gl(t,(i=>{((t,e,i)=>{"function"!=typeof i?Object.defineProperty(t,e,{...i}):t[e]=i})(e,i,t[i])})),e},Yl=(t,e,i=null)=>{if(null===i)return t.getAttribute(e)||t.hasAttribute(e);t.setAttribute(e,i)},Xl=["svg","path"],Ql=t=>Xl.includes(t),Zl=(t,e,i={})=>{"object"==typeof e&&(i=e,e=null);const s=Ql(t)?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return e&&(Ql(t)?Yl(s,"class",e):s.className=e),Gl(i,((t,e)=>{Yl(s,t,e)})),s},Kl=(t,e)=>(t,i)=>(void 0!==i?e.splice(i,0,t):e.push(t),t),Jl=(t,e)=>i=>(e.splice(e.indexOf(i),1),i.element.parentNode&&t.removeChild(i.element),i),tc="undefined"!=typeof window&&void 0!==window.document,ec=()=>tc,ic="children"in(ec()?Zl("svg"):{})?t=>t.children.length:t=>t.childNodes.length,sc=(t,e,i,s)=>{const n=i[0]||t.left,o=i[1]||t.top,r=n+t.width,c=o+t.height*(s[1]||1),h={element:{...t},inner:{left:t.left,top:t.top,right:t.right,bottom:t.bottom},outer:{left:n,top:o,right:r,bottom:c}};return e.filter((t=>!t.isRectIgnored())).map((t=>t.rect)).forEach((t=>{nc(h.inner,{...t.inner}),nc(h.outer,{...t.outer})})),oc(h.inner),h.outer.bottom+=h.element.marginBottom,h.outer.right+=h.element.marginRight,oc(h.outer),h},nc=(t,e)=>{e.top+=t.top,e.right+=t.left,e.bottom+=t.top,e.left+=t.left,e.bottom>t.bottom&&(t.bottom=e.bottom),e.right>t.right&&(t.right=e.right)},oc=t=>{t.width=t.right-t.left,t.height=t.bottom-t.top},rc=t=>"number"==typeof t,ac=t=>t<.5?2*t*t:(4-2*t)*t-1,lc={spring:({stiffness:t=.5,damping:e=.75,mass:i=10}={})=>{let s=null,n=null,o=0,r=!1;const c=Wl({interpolate:(h,d)=>{if(r)return;if(!rc(s)||!rc(n))return r=!0,void(o=0);o+=-(n-s)*t/i,n+=o,o*=e,((t,e,i,s=.001)=>Math.abs(t-e)<s&&Math.abs(i)<s)(n,s,o)||d?(n=s,o=0,r=!0,c.onupdate(n),c.oncomplete(n)):c.onupdate(n)},target:{set:t=>{if(rc(t)&&!rc(n)&&(n=t),null===s&&(s=t,n=t),s=t,n===s||void 0===s)return r=!0,o=0,c.onupdate(n),void c.oncomplete(n);r=!1},get:()=>s},resting:{get:()=>r},onupdate:t=>{},oncomplete:t=>{}});return c},tween:({duration:t=500,easing:e=ac,delay:i=0}={})=>{let s,n,o=null,r=!0,c=!1,h=null;const d=Wl({interpolate:(u,p)=>{r||null===h||(null===o&&(o=u),u-o<i||(s=u-o-i,s>=t||p?(s=1,n=c?0:1,d.onupdate(n*h),d.oncomplete(n*h),r=!0):(n=s/t,d.onupdate((s>=0?e(c?1-n:n):0)*h))))},target:{get:()=>c?0:h,set:t=>{if(null===h)return h=t,d.onupdate(t),void d.oncomplete(t);t<h?(h=1,c=!0):(c=!1,h=t),r=!1,o=null}},resting:{get:()=>r},onupdate:t=>{},oncomplete:t=>{}});return d}},cc=(t,e,i)=>{const s=t[e]&&"object"==typeof t[e][i]?t[e][i]:t[e]||t,n="string"==typeof s?s:s.type,o="object"==typeof s?{...s}:{};return lc[n]?lc[n](o):null},hc=(t,e,i,s=!1)=>{(e=Array.isArray(e)?e:[e]).forEach((e=>{t.forEach((t=>{let n=t,o=()=>i[t],r=e=>i[t]=e;"object"==typeof t&&(n=t.key,o=t.getter||o,r=t.setter||r),e[n]&&!s||(e[n]={get:o,set:r})}))}))},dc=t=>null!=t,uc={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},pc=(t,e)=>{if(Object.keys(t).length!==Object.keys(e).length)return!0;for(const i in e)if(e[i]!==t[i])return!0;return!1},fc=(t,{opacity:e,perspective:i,translateX:s,translateY:n,scaleX:o,scaleY:r,rotateX:c,rotateY:h,rotateZ:d,originX:u,originY:p,width:m,height:b})=>{let v="",y="";(dc(u)||dc(p))&&(y+=`transform-origin: ${u||0}px ${p||0}px;`),dc(i)&&(v+=`perspective(${i}px) `),(dc(s)||dc(n))&&(v+=`translate3d(${s||0}px, ${n||0}px, 0) `),(dc(o)||dc(r))&&(v+=`scale3d(${dc(o)?o:1}, ${dc(r)?r:1}, 1) `),dc(d)&&(v+=`rotateZ(${d}rad) `),dc(c)&&(v+=`rotateX(${c}rad) `),dc(h)&&(v+=`rotateY(${h}rad) `),v.length&&(y+=`transform:${v};`),dc(e)&&(y+=`opacity:${e};`,0===e&&(y+="visibility:hidden;"),e<1&&(y+="pointer-events:none;")),dc(b)&&(y+=`height:${b}px;`),dc(m)&&(y+=`width:${m}px;`);const E=t.elementCurrentStyle||"";y.length===E.length&&y===E||(t.style.cssText=y,t.elementCurrentStyle=y)},gc={styles:({mixinConfig:t,viewProps:e,viewInternalAPI:i,viewExternalAPI:s,view:n})=>{const o={...e},r={};hc(t,[i,s],e);const c=()=>n.rect?sc(n.rect,n.childViews,[e.translateX||0,e.translateY||0],[e.scaleX||0,e.scaleY||0]):null;return i.rect={get:c},s.rect={get:c},t.forEach((t=>{e[t]=void 0===o[t]?uc[t]:o[t]})),{write:()=>{if(pc(r,e))return fc(n.element,e),Object.assign(r,{...e}),!0},destroy:()=>{}}},listeners:({mixinConfig:t,viewProps:e,viewInternalAPI:i,viewExternalAPI:s,viewState:n,view:o})=>{const r=[],c=(h=o.element,(t,e)=>{h.addEventListener(t,e)});var h;const d=(t=>(e,i)=>{t.removeEventListener(e,i)})(o.element);return s.on=(t,e)=>{r.push({type:t,fn:e}),c(t,e)},s.off=(t,e)=>{r.splice(r.findIndex((i=>i.type===t&&i.fn===e)),1),d(t,e)},{write:()=>!0,destroy:()=>{r.forEach((t=>{d(t.type,t.fn)}))}}},animations:({mixinConfig:t,viewProps:e,viewInternalAPI:i,viewExternalAPI:s})=>{const n={...e},o=[];return Gl(t,((t,r)=>{const c=cc(r);if(!c)return;c.onupdate=i=>{e[t]=i},c.target=n[t];hc([{key:t,setter:t=>{c.target!==t&&(c.target=t)},getter:()=>e[t]}],[i,s],e,!0),o.push(c)})),{write:t=>{let e=document.hidden,i=!0;return o.forEach((s=>{s.resting||(i=!1),s.interpolate(t,e)})),i},destroy:()=>{}}},apis:({mixinConfig:t,viewProps:e,viewExternalAPI:i})=>{hc(t,i,e)}},mc=(t={},e={},i={})=>(e.layoutCalculated||(t.paddingTop=parseInt(i.paddingTop,10)||0,t.marginTop=parseInt(i.marginTop,10)||0,t.marginRight=parseInt(i.marginRight,10)||0,t.marginBottom=parseInt(i.marginBottom,10)||0,t.marginLeft=parseInt(i.marginLeft,10)||0,e.layoutCalculated=!0),t.left=e.offsetLeft||0,t.top=e.offsetTop||0,t.width=e.offsetWidth||0,t.height=e.offsetHeight||0,t.right=t.left+t.width,t.bottom=t.top+t.height,t.scrollTop=e.scrollTop,t.hidden=null===e.offsetParent,t),bc=({tag:t="div",name:e=null,attributes:i={},read:s=(()=>{}),write:n=(()=>{}),create:o=(()=>{}),destroy:r=(()=>{}),filterFrameActionsForChild:c=((t,e)=>e),didCreateView:h=(()=>{}),didWriteView:d=(()=>{}),ignoreRect:u=!1,ignoreRectUpdate:p=!1,mixins:m=[]}={})=>(b,v={})=>{const y=Zl(t,`filepond--${e}`,i),E=window.getComputedStyle(y,null),x=mc();let w=null,S=!1;const O=[],D=[],M={},k={},P=[n],N=[s],B=[r],F=()=>y,q=()=>O.concat(),j=()=>w||(w=sc(x,O,[0,0],[1,1]),w),z={element:{get:F},style:{get:()=>E},childViews:{get:q}},$={...z,rect:{get:j},ref:{get:()=>M},is:t=>e===t,appendChild:(U=y,(t,e)=>{void 0!==e&&U.children[e]?U.insertBefore(t,U.children[e]):U.appendChild(t)}),createChildView:(t=>(e,i)=>e(t,i))(b),linkView:t=>(O.push(t),t),unlinkView:t=>{O.splice(O.indexOf(t),1)},appendChildView:Kl(0,O),removeChildView:Jl(y,O),registerWriter:t=>P.push(t),registerReader:t=>N.push(t),registerDestroyer:t=>B.push(t),invalidateLayout:()=>y.layoutCalculated=!1,dispatch:b.dispatch,query:b.query};var U;const G={element:{get:F},childViews:{get:q},rect:{get:j},resting:{get:()=>S},isRectIgnored:()=>u,_read:()=>{w=null,O.forEach((t=>t._read()));!(p&&x.width&&x.height)&&mc(x,y,E);const t={root:X,props:v,rect:x};N.forEach((e=>e(t)))},_write:(t,e,i)=>{let s=0===e.length;return P.forEach((n=>{!1===n({props:v,root:X,actions:e,timestamp:t,shouldOptimize:i})&&(s=!1)})),D.forEach((e=>{!1===e.write(t)&&(s=!1)})),O.filter((t=>!!t.element.parentNode)).forEach((n=>{n._write(t,c(n,e),i)||(s=!1)})),O.forEach(((n,o)=>{n.element.parentNode||(X.appendChild(n.element,o),n._read(),n._write(t,c(n,e),i),s=!1)})),S=s,d({props:v,root:X,actions:e,timestamp:t}),s},_destroy:()=>{D.forEach((t=>t.destroy())),B.forEach((t=>{t({root:X,props:v})})),O.forEach((t=>t._destroy()))}},Y={...z,rect:{get:()=>x}};Object.keys(m).sort(((t,e)=>"styles"===t?1:"styles"===e?-1:0)).forEach((t=>{const e=gc[t]({mixinConfig:m[t],viewProps:v,viewState:k,viewInternalAPI:$,viewExternalAPI:G,view:Wl(Y)});e&&D.push(e)}));const X=Wl($);o({root:X,props:v});const K=ic(y);return O.forEach(((t,e)=>{X.appendChild(t.element,K+e)})),h(X),Wl(G)},vc=(t,e)=>({root:i,props:s,actions:n=[],timestamp:o,shouldOptimize:r})=>{n.filter((e=>t[e.type])).forEach((e=>t[e.type]({root:i,props:s,action:e.data,timestamp:o,shouldOptimize:r}))),e&&e({root:i,props:s,actions:n,timestamp:o,shouldOptimize:r})},yc=(t,e)=>e.parentNode.insertBefore(t,e),Ec=(t,e)=>e.parentNode.insertBefore(t,e.nextSibling),_c=t=>Array.isArray(t),xc=t=>null==t,wc=t=>t.trim(),Tc=t=>""+t,Ac=t=>"boolean"==typeof t,Sc=t=>Ac(t)?t:"true"===t,Oc=t=>"string"==typeof t,Dc=t=>rc(t)?t:Oc(t)?Tc(t).replace(/[a-z]+/gi,""):0,Cc=t=>parseInt(Dc(t),10),Ic=t=>parseFloat(Dc(t)),Mc=t=>rc(t)&&isFinite(t)&&Math.floor(t)===t,Lc=(t,e=1e3)=>{if(Mc(t))return t;let i=Tc(t).trim();return/MB$/i.test(i)?(i=i.replace(/MB$i/,"").trim(),Cc(i)*e*e):/KB/i.test(i)?(i=i.replace(/KB$i/,"").trim(),Cc(i)*e):Cc(i)},kc=t=>"function"==typeof t,Rc={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},Pc=(t,e,i,s,n)=>{if(null===e)return null;if("function"==typeof e)return e;const o={url:"GET"===i||"PATCH"===i?`?${t}=`:"",method:i,headers:n,withCredentials:!1,timeout:s,onload:null,ondata:null,onerror:null};if(Oc(e))return o.url=e,o;if(Object.assign(o,e),Oc(o.headers)){const t=o.headers.split(/:(.+)/);o.headers={header:t[0],value:t[1]}}return o.withCredentials=Sc(o.withCredentials),o},Nc=t=>"object"==typeof t&&null!==t,Bc=t=>_c(t)?"array":(t=>null===t)(t)?"null":Mc(t)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(t)?"bytes":(t=>Nc(t)&&Oc(t.url)&&Nc(t.process)&&Nc(t.revert)&&Nc(t.restore)&&Nc(t.fetch))(t)?"api":typeof t,Fc={array:(t,e=",")=>xc(t)?[]:_c(t)?t:Tc(t).split(e).map(wc).filter((t=>t.length)),boolean:Sc,int:t=>"bytes"===Bc(t)?Lc(t):Cc(t),number:Ic,float:Ic,bytes:Lc,string:t=>kc(t)?t:Tc(t),function:t=>(t=>{let e=self,i=t.split("."),s=null;for(;s=i.shift();)if(e=e[s],!e)return null;return e})(t),serverapi:t=>(t=>{const e={};return e.url=Oc(t)?t:t.url||"",e.timeout=t.timeout?parseInt(t.timeout,10):0,e.headers=t.headers?t.headers:{},Gl(Rc,(i=>{e[i]=Pc(i,t[i],Rc[i],e.timeout,e.headers)})),e.process=t.process||Oc(t)||t.url?e.process:null,e.remove=t.remove||null,delete e.headers,e})(t),object:t=>{try{return JSON.parse(t.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'))}catch(t){return null}}},qc=(t,e,i)=>{if(t===e)return t;let s=Bc(t);if(s!==i){const e=(n=t,Fc[i](n));if(s=Bc(e),null===e)throw`Trying to assign value with incorrect type to "${option}", allowed type: "${i}"`;t=e}var n;return t},jc=t=>{const e={};return Gl(t,(i=>{const s=t[i];e[i]=((t,e)=>{let i=t;return{enumerable:!0,get:()=>i,set:s=>{i=qc(s,t,e)}}})(s[0],s[1])})),Wl(e)},zc=(t,e="-")=>t.split(/(?=[A-Z])/).map((t=>t.toLowerCase())).join(e),Vc=(t,e)=>{const i={};return Gl(e,(e=>{i[e]={get:()=>t.getState().options[e],set:i=>{t.dispatch(`SET_${zc(e,"_").toUpperCase()}`,{value:i})}}})),i},Hc=t=>(e,i,s)=>{const n={};return Gl(t,(t=>{const i=zc(t,"_").toUpperCase();n[`SET_${i}`]=n=>{try{s.options[t]=n.value}catch(t){}e(`DID_SET_${i}`,{value:s.options[t]})}})),n},$c=t=>e=>{const i={};return Gl(t,(t=>{i[`GET_${zc(t,"_").toUpperCase()}`]=i=>e.options[t]})),i},Uc=1,Gc=2,Wc=3,Yc=4,Xc=5,Qc=()=>Math.random().toString(36).substring(2,11),Zc=(t,e)=>t.splice(e,1),Kc=()=>{const t=[],e=(e,i)=>{Zc(t,t.findIndex((t=>t.event===e&&(t.cb===i||!i))))},i=(e,i,s)=>{t.filter((t=>t.event===e)).map((t=>t.cb)).forEach((t=>((t,e)=>{e?t():document.hidden?Promise.resolve(1).then(t):setTimeout(t,0)})((()=>t(...i)),s)))};return{fireSync:(t,...e)=>{i(t,e,!0)},fire:(t,...e)=>{i(t,e,!1)},on:(e,i)=>{t.push({event:e,cb:i})},onOnce:(i,s)=>{t.push({event:i,cb:(...t)=>{e(i,s),s(...t)}})},off:e}},Jc=(t,e,i)=>{Object.getOwnPropertyNames(t).filter((t=>!i.includes(t))).forEach((i=>Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))))},th=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],eh=t=>{const e={};return Jc(t,e,th),e},ih=1,sh=2,nh=9,oh=3,rh=5,ah=6,lh=10,ch=7,hh=8,dh=1,uh=2,ph=3,fh=t=>/[^0-9]+/.exec(t),gh=()=>fh(1.1.toLocaleString())[0],mh={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},bh=[],vh=(t,e,i)=>new Promise(((s,n)=>{const o=bh.filter((e=>e.key===t)).map((t=>t.cb));if(0===o.length)return void s(e);const r=o.shift();o.reduce(((t,e)=>t.then((t=>e(t,i)))),r(e,i)).then((t=>s(t))).catch((t=>n(t)))})),yh=(t,e,i)=>bh.filter((e=>e.key===t)).map((t=>t.cb(e,i))),Eh=(t,e)=>bh.push({key:t,cb:e}),_h=()=>({...xh}),xh={id:[null,mh.STRING],name:["filepond",mh.STRING],disabled:[!1,mh.BOOLEAN],className:[null,mh.STRING],required:[!1,mh.BOOLEAN],captureMethod:[null,mh.STRING],allowSyncAcceptAttribute:[!0,mh.BOOLEAN],allowDrop:[!0,mh.BOOLEAN],allowBrowse:[!0,mh.BOOLEAN],allowPaste:[!0,mh.BOOLEAN],allowMultiple:[!1,mh.BOOLEAN],allowReplace:[!0,mh.BOOLEAN],allowRevert:[!0,mh.BOOLEAN],allowRemove:[!0,mh.BOOLEAN],allowProcess:[!0,mh.BOOLEAN],allowReorder:[!1,mh.BOOLEAN],allowDirectoriesOnly:[!1,mh.BOOLEAN],storeAsFile:[!1,mh.BOOLEAN],forceRevert:[!1,mh.BOOLEAN],maxFiles:[null,mh.INT],checkValidity:[!1,mh.BOOLEAN],itemInsertLocationFreedom:[!0,mh.BOOLEAN],itemInsertLocation:["before",mh.STRING],itemInsertInterval:[75,mh.INT],dropOnPage:[!1,mh.BOOLEAN],dropOnElement:[!0,mh.BOOLEAN],dropValidation:[!1,mh.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],mh.ARRAY],instantUpload:[!0,mh.BOOLEAN],maxParallelUploads:[2,mh.INT],allowMinimumUploadDuration:[!0,mh.BOOLEAN],chunkUploads:[!1,mh.BOOLEAN],chunkForce:[!1,mh.BOOLEAN],chunkSize:[5e6,mh.INT],chunkRetryDelays:[[500,1e3,3e3],mh.ARRAY],server:[null,mh.SERVER_API],fileSizeBase:[1e3,mh.INT],labelFileSizeBytes:["bytes",mh.STRING],labelFileSizeKilobytes:["KB",mh.STRING],labelFileSizeMegabytes:["MB",mh.STRING],labelFileSizeGigabytes:["GB",mh.STRING],labelDecimalSeparator:[gh(),mh.STRING],labelThousandsSeparator:[(()=>{const t=gh(),e=1e3.toLocaleString();return e!==1e3.toString()?fh(e)[0]:"."===t?",":"."})(),mh.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',mh.STRING],labelInvalidField:["Field contains invalid files",mh.STRING],labelFileWaitingForSize:["Waiting for size",mh.STRING],labelFileSizeNotAvailable:["Size not available",mh.STRING],labelFileCountSingular:["file in list",mh.STRING],labelFileCountPlural:["files in list",mh.STRING],labelFileLoading:["Loading",mh.STRING],labelFileAdded:["Added",mh.STRING],labelFileLoadError:["Error during load",mh.STRING],labelFileRemoved:["Removed",mh.STRING],labelFileRemoveError:["Error during remove",mh.STRING],labelFileProcessing:["Uploading",mh.STRING],labelFileProcessingComplete:["Upload complete",mh.STRING],labelFileProcessingAborted:["Upload cancelled",mh.STRING],labelFileProcessingError:["Error during upload",mh.STRING],labelFileProcessingRevertError:["Error during revert",mh.STRING],labelTapToCancel:["tap to cancel",mh.STRING],labelTapToRetry:["tap to retry",mh.STRING],labelTapToUndo:["tap to undo",mh.STRING],labelButtonRemoveItem:["Remove",mh.STRING],labelButtonAbortItemLoad:["Abort",mh.STRING],labelButtonRetryItemLoad:["Retry",mh.STRING],labelButtonAbortItemProcessing:["Cancel",mh.STRING],labelButtonUndoItemProcessing:["Undo",mh.STRING],labelButtonRetryItemProcessing:["Retry",mh.STRING],labelButtonProcessItem:["Upload",mh.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',mh.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',mh.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',mh.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',mh.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',mh.STRING],oninit:[null,mh.FUNCTION],onwarning:[null,mh.FUNCTION],onerror:[null,mh.FUNCTION],onactivatefile:[null,mh.FUNCTION],oninitfile:[null,mh.FUNCTION],onaddfilestart:[null,mh.FUNCTION],onaddfileprogress:[null,mh.FUNCTION],onaddfile:[null,mh.FUNCTION],onprocessfilestart:[null,mh.FUNCTION],onprocessfileprogress:[null,mh.FUNCTION],onprocessfileabort:[null,mh.FUNCTION],onprocessfilerevert:[null,mh.FUNCTION],onprocessfile:[null,mh.FUNCTION],onprocessfiles:[null,mh.FUNCTION],onremovefile:[null,mh.FUNCTION],onpreparefile:[null,mh.FUNCTION],onupdatefiles:[null,mh.FUNCTION],onreorderfiles:[null,mh.FUNCTION],beforeDropFile:[null,mh.FUNCTION],beforeAddFile:[null,mh.FUNCTION],beforeRemoveFile:[null,mh.FUNCTION],beforePrepareFile:[null,mh.FUNCTION],stylePanelLayout:[null,mh.STRING],stylePanelAspectRatio:[null,mh.STRING],styleItemPanelAspectRatio:[null,mh.STRING],styleButtonRemoveItemPosition:["left",mh.STRING],styleButtonProcessItemPosition:["right",mh.STRING],styleLoadIndicatorPosition:["right",mh.STRING],styleProgressIndicatorPosition:["right",mh.STRING],styleButtonRemoveItemAlign:[!1,mh.BOOLEAN],files:[[],mh.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],mh.ARRAY]},wh=(t,e)=>xc(e)?t[0]||null:Mc(e)?t[e]||null:("object"==typeof e&&(e=e.id),t.find((t=>t.id===e))||null),Th=t=>{if(xc(t))return t;if(/:/.test(t)){const e=t.split(":");return e[1]/e[0]}return parseFloat(t)},Ah=t=>t.filter((t=>!t.archived)),Sh={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4};let Oh=null;const Dh=[hh,ah,lh],Ch=[ch,oh,nh,ih],Ih=[rh],Mh=t=>Dh.includes(t.status),Lh=t=>Ch.includes(t.status),kh=t=>Ih.includes(t.status),Rh=t=>Nc(t.options.server)&&(Nc(t.options.server.process)||kc(t.options.server.process)),Ph=t=>({GET_STATUS:()=>{const e=Ah(t.items),{EMPTY:i,ERROR:s,BUSY:n,IDLE:o,READY:r}=Sh;return 0===e.length?i:e.some(Mh)?s:e.some(Lh)?n:e.some(kh)?r:o},GET_ITEM:e=>wh(t.items,e),GET_ACTIVE_ITEM:e=>wh(Ah(t.items),e),GET_ACTIVE_ITEMS:()=>Ah(t.items),GET_ITEMS:()=>t.items,GET_ITEM_NAME:e=>{const i=wh(t.items,e);return i?i.filename:null},GET_ITEM_SIZE:e=>{const i=wh(t.items,e);return i?i.fileSize:null},GET_STYLES:()=>Object.keys(t.options).filter((t=>/^style/.test(t))).map((e=>({name:e,value:t.options[e]}))),GET_PANEL_ASPECT_RATIO:()=>/circle/.test(t.options.stylePanelLayout)?1:Th(t.options.stylePanelAspectRatio),GET_ITEM_PANEL_ASPECT_RATIO:()=>t.options.styleItemPanelAspectRatio,GET_ITEMS_BY_STATUS:e=>Ah(t.items).filter((t=>t.status===e)),GET_TOTAL_ITEMS:()=>Ah(t.items).length,SHOULD_UPDATE_FILE_INPUT:()=>t.options.storeAsFile&&(()=>{if(null===Oh)try{const t=new DataTransfer;t.items.add(new File(["hello world"],"This_Works.txt"));const e=document.createElement("input");e.setAttribute("type","file"),e.files=t.files,Oh=1===e.files.length}catch(t){Oh=!1}return Oh})()&&!Rh(t),IS_ASYNC:()=>Rh(t),GET_FILE_SIZE_LABELS:t=>({labelBytes:t("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:t("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:t("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:t("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0})}),Nh=(t,e,i)=>Math.max(Math.min(i,t),e),Bh=t=>/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(t),Fh=t=>`${t}`.split("/").pop().split("?").shift(),qh=t=>t.split(".").pop(),jh=(t,e="")=>(e+t).slice(-e.length),zh=(t=new Date)=>`${t.getFullYear()}-${jh(t.getMonth()+1,"00")}-${jh(t.getDate(),"00")}_${jh(t.getHours(),"00")}-${jh(t.getMinutes(),"00")}-${jh(t.getSeconds(),"00")}`,Vh=(t,e,i=null,s=null)=>{const n="string"==typeof i?t.slice(0,t.size,i):t.slice(0,t.size,t.type);return n.lastModifiedDate=new Date,t._relativePath&&(n._relativePath=t._relativePath),Oc(e)||(e=zh()),e&&null===s&&qh(e)?n.name=e:(s=s||(t=>{if("string"!=typeof t)return"";const e=t.split("/").pop();return/svg/.test(e)?"svg":/zip|compressed/.test(e)?"zip":/plain/.test(e)?"txt":/msword/.test(e)?"doc":/[a-z]+/.test(e)?"jpeg"===e?"jpg":e:""})(n.type),n.name=e+(s?"."+s:"")),n},Hh=(t,e)=>{const i=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(i){const s=new i;return s.append(t),s.getBlob(e)}return new Blob([t],{type:e})},$h=t=>(/^data:(.+);/.exec(t)||[])[1]||null,Uh=t=>{const e=$h(t),i=(t=>atob((t=>t.split(",")[1].replace(/\s/g,""))(t)))(t);return((t,e)=>{const i=new ArrayBuffer(t.length),s=new Uint8Array(i);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);return Hh(i,e)})(i,e)},Gh=t=>{if(!/^content-disposition:/i.test(t))return null;const e=t.split(/filename=|filename\*=.+''/).splice(1).map((t=>t.trim().replace(/^["']|[;"']{0,2}$/g,""))).filter((t=>t.length));return e.length?decodeURI(e[e.length-1]):null},Wh=t=>{if(/content-length:/i.test(t)){const e=t.match(/[0-9]+/)[0];return e?parseInt(e,10):null}return null},Yh=t=>{if(/x-content-transfer-id:/i.test(t)){return(t.split(":")[1]||"").trim()||null}return null},Xh=t=>{const e={source:null,name:null,size:null},i=t.split("\n");for(let t of i){const i=Gh(t);if(i){e.name=i;continue}const s=Wh(t);if(s){e.size=s;continue}const n=Yh(t);n&&(e.source=n)}return e},Qh=t=>{const e={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},i=i=>{t?(e.timestamp=Date.now(),e.request=t(i,(t=>{e.duration=Date.now()-e.timestamp,e.complete=!0,t instanceof Blob&&(t=Vh(t,t.name||Fh(i))),s.fire("load",t instanceof Blob?t:t?t.body:null)}),(t=>{s.fire("error","string"==typeof t?{type:"error",code:0,body:t}:t)}),((t,i,n)=>{n&&(e.size=n),e.duration=Date.now()-e.timestamp,t?(e.progress=i/n,s.fire("progress",e.progress)):e.progress=null}),(()=>{s.fire("abort")}),(t=>{const i=Xh("string"==typeof t?t:t.headers);s.fire("meta",{size:e.size||i.size,filename:i.name,source:i.source})}))):s.fire("error",{type:"error",body:"Can't load URL",code:400})},s={...Kc(),setSource:t=>e.source=t,getProgress:()=>e.progress,abort:()=>{e.request&&e.request.abort&&e.request.abort()},load:()=>{const t=e.source;var n,o;s.fire("init",t),t instanceof File?s.fire("load",t):t instanceof Blob?s.fire("load",Vh(t,t.name)):Bh(t)?s.fire("load",Vh(Uh(t),n,null,o)):i(t)}};return s},Zh=t=>/GET|HEAD/.test(t),Kh=(t,e,i)=>{const s={onheaders:()=>{},onprogress:()=>{},onload:()=>{},ontimeout:()=>{},onerror:()=>{},onabort:()=>{},abort:()=>{n=!0,r.abort()}};let n=!1,o=!1;i={method:"POST",headers:{},withCredentials:!1,...i},e=encodeURI(e),Zh(i.method)&&t&&(e=`${e}${encodeURIComponent("string"==typeof t?t:JSON.stringify(t))}`);const r=new XMLHttpRequest;return(Zh(i.method)?r:r.upload).onprogress=t=>{n||s.onprogress(t.lengthComputable,t.loaded,t.total)},r.onreadystatechange=()=>{r.readyState<2||4===r.readyState&&0===r.status||o||(o=!0,s.onheaders(r))},r.onload=()=>{r.status>=200&&r.status<300?s.onload(r):s.onerror(r)},r.onerror=()=>s.onerror(r),r.onabort=()=>{n=!0,s.onabort()},r.ontimeout=()=>s.ontimeout(r),r.open(i.method,e,!0),Mc(i.timeout)&&(r.timeout=i.timeout),Object.keys(i.headers).forEach((t=>{const e=unescape(encodeURIComponent(i.headers[t]));r.setRequestHeader(t,e)})),i.responseType&&(r.responseType=i.responseType),i.withCredentials&&(r.withCredentials=!0),r.send(t),s},Jh=(t,e,i,s)=>({type:t,code:e,body:i,headers:s}),td=t=>e=>{t(Jh("error",0,"Timeout",e.getAllResponseHeaders()))},ed=t=>/\?/.test(t),id=(...t)=>{let e="";return t.forEach((t=>{e+=ed(e)&&ed(t)?t.replace(/\?/,"&"):t})),e},sd=(t="",e)=>{if("function"==typeof e)return e;if(!e||!Oc(e.url))return null;const i=e.onload||(t=>t),s=e.onerror||(t=>null);return(n,o,r,c,h,d)=>{const u=Kh(n,id(t,e.url),{...e,responseType:"blob"});return u.onload=t=>{const s=t.getAllResponseHeaders(),r=Xh(s).name||Fh(n);o(Jh("load",t.status,"HEAD"===e.method?null:Vh(i(t.response),r),s))},u.onerror=t=>{r(Jh("error",t.status,s(t.response)||t.statusText,t.getAllResponseHeaders()))},u.onheaders=t=>{d(Jh("headers",t.status,null,t.getAllResponseHeaders()))},u.ontimeout=td(r),u.onprogress=c,u.onabort=h,u}},nd=0,od=1,rd=2,ad=3,ld=4,cd=(t,e,i,s,n,o,r,c,h,d,u)=>{const p=[],{chunkTransferId:m,chunkServer:b,chunkSize:v,chunkRetryDelays:y}=u,E={serverId:m,aborted:!1},x=e.ondata||(t=>t),w=e.onload||((t,e)=>"HEAD"===e?t.getResponseHeader("Upload-Offset"):t.response),S=e.onerror||(t=>null),O=Math.floor(s.size/v);for(let t=0;t<=O;t++){const e=t*v,i=s.slice(e,e+v,"application/offset+octet-stream");p[t]={index:t,size:i.size,offset:e,data:i,file:s,progress:0,retries:[...y],status:nd,error:null,request:null,timeout:null}}const D=t=>t.status===nd||t.status===ad,M=e=>{if(E.aborted)return;if(!(e=e||p.find(D)))return void(p.every((t=>t.status===od))&&o(E.serverId));e.status=rd,e.progress=null;const i=b.ondata||(t=>t),n=b.onerror||(t=>null),c=b.onload||(()=>{}),d=id(t,b.url,E.serverId),u="function"==typeof b.headers?b.headers(e):{...b.headers,"Content-Type":"application/offset+octet-stream","Upload-Offset":e.offset,"Upload-Length":s.size,"Upload-Name":s.name},m=e.request=Kh(i(e.data),d,{...b,headers:u});m.onload=t=>{c(t,e.index,p.length),e.status=od,e.request=null,N()},m.onprogress=(t,i,s)=>{e.progress=t?i:null,P()},m.onerror=t=>{e.status=ad,e.request=null,e.error=n(t.response)||t.statusText,k(e)||r(Jh("error",t.status,n(t.response)||t.statusText,t.getAllResponseHeaders()))},m.ontimeout=t=>{e.status=ad,e.request=null,k(e)||td(r)(t)},m.onabort=()=>{e.status=nd,e.request=null,h()}},k=t=>0!==t.retries.length&&(t.status=ld,clearTimeout(t.timeout),t.timeout=setTimeout((()=>{M(t)}),t.retries.shift()),!0),P=()=>{const t=p.reduce(((t,e)=>null===t||null===e.progress?null:t+e.progress),0);if(null===t)return c(!1,0,0);const e=p.reduce(((t,e)=>t+e.size),0);c(!0,t,e)},N=()=>{p.filter((t=>t.status===rd)).length>=1||M()};return E.serverId?(i=>{const s=id(t,b.url,E.serverId),n={headers:"function"==typeof e.headers?e.headers(E.serverId):{...e.headers},method:"HEAD"},o=Kh(null,s,n);o.onload=t=>i(w(t,n.method)),o.onerror=t=>r(Jh("error",t.status,S(t.response)||t.statusText,t.getAllResponseHeaders())),o.ontimeout=td(r)})((t=>{E.aborted||(p.filter((e=>e.offset<t)).forEach((t=>{t.status=od,t.progress=t.size})),N())})):(o=>{const c=new FormData;Nc(n)&&c.append(i,JSON.stringify(n));const h="function"==typeof e.headers?e.headers(s,n):{...e.headers,"Upload-Length":s.size},d={...e,headers:h},u=Kh(x(c),id(t,e.url),d);u.onload=t=>o(w(t,d.method)),u.onerror=t=>r(Jh("error",t.status,S(t.response)||t.statusText,t.getAllResponseHeaders())),u.ontimeout=td(r)})((t=>{E.aborted||(d(t),E.serverId=t,N())})),{abort:()=>{E.aborted=!0,p.forEach((t=>{clearTimeout(t.timeout),t.request&&t.request.abort()}))}}},hd=(t="",e,i,s)=>"function"==typeof e?(...t)=>e(i,...t,s):e&&Oc(e.url)?((t,e,i,s)=>(n,o,r,c,h,d,u)=>{if(!n)return;const p=s.chunkUploads,m=p&&n.size>s.chunkSize,b=p&&(m||s.chunkForce);if(n instanceof Blob&&b)return cd(t,e,i,n,o,r,c,h,d,u,s);const v=e.ondata||(t=>t),y=e.onload||(t=>t),E=e.onerror||(t=>null),x="function"==typeof e.headers?e.headers(n,o)||{}:{...e.headers},w={...e,headers:x};var S=new FormData;Nc(o)&&S.append(i,JSON.stringify(o)),(n instanceof Blob?[{name:null,file:n}]:n).forEach((t=>{S.append(i,t.file,null===t.name?t.file.name:`${t.name}${t.file.name}`)}));const O=Kh(v(S),id(t,e.url),w);return O.onload=t=>{r(Jh("load",t.status,y(t.response),t.getAllResponseHeaders()))},O.onerror=t=>{c(Jh("error",t.status,E(t.response)||t.statusText,t.getAllResponseHeaders()))},O.ontimeout=td(c),O.onprogress=h,O.onabort=d,O})(t,e,i,s):null,dd=(t="",e)=>{if("function"==typeof e)return e;if(!e||!Oc(e.url))return(t,e)=>e();const i=e.onload||(t=>t),s=e.onerror||(t=>null);return(n,o,r)=>{const c=Kh(n,t+e.url,e);return c.onload=t=>{o(Jh("load",t.status,i(t.response),t.getAllResponseHeaders()))},c.onerror=t=>{r(Jh("error",t.status,s(t.response)||t.statusText,t.getAllResponseHeaders()))},c.ontimeout=td(r),c}},ud=(t=0,e=1)=>t+Math.random()*(e-t),pd=(t,e)=>{const i={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},{allowMinimumUploadDuration:s}=e,n=()=>{i.request&&(i.perceivedPerformanceUpdater.clear(),i.request.abort&&i.request.abort(),i.complete=!0)},o=s?()=>i.progress?Math.min(i.progress,i.perceivedProgress):null:()=>i.progress||null,r=s?()=>Math.min(i.duration,i.perceivedDuration):()=>i.duration,c={...Kc(),process:(e,n)=>{const o=()=>{0!==i.duration&&null!==i.progress&&c.fire("progress",c.getProgress())},r=()=>{i.complete=!0,c.fire("load-perceived",i.response.body)};c.fire("start"),i.timestamp=Date.now(),i.perceivedPerformanceUpdater=((t,e=1e3,i=0,s=25,n=250)=>{let o=null;const r=Date.now(),c=()=>{let i=Date.now()-r,h=ud(s,n);i+h>e&&(h=i+h-e);let d=i/e;d>=1||document.hidden?t(1):(t(d),o=setTimeout(c,h))};return e>0&&c(),{clear:()=>{clearTimeout(o)}}})((t=>{i.perceivedProgress=t,i.perceivedDuration=Date.now()-i.timestamp,o(),i.response&&1===i.perceivedProgress&&!i.complete&&r()}),s?ud(750,1500):0),i.request=t(e,n,(t=>{i.response=Nc(t)?t:{type:"load",code:200,body:`${t}`,headers:{}},i.duration=Date.now()-i.timestamp,i.progress=1,c.fire("load",i.response.body),(!s||s&&1===i.perceivedProgress)&&r()}),(t=>{i.perceivedPerformanceUpdater.clear(),c.fire("error",Nc(t)?t:{type:"error",code:0,body:`${t}`})}),((t,e,s)=>{i.duration=Date.now()-i.timestamp,i.progress=t?e/s:null,o()}),(()=>{i.perceivedPerformanceUpdater.clear(),c.fire("abort",i.response?i.response.body:null)}),(t=>{c.fire("transfer",t)}))},abort:n,getProgress:o,getDuration:r,reset:()=>{n(),i.complete=!1,i.perceivedProgress=0,i.progress=0,i.timestamp=null,i.perceivedDuration=0,i.duration=0,i.request=null,i.response=null}};return c},fd=t=>t.substring(0,t.lastIndexOf("."))||t,gd=t=>!!(t instanceof File||t instanceof Blob&&t.name),md=t=>{if(!Nc(t))return t;const e=_c(t)?[]:{};for(const i in t){if(!t.hasOwnProperty(i))continue;const s=t[i];e[i]=s&&Nc(s)?md(s):s}return e},bd=(t=null,e=null,i=null)=>{const s=Qc(),n={archived:!1,frozen:!1,released:!1,source:null,file:i,serverFileReference:e,transferId:null,processingAborted:!1,status:e?rh:ih,activeLoader:null,activeProcessor:null};let o=null;const r={},c=t=>n.status=t,h=(t,...e)=>{n.released||n.frozen||p.fire(t,...e)},d=(t,e)=>{if(n.processingAborted)return void(n.processingAborted=!1);if(c(oh),o=null,!(n.file instanceof Blob))return void p.on("load",(()=>{d(t,e)}));t.on("load",(t=>{n.transferId=null,n.serverFileReference=t})),t.on("transfer",(t=>{n.transferId=t})),t.on("load-perceived",(t=>{n.activeProcessor=null,n.transferId=null,n.serverFileReference=t,c(rh),h("process-complete",t)})),t.on("start",(()=>{h("process-start")})),t.on("error",(t=>{n.activeProcessor=null,c(ah),h("process-error",t)})),t.on("abort",(t=>{n.activeProcessor=null,n.serverFileReference=t,c(sh),h("process-abort"),o&&o()})),t.on("progress",(t=>{h("process-progress",t)}));const i=console.error;e(n.file,(e=>{n.archived||t.process(e,{...r})}),i),n.activeProcessor=t},u=(t,e,i)=>{const s=t.split("."),n=s[0],o=s.pop();let c=r;s.forEach((t=>c=c[t])),JSON.stringify(c[o])!==JSON.stringify(e)&&(c[o]=e,h("metadata-update",{key:n,value:r[n],silent:i}))},p={id:{get:()=>s},origin:{get:()=>t,set:e=>t=e},serverId:{get:()=>n.serverFileReference},transferId:{get:()=>n.transferId},status:{get:()=>n.status},filename:{get:()=>n.file.name},filenameWithoutExtension:{get:()=>fd(n.file.name)},fileExtension:{get:()=>qh(n.file.name)},fileType:{get:()=>n.file.type},fileSize:{get:()=>n.file.size},file:{get:()=>n.file},relativePath:{get:()=>n.file._relativePath},source:{get:()=>n.source},getMetadata:t=>md(t?r[t]:r),setMetadata:(t,e,i)=>{if(Nc(t)){const i=t;return Object.keys(i).forEach((t=>{u(t,i[t],e)})),t}return u(t,e,i),e},extend:(t,e)=>m[t]=e,abortLoad:()=>{n.activeLoader?n.activeLoader.abort():(c(ih),h("load-abort"))},retryLoad:()=>{n.activeLoader&&n.activeLoader.load()},requestProcessing:()=>{n.processingAborted=!1,c(nh)},abortProcessing:()=>new Promise((t=>{if(!n.activeProcessor)return n.processingAborted=!0,c(sh),h("process-abort"),void t();o=()=>{t()},n.activeProcessor.abort()})),load:(e,i,s)=>{n.source=e,p.fireSync("init"),n.file?p.fireSync("load-skip"):(n.file=(t=>{let e=[t.name,t.size,t.type];return t instanceof Blob||Bh(t)?e[0]=t.name||zh():Bh(t)?(e[1]=t.length,e[2]=$h(t)):Oc(t)&&(e[0]=Fh(t),e[1]=0,e[2]="application/octet-stream"),{name:e[0],size:e[1],type:e[2]}})(e),i.on("init",(()=>{h("load-init")})),i.on("meta",(e=>{n.file.size=e.size,n.file.filename=e.filename,e.source&&(t=uh,n.serverFileReference=e.source,n.status=rh),h("load-meta")})),i.on("progress",(t=>{c(ch),h("load-progress",t)})),i.on("error",(t=>{c(hh),h("load-request-error",t)})),i.on("abort",(()=>{c(ih),h("load-abort")})),i.on("load",(e=>{n.activeLoader=null;const i=e=>{n.file=gd(e)?e:n.file,t===uh&&n.serverFileReference?c(rh):c(sh),h("load")};n.serverFileReference?i(e):s(e,i,(t=>{n.file=e,h("load-meta"),c(hh),h("load-file-error",t)}))})),i.setSource(e),n.activeLoader=i,i.load())},process:d,revert:(t,e)=>new Promise(((i,s)=>{const o=null!==n.serverFileReference?n.serverFileReference:n.transferId;null!==o?(t(o,(()=>{n.serverFileReference=null,n.transferId=null,i()}),(t=>{e?(c(lh),h("process-revert-error"),s(t)):i()})),c(sh),h("process-revert")):i()})),...Kc(),freeze:()=>n.frozen=!0,release:()=>n.released=!0,released:{get:()=>n.released},archive:()=>n.archived=!0,archived:{get:()=>n.archived},setFile:t=>n.file=t},m=Wl(p);return m},vd=(t,e)=>{const i=((t,e)=>xc(e)?0:Oc(e)?t.findIndex((t=>t.id===e)):-1)(t,e);if(!(i<0))return t[i]||null},yd=(t,e,i,s,n,o)=>{const r=Kh(null,t,{method:"GET",responseType:"blob"});return r.onload=i=>{const s=i.getAllResponseHeaders(),n=Xh(s).name||Fh(t);e(Jh("load",i.status,Vh(i.response,n),s))},r.onerror=t=>{i(Jh("error",t.status,t.statusText,t.getAllResponseHeaders()))},r.onheaders=t=>{o(Jh("headers",t.status,null,t.getAllResponseHeaders()))},r.ontimeout=td(i),r.onprogress=s,r.onabort=n,r},Ed=t=>(0===t.indexOf("//")&&(t=location.protocol+t),t.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]),_d=t=>(...e)=>kc(t)?t(...e):t,xd=(t,e)=>{clearTimeout(e.listUpdateTimeout),e.listUpdateTimeout=setTimeout((()=>{t("DID_UPDATE_ITEMS",{items:Ah(e.items)})}),0)},wd=(t,...e)=>new Promise((i=>{if(!t)return i(!0);const s=t(...e);return null==s?i(!0):"boolean"==typeof s?i(s):void("function"==typeof s.then&&s.then(i))})),Td=(t,e)=>{t.items.sort(((t,i)=>e(eh(t),eh(i))))},Ad=(t,e)=>({query:i,success:s=(()=>{}),failure:n=(()=>{}),...o}={})=>{const r=wh(t.items,i);r?e(r,s,n,o||{}):n({error:Jh("error",0,"Item not found"),file:null})},Sd=(t,e,i)=>({ABORT_ALL:()=>{Ah(i.items).forEach((t=>{t.freeze(),t.abortLoad(),t.abortProcessing()}))},DID_SET_FILES:({value:e=[]})=>{const s=e.map((t=>({source:t.source?t.source:t,options:t.options})));let n=Ah(i.items);n.forEach((e=>{s.find((t=>t.source===e.source||t.source===e.file))||t("REMOVE_ITEM",{query:e,remove:!1})})),n=Ah(i.items),s.forEach(((e,i)=>{n.find((t=>t.source===e.source||t.file===e.source))||t("ADD_ITEM",{...e,interactionMethod:Xc,index:i})}))},DID_UPDATE_ITEM_METADATA:({id:s,action:n,change:o})=>{o.silent||(clearTimeout(i.itemUpdateTimeout),i.itemUpdateTimeout=setTimeout((()=>{const r=vd(i.items,s);if(!e("IS_ASYNC"))return void vh("SHOULD_PREPARE_OUTPUT",!1,{item:r,query:e,action:n,change:o}).then((i=>{const n=e("GET_BEFORE_PREPARE_FILE");n&&(i=n(r,i)),i&&t("REQUEST_PREPARE_OUTPUT",{query:s,item:r,success:e=>{t("DID_PREPARE_OUTPUT",{id:s,file:e})}},!0)}));r.origin===ph&&t("DID_LOAD_ITEM",{id:r.id,error:null,serverFileReference:r.source});const c=()=>{setTimeout((()=>{t("REQUEST_ITEM_PROCESSING",{query:s})}),32)};return r.status===rh?(h=i.options.instantUpload,void r.revert(dd(i.options.server.url,i.options.server.revert),e("GET_FORCE_REVERT")).then(h?c:()=>{}).catch((()=>{}))):r.status===oh?(t=>{r.abortProcessing().then(t?c:()=>{})})(i.options.instantUpload):void(i.options.instantUpload&&c());var h}),0))},MOVE_ITEM:({query:t,index:e})=>{const s=wh(i.items,t);if(!s)return;const n=i.items.indexOf(s);n!==(e=Nh(e,0,i.items.length-1))&&i.items.splice(e,0,i.items.splice(n,1)[0])},SORT:({compare:s})=>{Td(i,s),t("DID_SORT_ITEMS",{items:e("GET_ACTIVE_ITEMS")})},ADD_ITEMS:({items:i,index:s,interactionMethod:n,success:o=(()=>{}),failure:r=(()=>{})})=>{let c=s;if(-1===s||void 0===s){const t=e("GET_ITEM_INSERT_LOCATION"),i=e("GET_TOTAL_ITEMS");c="before"===t?0:i}const h=e("GET_IGNORED_FILES"),d=i.filter((t=>gd(t)?!h.includes(t.name.toLowerCase()):!xc(t))).map((e=>new Promise(((i,s)=>{t("ADD_ITEM",{interactionMethod:n,source:e.source||e,success:i,failure:s,index:c++,options:e.options||{}})}))));Promise.all(d).then(o).catch(r)},ADD_ITEM:({source:s,index:n=-1,interactionMethod:o,success:r=(()=>{}),failure:c=(()=>{}),options:h={}})=>{if(xc(s))return void c({error:Jh("error",0,"No source"),file:null});if(gd(s)&&i.options.ignoredFiles.includes(s.name.toLowerCase()))return;if(!(t=>{const e=Ah(t.items).length;if(!t.options.allowMultiple)return 0===e;const i=t.options.maxFiles;return null===i||e<i})(i)){if(i.options.allowMultiple||!i.options.allowMultiple&&!i.options.allowReplace){const e=Jh("warning",0,"Max files");return t("DID_THROW_MAX_FILES",{source:s,error:e}),void c({error:e,file:null})}const d=Ah(i.items)[0];if(d.status===rh||d.status===lh){const u=e("GET_FORCE_REVERT");if(d.revert(dd(i.options.server.url,i.options.server.revert),u).then((()=>{u&&t("ADD_ITEM",{source:s,index:n,interactionMethod:o,success:r,failure:c,options:h})})).catch((()=>{})),u)return}t("REMOVE_ITEM",{query:d.id})}const d="local"===h.type?ph:"limbo"===h.type?uh:dh,u=bd(d,d===dh?null:s,h.file);Object.keys(h.metadata||{}).forEach((t=>{u.setMetadata(t,h.metadata[t])})),yh("DID_CREATE_ITEM",u,{query:e,dispatch:t});const p=e("GET_ITEM_INSERT_LOCATION");i.options.itemInsertLocationFreedom||(n="before"===p?-1:i.items.length),((t,e,i)=>{xc(e)||(void 0===i?t.push(e):((t,e,i)=>{t.splice(e,0,i)})(t,i=Nh(i,0,t.length),e))})(i.items,u,n),kc(p)&&s&&Td(i,p);const m=u.id;u.on("init",(()=>{t("DID_INIT_ITEM",{id:m})})),u.on("load-init",(()=>{t("DID_START_ITEM_LOAD",{id:m})})),u.on("load-meta",(()=>{t("DID_UPDATE_ITEM_META",{id:m})})),u.on("load-progress",(e=>{t("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:m,progress:e})})),u.on("load-request-error",(e=>{const s=_d(i.options.labelFileLoadError)(e);if(e.code>=400&&e.code<500)return t("DID_THROW_ITEM_INVALID",{id:m,error:e,status:{main:s,sub:`${e.code} (${e.body})`}}),void c({error:e,file:eh(u)});t("DID_THROW_ITEM_LOAD_ERROR",{id:m,error:e,status:{main:s,sub:i.options.labelTapToRetry}})})),u.on("load-file-error",(e=>{t("DID_THROW_ITEM_INVALID",{id:m,error:e.status,status:e.status}),c({error:e.status,file:eh(u)})})),u.on("load-abort",(()=>{t("REMOVE_ITEM",{query:m})})),u.on("load-skip",(()=>{u.on("metadata-update",(e=>{gd(u.file)&&t("DID_UPDATE_ITEM_METADATA",{id:m,change:e})})),t("COMPLETE_LOAD_ITEM",{query:m,item:u,data:{source:s,success:r}})})),u.on("load",(()=>{const n=n=>{n?(u.on("metadata-update",(e=>{t("DID_UPDATE_ITEM_METADATA",{id:m,change:e})})),vh("SHOULD_PREPARE_OUTPUT",!1,{item:u,query:e}).then((n=>{const o=e("GET_BEFORE_PREPARE_FILE");o&&(n=o(u,n));const c=()=>{t("COMPLETE_LOAD_ITEM",{query:m,item:u,data:{source:s,success:r}}),xd(t,i)};n?t("REQUEST_PREPARE_OUTPUT",{query:m,item:u,success:e=>{t("DID_PREPARE_OUTPUT",{id:m,file:e}),c()}},!0):c()}))):t("REMOVE_ITEM",{query:m})};vh("DID_LOAD_ITEM",u,{query:e,dispatch:t}).then((()=>{wd(e("GET_BEFORE_ADD_FILE"),eh(u)).then(n)})).catch((e=>{if(!e||!e.error||!e.status)return n(!1);t("DID_THROW_ITEM_INVALID",{id:m,error:e.error,status:e.status})}))})),u.on("process-start",(()=>{t("DID_START_ITEM_PROCESSING",{id:m})})),u.on("process-progress",(e=>{t("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:m,progress:e})})),u.on("process-error",(e=>{t("DID_THROW_ITEM_PROCESSING_ERROR",{id:m,error:e,status:{main:_d(i.options.labelFileProcessingError)(e),sub:i.options.labelTapToRetry}})})),u.on("process-revert-error",(e=>{t("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:m,error:e,status:{main:_d(i.options.labelFileProcessingRevertError)(e),sub:i.options.labelTapToRetry}})})),u.on("process-complete",(e=>{t("DID_COMPLETE_ITEM_PROCESSING",{id:m,error:null,serverFileReference:e}),t("DID_DEFINE_VALUE",{id:m,value:e})})),u.on("process-abort",(()=>{t("DID_ABORT_ITEM_PROCESSING",{id:m})})),u.on("process-revert",(()=>{t("DID_REVERT_ITEM_PROCESSING",{id:m}),t("DID_DEFINE_VALUE",{id:m,value:null})})),t("DID_ADD_ITEM",{id:m,index:n,interactionMethod:o}),xd(t,i);const{url:b,load:v,restore:y,fetch:E}=i.options.server||{};u.load(s,Qh(d===dh?Oc(s)&&(t=>(t.indexOf(":")>-1||t.indexOf("//")>-1)&&Ed(location.href)!==Ed(t))(s)&&E?sd(b,E):yd:sd(b,d===uh?y:v)),((t,i,s)=>{vh("LOAD_FILE",t,{query:e}).then(i).catch(s)}))},REQUEST_PREPARE_OUTPUT:({item:t,success:i,failure:s=(()=>{})})=>{const n={error:Jh("error",0,"Item not found"),file:null};if(t.archived)return s(n);vh("PREPARE_OUTPUT",t.file,{query:e,item:t}).then((o=>{vh("COMPLETE_PREPARE_OUTPUT",o,{query:e,item:t}).then((e=>{if(t.archived)return s(n);i(e)}))}))},COMPLETE_LOAD_ITEM:({item:s,data:n})=>{const{success:o,source:r}=n,c=e("GET_ITEM_INSERT_LOCATION");if(kc(c)&&r&&Td(i,c),t("DID_LOAD_ITEM",{id:s.id,error:null,serverFileReference:s.origin===dh?null:r}),o(eh(s)),s.origin!==ph)return s.origin===uh?(t("DID_COMPLETE_ITEM_PROCESSING",{id:s.id,error:null,serverFileReference:r}),void t("DID_DEFINE_VALUE",{id:s.id,value:s.serverId||r})):void(e("IS_ASYNC")&&i.options.instantUpload&&t("REQUEST_ITEM_PROCESSING",{query:s.id}));t("DID_LOAD_LOCAL_ITEM",{id:s.id})},RETRY_ITEM_LOAD:Ad(i,(t=>{t.retryLoad()})),REQUEST_ITEM_PREPARE:Ad(i,((e,i,s)=>{t("REQUEST_PREPARE_OUTPUT",{query:e.id,item:e,success:s=>{t("DID_PREPARE_OUTPUT",{id:e.id,file:s}),i({file:e,output:s})},failure:s},!0)})),REQUEST_ITEM_PROCESSING:Ad(i,((s,n,o)=>{if(s.status===sh||s.status===ah)s.status!==nh&&(s.requestProcessing(),t("DID_REQUEST_ITEM_PROCESSING",{id:s.id}),t("PROCESS_ITEM",{query:s,success:n,failure:o},!0));else{const r=()=>t("REQUEST_ITEM_PROCESSING",{query:s,success:n,failure:o}),c=()=>document.hidden?r():setTimeout(r,32);s.status===rh||s.status===lh?s.revert(dd(i.options.server.url,i.options.server.revert),e("GET_FORCE_REVERT")).then(c).catch((()=>{})):s.status===oh&&s.abortProcessing().then(c)}})),PROCESS_ITEM:Ad(i,((s,n,o)=>{const r=e("GET_MAX_PARALLEL_UPLOADS");if(e("GET_ITEMS_BY_STATUS",oh).length===r)return void i.processingQueue.push({id:s.id,success:n,failure:o});if(s.status===oh)return;const c=()=>{const e=i.processingQueue.shift();if(!e)return;const{id:s,success:n,failure:o}=e,r=wh(i.items,s);r&&!r.archived?t("PROCESS_ITEM",{query:s,success:n,failure:o},!0):c()};s.onOnce("process-complete",(()=>{n(eh(s)),c();const o=i.options.server;if(i.options.instantUpload&&s.origin===ph&&kc(o.remove)){const t=()=>{};s.origin=uh,i.options.server.remove(s.source,t,t)}e("GET_ITEMS_BY_STATUS",rh).length===i.items.length&&t("DID_COMPLETE_ITEM_PROCESSING_ALL")})),s.onOnce("process-error",(t=>{o({error:t,file:eh(s)}),c()}));const h=i.options;s.process(pd(hd(h.server.url,h.server.process,h.name,{chunkTransferId:s.transferId,chunkServer:h.server.patch,chunkUploads:h.chunkUploads,chunkForce:h.chunkForce,chunkSize:h.chunkSize,chunkRetryDelays:h.chunkRetryDelays}),{allowMinimumUploadDuration:e("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),((i,n,o)=>{vh("PREPARE_OUTPUT",i,{query:e,item:s}).then((e=>{t("DID_PREPARE_OUTPUT",{id:s.id,file:e}),n(e)})).catch(o)}))})),RETRY_ITEM_PROCESSING:Ad(i,(e=>{t("REQUEST_ITEM_PROCESSING",{query:e})})),REQUEST_REMOVE_ITEM:Ad(i,(i=>{wd(e("GET_BEFORE_REMOVE_FILE"),eh(i)).then((e=>{e&&t("REMOVE_ITEM",{query:i})}))})),RELEASE_ITEM:Ad(i,(t=>{t.release()})),REMOVE_ITEM:Ad(i,((s,n,o,r)=>{const c=()=>{const e=s.id;vd(i.items,e).archive(),t("DID_REMOVE_ITEM",{error:null,id:e,item:s}),xd(t,i),n(eh(s))},h=i.options.server;s.origin===ph&&h&&kc(h.remove)&&!1!==r.remove?(t("DID_START_ITEM_REMOVE",{id:s.id}),h.remove(s.source,(()=>c()),(e=>{t("DID_THROW_ITEM_REMOVE_ERROR",{id:s.id,error:Jh("error",0,e,null),status:{main:_d(i.options.labelFileRemoveError)(e),sub:i.options.labelTapToRetry}})}))):((r.revert&&s.origin!==ph&&null!==s.serverId||i.options.chunkUploads&&s.file.size>i.options.chunkSize||i.options.chunkUploads&&i.options.chunkForce)&&s.revert(dd(i.options.server.url,i.options.server.revert),e("GET_FORCE_REVERT")),c())})),ABORT_ITEM_LOAD:Ad(i,(t=>{t.abortLoad()})),ABORT_ITEM_PROCESSING:Ad(i,(e=>{e.serverId?t("REVERT_ITEM_PROCESSING",{id:e.id}):e.abortProcessing().then((()=>{i.options.instantUpload&&t("REMOVE_ITEM",{query:e.id})}))})),REQUEST_REVERT_ITEM_PROCESSING:Ad(i,(s=>{if(!i.options.instantUpload)return void t("REVERT_ITEM_PROCESSING",{query:s});const n=e=>{e&&t("REVERT_ITEM_PROCESSING",{query:s})},o=e("GET_BEFORE_REMOVE_FILE");if(!o)return n(!0);const r=o(eh(s));return null==r?n(!0):"boolean"==typeof r?n(r):void("function"==typeof r.then&&r.then(n))})),REVERT_ITEM_PROCESSING:Ad(i,(s=>{s.revert(dd(i.options.server.url,i.options.server.revert),e("GET_FORCE_REVERT")).then((()=>{const e=i.options.instantUpload||(t=>!gd(t.file))(s);e&&t("REMOVE_ITEM",{query:s.id})})).catch((()=>{}))})),SET_OPTIONS:({options:e})=>{const i=Object.keys(e),s=Od.filter((t=>i.includes(t)));[...s,...Object.keys(e).filter((t=>!s.includes(t)))].forEach((i=>{t(`SET_${zc(i,"_").toUpperCase()}`,{value:e[i]})}))}}),Od=["server"],Dd=t=>document.createElement(t),Cd=(t,e)=>{let i=t.childNodes[0];i?e!==i.nodeValue&&(i.nodeValue=e):(i=document.createTextNode(e),t.appendChild(i))},Id=(t,e,i,s)=>{const n=(s%360-90)*Math.PI/180;return{x:t+i*Math.cos(n),y:e+i*Math.sin(n)}},Md=(t,e,i,s,n)=>{let o=1;return n>s&&n-s<=.5&&(o=0),s>n&&s-n>=.5&&(o=0),((t,e,i,s,n,o)=>{const r=Id(t,e,i,n),c=Id(t,e,i,s);return["M",r.x,r.y,"A",i,i,0,o,0,c.x,c.y].join(" ")})(t,e,i,360*Math.min(.9999,s),360*Math.min(.9999,n),o)},Ld=bc({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:({root:t,props:e})=>{e.spin=!1,e.progress=0,e.opacity=0;const i=Zl("svg");t.ref.path=Zl("path",{"stroke-width":2,"stroke-linecap":"round"}),i.appendChild(t.ref.path),t.ref.svg=i,t.appendChild(i)},write:({root:t,props:e})=>{if(0===e.opacity)return;e.align&&(t.element.dataset.align=e.align);const i=parseInt(Yl(t.ref.path,"stroke-width"),10),s=.5*t.rect.element.width;let n=0,o=0;e.spin?(n=0,o=.5):(n=0,o=e.progress);const r=Md(s,s,s-i,n,o);Yl(t.ref.path,"d",r),Yl(t.ref.path,"stroke-opacity",e.spin||e.progress>0?1:0)},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),kd=bc({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:({root:t,props:e})=>{t.element.innerHTML=(e.icon||"")+`<span>${e.label}</span>`,e.isDisabled=!1},write:({root:t,props:e})=>{const{isDisabled:i}=e,s=t.query("GET_DISABLED")||0===e.opacity;s&&!i?(e.isDisabled=!0,Yl(t.element,"disabled","disabled")):!s&&i&&(e.isDisabled=!1,t.element.removeAttribute("disabled"))}}),Rd=(t,e=".",i=1e3,s={})=>{const{labelBytes:n="bytes",labelKilobytes:o="KB",labelMegabytes:r="MB",labelGigabytes:c="GB"}=s,h=i,d=i*i,u=i*i*i;return(t=Math.round(Math.abs(t)))<h?`${t} ${n}`:t<d?`${Math.floor(t/h)} ${o}`:t<u?`${Pd(t/d,1,e)} ${r}`:`${Pd(t/u,2,e)} ${c}`},Pd=(t,e,i)=>t.toFixed(e).split(".").filter((t=>"0"!==t)).join(i),Nd=({root:t,props:e})=>{Cd(t.ref.fileSize,Rd(t.query("GET_ITEM_SIZE",e.id),".",t.query("GET_FILE_SIZE_BASE"),t.query("GET_FILE_SIZE_LABELS",t.query))),Cd(t.ref.fileName,t.query("GET_ITEM_NAME",e.id))},Bd=({root:t,props:e})=>{Mc(t.query("GET_ITEM_SIZE",e.id))?Nd({root:t,props:e}):Cd(t.ref.fileSize,t.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},Fd=bc({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:vc({DID_LOAD_ITEM:Nd,DID_UPDATE_ITEM_META:Nd,DID_THROW_ITEM_LOAD_ERROR:Bd,DID_THROW_ITEM_INVALID:Bd}),didCreateView:t=>{yh("CREATE_VIEW",{...t,view:t})},create:({root:t,props:e})=>{const i=Dd("span");i.className="filepond--file-info-main",Yl(i,"aria-hidden","true"),t.appendChild(i),t.ref.fileName=i;const s=Dd("span");s.className="filepond--file-info-sub",t.appendChild(s),t.ref.fileSize=s,Cd(s,t.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Cd(i,t.query("GET_ITEM_NAME",e.id))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),qd=t=>Math.round(100*t),jd=({root:t,action:e})=>{const i=null===e.progress?t.query("GET_LABEL_FILE_LOADING"):`${t.query("GET_LABEL_FILE_LOADING")} ${qd(e.progress)}%`;Cd(t.ref.main,i),Cd(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},zd=({root:t})=>{Cd(t.ref.main,""),Cd(t.ref.sub,"")},Vd=({root:t,action:e})=>{Cd(t.ref.main,e.status.main),Cd(t.ref.sub,e.status.sub)},Hd=bc({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:vc({DID_LOAD_ITEM:zd,DID_REVERT_ITEM_PROCESSING:zd,DID_REQUEST_ITEM_PROCESSING:({root:t})=>{Cd(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING")),Cd(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:({root:t})=>{Cd(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Cd(t.ref.sub,t.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:({root:t})=>{Cd(t.ref.main,t.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Cd(t.ref.sub,t.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:t,action:e})=>{const i=null===e.progress?t.query("GET_LABEL_FILE_PROCESSING"):`${t.query("GET_LABEL_FILE_PROCESSING")} ${qd(e.progress)}%`;Cd(t.ref.main,i),Cd(t.ref.sub,t.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:jd,DID_THROW_ITEM_LOAD_ERROR:Vd,DID_THROW_ITEM_INVALID:Vd,DID_THROW_ITEM_PROCESSING_ERROR:Vd,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Vd,DID_THROW_ITEM_REMOVE_ERROR:Vd}),didCreateView:t=>{yh("CREATE_VIEW",{...t,view:t})},create:({root:t})=>{const e=Dd("span");e.className="filepond--file-status-main",t.appendChild(e),t.ref.main=e;const i=Dd("span");i.className="filepond--file-status-sub",t.appendChild(i),t.ref.sub=i,jd({root:t,action:{progress:null}})},mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),$d={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Ud=[];Gl($d,(t=>{Ud.push(t)}));const Gd=t=>{if("right"===Qd(t))return 0;const e=t.ref.buttonRemoveItem.rect.element;return e.hidden?null:e.width+e.left},Wd=t=>t.ref.buttonAbortItemLoad.rect.element.width,Yd=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.height/4),Xd=t=>Math.floor(t.ref.buttonRemoveItem.rect.element.left/2),Qd=t=>t.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION"),Zd={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:t=>t.query("GET_STYLE_LOAD_INDICATOR_POSITION")},processProgressIndicator:{opacity:0,align:t=>t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Kd={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Gd},status:{translateX:Gd}},Jd={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},tu={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:Gd},status:{translateX:Gd,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:Gd},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Qd},info:{translateX:Gd},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Qd},buttonRemoveItem:{opacity:1},info:{translateX:Gd},status:{opacity:1,translateX:Gd}},DID_LOAD_ITEM:Kd,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:Gd},status:{translateX:Gd}},DID_START_ITEM_PROCESSING:Jd,DID_REQUEST_ITEM_PROCESSING:Jd,DID_UPDATE_ITEM_PROCESS_PROGRESS:Jd,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:Gd}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Gd},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Kd},eu=bc({create:({root:t})=>{t.element.innerHTML=t.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),iu=vc({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:({root:t,action:e})=>{t.ref.buttonAbortItemProcessing.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:({root:t,action:e})=>{t.ref.buttonAbortItemLoad.label=e.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:({root:t,action:e})=>{t.ref.buttonAbortItemRemoval.label=e.value},DID_REQUEST_ITEM_PROCESSING:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:({root:t})=>{t.ref.loadProgressIndicator.spin=!0,t.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:({root:t})=>{t.ref.processProgressIndicator.spin=!0,t.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:({root:t,action:e})=>{t.ref.loadProgressIndicator.spin=!1,t.ref.loadProgressIndicator.progress=e.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:({root:t,action:e})=>{t.ref.processProgressIndicator.spin=!1,t.ref.processProgressIndicator.progress=e.progress}}),su=bc({create:({root:t,props:e})=>{const i=Object.keys($d).reduce(((t,e)=>(t[e]={...$d[e]},t)),{}),{id:s}=e,n=t.query("GET_ALLOW_REVERT"),o=t.query("GET_ALLOW_REMOVE"),r=t.query("GET_ALLOW_PROCESS"),c=t.query("GET_INSTANT_UPLOAD"),h=t.query("IS_ASYNC"),d=t.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");let u;h?r&&!n?u=t=>!/RevertItemProcessing/.test(t):!r&&n?u=t=>!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(t):r||n||(u=t=>!/Process/.test(t)):u=t=>!/Process/.test(t);const p=u?Ud.filter(u):Ud.concat();if(c&&n&&(i.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",i.RevertItemProcessing.icon="GET_ICON_REMOVE"),h&&!n){const t=tu.DID_COMPLETE_ITEM_PROCESSING;t.info.translateX=Xd,t.info.translateY=Yd,t.status.translateY=Yd,t.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(h&&!r&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach((t=>{tu[t].status.translateY=Yd})),tu.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Wd),d&&n){i.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";const t=tu.DID_COMPLETE_ITEM_PROCESSING;t.info.translateX=Gd,t.status.translateY=Yd,t.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}o||(i.RemoveItem.disabled=!0),Gl(i,((e,i)=>{const n=t.createChildView(kd,{label:t.query(i.label),icon:t.query(i.icon),opacity:0});p.includes(e)&&t.appendChildView(n),i.disabled&&(n.element.setAttribute("disabled","disabled"),n.element.setAttribute("hidden","hidden")),n.element.dataset.align=t.query(`GET_STYLE_${i.align}`),n.element.classList.add(i.className),n.on("click",(e=>{e.stopPropagation(),i.disabled||t.dispatch(i.action,{query:s})})),t.ref[`button${e}`]=n})),t.ref.processingCompleteIndicator=t.appendChildView(t.createChildView(eu)),t.ref.processingCompleteIndicator.element.dataset.align=t.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),t.ref.info=t.appendChildView(t.createChildView(Fd,{id:s})),t.ref.status=t.appendChildView(t.createChildView(Hd,{id:s}));const m=t.appendChildView(t.createChildView(Ld,{opacity:0,align:t.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));m.element.classList.add("filepond--load-indicator"),t.ref.loadProgressIndicator=m;const b=t.appendChildView(t.createChildView(Ld,{opacity:0,align:t.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));b.element.classList.add("filepond--process-indicator"),t.ref.processProgressIndicator=b,t.ref.activeStyles=[]},write:({root:t,actions:e,props:i})=>{iu({root:t,actions:e,props:i});let s=e.concat().filter((t=>/^DID_/.test(t.type))).reverse().find((t=>tu[t.type]));if(s){t.ref.activeStyles=[];const e=tu[s.type];Gl(Zd,((i,s)=>{const n=t.ref[i];Gl(s,((s,o)=>{const r=e[i]&&void 0!==e[i][s]?e[i][s]:o;t.ref.activeStyles.push({control:n,key:s,value:r})}))}))}t.ref.activeStyles.forEach((({control:e,key:i,value:s})=>{e[i]="function"==typeof s?s(t):s}))},didCreateView:t=>{yh("CREATE_VIEW",{...t,view:t})},name:"file"}),nu=bc({create:({root:t,props:e})=>{t.ref.fileName=Dd("legend"),t.appendChild(t.ref.fileName),t.ref.file=t.appendChildView(t.createChildView(su,{id:e.id})),t.ref.data=!1},ignoreRect:!0,write:vc({DID_LOAD_ITEM:({root:t,props:e})=>{Cd(t.ref.fileName,t.query("GET_ITEM_NAME",e.id))}}),didCreateView:t=>{yh("CREATE_VIEW",{...t,view:t})},tag:"fieldset",name:"file-wrapper"}),ou={type:"spring",damping:.6,mass:7},ru=(t,e,i)=>{const s=bc({name:`panel-${e.name} filepond--${i}`,mixins:e.mixins,ignoreRectUpdate:!0}),n=t.createChildView(s,e.props);t.ref[e.name]=t.appendChildView(n)},au=bc({name:"panel",read:({root:t,props:e})=>e.heightCurrent=t.ref.bottom.translateY,write:({root:t,props:e})=>{if(null!==t.ref.scalable&&e.scalable===t.ref.scalable||(t.ref.scalable=!Ac(e.scalable)||e.scalable,t.element.dataset.scalable=t.ref.scalable),!e.height)return;const i=t.ref.top.rect.element,s=t.ref.bottom.rect.element,n=Math.max(i.height+s.height,e.height);t.ref.center.translateY=i.height,t.ref.center.scaleY=(n-i.height-s.height)/100,t.ref.bottom.translateY=n-s.height},create:({root:t,props:e})=>{[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:ou},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:ou},styles:["translateY"]}}].forEach((i=>{ru(t,i,e.name)})),t.element.classList.add(`filepond--${e.name}`),t.ref.scalable=null},ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),lu={type:"spring",stiffness:.75,damping:.45,mass:10},cu="spring",hu={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},du=vc({DID_UPDATE_PANEL_HEIGHT:({root:t,action:e})=>{t.height=e.height}}),uu=vc({DID_GRAB_ITEM:({root:t,props:e})=>{e.dragOrigin={x:t.translateX,y:t.translateY}},DID_DRAG_ITEM:({root:t})=>{t.element.dataset.dragState="drag"},DID_DROP_ITEM:({root:t,props:e})=>{e.dragOffset=null,e.dragOrigin=null,t.element.dataset.dragState="drop"}},(({root:t,actions:e,props:i,shouldOptimize:s})=>{"drop"===t.element.dataset.dragState&&t.scaleX<=1&&(t.element.dataset.dragState="idle");let n=e.concat().filter((t=>/^DID_/.test(t.type))).reverse().find((t=>hu[t.type]));n&&n.type!==i.currentState&&(i.currentState=n.type,t.element.dataset.filepondItemState=hu[i.currentState]||"");const o=t.query("GET_ITEM_PANEL_ASPECT_RATIO")||t.query("GET_PANEL_ASPECT_RATIO");o?s||(t.height=t.rect.element.width*o):(du({root:t,actions:e,props:i}),!t.height&&t.ref.container.rect.element.height>0&&(t.height=t.ref.container.rect.element.height)),s&&(t.ref.panel.height=null),t.ref.panel.height=t.height})),pu=bc({create:({root:t,props:e})=>{if(t.ref.handleClick=i=>t.dispatch("DID_ACTIVATE_ITEM",{id:e.id}),t.element.id=`filepond--item-${e.id}`,t.element.addEventListener("click",t.ref.handleClick),t.ref.container=t.appendChildView(t.createChildView(nu,{id:e.id})),t.ref.panel=t.appendChildView(t.createChildView(au,{name:"item-panel"})),t.ref.panel.height=null,e.markedForRemoval=!1,!t.query("GET_ALLOW_REORDER"))return;t.element.dataset.dragState="idle";t.element.addEventListener("pointerdown",(i=>{if(!i.isPrimary)return;let s=!1;const n=i.pageX,o=i.pageY;e.dragOrigin={x:t.translateX,y:t.translateY},e.dragCenter={x:i.offsetX,y:i.offsetY};const r=(t=>{const e=t.map((t=>t.id));let i;return{setIndex:t=>{i=t},getIndex:()=>i,getItemIndex:t=>e.indexOf(t.id)}})(t.query("GET_ACTIVE_ITEMS"));t.dispatch("DID_GRAB_ITEM",{id:e.id,dragState:r});const c=i=>{if(!i.isPrimary)return;i.stopPropagation(),i.preventDefault(),e.dragOffset={x:i.pageX-n,y:i.pageY-o};e.dragOffset.x*e.dragOffset.x+e.dragOffset.y*e.dragOffset.y>16&&!s&&(s=!0,t.element.removeEventListener("click",t.ref.handleClick)),t.dispatch("DID_DRAG_ITEM",{id:e.id,dragState:r})},h=t=>{t.isPrimary&&(e.dragOffset={x:t.pageX-n,y:t.pageY-o},u())},d=()=>{u()},u=()=>{document.removeEventListener("pointercancel",d),document.removeEventListener("pointermove",c),document.removeEventListener("pointerup",h),t.dispatch("DID_DROP_ITEM",{id:e.id,dragState:r}),s&&setTimeout((()=>t.element.addEventListener("click",t.ref.handleClick)),0)};document.addEventListener("pointercancel",d),document.addEventListener("pointermove",c),document.addEventListener("pointerup",h)}))},write:uu,destroy:({root:t,props:e})=>{t.element.removeEventListener("click",t.ref.handleClick),t.dispatch("RELEASE_ITEM",{query:e.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:cu,scaleY:cu,translateX:lu,translateY:lu,opacity:{type:"tween",duration:150}}}});var fu=(t,e)=>Math.max(1,Math.floor((t+1)/e));const gu=(t,e,i)=>{if(!i)return;const s=t.rect.element.width,n=e.length;let o=null;if(0===n||i.top<e[0].rect.element.top)return-1;const r=e[0].rect.element,c=r.marginLeft+r.marginRight,h=r.width+c,d=fu(s,h);if(1===d){for(let t=0;t<n;t++){const s=e[t],n=s.rect.outer.top+.5*s.rect.element.height;if(i.top<n)return t}return n}const u=r.marginTop+r.marginBottom,p=r.height+u;for(let t=0;t<n;t++){const e=t%d*h,s=Math.floor(t/d)*p,c=s-r.marginTop,u=e+h,m=s+p+r.marginBottom;if(i.top<m&&i.top>c){if(i.left<u)return t;o=t!==n-1?t:null}}return null!==o?o:n},mu={height:0,width:0,get getHeight(){return this.height},set setHeight(t){0!==this.height&&0!==t||(this.height=t)},get getWidth(){return this.width},set setWidth(t){0!==this.width&&0!==t||(this.width=t)},setDimensions:function(t,e){0!==this.height&&0!==t||(this.height=t),0!==this.width&&0!==e||(this.width=e)}},bu=(t,e,i,s=0,n=1)=>{t.dragOffset?(t.translateX=null,t.translateY=null,t.translateX=t.dragOrigin.x+t.dragOffset.x,t.translateY=t.dragOrigin.y+t.dragOffset.y,t.scaleX=1.025,t.scaleY=1.025):(t.translateX=e,t.translateY=i,Date.now()>t.spawnDate&&(0===t.opacity&&vu(t,e,i,s,n),t.scaleX=1,t.scaleY=1,t.opacity=1))},vu=(t,e,i,s,n)=>{t.interactionMethod===Xc?(t.translateX=null,t.translateX=e,t.translateY=null,t.translateY=i):t.interactionMethod===Gc?(t.translateX=null,t.translateX=e-20*s,t.translateY=null,t.translateY=i-10*n,t.scaleX=.8,t.scaleY=.8):t.interactionMethod===Wc?(t.translateY=null,t.translateY=i-30):t.interactionMethod===Uc&&(t.translateX=null,t.translateX=e-30,t.translateY=null)},yu=t=>t.rect.element.height+.5*t.rect.element.marginBottom+.5*t.rect.element.marginTop,Eu=vc({DID_ADD_ITEM:({root:t,action:e})=>{const{id:i,index:s,interactionMethod:n}=e;t.ref.addIndex=s;const o=Date.now();let r=o,c=1;if(n!==Xc){c=0;const e=t.query("GET_ITEM_INSERT_INTERVAL"),i=o-t.ref.lastItemSpanwDate;r=i<e?o+(e-i):o}t.ref.lastItemSpanwDate=r,t.appendChildView(t.createChildView(pu,{spawnDate:r,id:i,opacity:c,interactionMethod:n}),s)},DID_REMOVE_ITEM:({root:t,action:e})=>{const{id:i}=e,s=t.childViews.find((t=>t.id===i));s&&(s.scaleX=.9,s.scaleY=.9,s.opacity=0,s.markedForRemoval=!0)},DID_DRAG_ITEM:({root:t,action:e})=>{const{id:i,dragState:s}=e,n=t.query("GET_ITEM",{id:i}),o=t.childViews.find((t=>t.id===i)),r=t.childViews.length,c=s.getItemIndex(n);if(!o)return;const h=o.dragOrigin.x+o.dragOffset.x+o.dragCenter.x,d=o.dragOrigin.y+o.dragOffset.y+o.dragCenter.y,u=yu(o),p=(m=o).rect.element.width+.5*m.rect.element.marginLeft+.5*m.rect.element.marginRight;var m;let b=Math.floor(t.rect.outer.width/p);b>r&&(b=r);const v=Math.floor(r/b+1);mu.setHeight=u*v,mu.setWidth=p*b;var y={y:Math.floor(d/u),x:Math.floor(h/p),getGridIndex:function(){return d>mu.getHeight||d<0||h>mu.getWidth||h<0?c:this.y*b+this.x},getColIndex:function(){const e=t.query("GET_ACTIVE_ITEMS"),i=t.childViews.filter((t=>t.rect.element.height)),s=e.map((t=>i.find((e=>e.id===t.id)))),n=s.findIndex((t=>t===o)),r=yu(o),c=s.length;let h=c,u=0,p=0,m=0;for(let t=0;t<c;t++)if(u=yu(s[t]),m=p,p=m+u,d<p){if(n>t){if(d<m+r){h=t;break}continue}h=t;break}return h}};const E=b>1?y.getGridIndex():y.getColIndex();t.dispatch("MOVE_ITEM",{query:o,index:E});const x=s.getIndex();if(void 0===x||x!==E){if(s.setIndex(E),void 0===x)return;t.dispatch("DID_REORDER_ITEMS",{items:t.query("GET_ACTIVE_ITEMS"),origin:c,target:E})}}}),_u=bc({create:({root:t})=>{Yl(t.element,"role","list"),t.ref.lastItemSpanwDate=Date.now()},write:({root:t,props:e,actions:i,shouldOptimize:s})=>{Eu({root:t,props:e,actions:i});const{dragCoordinates:n}=e,o=t.rect.element.width,r=t.childViews.filter((t=>t.rect.element.height)),c=t.query("GET_ACTIVE_ITEMS").map((t=>r.find((e=>e.id===t.id)))).filter((t=>t)),h=n?gu(t,c,n):null,d=t.ref.addIndex||null;t.ref.addIndex=null;let u=0,p=0,m=0;if(0===c.length)return;const b=c[0].rect.element,v=b.marginTop+b.marginBottom,y=b.marginLeft+b.marginRight,E=b.width+y,x=b.height+v,w=fu(o,E);if(1===w){let t=0,e=0;c.forEach(((i,n)=>{if(h){let t=n-h;e=-2===t?.25*-v:-1===t?.75*-v:0===t?.75*v:1===t?.25*v:0}s&&(i.translateX=null,i.translateY=null),i.markedForRemoval||bu(i,0,t+e);let o=(i.rect.element.height+v)*(i.markedForRemoval?i.opacity:1);t+=o}))}else{let t=0,e=0;c.forEach(((i,n)=>{n===h&&(u=1),n===d&&(m+=1),i.markedForRemoval&&i.opacity<.5&&(p-=1);const o=n+m+u+p,r=o%w,c=Math.floor(o/w),b=r*E,v=c*x,y=Math.sign(b-t),S=Math.sign(v-e);t=b,e=v,i.markedForRemoval||(s&&(i.translateX=null,i.translateY=null),bu(i,b,v,y,S))}))}},tag:"ul",name:"list",didWriteView:({root:t})=>{t.childViews.filter((t=>t.markedForRemoval&&0===t.opacity&&t.resting)).forEach((e=>{e._destroy(),t.removeChildView(e)}))},filterFrameActionsForChild:(t,e)=>e.filter((e=>!e.data||!e.data.id||t.id===e.data.id)),mixins:{apis:["dragCoordinates"]}}),xu=vc({DID_DRAG:({root:t,props:e,action:i})=>{t.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(e.dragCoordinates={left:i.position.scopeLeft-t.ref.list.rect.element.left,top:i.position.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},DID_END_DRAG:({props:t})=>{t.dragCoordinates=null}}),wu=bc({create:({root:t,props:e})=>{t.ref.list=t.appendChildView(t.createChildView(_u)),e.dragCoordinates=null,e.overflowing=!1},write:({root:t,props:e,actions:i})=>{if(xu({root:t,props:e,actions:i}),t.ref.list.dragCoordinates=e.dragCoordinates,e.overflowing&&!e.overflow&&(e.overflowing=!1,t.element.dataset.state="",t.height=null),e.overflow){const i=Math.round(e.overflow);i!==t.height&&(e.overflowing=!0,t.element.dataset.state="overflow",t.height=i)}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),Tu=(t,e,i,s="")=>{i?Yl(t,e,s):t.removeAttribute(e)},Au=({root:t,action:e})=>{t.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&Tu(t.element,"accept",!!e.value,e.value?e.value.join(","):"")},Su=({root:t,action:e})=>{Tu(t.element,"multiple",e.value)},Ou=({root:t,action:e})=>{Tu(t.element,"webkitdirectory",e.value)},Du=({root:t})=>{const e=t.query("GET_DISABLED"),i=t.query("GET_ALLOW_BROWSE"),s=e||!i;Tu(t.element,"disabled",s)},Cu=({root:t,action:e})=>{e.value?0===t.query("GET_TOTAL_ITEMS")&&Tu(t.element,"required",!0):Tu(t.element,"required",!1)},Iu=({root:t,action:e})=>{Tu(t.element,"capture",!!e.value,!0===e.value?"":e.value)},Mu=({root:t})=>{const{element:e}=t;if(t.query("GET_TOTAL_ITEMS")>0)Tu(e,"required",!1),Tu(e,"name",!1);else{Tu(e,"name",!0,t.query("GET_NAME"));t.query("GET_CHECK_VALIDITY")&&e.setCustomValidity(""),t.query("GET_REQUIRED")&&Tu(e,"required",!0)}},Lu=bc({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:({root:t,props:e})=>{t.element.id=`filepond--browser-${e.id}`,Yl(t.element,"name",t.query("GET_NAME")),Yl(t.element,"aria-controls",`filepond--assistant-${e.id}`),Yl(t.element,"aria-labelledby",`filepond--drop-label-${e.id}`),Au({root:t,action:{value:t.query("GET_ACCEPTED_FILE_TYPES")}}),Su({root:t,action:{value:t.query("GET_ALLOW_MULTIPLE")}}),Ou({root:t,action:{value:t.query("GET_ALLOW_DIRECTORIES_ONLY")}}),Du({root:t}),Cu({root:t,action:{value:t.query("GET_REQUIRED")}}),Iu({root:t,action:{value:t.query("GET_CAPTURE_METHOD")}}),t.ref.handleChange=i=>{if(!t.element.value)return;const s=Array.from(t.element.files).map((t=>(t._relativePath=t.webkitRelativePath,t)));setTimeout((()=>{e.onload(s),(t=>{if(t&&""!==t.value){try{t.value=""}catch(t){}if(t.value){const e=Dd("form"),i=t.parentNode,s=t.nextSibling;e.appendChild(t),e.reset(),s?i.insertBefore(t,s):i.appendChild(t)}}})(t.element)}),250)},t.element.addEventListener("change",t.ref.handleChange)},destroy:({root:t})=>{t.element.removeEventListener("change",t.ref.handleChange)},write:vc({DID_LOAD_ITEM:Mu,DID_REMOVE_ITEM:Mu,DID_THROW_ITEM_INVALID:({root:t})=>{t.query("GET_CHECK_VALIDITY")&&t.element.setCustomValidity(t.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:Du,DID_SET_ALLOW_BROWSE:Du,DID_SET_ALLOW_DIRECTORIES_ONLY:Ou,DID_SET_ALLOW_MULTIPLE:Su,DID_SET_ACCEPTED_FILE_TYPES:Au,DID_SET_CAPTURE_METHOD:Iu,DID_SET_REQUIRED:Cu})}),ku=13,Ru=32,Pu=(t,e)=>{t.innerHTML=e;const i=t.querySelector(".filepond--label-action");return i&&Yl(i,"tabindex","0"),e},Nu=bc({name:"drop-label",ignoreRect:!0,create:({root:t,props:e})=>{const i=Dd("label");Yl(i,"for",`filepond--browser-${e.id}`),Yl(i,"id",`filepond--drop-label-${e.id}`),t.ref.handleKeyDown=e=>{(e.keyCode===ku||e.keyCode===Ru)&&(e.preventDefault(),t.ref.label.click())},t.ref.handleClick=e=>{e.target===i||i.contains(e.target)||t.ref.label.click()},i.addEventListener("keydown",t.ref.handleKeyDown),t.element.addEventListener("click",t.ref.handleClick),Pu(i,e.caption),t.appendChild(i),t.ref.label=i},destroy:({root:t})=>{t.ref.label.addEventListener("keydown",t.ref.handleKeyDown),t.element.removeEventListener("click",t.ref.handleClick)},write:vc({DID_SET_LABEL_IDLE:({root:t,action:e})=>{Pu(t.ref.label,e.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),Bu=bc({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Fu=vc({DID_DRAG:({root:t,action:e})=>{t.ref.blob?(t.ref.blob.translateX=e.position.scopeLeft,t.ref.blob.translateY=e.position.scopeTop,t.ref.blob.scaleX=1,t.ref.blob.scaleY=1,t.ref.blob.opacity=1):(({root:t})=>{const e=.5*t.rect.element.width,i=.5*t.rect.element.height;t.ref.blob=t.appendChildView(t.createChildView(Bu,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:e,translateY:i}))})({root:t})},DID_DROP:({root:t})=>{t.ref.blob&&(t.ref.blob.scaleX=2.5,t.ref.blob.scaleY=2.5,t.ref.blob.opacity=0)},DID_END_DRAG:({root:t})=>{t.ref.blob&&(t.ref.blob.opacity=0)}}),qu=bc({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:({root:t,props:e,actions:i})=>{Fu({root:t,props:e,actions:i});const{blob:s}=t.ref;0===i.length&&s&&0===s.opacity&&(t.removeChildView(s),t.ref.blob=null)}}),ju=(t,e)=>{try{const i=new DataTransfer;e.forEach((t=>{t instanceof File?i.items.add(t):i.items.add(new File([t],t.name,{type:t.type}))})),t.files=i.files}catch(t){return!1}return!0},zu=(t,e)=>t.ref.fields[e],Vu=t=>{t.query("GET_ACTIVE_ITEMS").forEach((e=>{t.ref.fields[e.id]&&t.element.appendChild(t.ref.fields[e.id])}))},Hu=({root:t})=>Vu(t),$u=vc({DID_SET_DISABLED:({root:t})=>{t.element.disabled=t.query("GET_DISABLED")},DID_ADD_ITEM:({root:t,action:e})=>{const i=!(t.query("GET_ITEM",e.id).origin===ph)&&t.query("SHOULD_UPDATE_FILE_INPUT"),s=Dd("input");s.type=i?"file":"hidden",s.name=t.query("GET_NAME"),t.ref.fields[e.id]=s,Vu(t)},DID_LOAD_ITEM:({root:t,action:e})=>{const i=zu(t,e.id);if(!i)return;if(null!==e.serverFileReference&&(i.value=e.serverFileReference),!t.query("SHOULD_UPDATE_FILE_INPUT"))return;const s=t.query("GET_ITEM",e.id);ju(i,[s.file])},DID_REMOVE_ITEM:({root:t,action:e})=>{const i=zu(t,e.id);i&&(i.parentNode&&i.parentNode.removeChild(i),delete t.ref.fields[e.id])},DID_DEFINE_VALUE:({root:t,action:e})=>{const i=zu(t,e.id);i&&(null===e.value?i.removeAttribute("value"):"file"!=i.type&&(i.value=e.value),Vu(t))},DID_PREPARE_OUTPUT:({root:t,action:e})=>{t.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout((()=>{const i=zu(t,e.id);i&&ju(i,[e.file])}),0)},DID_REORDER_ITEMS:Hu,DID_SORT_ITEMS:Hu}),Uu=bc({tag:"fieldset",name:"data",create:({root:t})=>t.ref.fields={},write:$u,ignoreRect:!0}),Gu=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Wu=["css","csv","html","txt"],Yu={zip:"zip|compressed",epub:"application/epub+zip"},Xu=(t="")=>(t=t.toLowerCase(),Gu.includes(t)?"image/"+("jpg"===t?"jpeg":"svg"===t?"svg+xml":t):Wu.includes(t)?"text/"+t:Yu[t]||""),Qu=t=>new Promise(((e,i)=>{const s=rp(t);if(s.length&&!Zu(t))return e(s);Ku(t).then(e)})),Zu=t=>!!t.files&&t.files.length>0,Ku=t=>new Promise(((e,i)=>{const s=(t.items?Array.from(t.items):[]).filter((t=>Ju(t))).map((t=>tp(t)));s.length?Promise.all(s).then((t=>{const i=[];t.forEach((t=>{i.push.apply(i,t)})),e(i.filter((t=>t)).map((t=>(t._relativePath||(t._relativePath=t.webkitRelativePath),t))))})).catch(console.error):e(t.files?Array.from(t.files):[])})),Ju=t=>{if(np(t)){const e=op(t);if(e)return e.isFile||e.isDirectory}return"file"===t.kind},tp=t=>new Promise(((e,i)=>{sp(t)?ep(op(t)).then(e).catch(i):e([t.getAsFile()])})),ep=t=>new Promise(((e,i)=>{const s=[];let n=0,o=0;const r=()=>{0===o&&0===n&&e(s)},c=t=>{n++;const e=t.createReader(),h=()=>{e.readEntries((t=>{if(0===t.length)return n--,void r();t.forEach((t=>{t.isDirectory?c(t):(o++,t.file((e=>{const i=ip(e);t.fullPath&&(i._relativePath=t.fullPath),s.push(i),o--,r()})))})),h()}),i)};h()};c(t)})),ip=t=>{if(t.type.length)return t;const e=t.lastModifiedDate,i=t.name,s=Xu(qh(t.name));return s.length?((t=t.slice(0,t.size,s)).name=i,t.lastModifiedDate=e,t):t},sp=t=>np(t)&&(op(t)||{}).isDirectory,np=t=>"webkitGetAsEntry"in t,op=t=>t.webkitGetAsEntry(),rp=t=>{let e=[];try{if(e=lp(t),e.length)return e;e=ap(t)}catch(t){}return e},ap=t=>{let e=t.getData("url");return"string"==typeof e&&e.length?[e]:[]},lp=t=>{let e=t.getData("text/html");if("string"==typeof e&&e.length){const t=e.match(/src\s*=\s*"(.+?)"/);if(t)return[t[1]]}return[]},cp=[],hp=t=>({pageLeft:t.pageX,pageTop:t.pageY,scopeLeft:t.offsetX||t.layerX,scopeTop:t.offsetY||t.layerY}),dp=t=>{const e=cp.find((e=>e.element===t));if(e)return e;const i=up(t);return cp.push(i),i},up=t=>{const e=[],i={dragenter:mp,dragover:bp,dragleave:yp,drop:vp},s={};Gl(i,((i,n)=>{s[i]=n(t,e),t.addEventListener(i,s[i],!1)}));const n={element:t,addListener:o=>(e.push(o),()=>{e.splice(e.indexOf(o),1),0===e.length&&(cp.splice(cp.indexOf(n),1),Gl(i,(e=>{t.removeEventListener(e,s[e],!1)})))})};return n},pp=(t,e)=>{var i;const s=((t,e)=>("elementFromPoint"in t||(t=document),t.elementFromPoint(e.x,e.y)))("getRootNode"in(i=e)?i.getRootNode():document,{x:t.pageX-window.pageXOffset,y:t.pageY-window.pageYOffset});return s===e||e.contains(s)};let fp=null;const gp=(t,e)=>{try{t.dropEffect=e}catch(t){}},mp=(t,e)=>t=>{t.preventDefault(),fp=t.target,e.forEach((e=>{const{element:i,onenter:s}=e;pp(t,i)&&(e.state="enter",s(hp(t)))}))},bp=(t,e)=>t=>{t.preventDefault();const i=t.dataTransfer;Qu(i).then((s=>{let n=!1;e.some((e=>{const{filterElement:o,element:r,onenter:c,onexit:h,ondrag:d,allowdrop:u}=e;gp(i,"copy");const p=u(s);if(p)if(pp(t,r)){if(n=!0,null===e.state)return e.state="enter",void c(hp(t));if(e.state="over",o&&!p)return void gp(i,"none");d(hp(t))}else o&&!n&&gp(i,"none"),e.state&&(e.state=null,h(hp(t)));else gp(i,"none")}))}))},vp=(t,e)=>t=>{t.preventDefault();const i=t.dataTransfer;Qu(i).then((i=>{e.forEach((e=>{const{filterElement:s,element:n,ondrop:o,onexit:r,allowdrop:c}=e;if(e.state=null,!s||pp(t,n))return c(i)?void o(hp(t),i):r(hp(t))}))}))},yp=(t,e)=>t=>{fp===t.target&&e.forEach((e=>{const{onexit:i}=e;e.state=null,i(hp(t))}))},Ep=(t,e,i)=>{t.classList.add("filepond--hopper");const{catchesDropsOnPage:s,requiresDropOnElement:n,filterItems:o=(t=>t)}=i,r=((t,e,i)=>{const s=dp(e),n={element:t,filterElement:i,state:null,ondrop:()=>{},onenter:()=>{},ondrag:()=>{},onexit:()=>{},onload:()=>{},allowdrop:()=>{}};return n.destroy=s.addListener(n),n})(t,s?document.documentElement:t,n);let c="",h="";r.allowdrop=t=>e(o(t)),r.ondrop=(t,i)=>{const s=o(i);e(s)?(h="drag-drop",d.onload(s,t)):d.ondragend(t)},r.ondrag=t=>{d.ondrag(t)},r.onenter=t=>{h="drag-over",d.ondragstart(t)},r.onexit=t=>{h="drag-exit",d.ondragend(t)};const d={updateHopperState:()=>{c!==h&&(t.dataset.hopperState=h,c=h)},onload:()=>{},ondragstart:()=>{},ondrag:()=>{},ondragend:()=>{},destroy:()=>{r.destroy()}};return d};let _p=!1;const xp=[],wp=t=>{const e=document.activeElement;if(e&&(/textarea|input/i.test(e.nodeName)||"true"===e.getAttribute("contenteditable"))){let t=!1,i=e;for(;i!==document.body;){if(i.classList.contains("filepond--root")){t=!0;break}i=i.parentNode}if(!t)return}Qu(t.clipboardData).then((t=>{t.length&&xp.forEach((e=>e(t)))}))},Tp=()=>{const t=t=>{e.onload(t)},e={destroy:()=>{var e;e=t,Zc(xp,xp.indexOf(e)),0===xp.length&&(document.removeEventListener("paste",wp),_p=!1)},onload:()=>{}};return(t=>{xp.includes(t)||(xp.push(t),_p||(_p=!0,document.addEventListener("paste",wp)))})(t),e};let Ap=null,Sp=null;const Op=[],Dp=(t,e)=>{t.element.textContent=e},Cp=(t,e,i)=>{const s=t.query("GET_TOTAL_ITEMS");Dp(t,`${i} ${e}, ${s} ${1===s?t.query("GET_LABEL_FILE_COUNT_SINGULAR"):t.query("GET_LABEL_FILE_COUNT_PLURAL")}`),clearTimeout(Sp),Sp=setTimeout((()=>{(t=>{t.element.textContent=""})(t)}),1500)},Ip=t=>t.element.parentNode.contains(document.activeElement),Mp=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename,s=t.query("GET_LABEL_FILE_PROCESSING_ABORTED");Dp(t,`${i} ${s}`)},Lp=({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename;Dp(t,`${e.status.main} ${i} ${e.status.sub}`)},kp=bc({create:({root:t,props:e})=>{t.element.id=`filepond--assistant-${e.id}`,Yl(t.element,"role","alert"),Yl(t.element,"aria-live","polite"),Yl(t.element,"aria-relevant","additions")},ignoreRect:!0,ignoreRectUpdate:!0,write:vc({DID_LOAD_ITEM:({root:t,action:e})=>{if(!Ip(t))return;t.element.textContent="";const i=t.query("GET_ITEM",e.id);Op.push(i.filename),clearTimeout(Ap),Ap=setTimeout((()=>{Cp(t,Op.join(", "),t.query("GET_LABEL_FILE_ADDED")),Op.length=0}),750)},DID_REMOVE_ITEM:({root:t,action:e})=>{if(!Ip(t))return;const i=e.item;Cp(t,i.filename,t.query("GET_LABEL_FILE_REMOVED"))},DID_COMPLETE_ITEM_PROCESSING:({root:t,action:e})=>{const i=t.query("GET_ITEM",e.id).filename,s=t.query("GET_LABEL_FILE_PROCESSING_COMPLETE");Dp(t,`${i} ${s}`)},DID_ABORT_ITEM_PROCESSING:Mp,DID_REVERT_ITEM_PROCESSING:Mp,DID_THROW_ITEM_REMOVE_ERROR:Lp,DID_THROW_ITEM_LOAD_ERROR:Lp,DID_THROW_ITEM_INVALID:Lp,DID_THROW_ITEM_PROCESSING_ERROR:Lp}),tag:"span",name:"assistant"}),Rp=(t,e="-")=>t.replace(new RegExp(`${e}.`,"g"),(t=>t.charAt(1).toUpperCase())),Pp=(t,e=16,i=!0)=>{let s=Date.now(),n=null;return(...o)=>{clearTimeout(n);const r=Date.now()-s,c=()=>{s=Date.now(),t(...o)};r<e?i||(n=setTimeout(c,e-r)):c()}},Np=t=>t.preventDefault(),Bp=t=>{const e=t.ref.list.childViews[0].childViews[0];return e?{top:e.rect.element.marginTop,bottom:e.rect.element.marginBottom}:{top:0,bottom:0}},Fp=t=>{let e=0,i=0;const s=t.ref.list,n=s.childViews[0],o=n.childViews.filter((t=>t.rect.element.height)),r=t.query("GET_ACTIVE_ITEMS").map((t=>o.find((e=>e.id===t.id)))).filter((t=>t));if(0===r.length)return{visual:e,bounds:i};const c=n.rect.element.width,h=gu(n,r,s.dragCoordinates),d=r[0].rect.element,u=d.marginTop+d.marginBottom,p=d.marginLeft+d.marginRight,m=d.width+p,b=d.height+u,v=void 0!==h&&h>=0?1:0,y=r.find((t=>t.markedForRemoval&&t.opacity<.45))?-1:0,E=r.length+v+y,x=fu(c,m);return 1===x?r.forEach((t=>{const s=t.rect.element.height+u;i+=s,e+=s*t.opacity})):(i=Math.ceil(E/x)*b,e=i),{visual:e,bounds:i}},qp=t=>{const e=t.ref.measureHeight||null;return{cappedHeight:parseInt(t.style.maxHeight,10)||null,fixedHeight:0===e?null:e}},jp=(t,e)=>{const i=t.query("GET_ALLOW_REPLACE"),s=t.query("GET_ALLOW_MULTIPLE"),n=t.query("GET_TOTAL_ITEMS");let o=t.query("GET_MAX_FILES");const r=e.length;if(!s&&r>1)return t.dispatch("DID_THROW_MAX_FILES",{source:e,error:Jh("warning",0,"Max files")}),!0;if(o=s?o:1,!s&&i)return!1;return!!(Mc(o)&&n+r>o)&&(t.dispatch("DID_THROW_MAX_FILES",{source:e,error:Jh("warning",0,"Max files")}),!0)},zp=(t,e,i)=>{const s=t.childViews[0];return gu(s,e,{left:i.scopeLeft-s.rect.element.left,top:i.scopeTop-(t.rect.outer.top+t.rect.element.marginTop+t.rect.element.scrollTop)})},Vp=t=>{const e=t.query("GET_ALLOW_DROP"),i=t.query("GET_DISABLED"),s=e&&!i;if(s&&!t.ref.hopper){const e=Ep(t.element,(e=>{const i=t.query("GET_BEFORE_DROP_FILE")||(()=>!0);return!t.query("GET_DROP_VALIDATION")||e.every((e=>yh("ALLOW_HOPPER_ITEM",e,{query:t.query}).every((t=>!0===t))&&i(e)))}),{filterItems:e=>{const i=t.query("GET_IGNORED_FILES");return e.filter((t=>!gd(t)||!i.includes(t.name.toLowerCase())))},catchesDropsOnPage:t.query("GET_DROP_ON_PAGE"),requiresDropOnElement:t.query("GET_DROP_ON_ELEMENT")});e.onload=(e,i)=>{const s=t.ref.list.childViews[0].childViews.filter((t=>t.rect.element.height)),n=t.query("GET_ACTIVE_ITEMS").map((t=>s.find((e=>e.id===t.id)))).filter((t=>t));vh("ADD_ITEMS",e,{dispatch:t.dispatch}).then((e=>{if(jp(t,e))return!1;t.dispatch("ADD_ITEMS",{items:e,index:zp(t.ref.list,n,i),interactionMethod:Gc})})),t.dispatch("DID_DROP",{position:i}),t.dispatch("DID_END_DRAG",{position:i})},e.ondragstart=e=>{t.dispatch("DID_START_DRAG",{position:e})},e.ondrag=Pp((e=>{t.dispatch("DID_DRAG",{position:e})})),e.ondragend=e=>{t.dispatch("DID_END_DRAG",{position:e})},t.ref.hopper=e,t.ref.drip=t.appendChildView(t.createChildView(qu))}else!s&&t.ref.hopper&&(t.ref.hopper.destroy(),t.ref.hopper=null,t.removeChildView(t.ref.drip))},Hp=(t,e)=>{const i=t.query("GET_ALLOW_BROWSE"),s=t.query("GET_DISABLED"),n=i&&!s;n&&!t.ref.browser?t.ref.browser=t.appendChildView(t.createChildView(Lu,{...e,onload:e=>{vh("ADD_ITEMS",e,{dispatch:t.dispatch}).then((e=>{if(jp(t,e))return!1;t.dispatch("ADD_ITEMS",{items:e,index:-1,interactionMethod:Wc})}))}}),0):!n&&t.ref.browser&&(t.removeChildView(t.ref.browser),t.ref.browser=null)},$p=t=>{const e=t.query("GET_ALLOW_PASTE"),i=t.query("GET_DISABLED"),s=e&&!i;s&&!t.ref.paster?(t.ref.paster=Tp(),t.ref.paster.onload=e=>{vh("ADD_ITEMS",e,{dispatch:t.dispatch}).then((e=>{if(jp(t,e))return!1;t.dispatch("ADD_ITEMS",{items:e,index:-1,interactionMethod:Yc})}))}):!s&&t.ref.paster&&(t.ref.paster.destroy(),t.ref.paster=null)},Up=vc({DID_SET_ALLOW_BROWSE:({root:t,props:e})=>{Hp(t,e)},DID_SET_ALLOW_DROP:({root:t})=>{Vp(t)},DID_SET_ALLOW_PASTE:({root:t})=>{$p(t)},DID_SET_DISABLED:({root:t,props:e})=>{Vp(t),$p(t),Hp(t,e);t.query("GET_DISABLED")?t.element.dataset.disabled="disabled":t.element.removeAttribute("data-disabled")}}),Gp=bc({name:"root",read:({root:t})=>{t.ref.measure&&(t.ref.measureHeight=t.ref.measure.offsetHeight)},create:({root:t,props:e})=>{const i=t.query("GET_ID");i&&(t.element.id=i);const s=t.query("GET_CLASS_NAME");s&&s.split(" ").filter((t=>t.length)).forEach((e=>{t.element.classList.add(e)})),t.ref.label=t.appendChildView(t.createChildView(Nu,{...e,translateY:null,caption:t.query("GET_LABEL_IDLE")})),t.ref.list=t.appendChildView(t.createChildView(wu,{translateY:null})),t.ref.panel=t.appendChildView(t.createChildView(au,{name:"panel-root"})),t.ref.assistant=t.appendChildView(t.createChildView(kp,{...e})),t.ref.data=t.appendChildView(t.createChildView(Uu,{...e})),t.ref.measure=Dd("div"),t.ref.measure.style.height="100%",t.element.appendChild(t.ref.measure),t.ref.bounds=null,t.query("GET_STYLES").filter((t=>!xc(t.value))).map((({name:e,value:i})=>{t.element.dataset[e]=i})),t.ref.widthPrevious=null,t.ref.widthUpdated=Pp((()=>{t.ref.updateHistory=[],t.dispatch("DID_RESIZE_ROOT")}),250),t.ref.previousAspectRatio=null,t.ref.updateHistory=[];const n=window.matchMedia("(pointer: fine) and (hover: hover)").matches,o="PointerEvent"in window;t.query("GET_ALLOW_REORDER")&&o&&!n&&(t.element.addEventListener("touchmove",Np,{passive:!1}),t.element.addEventListener("gesturestart",Np));const r=t.query("GET_CREDITS");if(2===r.length){const e=document.createElement("a");e.className="filepond--credits",e.href=r[0],e.tabIndex=-1,e.target="_blank",e.rel="noopener noreferrer",e.textContent=r[1],t.element.appendChild(e),t.ref.credits=e}},write:({root:t,props:e,actions:i})=>{if(Up({root:t,props:e,actions:i}),i.filter((t=>/^DID_SET_STYLE_/.test(t.type))).filter((t=>!xc(t.data.value))).map((({type:e,data:i})=>{const s=Rp(e.substring(8).toLowerCase(),"_");t.element.dataset[s]=i.value,t.invalidateLayout()})),t.rect.element.hidden)return;t.rect.element.width!==t.ref.widthPrevious&&(t.ref.widthPrevious=t.rect.element.width,t.ref.widthUpdated());let s=t.ref.bounds;s||(s=t.ref.bounds=qp(t),t.element.removeChild(t.ref.measure),t.ref.measure=null);const{hopper:n,label:o,list:r,panel:c}=t.ref;n&&n.updateHopperState();const h=t.query("GET_PANEL_ASPECT_RATIO"),d=t.query("GET_ALLOW_MULTIPLE"),u=t.query("GET_TOTAL_ITEMS"),p=u===(d?t.query("GET_MAX_FILES")||1e6:1),m=i.find((t=>"DID_ADD_ITEM"===t.type));if(p&&m){const t=m.data.interactionMethod;o.opacity=0,d?o.translateY=-40:t===Uc?o.translateX=40:o.translateY=t===Wc?40:30}else p||(o.opacity=1,o.translateX=0,o.translateY=0);const b=Bp(t),v=Fp(t),y=o.rect.element.height,E=!d||p?0:y,x=p?r.rect.element.marginTop:0,w=0===u?0:r.rect.element.marginBottom,S=E+x+v.visual+w,O=E+x+v.bounds+w;if(r.translateY=Math.max(0,E-r.rect.element.marginTop)-b.top,h){const e=t.rect.element.width,i=e*h;h!==t.ref.previousAspectRatio&&(t.ref.previousAspectRatio=h,t.ref.updateHistory=[]);const s=t.ref.updateHistory;s.push(e);const n=2;if(s.length>2*n){const t=s.length,e=t-10;let i=0;for(let o=t;o>=e;o--)if(s[o]===s[o-2]&&i++,i>=n)return}c.scalable=!1,c.height=i;const o=i-E-(w-b.bottom)-(p?x:0);v.visual>o?r.overflow=o:r.overflow=null,t.height=i}else if(s.fixedHeight){c.scalable=!1;const t=s.fixedHeight-E-(w-b.bottom)-(p?x:0);v.visual>t?r.overflow=t:r.overflow=null}else if(s.cappedHeight){const e=S>=s.cappedHeight,i=Math.min(s.cappedHeight,S);c.scalable=!0,c.height=e?i:i-b.top-b.bottom;const n=i-E-(w-b.bottom)-(p?x:0);S>s.cappedHeight&&v.visual>n?r.overflow=n:r.overflow=null,t.height=Math.min(s.cappedHeight,O-b.top-b.bottom)}else{const e=u>0?b.top+b.bottom:0;c.scalable=!0,c.height=Math.max(y,S-e),t.height=Math.max(y,O-e)}t.ref.credits&&c.heightCurrent&&(t.ref.credits.style.transform=`translateY(${c.heightCurrent}px)`)},destroy:({root:t})=>{t.ref.paster&&t.ref.paster.destroy(),t.ref.hopper&&t.ref.hopper.destroy(),t.element.removeEventListener("touchmove",Np),t.element.removeEventListener("gesturestart",Np)},mixins:{styles:["height"]}}),Wp=(t={})=>{let e=null;const i=_h(),s=((t,e=[],i=[])=>{const s={...t},n=[],o=[],r=(t,e,i)=>{!i||document.hidden?(u[t]&&u[t](e),n.push({type:t,data:e})):o.push({type:t,data:e})},c=(t,...e)=>d[t]?d[t](...e):null,h={getState:()=>({...s}),processActionQueue:()=>{const t=[...n];return n.length=0,t},processDispatchQueue:()=>{const t=[...o];o.length=0,t.forEach((({type:t,data:e})=>{r(t,e)}))},dispatch:r,query:c};let d={};e.forEach((t=>{d={...t(s),...d}}));let u={};return i.forEach((t=>{u={...t(r,c,s),...u}})),h})({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:jc(i)},[Ph,$c(i)],[Sd,Hc(i)]);s.dispatch("SET_OPTIONS",{options:t});const n=()=>{document.hidden||s.dispatch("KICK")};document.addEventListener("visibilitychange",n);let o=null,r=!1,c=!1,h=null,d=null;const u=()=>{r||(r=!0),clearTimeout(o),o=setTimeout((()=>{r=!1,h=null,d=null,c&&(c=!1,s.dispatch("DID_STOP_RESIZE"))}),500)};window.addEventListener("resize",u);const p=Gp(s,{id:Qc()});let m=!1,b=!1;const v={_read:()=>{r&&(d=window.innerWidth,h||(h=d),c||d===h||(s.dispatch("DID_START_RESIZE"),c=!0)),b&&m&&(m=null===p.element.offsetParent),m||(p._read(),b=p.rect.element.hidden)},_write:t=>{const e=s.processActionQueue().filter((t=>!/^SET_/.test(t.type)));var i;m&&!e.length||(w(e),m=p._write(t,e,c),(i=s.query("GET_ITEMS")).forEach(((t,e)=>{t.released&&Zc(i,e)})),m&&s.processDispatchQueue())}},y=t=>e=>{const i={type:t};if(!e)return i;if(e.hasOwnProperty("error")&&(i.error=e.error?{...e.error}:null),e.status&&(i.status={...e.status}),e.file&&(i.output=e.file),e.source)i.file=e.source;else if(e.item||e.id){const t=e.item?e.item:s.query("GET_ITEM",e.id);i.file=t?eh(t):null}return e.items&&(i.items=e.items.map(eh)),/progress/.test(t)&&(i.progress=e.progress),e.hasOwnProperty("origin")&&e.hasOwnProperty("target")&&(i.origin=e.origin,i.target=e.target),i},E={DID_DESTROY:y("destroy"),DID_INIT:y("init"),DID_THROW_MAX_FILES:y("warning"),DID_INIT_ITEM:y("initfile"),DID_START_ITEM_LOAD:y("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:y("addfileprogress"),DID_LOAD_ITEM:y("addfile"),DID_THROW_ITEM_INVALID:[y("error"),y("addfile")],DID_THROW_ITEM_LOAD_ERROR:[y("error"),y("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[y("error"),y("removefile")],DID_PREPARE_OUTPUT:y("preparefile"),DID_START_ITEM_PROCESSING:y("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:y("processfileprogress"),DID_ABORT_ITEM_PROCESSING:y("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:y("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:y("processfiles"),DID_REVERT_ITEM_PROCESSING:y("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[y("error"),y("processfile")],DID_REMOVE_ITEM:y("removefile"),DID_UPDATE_ITEMS:y("updatefiles"),DID_ACTIVATE_ITEM:y("activatefile"),DID_REORDER_ITEMS:y("reorderfiles")},x=t=>{const e={pond:P,...t};delete e.type,p.element.dispatchEvent(new CustomEvent(`FilePond:${t.type}`,{detail:e,bubbles:!0,cancelable:!0,composed:!0}));const i=[];t.hasOwnProperty("error")&&i.push(t.error),t.hasOwnProperty("file")&&i.push(t.file);const n=["type","error","file"];Object.keys(t).filter((t=>!n.includes(t))).forEach((e=>i.push(t[e]))),P.fire(t.type,...i);const o=s.query(`GET_ON${t.type.toUpperCase()}`);o&&o(...i)},w=t=>{t.length&&t.filter((t=>E[t.type])).forEach((t=>{const e=E[t.type];(Array.isArray(e)?e:[e]).forEach((e=>{"DID_INIT_ITEM"===t.type?x(e(t.data)):setTimeout((()=>{x(e(t.data))}),0)}))}))},S=t=>new Promise(((e,i)=>{s.dispatch("REQUEST_ITEM_PREPARE",{query:t,success:t=>{e(t)},failure:t=>{i(t)}})})),O=(t,e)=>{var i;return"object"!=typeof t||(i=t).file&&i.id||e||(e=t,t=void 0),s.dispatch("REMOVE_ITEM",{...e,query:t}),null===s.query("GET_ACTIVE_ITEM",t)},D=(...t)=>new Promise(((e,i)=>{const n=[],o={};if(_c(t[0]))n.push.apply(n,t[0]),Object.assign(o,t[1]||{});else{const e=t[t.length-1];"object"!=typeof e||e instanceof Blob||Object.assign(o,t.pop()),n.push(...t)}s.dispatch("ADD_ITEMS",{items:n,index:o.index,interactionMethod:Uc,success:e,failure:i})})),M=()=>s.query("GET_ACTIVE_ITEMS"),k=t=>new Promise(((e,i)=>{s.dispatch("REQUEST_ITEM_PROCESSING",{query:t,success:t=>{e(t)},failure:t=>{i(t)}})})),P={...Kc(),...v,...Vc(s,i),setOptions:t=>s.dispatch("SET_OPTIONS",{options:t}),addFile:(t,e={})=>new Promise(((i,s)=>{D([{source:t,options:e}],{index:e.index}).then((t=>i(t&&t[0]))).catch(s)})),addFiles:D,getFile:t=>s.query("GET_ACTIVE_ITEM",t),processFile:k,prepareFile:S,removeFile:O,moveFile:(t,e)=>s.dispatch("MOVE_ITEM",{query:t,index:e}),getFiles:M,processFiles:(...t)=>{const e=Array.isArray(t[0])?t[0]:t;if(!e.length){const t=M().filter((t=>!(t.status===sh&&t.origin===ph)&&t.status!==oh&&t.status!==rh&&t.status!==lh));return Promise.all(t.map(k))}return Promise.all(e.map(k))},removeFiles:(...t)=>{const e=Array.isArray(t[0])?t[0]:t;let i;"object"==typeof e[e.length-1]?i=e.pop():Array.isArray(t[0])&&(i=t[1]);const s=M();if(!e.length)return Promise.all(s.map((t=>O(t,i))));return e.map((t=>rc(t)?s[t]?s[t].id:null:t)).filter((t=>t)).map((t=>O(t,i)))},prepareFiles:(...t)=>{const e=Array.isArray(t[0])?t[0]:t,i=e.length?e:M();return Promise.all(i.map(S))},sort:t=>s.dispatch("SORT",{compare:t}),browse:()=>{var t=p.element.querySelector("input[type=file]");t&&t.click()},destroy:()=>{P.fire("destroy",p.element),s.dispatch("ABORT_ALL"),p._destroy(),window.removeEventListener("resize",u),document.removeEventListener("visibilitychange",n),s.dispatch("DID_DESTROY")},insertBefore:t=>yc(p.element,t),insertAfter:t=>Ec(p.element,t),appendTo:t=>t.appendChild(p.element),replaceElement:t=>{yc(p.element,t),t.parentNode.removeChild(t),e=t},restoreElement:()=>{e&&(Ec(e,p.element),p.element.parentNode.removeChild(p.element),e=null)},isAttachedTo:t=>p.element===t||e===t,element:{get:()=>p.element},status:{get:()=>s.query("GET_STATUS")}};return s.dispatch("DID_INIT"),Wl(P)},Yp=(t={})=>{const e={};Gl(_h(),((t,i)=>{e[t]=i[0]}));return Wp({...e,...t})},Xp=(t,e)=>{Gl(e,((e,i)=>{Gl(t,((s,n)=>{const o=new RegExp(e);if(!o.test(s))return;if(delete t[s],!1===i)return;if(Oc(i))return void(t[i]=n);const r=i.group;var c;Nc(i)&&!t[r]&&(t[r]={}),t[r][(c=s.replace(o,""),c.charAt(0).toLowerCase()+c.slice(1))]=n})),i.mapping&&Xp(t[i.group],i.mapping)}))},Qp=(t,e={})=>{const i=[];Gl(t.attributes,(e=>{i.push(t.attributes[e])}));const s=i.filter((t=>t.name)).reduce(((e,i)=>{const s=Yl(t,i.name);var n;return e[(n=i.name,Rp(n.replace(/^data-/,"")))]=s===i.name||s,e}),{});return Xp(s,e),s},Zp=(...t)=>t[0]instanceof HTMLElement?((t,e={})=>{const i={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};yh("SET_ATTRIBUTE_TO_OPTION_MAP",i);const s={...e},n=Qp("FIELDSET"===t.nodeName?t.querySelector("input[type=file]"):t,i);Object.keys(n).forEach((t=>{Nc(n[t])?(Nc(s[t])||(s[t]={}),Object.assign(s[t],n[t])):s[t]=n[t]})),s.files=(e.files||[]).concat(Array.from(t.querySelectorAll("input:not([type=file])")).map((t=>({source:t.value,options:{type:t.dataset.type}}))));const o=Yp(s);return t.files&&Array.from(t.files).forEach((t=>{o.addFile(t)})),o.replaceElement(t),o})(...t):Yp(...t),Kp=["fire","_read","_write"],Jp=t=>{const e={};return Jc(t,e,Kp),e},tf=(t,e)=>t.replace(/(?:{([a-zA-Z]+)})/g,((t,i)=>e[i])),ef=t=>{const e=new Blob(["(",t.toString(),")()"],{type:"application/javascript"}),i=URL.createObjectURL(e),s=new Worker(i);return{transfer:(t,e)=>{},post:(t,e,i)=>{const n=Qc();s.onmessage=t=>{t.data.id===n&&e(t.data.message)},s.postMessage({id:n,message:t},i)},terminate:()=>{s.terminate(),URL.revokeObjectURL(i)}}},sf=t=>new Promise(((e,i)=>{const s=new Image;s.onload=()=>{e(s)},s.onerror=t=>{i(t)},s.src=t})),nf=(t,e)=>{const i=t.slice(0,t.size,t.type);return i.lastModifiedDate=t.lastModifiedDate,i.name=e,i},of=t=>nf(t,t.name),rf=[],af=t=>{if(rf.includes(t))return;rf.push(t);const e=t({addFilter:Eh,utils:{Type:mh,forin:Gl,isString:Oc,isFile:gd,toNaturalFileSize:Rd,replaceInString:tf,getExtensionFromFilename:qh,getFilenameWithoutExtension:fd,guesstimateMimeType:Xu,getFileFromBlob:Vh,getFilenameFromURL:Fh,createRoute:vc,createWorker:ef,createView:bc,createItemAPI:eh,loadImage:sf,copyFile:of,renameFile:nf,createBlob:Hh,applyFilterChain:vh,text:Cd,getNumericAspectRatioFromString:Th},views:{fileActionButton:kd}});var i;i=e.options,Object.assign(xh,i)},lf=(()=>{const t=ec()&&!("[object OperaMini]"===Object.prototype.toString.call(window.operamini))&&"visibilityState"in document&&"Promise"in window&&"slice"in Blob.prototype&&"URL"in window&&"createObjectURL"in window.URL&&"performance"in window&&("supports"in(window.CSS||{})||/MSIE|Trident/.test(window.navigator.userAgent));return()=>t})(),cf={apps:[]},hf=()=>{};let df={},uf=hf,pf=hf,ff=hf,gf=hf,mf=hf,bf=hf,vf=hf;if(lf()){((t,e,i=60)=>{const s="__framePainter";if(window[s])return window[s].readers.push(t),void window[s].writers.push(e);window[s]={readers:[t],writers:[e]};const n=window[s],o=1e3/i;let r=null,c=null,h=null,d=null;const u=()=>{document.hidden?(h=()=>window.setTimeout((()=>p(performance.now())),o),d=()=>window.clearTimeout(c)):(h=()=>window.requestAnimationFrame(p),d=()=>window.cancelAnimationFrame(c))};document.addEventListener("visibilitychange",(()=>{d&&d(),u(),p(performance.now())}));const p=t=>{c=h(p),r||(r=t);const e=t-r;e<=o||(r=t-e%o,n.readers.forEach((t=>t())),n.writers.forEach((e=>e(t))))};u(),p(performance.now())})((()=>{cf.apps.forEach((t=>t._read()))}),(t=>{cf.apps.forEach((e=>e._write(t)))}));const t=()=>{document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:lf,create:uf,destroy:pf,parse:ff,find:gf,registerPlugin:mf,setOptions:vf}})),document.removeEventListener("DOMContentLoaded",t)};"loading"!==document.readyState?setTimeout((()=>t()),0):document.addEventListener("DOMContentLoaded",t);const e=()=>Gl(_h(),((t,e)=>{df[t]=e[1]}));df={},e(),uf=(...t)=>{const e=Zp(...t);return e.on("destroy",pf),cf.apps.push(e),Jp(e)},pf=t=>{const e=cf.apps.findIndex((e=>e.isAttachedTo(t)));if(e>=0){return cf.apps.splice(e,1)[0].restoreElement(),!0}return!1},ff=t=>Array.from(t.querySelectorAll(".filepond")).filter((t=>!cf.apps.find((e=>e.isAttachedTo(t))))).map((t=>uf(t))),gf=t=>{const e=cf.apps.find((e=>e.isAttachedTo(t)));return e?Jp(e):null},mf=(...t)=>{t.forEach(af),e()},bf=()=>{const t={};return Gl(_h(),((e,i)=>{t[e]=i[0]})),t},vf=t=>(Nc(t)&&(cf.apps.forEach((e=>{e.setOptions(t)})),(t=>{Gl(t,((t,e)=>{xh[t]&&(xh[t][0]=qc(e,xh[t][0],xh[t][1]))}))})(t)),bf())}
/*!
 * FilePondPluginFileValidateSize 2.2.8
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const yf=({addFilter:t,utils:e})=>{const{Type:i,replaceInString:s,toNaturalFileSize:n}=e;return t("ALLOW_HOPPER_ITEM",((t,{query:e})=>{if(!e("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;const i=e("GET_MAX_FILE_SIZE");if(null!==i&&t.size>i)return!1;const s=e("GET_MIN_FILE_SIZE");return!(null!==s&&t.size<s)})),t("LOAD_FILE",((t,{query:e})=>new Promise(((i,o)=>{if(!e("GET_ALLOW_FILE_SIZE_VALIDATION"))return i(t);const r=e("GET_FILE_VALIDATE_SIZE_FILTER");if(r&&!r(t))return i(t);const c=e("GET_MAX_FILE_SIZE");if(null!==c&&t.size>c)return void o({status:{main:e("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:s(e("GET_LABEL_MAX_FILE_SIZE"),{filesize:n(c,".",e("GET_FILE_SIZE_BASE"),e("GET_FILE_SIZE_LABELS",e))})}});const h=e("GET_MIN_FILE_SIZE");if(null!==h&&t.size<h)return void o({status:{main:e("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:s(e("GET_LABEL_MIN_FILE_SIZE"),{filesize:n(h,".",e("GET_FILE_SIZE_BASE"),e("GET_FILE_SIZE_LABELS",e))})}});const d=e("GET_MAX_TOTAL_FILE_SIZE");if(null!==d){const t=e("GET_ACTIVE_ITEMS").reduce(((t,e)=>t+e.fileSize),0);if(t>d)return void o({status:{main:e("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:s(e("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:n(d,".",e("GET_FILE_SIZE_BASE"),e("GET_FILE_SIZE_LABELS",e))})}})}i(t)})))),{options:{allowFileSizeValidation:[!0,i.BOOLEAN],maxFileSize:[null,i.INT],minFileSize:[null,i.INT],maxTotalFileSize:[null,i.INT],fileValidateSizeFilter:[null,i.FUNCTION],labelMinFileSizeExceeded:["File is too small",i.STRING],labelMinFileSize:["Minimum file size is {filesize}",i.STRING],labelMaxFileSizeExceeded:["File is too large",i.STRING],labelMaxFileSize:["Maximum file size is {filesize}",i.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",i.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",i.STRING]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:yf}))
/*!
 * FilePondPluginFileValidateType 1.2.9
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */;const Ef=({addFilter:t,utils:e})=>{const{Type:i,isString:s,replaceInString:n,guesstimateMimeType:o,getExtensionFromFilename:r,getFilenameFromURL:c}=e,h=(t,e)=>t.some((t=>{return/\*$/.test(t)?(i=t,(/^[^/]+/.exec(e)||[]).pop()===i.slice(0,-2)):t===e;var i})),d=(t,e,i)=>{if(0===e.length)return!0;const n=(t=>{let e="";if(s(t)){const i=c(t),s=r(i);s&&(e=o(s))}else e=t.type;return e})(t);return i?new Promise(((s,o)=>{i(t,n).then((t=>{h(e,t)?s():o()})).catch(o)})):h(e,n)};return t("SET_ATTRIBUTE_TO_OPTION_MAP",(t=>Object.assign(t,{accept:"acceptedFileTypes"}))),t("ALLOW_HOPPER_ITEM",((t,{query:e})=>!e("GET_ALLOW_FILE_TYPE_VALIDATION")||d(t,e("GET_ACCEPTED_FILE_TYPES")))),t("LOAD_FILE",((t,{query:e})=>new Promise(((i,s)=>{if(!e("GET_ALLOW_FILE_TYPE_VALIDATION"))return void i(t);const o=e("GET_ACCEPTED_FILE_TYPES"),r=e("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),c=d(t,o,r),h=()=>{const t=o.map((t=>e=>null!==t[e]&&(t[e]||e))(e("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"))).filter((t=>!1!==t)),i=t.filter(((e,i)=>t.indexOf(e)===i));s({status:{main:e("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:n(e("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:i.join(", "),allButLastType:i.slice(0,-1).join(", "),lastType:i[i.length-1]})}})};if("boolean"==typeof c)return c?i(t):h();c.then((()=>{i(t)})).catch(h)})))),{options:{allowFileTypeValidation:[!0,i.BOOLEAN],acceptedFileTypes:[[],i.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",i.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",i.STRING],fileValidateTypeLabelExpectedTypesMap:[{},i.OBJECT],fileValidateTypeDetectType:[null,i.FUNCTION]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:Ef}));
/*!
 * FilePondPluginImagePreview 4.6.12
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const _f=(t,e)=>Tf(t.x*e,t.y*e),xf=(t,e)=>Tf(t.x+e.x,t.y+e.y),wf=(t,e,i)=>{const s=Math.cos(e),n=Math.sin(e),o=Tf(t.x-i.x,t.y-i.y);return Tf(i.x+s*o.x-n*o.y,i.y+n*o.x+s*o.y)},Tf=(t=0,e=0)=>({x:t,y:e}),Af=(t,e,i=1,s)=>"string"==typeof t?parseFloat(t)*i:"number"==typeof t?t*(s?e[s]:Math.min(e.width,e.height)):void 0,Sf=t=>null!=t,Of=(t,e)=>Object.keys(e).forEach((i=>t.setAttribute(i,e[i]))),Df=(t,e)=>{const i=document.createElementNS("http://www.w3.org/2000/svg",t);return e&&Of(i,e),i},Cf={contain:"xMidYMid meet",cover:"xMidYMid slice"},If={left:"start",center:"middle",right:"end"},Mf=t=>e=>Df(t,{id:e.id}),Lf={image:t=>{const e=Df("image",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return e.onload=()=>{e.setAttribute("opacity",t.opacity||1)},e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.src),e},rect:Mf("rect"),ellipse:Mf("ellipse"),text:Mf("text"),path:Mf("path"),line:t=>{const e=Df("g",{id:t.id,"stroke-linecap":"round","stroke-linejoin":"round"}),i=Df("line");e.appendChild(i);const s=Df("path");e.appendChild(s);const n=Df("path");return e.appendChild(n),e}},kf={rect:t=>Of(t,{...t.rect,...t.styles}),ellipse:t=>{const e=t.rect.x+.5*t.rect.width,i=t.rect.y+.5*t.rect.height,s=.5*t.rect.width,n=.5*t.rect.height;return Of(t,{cx:e,cy:i,rx:s,ry:n,...t.styles})},image:(t,e)=>{Of(t,{...t.rect,...t.styles,preserveAspectRatio:Cf[e.fit]||"none"})},text:(t,e,i,s)=>{const n=Af(e.fontSize,i,s),o=e.fontFamily||"sans-serif",r=e.fontWeight||"normal",c=If[e.textAlign]||"start";Of(t,{...t.rect,...t.styles,"stroke-width":0,"font-weight":r,"font-size":n,"font-family":o,"text-anchor":c}),t.text!==e.text&&(t.text=e.text,t.textContent=e.text.length?e.text:" ")},path:(t,e,i,s)=>{var n;Of(t,{...t.styles,fill:"none",d:(n=e.points.map((t=>({x:Af(t.x,i,s,"width"),y:Af(t.y,i,s,"height")}))),n.map(((t,e)=>`${0===e?"M":"L"} ${t.x} ${t.y}`)).join(" "))})},line:(t,e,i,s)=>{Of(t,{...t.rect,...t.styles,fill:"none"});const n=t.childNodes[0],o=t.childNodes[1],r=t.childNodes[2],c=t.rect,h={x:t.rect.x+t.rect.width,y:t.rect.y+t.rect.height};if(Of(n,{x1:c.x,y1:c.y,x2:h.x,y2:h.y}),!e.lineDecoration)return;o.style.display="none",r.style.display="none";const d=(t=>{const e=Math.sqrt(t.x*t.x+t.y*t.y);return 0===e?{x:0,y:0}:Tf(t.x/e,t.y/e)})({x:h.x-c.x,y:h.y-c.y}),u=Af(.05,i,s);if(-1!==e.lineDecoration.indexOf("arrow-begin")){const t=_f(d,u),e=xf(c,t),i=wf(c,2,e),s=wf(c,-2,e);Of(o,{style:"display:block;",d:`M${i.x},${i.y} L${c.x},${c.y} L${s.x},${s.y}`})}if(-1!==e.lineDecoration.indexOf("arrow-end")){const t=_f(d,-u),e=xf(h,t),i=wf(h,2,e),s=wf(h,-2,e);Of(r,{style:"display:block;",d:`M${i.x},${i.y} L${h.x},${h.y} L${s.x},${s.y}`})}}},Rf=(t,e,i,s,n)=>{"path"!==e&&(t.rect=((t,e,i=1)=>{let s=Af(t.x,e,i,"width")||Af(t.left,e,i,"width"),n=Af(t.y,e,i,"height")||Af(t.top,e,i,"height"),o=Af(t.width,e,i,"width"),r=Af(t.height,e,i,"height"),c=Af(t.right,e,i,"width"),h=Af(t.bottom,e,i,"height");return Sf(n)||(n=Sf(r)&&Sf(h)?e.height-r-h:h),Sf(s)||(s=Sf(o)&&Sf(c)?e.width-o-c:c),Sf(o)||(o=Sf(s)&&Sf(c)?e.width-s-c:0),Sf(r)||(r=Sf(n)&&Sf(h)?e.height-n-h:0),{x:s||0,y:n||0,width:o||0,height:r||0}})(i,s,n)),t.styles=((t,e,i)=>{const s=t.borderStyle||t.lineStyle||"solid",n=t.backgroundColor||t.fontColor||"transparent",o=t.borderColor||t.lineColor||"transparent",r=Af(t.borderWidth||t.lineWidth,e,i),c=t.lineCap||"round",h=t.lineJoin||"round",d="string"==typeof s?"":s.map((t=>Af(t,e,i))).join(",");return{"stroke-linecap":c,"stroke-linejoin":h,"stroke-width":r||0,"stroke-dasharray":d,stroke:o,fill:n,opacity:t.opacity||1}})(i,s,n),kf[e](t,i,s,n)},Pf=["x","y","left","top","right","bottom","width","height"],Nf=t=>{const[e,i]=t,s=i.points?{}:Pf.reduce(((t,e)=>{var s;return t[e]="string"==typeof(s=i[e])&&/%/.test(s)?parseFloat(s)/100:s,t}),{});return[e,{zIndex:0,...i,...s}]},Bf=(t,e)=>t[1].zIndex>e[1].zIndex?1:t[1].zIndex<e[1].zIndex?-1:0,Ff=t=>t.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:({root:t,props:e})=>{if(!e.dirty)return;const{crop:i,resize:s,markup:n}=e,o=e.width,r=e.height;let c=i.width,h=i.height;if(s){const{size:t}=s;let e=t&&t.width,i=t&&t.height;const n=s.mode,o=s.upscale;e&&!i&&(i=e),i&&!e&&(e=i);const r=c<e&&h<i;if(!r||r&&o){let t=e/c,s=i/h;if("force"===n)c=e,h=i;else{let e;"cover"===n?e=Math.max(t,s):"contain"===n&&(e=Math.min(t,s)),c*=e,h*=e}}}const d={width:o,height:r};t.element.setAttribute("width",d.width),t.element.setAttribute("height",d.height);const u=Math.min(o/c,r/h);t.element.innerHTML="";const p=t.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");n.filter(p).map(Nf).sort(Bf).forEach((e=>{const[i,s]=e,n=((t,e)=>Lf[t](e))(i,s);Rf(n,i,s,d,u),t.element.appendChild(n)}))}}),qf=(t,e)=>({x:t,y:e}),jf=(t,e)=>qf(t.x-e.x,t.y-e.y),zf=(t,e)=>Math.sqrt(((t,e)=>((t,e)=>t.x*e.x+t.y*e.y)(jf(t,e),jf(t,e)))(t,e)),Vf=(t,e)=>{const i=t,s=e,n=1.5707963267948966-e,o=Math.sin(1.5707963267948966),r=Math.sin(s),c=Math.sin(n),h=Math.cos(n),d=i/o;return qf(h*(d*r),h*(d*c))},Hf=(t,e,i,s)=>{const n=s.x>.5?1-s.x:s.x,o=s.y>.5?1-s.y:s.y,r=2*n*t.width,c=2*o*t.height,h=((t,e)=>{const i=t.width,s=t.height,n=Vf(i,e),o=Vf(s,e),r=qf(t.x+Math.abs(n.x),t.y-Math.abs(n.y)),c=qf(t.x+t.width+Math.abs(o.y),t.y+Math.abs(o.x)),h=qf(t.x-Math.abs(o.y),t.y+t.height-Math.abs(o.x));return{width:zf(r,c),height:zf(r,h)}})(e,i);return Math.max(h.width/r,h.height/c)},$f=(t,e)=>{let i=t.width,s=i*e;s>t.height&&(s=t.height,i=s/e);return{x:.5*(t.width-i),y:.5*(t.height-s),width:i,height:s}},Uf=(t,e={})=>{let{zoom:i,rotation:s,center:n,aspectRatio:o}=e;o||(o=t.height/t.width);const r=((t,e,i=1)=>{const s=t.height/t.width;let n=e,o=1,r=s;r>n&&(r=n,o=r/s);const c=Math.max(1/o,n/r),h=t.width/(i*c*o);return{width:h,height:h*e}})(t,o,i),c={x:.5*r.width,y:.5*r.height},h={x:0,y:0,width:r.width,height:r.height,center:c},d=void 0===e.scaleToFit||e.scaleToFit,u=i*Hf(t,$f(h,o),s,d?n:{x:.5,y:.5});return{widthFloat:r.width/u,heightFloat:r.height/u,width:Math.round(r.width/u),height:Math.round(r.height/u)}},Gf={type:"spring",stiffness:.5,damping:.45,mass:10},Wf=t=>t.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function({root:t,props:e}){e.background&&(t.element.style.backgroundColor=e.background)},create:({root:e,props:i})=>{e.ref.image=e.appendChildView(e.createChildView((t=>t.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:Gf,originY:Gf,scaleX:Gf,scaleY:Gf,translateX:Gf,translateY:Gf,rotateZ:Gf}},create:({root:e,props:i})=>{i.width=i.image.width,i.height=i.image.height,e.ref.bitmap=e.appendChildView(e.createChildView((t=>t.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:({root:t,props:e})=>{t.appendChild(e.image)}}))(t),{image:i.image}))},write:({root:t,props:e})=>{const{flip:i}=e.crop,{bitmap:s}=t.ref;s.scaleX=i.horizontal?-1:1,s.scaleY=i.vertical?-1:1}}))(t),Object.assign({},i))),e.ref.createMarkup=()=>{e.ref.markup||(e.ref.markup=e.appendChildView(e.createChildView(Ff(t),Object.assign({},i))))},e.ref.destroyMarkup=()=>{e.ref.markup&&(e.removeChildView(e.ref.markup),e.ref.markup=null)};const s=e.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");null!==s&&(e.element.dataset.transparencyIndicator="grid"===s?s:"color")},write:({root:t,props:e,shouldOptimize:i})=>{const{crop:s,markup:n,resize:o,dirty:r,width:c,height:h}=e;t.ref.image.crop=s;const d={x:0,y:0,width:c,height:h,center:{x:.5*c,y:.5*h}},u={width:t.ref.image.width,height:t.ref.image.height},p={x:s.center.x*u.width,y:s.center.y*u.height},m={x:d.center.x-u.width*s.center.x,y:d.center.y-u.height*s.center.y},b=2*Math.PI+s.rotation%(2*Math.PI),v=s.aspectRatio||u.height/u.width,y=void 0===s.scaleToFit||s.scaleToFit,E=Hf(u,$f(d,v),b,y?s.center:{x:.5,y:.5}),x=s.zoom*E;n&&n.length?(t.ref.createMarkup(),t.ref.markup.width=c,t.ref.markup.height=h,t.ref.markup.resize=o,t.ref.markup.dirty=r,t.ref.markup.markup=n,t.ref.markup.crop=Uf(u,s)):t.ref.markup&&t.ref.destroyMarkup();const w=t.ref.image;if(i)return w.originX=null,w.originY=null,w.translateX=null,w.translateY=null,w.rotateZ=null,w.scaleX=null,void(w.scaleY=null);w.originX=p.x,w.originY=p.y,w.translateX=m.x,w.translateY=m.y,w.rotateZ=b,w.scaleX=x,w.scaleY=x}});let Yf=0;const Xf=function(){self.onmessage=t=>{createImageBitmap(t.data.message.file).then((e=>{self.postMessage({id:t.data.id,message:e},[e])}))}},Qf=function(){self.onmessage=t=>{const e=t.data.message.imageData,i=t.data.message.colorMatrix,s=e.data,n=s.length,o=i[0],r=i[1],c=i[2],h=i[3],d=i[4],u=i[5],p=i[6],m=i[7],b=i[8],v=i[9],y=i[10],E=i[11],x=i[12],w=i[13],S=i[14],O=i[15],D=i[16],M=i[17],k=i[18],P=i[19];let N=0,B=0,F=0,q=0,j=0;for(;N<n;N+=4)B=s[N]/255,F=s[N+1]/255,q=s[N+2]/255,j=s[N+3]/255,s[N]=Math.max(0,Math.min(255*(B*o+F*r+q*c+j*h+d),255)),s[N+1]=Math.max(0,Math.min(255*(B*u+F*p+q*m+j*b+v),255)),s[N+2]=Math.max(0,Math.min(255*(B*y+F*E+q*x+j*w+S),255)),s[N+3]=Math.max(0,Math.min(255*(B*O+F*D+q*M+j*k+P),255));self.postMessage({id:t.data.id,message:e},[e.data.buffer])}},Zf={1:()=>[1,0,0,1,0,0],2:t=>[-1,0,0,1,t,0],3:(t,e)=>[-1,0,0,-1,t,e],4:(t,e)=>[1,0,0,-1,0,e],5:()=>[0,1,1,0,0,0],6:(t,e)=>[0,1,-1,0,e,0],7:(t,e)=>[0,-1,-1,0,e,t],8:t=>[0,-1,1,0,0,t]},Kf=(t,e,i,s)=>{e=Math.round(e),i=Math.round(i);const n=document.createElement("canvas");n.width=e,n.height=i;const o=n.getContext("2d");return s>=5&&s<=8&&([e,i]=[i,e]),((t,e,i,s)=>{-1!==s&&t.transform.apply(t,Zf[s](e,i))})(o,e,i,s),o.drawImage(t,0,0,e,i),n},Jf=t=>/^image/.test(t.type)&&!/svg/.test(t.type),tg=t=>{const e=Math.min(10/t.width,10/t.height),i=document.createElement("canvas"),s=i.getContext("2d"),n=i.width=Math.ceil(t.width*e),o=i.height=Math.ceil(t.height*e);s.drawImage(t,0,0,n,o);let r=null;try{r=s.getImageData(0,0,n,o).data}catch(t){return null}const c=r.length;let h=0,d=0,u=0,p=0;for(;p<c;p+=4)h+=r[p]*r[p],d+=r[p+1]*r[p+1],u+=r[p+2]*r[p+2];return h=eg(h,c),d=eg(d,c),u=eg(u,c),{r:h,g:d,b:u}},eg=(t,e)=>Math.floor(Math.sqrt(t/(e/4))),ig=(t,e)=>{(e=e||document.createElement("canvas")).width=t.width,e.height=t.height;return e.getContext("2d").drawImage(t,0,0),e},sg=t=>{const e=t.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:({root:t,props:e})=>{let i='<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">\n    <defs>\n        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">\n            <stop offset=\'50%\' stop-color=\'#000000\'/>\n            <stop offset=\'56%\' stop-color=\'#0a0a0a\'/>\n            <stop offset=\'63%\' stop-color=\'#262626\'/>\n            <stop offset=\'69%\' stop-color=\'#4f4f4f\'/>\n            <stop offset=\'75%\' stop-color=\'#808080\'/>\n            <stop offset=\'81%\' stop-color=\'#b1b1b1\'/>\n            <stop offset=\'88%\' stop-color=\'#dadada\'/>\n            <stop offset=\'94%\' stop-color=\'#f6f6f6\'/>\n            <stop offset=\'100%\' stop-color=\'#ffffff\'/>\n        </radialGradient>\n        <mask id="mask-__UID__">\n            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>\n        </mask>\n    </defs>\n    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>\n</svg>';if(document.querySelector("base")){const t=new URL(window.location.href.replace(window.location.hash,"")).href;i=i.replace(/url\(\#/g,"url("+t+"#")}Yf++,t.element.classList.add(`filepond--image-preview-overlay-${e.status}`),t.element.innerHTML=i.replace(/__UID__/g,Yf)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}});const i=(t=>t.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:Gf,scaleY:Gf,translateY:Gf,opacity:{type:"tween",duration:400}}},create:({root:e,props:i})=>{e.ref.clip=e.appendChildView(e.createChildView(Wf(t),{id:i.id,image:i.image,crop:i.crop,markup:i.markup,resize:i.resize,dirty:i.dirty,background:i.background}))},write:({root:t,props:e,shouldOptimize:i})=>{const{clip:s}=t.ref,{image:n,crop:o,markup:r,resize:c,dirty:h}=e;if(s.crop=o,s.markup=r,s.resize=c,s.dirty=h,s.opacity=i?0:1,i||t.rect.element.hidden)return;const d=n.height/n.width;let u=o.aspectRatio||d;const p=t.rect.inner.width,m=t.rect.inner.height;let b=t.query("GET_IMAGE_PREVIEW_HEIGHT");const v=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),y=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),E=t.query("GET_PANEL_ASPECT_RATIO"),x=t.query("GET_ALLOW_MULTIPLE");E&&!x&&(b=p*E,u=E);let w=null!==b?b:Math.max(v,Math.min(p*u,y)),S=w/u;S>p&&(S=p,w=S*u),w>m&&(w=m,S=m/u),s.width=S,s.height=w}}))(t),{createWorker:s}=t.utils,n=(t,e,i)=>new Promise((n=>{t.ref.imageData||(t.ref.imageData=i.getContext("2d").getImageData(0,0,i.width,i.height));const o=(t=>{let e;try{e=new ImageData(t.width,t.height)}catch(i){e=document.createElement("canvas").getContext("2d").createImageData(t.width,t.height)}return e.data.set(new Uint8ClampedArray(t.data)),e})(t.ref.imageData);if(!e||20!==e.length)return i.getContext("2d").putImageData(o,0,0),n();const r=s(Qf);r.post({imageData:o,colorMatrix:e},(t=>{i.getContext("2d").putImageData(t,0,0),r.terminate(),n()}),[o.data.buffer])})),o=({root:t,props:e,image:s})=>{const n=e.id,o=t.query("GET_ITEM",{id:n});if(!o)return;const r=o.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},c=t.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR");let h,d,u=!1;t.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(h=o.getMetadata("markup")||[],d=o.getMetadata("resize"),u=!0);const p=t.appendChildView(t.createChildView(i,{id:n,image:s,crop:r,resize:d,markup:h,dirty:u,background:c,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),t.childViews.length);t.ref.images.push(p),p.opacity=1,p.scaleX=1,p.scaleY=1,p.translateY=0,setTimeout((()=>{t.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:n})}),250)},r=({root:t})=>{t.ref.overlayShadow.opacity=1,t.ref.overlayError.opacity=0,t.ref.overlaySuccess.opacity=0},c=({root:t})=>{t.ref.overlayShadow.opacity=.25,t.ref.overlayError.opacity=1};return t.utils.createView({name:"image-preview-wrapper",create:({root:t})=>{t.ref.images=[],t.ref.imageData=null,t.ref.imageViewBin=[],t.ref.overlayShadow=t.appendChildView(t.createChildView(e,{opacity:0,status:"idle"})),t.ref.overlaySuccess=t.appendChildView(t.createChildView(e,{opacity:0,status:"success"})),t.ref.overlayError=t.appendChildView(t.createChildView(e,{opacity:0,status:"failure"}))},styles:["height"],apis:["height"],destroy:({root:t})=>{t.ref.images.forEach((t=>{t.image.width=1,t.image.height=1}))},didWriteView:({root:t})=>{t.ref.images.forEach((t=>{t.dirty=!1}))},write:t.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:({root:t})=>{const e=t.ref.images[t.ref.images.length-1];e.translateY=0,e.scaleX=1,e.scaleY=1,e.opacity=1},DID_IMAGE_PREVIEW_CONTAINER_CREATE:({root:t,props:e})=>{const{id:i}=e,s=t.query("GET_ITEM",i);if(!s)return;((t,e)=>{let i=new Image;i.onload=()=>{const t=i.naturalWidth,s=i.naturalHeight;i=null,e(t,s)},i.src=t})(URL.createObjectURL(s.file),((e,s)=>{t.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:i,width:e,height:s})}))},DID_FINISH_CALCULATE_PREVIEWSIZE:({root:t,props:e})=>{const{id:i}=e,r=t.query("GET_ITEM",i);if(!r)return;const c=URL.createObjectURL(r.file),h=()=>{var t;(t=c,new Promise(((e,i)=>{const s=new Image;s.crossOrigin="Anonymous",s.onload=()=>{e(s)},s.onerror=t=>{i(t)},s.src=t}))).then(d)},d=i=>{URL.revokeObjectURL(c);const s=(r.getMetadata("exif")||{}).orientation||-1;let{width:h,height:d}=i;if(!h||!d)return;s>=5&&s<=8&&([h,d]=[d,h]);const u=Math.max(1,.75*window.devicePixelRatio),p=t.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*u,m=d/h,b=t.rect.element.width,v=t.rect.element.height;let y=b,E=y*m;m>1?(y=Math.min(h,b*p),E=y*m):(E=Math.min(d,v*p),y=E/m);const x=Kf(i,y,E,s),w=()=>{const s=t.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?tg(data):null;r.setMetadata("color",s,!0),"close"in i&&i.close(),t.ref.overlayShadow.opacity=1,o({root:t,props:e,image:x})},S=r.getMetadata("filter");S?n(t,S,x).then(w):w()};if((t=>{const e=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./),i=e?parseInt(e[1]):null;return!(null!==i&&i<=58)&&"createImageBitmap"in window&&Jf(t)})(r.file)){const t=s(Xf);t.post({file:r.file},(e=>{t.terminate(),e?d(e):h()}))}else h()},DID_UPDATE_ITEM_METADATA:({root:t,props:e,action:i})=>{if(!/crop|filter|markup|resize/.test(i.change.key))return;if(!t.ref.images.length)return;const s=t.query("GET_ITEM",{id:e.id});if(s)if(/filter/.test(i.change.key)){const e=t.ref.images[t.ref.images.length-1];n(t,i.change.value,e.image)}else if(/crop|markup|resize/.test(i.change.key)){const i=s.getMetadata("crop"),n=t.ref.images[t.ref.images.length-1];if(i&&i.aspectRatio&&n.crop&&n.crop.aspectRatio&&Math.abs(i.aspectRatio-n.crop.aspectRatio)>1e-5){const i=(({root:t})=>{const e=t.ref.images.shift();return e.opacity=0,e.translateY=-15,t.ref.imageViewBin.push(e),e})({root:t});o({root:t,props:e,image:ig(i.image)})}else(({root:t,props:e})=>{const i=t.query("GET_ITEM",{id:e.id});if(!i)return;const s=t.ref.images[t.ref.images.length-1];s.crop=i.getMetadata("crop"),s.background=t.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),t.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(s.dirty=!0,s.resize=i.getMetadata("resize"),s.markup=i.getMetadata("markup"))})({root:t,props:e})}},DID_THROW_ITEM_LOAD_ERROR:c,DID_THROW_ITEM_PROCESSING_ERROR:c,DID_THROW_ITEM_INVALID:c,DID_COMPLETE_ITEM_PROCESSING:({root:t})=>{t.ref.overlayShadow.opacity=.25,t.ref.overlaySuccess.opacity=1},DID_START_ITEM_PROCESSING:r,DID_REVERT_ITEM_PROCESSING:r},(({root:t})=>{const e=t.ref.imageViewBin.filter((t=>0===t.opacity));t.ref.imageViewBin=t.ref.imageViewBin.filter((t=>t.opacity>0)),e.forEach((e=>((t,e)=>{t.removeChildView(e),e.image.width=1,e.image.height=1,e._destroy()})(t,e))),e.length=0}))})},ng=t=>{const{addFilter:e,utils:i}=t,{Type:s,createRoute:n,isFile:o}=i,r=sg(t);return e("CREATE_VIEW",(t=>{const{is:e,view:i,query:s}=t;if(!e("file")||!s("GET_ALLOW_IMAGE_PREVIEW"))return;const c=({root:t})=>{t.ref.shouldRescale=!0};i.registerWriter(n({DID_RESIZE_ROOT:c,DID_STOP_RESIZE:c,DID_LOAD_ITEM:({root:t,props:e})=>{const{id:n}=e,c=s("GET_ITEM",n);if(!c||!o(c.file)||c.archived)return;const h=c.file;if(!(t=>/^image/.test(t.type))(h))return;if(!s("GET_IMAGE_PREVIEW_FILTER_ITEM")(c))return;const d="createImageBitmap"in(window||{}),u=s("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!d&&u&&h.size>u)return;t.ref.imagePreview=i.appendChildView(i.createChildView(r,{id:n}));const p=t.query("GET_IMAGE_PREVIEW_HEIGHT");p&&t.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:c.id,height:p});const m=!d&&h.size>s("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");t.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:n},m)},DID_IMAGE_PREVIEW_CALCULATE_SIZE:({root:t,action:e})=>{t.ref.imageWidth=e.width,t.ref.imageHeight=e.height,t.ref.shouldRescale=!0,t.ref.shouldDrawPreview=!0,t.dispatch("KICK")},DID_UPDATE_ITEM_METADATA:({root:t,action:e})=>{"crop"===e.change.key&&(t.ref.shouldRescale=!0)}},(({root:t,props:e})=>{t.ref.imagePreview&&(t.rect.element.hidden||(t.ref.shouldRescale&&(((t,e)=>{if(!t.ref.imagePreview)return;let{id:i}=e;const s=t.query("GET_ITEM",{id:i});if(!s)return;const n=t.query("GET_PANEL_ASPECT_RATIO"),o=t.query("GET_ITEM_PANEL_ASPECT_RATIO"),r=t.query("GET_IMAGE_PREVIEW_HEIGHT");if(n||o||r)return;let{imageWidth:c,imageHeight:h}=t.ref;if(!c||!h)return;const d=t.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),u=t.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),p=(s.getMetadata("exif")||{}).orientation||-1;if(p>=5&&p<=8&&([c,h]=[h,c]),!Jf(s.file)||t.query("GET_IMAGE_PREVIEW_UPSCALE")){const t=2048/c;c*=t,h*=t}const m=h/c,b=(s.getMetadata("crop")||{}).aspectRatio||m;let v=Math.max(d,Math.min(h,u));const y=t.rect.element.width,E=Math.min(y*b,v);t.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:s.id,height:E})})(t,e),t.ref.shouldRescale=!1),t.ref.shouldDrawPreview&&(requestAnimationFrame((()=>{requestAnimationFrame((()=>{t.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:e.id})}))})),t.ref.shouldDrawPreview=!1)))})))})),{options:{allowImagePreview:[!0,s.BOOLEAN],imagePreviewFilterItem:[()=>!0,s.FUNCTION],imagePreviewHeight:[null,s.INT],imagePreviewMinHeight:[44,s.INT],imagePreviewMaxHeight:[256,s.INT],imagePreviewMaxFileSize:[null,s.INT],imagePreviewZoomFactor:[2,s.INT],imagePreviewUpscale:[!1,s.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,s.INT],imagePreviewTransparencyIndicator:[null,s.STRING],imagePreviewCalculateAverageImageColor:[!1,s.BOOLEAN],imagePreviewMarkupShow:[!0,s.BOOLEAN],imagePreviewMarkupFilter:[()=>!0,s.FUNCTION]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:ng}))
/*!
 * FilePondPluginMediaPreview 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit undefined for details.
 */;const og=t=>/^video/.test(t.type),rg=t=>/^audio/.test(t.type);class AudioPlayer{constructor(t,e){this.mediaEl=t,this.audioElems=e,this.onplayhead=!1,this.duration=0,this.timelineWidth=this.audioElems.timeline.offsetWidth-this.audioElems.playhead.offsetWidth,this.moveplayheadFn=this.moveplayhead.bind(this),this.registerListeners()}registerListeners(){this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1),this.mediaEl.addEventListener("canplaythrough",(()=>this.duration=this.mediaEl.duration),!1),this.audioElems.timeline.addEventListener("click",this.timelineClicked.bind(this),!1),this.audioElems.button.addEventListener("click",this.play.bind(this)),this.audioElems.playhead.addEventListener("mousedown",this.mouseDown.bind(this),!1),window.addEventListener("mouseup",this.mouseUp.bind(this),!1)}play(){this.mediaEl.paused?this.mediaEl.play():this.mediaEl.pause(),this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause")}timeUpdate(){let t=this.mediaEl.currentTime/this.duration*100;this.audioElems.playhead.style.marginLeft=t+"%",this.mediaEl.currentTime===this.duration&&(this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause"))}moveplayhead(t){let e=t.clientX-this.getPosition(this.audioElems.timeline);e>=0&&e<=this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=e+"px"),e<0&&(this.audioElems.playhead.style.marginLeft="0px"),e>this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=this.timelineWidth-4+"px")}timelineClicked(t){this.moveplayhead(t),this.mediaEl.currentTime=this.duration*this.clickPercent(t)}mouseDown(){this.onplayhead=!0,window.addEventListener("mousemove",this.moveplayheadFn,!0),this.mediaEl.removeEventListener("timeupdate",this.timeUpdate.bind(this),!1)}mouseUp(t){window.removeEventListener("mousemove",this.moveplayheadFn,!0),1==this.onplayhead&&(this.moveplayhead(t),this.mediaEl.currentTime=this.duration*this.clickPercent(t),this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1)),this.onplayhead=!1}clickPercent(t){return(t.clientX-this.getPosition(this.audioElems.timeline))/this.timelineWidth}getPosition(t){return t.getBoundingClientRect().left}}const ag=t=>t.utils.createView({name:"media-preview-wrapper",create:({root:e,props:i})=>{const s=(t=>t.utils.createView({name:"media-preview",tag:"div",ignoreRect:!0,create:({root:t,props:e})=>{const i=t.query("GET_ITEM",{id:e.id});let s=rg(i.file)?"audio":"video";if(t.ref.media=document.createElement(s),t.ref.media.setAttribute("controls",!0),t.element.appendChild(t.ref.media),rg(i.file)){let e=document.createDocumentFragment();t.ref.audio=[],t.ref.audio.container=document.createElement("div"),t.ref.audio.button=document.createElement("span"),t.ref.audio.timeline=document.createElement("div"),t.ref.audio.playhead=document.createElement("div"),t.ref.audio.container.className="audioplayer",t.ref.audio.button.className="playpausebtn play",t.ref.audio.timeline.className="timeline",t.ref.audio.playhead.className="playhead",t.ref.audio.timeline.appendChild(t.ref.audio.playhead),t.ref.audio.container.appendChild(t.ref.audio.button),t.ref.audio.container.appendChild(t.ref.audio.timeline),e.appendChild(t.ref.audio.container),t.element.appendChild(e)}},write:t.utils.createRoute({DID_MEDIA_PREVIEW_LOAD:({root:t,props:e})=>{const i=t.query("GET_ITEM",{id:e.id});if(!i)return;let s=window.URL||window.webkitURL,n=new Blob([i.file],{type:i.file.type});t.ref.media.type=i.file.type,t.ref.media.src=i.file.mock&&i.file.url||s.createObjectURL(n),rg(i.file)&&new AudioPlayer(t.ref.media,t.ref.audio),t.ref.media.addEventListener("loadeddata",(()=>{let s=75;if(og(i.file)){let e=t.ref.media.offsetWidth,i=t.ref.media.videoWidth/e;s=t.ref.media.videoHeight/i}t.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:e.id,height:s})}),!1)}})}))(t);e.ref.media=e.appendChildView(e.createChildView(s,{id:i.id}))},write:t.utils.createRoute({DID_MEDIA_PREVIEW_CONTAINER_CREATE:({root:t,props:e})=>{const{id:i}=e;t.query("GET_ITEM",i)&&t.dispatch("DID_MEDIA_PREVIEW_LOAD",{id:i})}})}),lg=t=>{const{addFilter:e,utils:i}=t,{Type:s,createRoute:n}=i,o=ag(t);return e("CREATE_VIEW",(t=>{const{is:e,view:i,query:s}=t;if(!e("file"))return;i.registerWriter(n({DID_LOAD_ITEM:({root:t,props:e})=>{const{id:n}=e,r=s("GET_ITEM",n),c=s("GET_ALLOW_VIDEO_PREVIEW"),h=s("GET_ALLOW_AUDIO_PREVIEW");r&&!r.archived&&(og(r.file)&&c||rg(r.file)&&h)&&(t.ref.mediaPreview=i.appendChildView(i.createChildView(o,{id:n})),t.dispatch("DID_MEDIA_PREVIEW_CONTAINER_CREATE",{id:n}))}},(({root:t,props:e})=>{const{id:i}=e,n=s("GET_ITEM",i),o=t.query("GET_ALLOW_VIDEO_PREVIEW"),r=t.query("GET_ALLOW_AUDIO_PREVIEW");n&&(og(n.file)&&o||rg(n.file)&&r)&&t.rect.element.hidden})))})),{options:{allowVideoPreview:[!0,s.BOOLEAN],allowAudioPreview:[!0,s.BOOLEAN]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:lg}))
/*!
 * FilePondPluginPdfPreview 1.0.2
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit undefined for details.
 */;const cg=t=>/pdf$/.test(t.type),hg=t=>t.utils.createView({name:"pdf-preview-wrapper",create:({root:e,props:i})=>{const s=(t=>t.utils.createView({name:"pdf-preview",tag:"div",ignoreRect:!0,create:({root:t,props:e})=>{const i=t.query("GET_ITEM",{id:e.id});if(cg(i.file)){const e=t.query("GET_PDF_PREVIEW_HEIGHT");t.ref.pdf=document.createElement("object"),t.ref.pdf.setAttribute("height",e),t.ref.pdf.setAttribute("width","100%"),t.ref.pdf.setAttribute("style","position:absolute;left:0;right:0;margin:auto;padding-top:unset;"+(e?"height:"+e+"px;":"")),t.element.appendChild(t.ref.pdf)}},write:t.utils.createRoute({DID_PDF_PREVIEW_LOAD:({root:t,props:e})=>{const{id:i}=e,s=t.query("GET_ITEM",{id:i});if(!s)return;let n=window.URL||window.webkitURL,o=new Blob([s.file],{type:s.file.type});if(t.ref.pdf.type=s.file.type,cg(s.file)){const e=t.query("GET_PDF_COMPONENT_EXTRA_PARAMS");t.ref.pdf.data=n.createObjectURL(o)+(e?"#?"+e:"")}t.ref.pdf.addEventListener("load",(()=>{cg(s.file)&&t.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i,height:t.ref.pdf.scrollHeight})}),!1)}})}))(t);e.ref.pdf=e.appendChildView(e.createChildView(s,{id:i.id}))},write:t.utils.createRoute({DID_PDF_PREVIEW_CONTAINER_CREATE:({root:t,props:e})=>{const{id:i}=e;t.query("GET_ITEM",i)&&t.dispatch("DID_PDF_PREVIEW_LOAD",{id:i})}})}),dg=t=>{const{addFilter:e,utils:i}=t,{Type:s,createRoute:n}=i,o=hg(t);return e("CREATE_VIEW",(t=>{const{is:e,view:i,query:s}=t;if(!e("file"))return;i.registerWriter(n({DID_LOAD_ITEM:({root:t,props:e})=>{const{id:n}=e,r=s("GET_ITEM",n);r&&!r.archived&&cg(r.file)&&(t.ref.pdfPreview=i.appendChildView(i.createChildView(o,{id:n})),t.dispatch("DID_PDF_PREVIEW_CONTAINER_CREATE",{id:n}))}},(({root:t,props:e})=>{const{id:i}=e,n=s("GET_ITEM",i);cg(n.file)&&t.rect.element.hidden})))})),{options:{allowPdfPreview:[!0,s.BOOLEAN],pdfPreviewHeight:[320,s.INT],pdfComponentExtraParams:["toolbar=0&navpanes=0&scrollbar=0&statusbar=0&zoom=0&messages=0&view=fitH&page=1",s.STRING]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:dg}));
/*!
 * FilePondPluginImageExifOrientation 1.0.11
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */const ug=65496,pg=65505,fg=1165519206,gg=18761,mg=274,bg=65280,vg=(t,e,i=!1)=>t.getUint16(e,i),yg=(t,e,i=!1)=>t.getUint32(e,i);let Eg;const _g="undefined"!=typeof window&&void 0!==window.document?new Image:{};_g.onload=()=>Eg=_g.naturalWidth>_g.naturalHeight,_g.src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";const xg=({addFilter:t,utils:e})=>{const{Type:i,isFile:s}=e;return t("DID_LOAD_ITEM",((t,{query:e})=>new Promise(((i,n)=>{const o=t.file;if(!(s(o)&&(t=>/^image\/jpeg/.test(t.type))(o)&&e("GET_ALLOW_IMAGE_EXIF_ORIENTATION")&&Eg))return i(t);(t=>new Promise(((e,i)=>{const s=new FileReader;s.onload=function(t){const i=new DataView(t.target.result);if(vg(i,0)!==ug)return void e(-1);const s=i.byteLength;let n=2;for(;n<s;){const t=vg(i,n);if(n+=2,t===pg){if(yg(i,n+=2)!==fg)break;const t=vg(i,n+=6)===gg;n+=yg(i,n+4,t);const s=vg(i,n,t);n+=2;for(let o=0;o<s;o++)if(vg(i,n+12*o,t)===mg)return void e(vg(i,n+12*o+8,t))}else{if((t&bg)!==bg)break;n+=vg(i,n)}}e(-1)},s.readAsArrayBuffer(t.slice(0,65536))})))(o).then((e=>{t.setMetadata("exif",{orientation:e}),i(t)}))})))),{options:{allowImageExifOrientation:[!0,i.BOOLEAN]}}};"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:xg})),mf(yf),mf(Ef),mf(ng),mf(lg),mf(dg),mf(xg),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll('input[type="file"]').forEach((t=>{const e=uf(t,{server:{load:async(t,e,i)=>{const s=window?.Engine?.site?.url;try{const i=await fetch(`${s}/${t}`);e(await i.blob())}catch(t){i(t.message)}}},files:(()=>{const e=[];if(!t.hasAttribute("data-value"))return e;const i=t.getAttribute("data-value");if(!i||!i.length)return e;try{(t.multiple?JSON.parse(i):[i]).forEach((t=>{e.push({source:t,options:{type:"local"}})}))}catch(t){}return e})(),storeAsFile:!0,instantUpload:!1,allowProcess:!1,allowRevert:!1,allowReorder:!0,dropOnPage:!0,dropOnElement:!1,allowImagePreview:"false"!=t.getAttribute("data-preview"),maxFileSize:t.hasAttribute("data-max-size")?t.getAttribute("data-max-size"):null,maxTotalFileSize:t.hasAttribute("data-max-total-size")?t.getAttribute("data-max-total-size"):null,maxFiles:t.hasAttribute("data-max-files")?parseInt(t.getAttribute("data-max-files"),10):null,styleItemPanelAspectRatio:t.hasAttribute("data-aspect-ratio")?parseFloat(t.getAttribute("data-aspect-ratio")):.5625,credits:!1});window?.Engine?.translation?.filepond&&e.setOptions(window.Engine.translation.filepond),t.hasAttribute("data-placeholder")&&e.setOptions({labelIdle:t.getAttribute("data-placeholder")}),t.instance=e})),document.addEventListener("FilePond:updatefiles",(t=>{const e=t.target.querySelector('[type="file"]');if(!e)return!1;if(e.validity.valid){const t=e.closest(".form__column");if(t)return t.classList.remove("form__column_invalid"),t.classList.add("form__column_valid"),!0;e.classList.remove("invalid"),e.classList.add("valid")}else{const t=e.closest(".form__column");if(t)return t.classList.remove("form__column_valid"),t.classList.add("form__column_invalid"),!0;e.classList.remove("valid"),e.classList.add("invalid")}}))}));var wg=Object.defineProperty,Tg=(t,e,i)=>((t,e,i)=>e in t?wg(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i)(t,"symbol"!=typeof e?e+"":e,i);const Ag={"#":{pattern:/[0-9]/},"@":{pattern:/[a-zA-Z]/},"*":{pattern:/[a-zA-Z0-9]/}},Sg=(t,e,i)=>t.replaceAll(e,"").replace(i,".").replace("..",".").replace(/[^.\d]/g,""),Og=(t,e,i)=>{var s;return new Intl.NumberFormat((null==(s=i.number)?void 0:s.locale)??"en",{minimumFractionDigits:t,maximumFractionDigits:e,roundingMode:"trunc"})};class T{constructor(t={}){Tg(this,"opts",{}),Tg(this,"memo",new Map);const e={...t};if(null!=e.tokens){e.tokens=e.tokensReplace?{...e.tokens}:{...Ag,...e.tokens};for(const t of Object.values(e.tokens))"string"==typeof t.pattern&&(t.pattern=new RegExp(t.pattern))}else e.tokens=Ag;Array.isArray(e.mask)&&(e.mask.length>1?e.mask=[...e.mask].sort(((t,e)=>t.length-e.length)):e.mask=e.mask[0]??""),""===e.mask&&(e.mask=null),this.opts=e}masked(t){return this.process(t,this.findMask(t))}unmasked(t){return this.process(t,this.findMask(t),!1)}isEager(){return!0===this.opts.eager}isReversed(){return!0===this.opts.reversed}completed(t){const e=this.findMask(t);if(null==this.opts.mask||null==e)return!1;const i=this.process(t,e).length;return"string"==typeof this.opts.mask?i>=this.opts.mask.length:i>=e.length}findMask(t){const e=this.opts.mask;if(null==e)return null;if("string"==typeof e)return e;if("function"==typeof e)return e(t);const i=this.process(t,e.slice(-1).pop()??"",!1);return e.find((e=>this.process(t,e,!1).length>=i.length))??""}escapeMask(t){const e=[],i=[];return t.split("").forEach(((s,n)=>{"!"===s&&"!"!==t[n-1]?i.push(n-i.length):e.push(s)})),{mask:e.join(""),escaped:i}}process(t,e,i=!0){if(null!=this.opts.number)return((t,e=!0,i)=>{var s,n,o,r;const c=null==(null==(s=i.number)?void 0:s.unsigned)&&t.startsWith("-")?"-":"",h=(null==(n=i.number)?void 0:n.fraction)??0;let d=Og(0,h,i);const u=d.formatToParts(1000.12),p=(null==(o=u.find((t=>"group"===t.type)))?void 0:o.value)??" ",m=(null==(r=u.find((t=>"decimal"===t.type)))?void 0:r.value)??".",b=Sg(t,p,m);if(Number.isNaN(parseFloat(b)))return c;const v=b.split(".");if(null!=v[1]&&v[1].length>=1){const t=v[1].length<=h?v[1].length:h;d=Og(t,h,i)}let y=d.format(parseFloat(b));return e?h>0&&b.endsWith(".")&&!b.slice(0,-1).includes(".")&&(y+=m):y=Sg(y,p,m),c+y})(t,i,this.opts);if(null==e)return t;const s=`v=${t},mr=${e},m=${i?1:0}`;if(this.memo.has(s))return this.memo.get(s);const{mask:n,escaped:o}=this.escapeMask(e),r=[],c=null!=this.opts.tokens?this.opts.tokens:{},h=this.isReversed()?-1:1,d=this.isReversed()?"unshift":"push",u=this.isReversed()?0:n.length-1,p=this.isReversed()?()=>y>-1&&E>-1:()=>y<n.length&&E<t.length,m=t=>!this.isReversed()&&t<=u||this.isReversed()&&t>=u;let b,v=-1,y=this.isReversed()?n.length-1:0,E=this.isReversed()?t.length-1:0,x=!1;for(;p();){const e=n.charAt(y),s=c[e],p=null!=(null==s?void 0:s.transform)?s.transform(t.charAt(E)):t.charAt(E);if(o.includes(y)||null==s?(i&&!this.isEager()&&r[d](e),p!==e||this.isEager()?b=e:E+=h,this.isEager()||(y+=h)):(null!=p.match(s.pattern)?(r[d](p),s.repeated?(-1===v?v=y:y===u&&y!==v&&(y=v-h),u===v&&(y-=h)):s.multiple&&(x=!0,y-=h),y+=h):s.multiple?x&&(y+=h,E-=h,x=!1):p===b?b=void 0:s.optional&&(y+=h,E-=h),E+=h),this.isEager())for(;m(y)&&(null==c[n.charAt(y)]||o.includes(y));){if(i){if(r[d](n.charAt(y)),t.charAt(E)===n.charAt(y)){y+=h,E+=h;continue}}else n.charAt(y)===t.charAt(E)&&(E+=h);y+=h}}return this.memo.set(s,r.join("")),this.memo.get(s)}}const Dg=t=>JSON.parse(t.replaceAll("'",'"')),Cg=(t,e={})=>{const i={...e};null!=t.dataset.maska&&""!==t.dataset.maska&&(i.mask=Mg(t.dataset.maska)),null!=t.dataset.maskaEager&&(i.eager=Ig(t.dataset.maskaEager)),null!=t.dataset.maskaReversed&&(i.reversed=Ig(t.dataset.maskaReversed)),null!=t.dataset.maskaTokensReplace&&(i.tokensReplace=Ig(t.dataset.maskaTokensReplace)),null!=t.dataset.maskaTokens&&(i.tokens=Lg(t.dataset.maskaTokens));const s={};return null!=t.dataset.maskaNumberLocale&&(s.locale=t.dataset.maskaNumberLocale),null!=t.dataset.maskaNumberFraction&&(s.fraction=parseInt(t.dataset.maskaNumberFraction)),null!=t.dataset.maskaNumberUnsigned&&(s.unsigned=Ig(t.dataset.maskaNumberUnsigned)),(null!=t.dataset.maskaNumber||Object.values(s).length>0)&&(i.number=s),i},Ig=t=>""===t||!!JSON.parse(t),Mg=t=>t.startsWith("[")&&t.endsWith("]")?Dg(t):t,Lg=t=>{if(t.startsWith("{")&&t.endsWith("}"))return Dg(t);const e={};return t.split("|").forEach((t=>{const i=t.split(":");e[i[0]]={pattern:new RegExp(i[1]),optional:"optional"===i[2],multiple:"multiple"===i[2],repeated:"repeated"===i[2]}})),e};class L{constructor(t,e={}){Tg(this,"items",new Map),Tg(this,"onInput",(t=>{if(t instanceof CustomEvent&&"input"===t.type&&!t.isTrusted)return;const e=t.target,i=this.items.get(e),s="inputType"in t&&t.inputType.startsWith("delete"),n=i.isEager(),o=s&&n&&""===i.unmasked(e.value)?"":e.value;this.fixCursor(e,s,(()=>this.setValue(e,o)))})),this.options=e,this.init(this.getInputs(t))}update(t={}){this.options={...t},this.init(Array.from(this.items.keys()))}updateValue(t){""!==t.value&&t.value!==this.processInput(t).masked&&this.setValue(t,t.value)}destroy(){for(const t of this.items.keys())t.removeEventListener("input",this.onInput);this.items.clear()}init(t){const e=this.getOptions(this.options);for(const i of t){this.items.has(i)||i.addEventListener("input",this.onInput,{capture:!0});const t=new T(Cg(i,e));this.items.set(i,t),queueMicrotask((()=>this.updateValue(i))),null===i.selectionStart&&t.isEager()&&console.warn("Maska: input of `%s` type is not supported",i.type)}}getInputs(t){return"string"==typeof t?Array.from(document.querySelectorAll(t)):"length"in t?Array.from(t):[t]}getOptions(t){const{onMaska:e,preProcess:i,postProcess:s,...n}=t;return n}fixCursor(t,e,i){const s=t.selectionStart,n=t.value;if(i(),null===s||s===n.length&&!e)return;const o=t.value,r=n.slice(0,s),c=o.slice(0,s),h=this.processInput(t,r).unmasked,d=this.processInput(t,c).unmasked;let u=s;r!==c&&(u+=e?o.length-n.length:h.length-d.length),t.setSelectionRange(u,u)}setValue(t,e){const i=this.processInput(t,e);t.value=i.masked,null!=this.options.onMaska&&(Array.isArray(this.options.onMaska)?this.options.onMaska.forEach((t=>t(i))):this.options.onMaska(i)),t.dispatchEvent(new CustomEvent("maska",{detail:i})),t.dispatchEvent(new CustomEvent("input",{detail:i.masked}))}processInput(t,e){const i=this.items.get(t);let s=e??t.value;null!=this.options.preProcess&&(s=this.options.preProcess(s));let n=i.masked(s);return null!=this.options.postProcess&&(n=this.options.postProcess(n)),{masked:n,unmasked:i.unmasked(s),completed:i.completed(s)}}}document.addEventListener("DOMContentLoaded",(()=>{new L("[data-maska]")}));var kg,Rg={exports:{}};var Pg=(kg||(kg=1,Rg.exports=function(){class CssClasses{constructor(t){t||(t={}),this.main=t.main||"ss-main",this.placeholder=t.placeholder||"ss-placeholder",this.values=t.values||"ss-values",this.single=t.single||"ss-single",this.max=t.max||"ss-max",this.value=t.value||"ss-value",this.valueText=t.valueText||"ss-value-text",this.valueDelete=t.valueDelete||"ss-value-delete",this.valueOut=t.valueOut||"ss-value-out",this.deselect=t.deselect||"ss-deselect",this.deselectPath=t.deselectPath||"M10,10 L90,90 M10,90 L90,10",this.arrow=t.arrow||"ss-arrow",this.arrowClose=t.arrowClose||"M10,30 L50,70 L90,30",this.arrowOpen=t.arrowOpen||"M10,70 L50,30 L90,70",this.content=t.content||"ss-content",this.openAbove=t.openAbove||"ss-open-above",this.openBelow=t.openBelow||"ss-open-below",this.search=t.search||"ss-search",this.searchHighlighter=t.searchHighlighter||"ss-search-highlight",this.searching=t.searching||"ss-searching",this.addable=t.addable||"ss-addable",this.addablePath=t.addablePath||"M50,10 L50,90 M10,50 L90,50",this.list=t.list||"ss-list",this.optgroup=t.optgroup||"ss-optgroup",this.optgroupLabel=t.optgroupLabel||"ss-optgroup-label",this.optgroupLabelText=t.optgroupLabelText||"ss-optgroup-label-text",this.optgroupActions=t.optgroupActions||"ss-optgroup-actions",this.optgroupSelectAll=t.optgroupSelectAll||"ss-selectall",this.optgroupSelectAllBox=t.optgroupSelectAllBox||"M60,10 L10,10 L10,90 L90,90 L90,50",this.optgroupSelectAllCheck=t.optgroupSelectAllCheck||"M30,45 L50,70 L90,10",this.optgroupClosable=t.optgroupClosable||"ss-closable",this.option=t.option||"ss-option",this.optionDelete=t.optionDelete||"M10,10 L90,90 M10,90 L90,10",this.highlighted=t.highlighted||"ss-highlighted",this.open=t.open||"ss-open",this.close=t.close||"ss-close",this.selected=t.selected||"ss-selected",this.error=t.error||"ss-error",this.disabled=t.disabled||"ss-disabled",this.hide=t.hide||"ss-hide"}}function t(){return Math.random().toString(36).substring(2,10)}function e(t,e){function i(t,i){return i&&t&&t.classList&&t.classList.contains(i)||i&&t&&t.dataset&&t.dataset.id&&t.dataset.id===e?t:null}function s(t,e){return t&&t!==document?i(t,e)?t:s(t.parentNode,e):null}return i(t,e)||s(t,e)}function i(t,e=50,i=!1){let s;return function(...n){const o=self,r=()=>{s=null,i||t.apply(o,n)},c=i&&!s;clearTimeout(s),s=setTimeout(r,e),c&&t.apply(o,n)}}function s(t,e){return JSON.stringify(t)===JSON.stringify(e)}function n(t){const e=t.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(t=>"-"+t.toLowerCase()));return t[0]===t[0].toUpperCase()?e.substring(1):e}class Optgroup{constructor(e){if(this.id=e.id&&""!==e.id?e.id:t(),this.label=e.label||"",this.selectAll=void 0!==e.selectAll&&e.selectAll,this.selectAllText=e.selectAllText||"Select All",this.closable=e.closable||"off",this.options=[],e.options)for(const t of e.options)this.options.push(new Option(t))}}class Option{constructor(e){this.id=e.id&&""!==e.id?e.id:t(),this.value=void 0===e.value?e.text:e.value,this.text=e.text||"",this.html=e.html||"",this.selected=void 0!==e.selected&&e.selected,this.display=void 0===e.display||e.display,this.disabled=void 0!==e.disabled&&e.disabled,this.mandatory=void 0!==e.mandatory&&e.mandatory,this.placeholder=void 0!==e.placeholder&&e.placeholder,this.class=e.class||"",this.style=e.style||"",this.data=e.data||{}}}class Store{constructor(t,e){this.selectType="single",this.data=[],this.selectedOrder=[],this.selectType=t,this.setData(e)}validateDataArray(t){if(!Array.isArray(t))return new Error("Data must be an array");for(let e of t)if(e instanceof Optgroup||"label"in e){if(!("label"in e))return new Error("Optgroup must have a label");if("options"in e&&e.options)for(let t of e.options){const e=this.validateOption(t);if(e)return e}}else{if(!(e instanceof Option||"text"in e))return new Error("Data object must be a valid optgroup or option");{const t=this.validateOption(e);if(t)return t}}return null}validateOption(t){return"text"in t?null:new Error("Option must have a text")}partialToFullData(t){let e=[];return t.forEach((t=>{if(t instanceof Optgroup||"label"in t){let i=[];"options"in t&&t.options&&t.options.forEach((t=>{i.push(new Option(t))})),i.length>0&&e.push(new Optgroup(t))}(t instanceof Option||"text"in t)&&e.push(new Option(t))})),e}setData(t){this.data=this.partialToFullData(t),"single"===this.selectType&&this.setSelectedBy("id",this.getSelected())}getData(){return this.filter(null,!0)}getDataOptions(){return this.filter(null,!1)}addOption(t,e=!1){if(e){let e=[new Option(t)];this.setData(e.concat(this.getData()))}else this.setData(this.getData().concat(new Option(t)))}setSelectedBy(t,e){let i=null,s=!1;const n=[];for(let o of this.data){if(o instanceof Optgroup)for(let r of o.options)i||(i=r),r.selected=!s&&e.includes(r[t]),r.selected&&(n.push(r),"single"===this.selectType&&(s=!0));o instanceof Option&&(i||(i=o),o.selected=!s&&e.includes(o[t]),o.selected&&(n.push(o),"single"===this.selectType&&(s=!0)))}"single"===this.selectType&&i&&!s&&(i.selected=!0,n.push(i));const o=e.map((e=>{var i;return(null===(i=n.find((i=>i[t]===e)))||void 0===i?void 0:i.id)||""}));this.selectedOrder=o}getSelected(){return this.getSelectedOptions().map((t=>t.id))}getSelectedValues(){return this.getSelectedOptions().map((t=>t.value))}getSelectedOptions(){return this.filter((t=>t.selected),!1)}getOptgroupByID(t){for(let e of this.data)if(e instanceof Optgroup&&e.id===t)return e;return null}getOptionByID(t){let e=this.filter((e=>e.id===t),!1);return e.length?e[0]:null}getSelectType(){return this.selectType}getFirstOption(){let t=null;for(let e of this.data)if(e instanceof Optgroup?t=e.options[0]:e instanceof Option&&(t=e),t)break;return t}search(t,e){return""===(t=t.trim())?this.getData():this.filter((i=>e(i,t)),!0)}filter(t,e){const i=[];return this.data.forEach((s=>{if(s instanceof Optgroup){let n=[];if(s.options.forEach((s=>{t&&!t(s)||(e?n.push(new Option(s)):i.push(new Option(s)))})),n.length>0){let t=new Optgroup(s);t.options=n,i.push(t)}}s instanceof Option&&(t&&!t(s)||i.push(new Option(s)))})),i}selectedOrderOptions(t){const e=[];return this.selectedOrder.forEach((i=>{const s=t.find((t=>t.id===i));s&&e.push(s)})),t.forEach((t=>{let i=!1;e.forEach((e=>{t.id!==e.id||(i=!0)})),i||e.push(t)})),e}}class Render{constructor(t,e,i,s){this.store=i,this.settings=t,this.classes=e,this.callbacks=s,this.main=this.mainDiv(),this.content=this.contentDiv(),this.updateClassStyles(),this.updateAriaAttributes(),this.settings.contentLocation.appendChild(this.content.main)}enable(){this.main.main.classList.remove(this.classes.disabled),this.content.search.input.disabled=!1}disable(){this.main.main.classList.add(this.classes.disabled),this.content.search.input.disabled=!0}open(){this.main.arrow.path.setAttribute("d",this.classes.arrowOpen),this.main.main.classList.add("up"===this.settings.openPosition?this.classes.openAbove:this.classes.openBelow),this.main.main.setAttribute("aria-expanded","true"),this.moveContent();const t=this.store.getSelectedOptions();if(t.length){const e=t[t.length-1].id,i=this.content.list.querySelector('[data-id="'+e+'"]');i&&this.ensureElementInView(this.content.list,i)}}close(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.remove(this.classes.openBelow),this.main.main.setAttribute("aria-expanded","false"),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.main.arrow.path.setAttribute("d",this.classes.arrowClose)}updateClassStyles(){if(this.main.main.className="",this.main.main.removeAttribute("style"),this.content.main.className="",this.content.main.removeAttribute("style"),this.main.main.classList.add(this.classes.main),this.content.main.classList.add(this.classes.content),""!==this.settings.style&&(this.main.main.style.cssText=this.settings.style,this.content.main.style.cssText=this.settings.style),this.settings.class.length)for(const t of this.settings.class)""!==t.trim()&&(this.main.main.classList.add(t.trim()),this.content.main.classList.add(t.trim()));"relative"===this.settings.contentPosition&&this.content.main.classList.add("ss-"+this.settings.contentPosition)}updateAriaAttributes(){this.main.main.role="combobox",this.main.main.setAttribute("aria-haspopup","listbox"),this.main.main.setAttribute("aria-controls",this.content.main.id),this.main.main.setAttribute("aria-expanded","false"),this.content.main.setAttribute("role","listbox")}mainDiv(){var t;const e=document.createElement("div");e.dataset.id=this.settings.id,e.setAttribute("aria-label",this.settings.ariaLabel),e.tabIndex=0,e.onkeydown=t=>{switch(t.key){case"ArrowUp":case"ArrowDown":return this.callbacks.open(),"ArrowDown"===t.key?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Enter":case" ":this.callbacks.open();const e=this.content.list.querySelector("."+this.classes.highlighted);return e&&e.click(),!1;case"Escape":return this.callbacks.close(),!1}return!0},e.onclick=t=>{this.settings.disabled||(this.settings.isOpen?this.callbacks.close():this.callbacks.open())};const i=document.createElement("div");i.classList.add(this.classes.values),e.appendChild(i);const s=document.createElement("div");s.classList.add(this.classes.deselect);const n=null===(t=this.store)||void 0===t?void 0:t.getSelectedOptions();!this.settings.allowDeselect||this.settings.isMultiple&&n&&n.length<=0?s.classList.add(this.classes.hide):s.classList.remove(this.classes.hide),s.onclick=t=>{if(t.stopPropagation(),this.settings.disabled)return;let e=!0;const i=this.store.getSelectedOptions(),s=[];if(this.callbacks.beforeChange&&(e=!0===this.callbacks.beforeChange(s,i)),e){if(this.settings.isMultiple)this.callbacks.setSelected([],!1),this.updateDeselectAll();else{const t=this.store.getFirstOption(),e=t?t.id:"";this.callbacks.setSelected(e,!1)}this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(this.store.getSelectedOptions())}};const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("viewBox","0 0 100 100");const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",this.classes.deselectPath),o.appendChild(r),s.appendChild(o),e.appendChild(s);const c=document.createElementNS("http://www.w3.org/2000/svg","svg");c.classList.add(this.classes.arrow),c.setAttribute("viewBox","0 0 100 100");const h=document.createElementNS("http://www.w3.org/2000/svg","path");return h.setAttribute("d",this.classes.arrowClose),this.settings.alwaysOpen&&c.classList.add(this.classes.hide),c.appendChild(h),e.appendChild(c),{main:e,values:i,deselect:{main:s,svg:o,path:r},arrow:{main:c,path:h}}}mainFocus(t){"click"!==t&&this.main.main.focus({preventScroll:!0})}placeholder(){const t=this.store.filter((t=>t.placeholder),!1);let e=this.settings.placeholderText;t.length&&(""!==t[0].html?e=t[0].html:""!==t[0].text&&(e=t[0].text));const i=document.createElement("div");return i.classList.add(this.classes.placeholder),i.innerHTML=e,i}renderValues(){this.settings.isMultiple?(this.renderMultipleValues(),this.updateDeselectAll()):this.renderSingleValue()}renderSingleValue(){const t=this.store.filter((t=>t.selected&&!t.placeholder),!1),e=t.length>0?t[0]:null;if(e){const t=document.createElement("div");t.classList.add(this.classes.single),e.html?t.innerHTML=e.html:t.innerText=e.text,this.main.values.innerHTML=t.outerHTML}else this.main.values.innerHTML=this.placeholder().outerHTML;this.settings.allowDeselect&&t.length?this.main.deselect.main.classList.remove(this.classes.hide):this.main.deselect.main.classList.add(this.classes.hide)}renderMultipleValues(){let t=this.main.values.childNodes,e=this.store.filter((t=>t.selected&&t.display),!1);if(0===e.length)return void(this.main.values.innerHTML=this.placeholder().outerHTML);{const t=this.main.values.querySelector("."+this.classes.placeholder);t&&t.remove()}if(e.length>this.settings.maxValuesShown){const t=document.createElement("div");return t.classList.add(this.classes.max),t.textContent=this.settings.maxValuesMessage.replace("{number}",e.length.toString()),void(this.main.values.innerHTML=t.outerHTML)}{const t=this.main.values.querySelector("."+this.classes.max);t&&t.remove()}this.settings.keepOrder&&(e=this.store.selectedOrderOptions(e));let i=[];for(let s=0;s<t.length;s++){const n=t[s],o=n.getAttribute("data-id");o&&(e.filter((t=>t.id===o),!1).length||i.push(n))}for(const t of i)t.classList.add(this.classes.valueOut),setTimeout((()=>{this.main.values.hasChildNodes()&&this.main.values.contains(t)&&this.main.values.removeChild(t)}),100);t=this.main.values.childNodes;for(let i=0;i<e.length;i++){let s=!0;for(let n=0;n<t.length;n++)e[i].id===String(t[n].dataset.id)&&(s=!1);s&&(this.settings.keepOrder||0===t.length?this.main.values.appendChild(this.multipleValue(e[i])):0===i?this.main.values.insertBefore(this.multipleValue(e[i]),t[i]):t[i-1].insertAdjacentElement("afterend",this.multipleValue(e[i])))}}multipleValue(t){const e=document.createElement("div");e.classList.add(this.classes.value),e.dataset.id=t.id;const i=document.createElement("div");if(i.classList.add(this.classes.valueText),i.textContent=t.text,e.appendChild(i),!t.mandatory){const i=document.createElement("div");i.classList.add(this.classes.valueDelete),i.onclick=e=>{if(e.preventDefault(),e.stopPropagation(),this.settings.disabled)return;let i=!0;const s=this.store.getSelectedOptions(),n=s.filter((e=>e.selected&&e.id!==t.id),!0);if(!(this.settings.minSelected&&n.length<this.settings.minSelected)&&(this.callbacks.beforeChange&&(i=!0===this.callbacks.beforeChange(n,s)),i)){let t=[];for(const e of n){if(e instanceof Optgroup)for(const i of e.options)t.push(i.id);e instanceof Option&&t.push(e.id)}this.callbacks.setSelected(t,!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(n),this.updateDeselectAll()}};const s=document.createElementNS("http://www.w3.org/2000/svg","svg");s.setAttribute("viewBox","0 0 100 100");const n=document.createElementNS("http://www.w3.org/2000/svg","path");n.setAttribute("d",this.classes.optionDelete),s.appendChild(n),i.appendChild(s),e.appendChild(i)}return e}contentDiv(){const t=document.createElement("div");t.dataset.id=this.settings.id;const e=this.searchDiv();t.appendChild(e.main);const i=this.listDiv();return t.appendChild(i),{main:t,search:e,list:i}}moveContent(){"relative"!==this.settings.contentPosition&&"down"!==this.settings.openPosition?"up"!==this.settings.openPosition?"up"===this.putContent()?this.moveContentAbove():this.moveContentBelow():this.moveContentAbove():this.moveContentBelow()}searchDiv(){const t=document.createElement("div"),e=document.createElement("input"),s=document.createElement("div");t.classList.add(this.classes.search);const n={main:t,input:e};if(this.settings.showSearch||(t.classList.add(this.classes.hide),e.readOnly=!0),e.type="search",e.placeholder=this.settings.searchPlaceholder,e.tabIndex=-1,e.setAttribute("aria-label",this.settings.searchPlaceholder),e.setAttribute("autocapitalize","off"),e.setAttribute("autocomplete","off"),e.setAttribute("autocorrect","off"),e.oninput=i((t=>{this.callbacks.search(t.target.value)}),100),e.onkeydown=t=>{switch(t.key){case"ArrowUp":case"ArrowDown":return"ArrowDown"===t.key?this.highlight("down"):this.highlight("up"),!1;case"Tab":return this.callbacks.close(),!0;case"Escape":return this.callbacks.close(),!1;case" ":const e=this.content.list.querySelector("."+this.classes.highlighted);return!e||(e.click(),!1);case"Enter":if(this.callbacks.addable)return s.click(),!1;{const t=this.content.list.querySelector("."+this.classes.highlighted);if(t)return t.click(),!1}return!0}return!0},t.appendChild(e),this.callbacks.addable){s.classList.add(this.classes.addable);const e=document.createElementNS("http://www.w3.org/2000/svg","svg");e.setAttribute("viewBox","0 0 100 100");const i=document.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d",this.classes.addablePath),e.appendChild(i),s.appendChild(e),s.onclick=t=>{if(t.preventDefault(),t.stopPropagation(),!this.callbacks.addable)return;const e=this.content.search.input.value.trim();if(""===e)return void this.content.search.input.focus();const i=t=>{let e=new Option(t);if(this.callbacks.addOption(e),this.settings.isMultiple){let t=this.store.getSelected();t.push(e.id),this.callbacks.setSelected(t,!0)}else this.callbacks.setSelected([e.id],!0);this.callbacks.search(""),this.settings.closeOnSelect&&setTimeout((()=>{this.callbacks.close()}),100)},s=this.callbacks.addable(e);!1!==s&&null!=s&&(s instanceof Promise?s.then((t=>{"string"==typeof t?i({text:t,value:t}):s instanceof Error?this.renderError(s.message):i(t)})):"string"==typeof s?i({text:s,value:s}):s instanceof Error?this.renderError(s.message):i(s))},t.appendChild(s),n.addable={main:s,svg:e,path:i}}return n}searchFocus(){this.content.search.input.focus()}getOptions(t=!1,e=!1,i=!1){let s="."+this.classes.option;return t&&(s+=":not(."+this.classes.placeholder+")"),e&&(s+=":not(."+this.classes.disabled+")"),i&&(s+=":not(."+this.classes.hide+")"),Array.from(this.content.list.querySelectorAll(s))}highlight(t){const e=this.getOptions(!0,!0,!0);if(0===e.length)return;if(1===e.length&&!e[0].classList.contains(this.classes.highlighted))return void e[0].classList.add(this.classes.highlighted);let i=!1;for(const t of e)t.classList.contains(this.classes.highlighted)&&(i=!0);if(!i)for(const t of e)if(t.classList.contains(this.classes.selected)){t.classList.add(this.classes.highlighted);break}for(let i=0;i<e.length;i++)if(e[i].classList.contains(this.classes.highlighted)){const s=e[i];s.classList.remove(this.classes.highlighted);const n=s.parentElement;if(n&&n.classList.contains(this.classes.open)){const t=n.querySelector("."+this.classes.optgroupLabel);t&&t.click()}let o=e["down"===t?i+1<e.length?i+1:0:i-1>=0?i-1:e.length-1];o.classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,o);const r=o.parentElement;if(r&&r.classList.contains(this.classes.close)){const t=r.querySelector("."+this.classes.optgroupLabel);t&&t.click()}return}e["down"===t?0:e.length-1].classList.add(this.classes.highlighted),this.ensureElementInView(this.content.list,e["down"===t?0:e.length-1])}listDiv(){const t=document.createElement("div");return t.classList.add(this.classes.list),t}renderError(t){this.content.list.innerHTML="";const e=document.createElement("div");e.classList.add(this.classes.error),e.textContent=t,this.content.list.appendChild(e)}renderSearching(){this.content.list.innerHTML="";const t=document.createElement("div");t.classList.add(this.classes.searching),t.textContent=this.settings.searchingText,this.content.list.appendChild(t)}renderOptions(t){if(this.content.list.innerHTML="",0===t.length){const t=document.createElement("div");return t.classList.add(this.classes.search),this.callbacks.addable?t.innerHTML=this.settings.addableText.replace("{value}",this.content.search.input.value):t.innerHTML=this.settings.searchText,void this.content.list.appendChild(t)}if(this.settings.allowDeselect&&!this.settings.isMultiple){const t=this.store.filter((t=>t.placeholder),!1);t.length||this.store.addOption(new Option({text:"",value:"",selected:!1,placeholder:!0}),!0)}for(const e of t){if(e instanceof Optgroup){const t=document.createElement("div");t.classList.add(this.classes.optgroup);const i=document.createElement("div");i.classList.add(this.classes.optgroupLabel),t.appendChild(i);const s=document.createElement("div");s.classList.add(this.classes.optgroupLabelText),s.textContent=e.label,i.appendChild(s);const n=document.createElement("div");if(n.classList.add(this.classes.optgroupActions),i.appendChild(n),this.settings.isMultiple&&e.selectAll){const t=document.createElement("div");t.classList.add(this.classes.optgroupSelectAll);let i=!0;for(const t of e.options)if(!t.selected){i=!1;break}i&&t.classList.add(this.classes.selected);const s=document.createElement("span");s.textContent=e.selectAllText,t.appendChild(s);const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("viewBox","0 0 100 100"),t.appendChild(o);const r=document.createElementNS("http://www.w3.org/2000/svg","path");r.setAttribute("d",this.classes.optgroupSelectAllBox),o.appendChild(r);const c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttribute("d",this.classes.optgroupSelectAllCheck),o.appendChild(c),t.addEventListener("click",(t=>{t.preventDefault(),t.stopPropagation();const s=this.store.getSelected();if(i){const t=s.filter((t=>{for(const i of e.options)if(t===i.id)return!1;return!0}));this.callbacks.setSelected(t,!0)}else{const t=s.concat(e.options.map((t=>t.id)));for(const t of e.options)this.store.getOptionByID(t.id)||this.callbacks.addOption(t);this.callbacks.setSelected(t,!0)}})),n.appendChild(t)}if("off"!==e.closable){const s=document.createElement("div");s.classList.add(this.classes.optgroupClosable);const o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("viewBox","0 0 100 100"),o.classList.add(this.classes.arrow),s.appendChild(o);const r=document.createElementNS("http://www.w3.org/2000/svg","path");o.appendChild(r),e.options.some((t=>t.selected))||""!==this.content.search.input.value.trim()?(s.classList.add(this.classes.open),r.setAttribute("d",this.classes.arrowOpen)):"open"===e.closable?(t.classList.add(this.classes.open),r.setAttribute("d",this.classes.arrowOpen)):"close"===e.closable&&(t.classList.add(this.classes.close),r.setAttribute("d",this.classes.arrowClose)),i.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),t.classList.contains(this.classes.close)?(t.classList.remove(this.classes.close),t.classList.add(this.classes.open),r.setAttribute("d",this.classes.arrowOpen)):(t.classList.remove(this.classes.open),t.classList.add(this.classes.close),r.setAttribute("d",this.classes.arrowClose))})),n.appendChild(s)}t.appendChild(i);for(const i of e.options)t.appendChild(this.option(i));this.content.list.appendChild(t)}e instanceof Option&&this.content.list.appendChild(this.option(e))}}option(t){if(t.placeholder){const t=document.createElement("div");return t.classList.add(this.classes.option),t.classList.add(this.classes.hide),t}const e=document.createElement("div");return e.dataset.id=t.id,e.id=t.id,e.classList.add(this.classes.option),e.setAttribute("role","option"),t.class&&t.class.split(" ").forEach((t=>{e.classList.add(t)})),t.style&&(e.style.cssText=t.style),this.settings.searchHighlight&&""!==this.content.search.input.value.trim()?e.innerHTML=this.highlightText(""!==t.html?t.html:t.text,this.content.search.input.value,this.classes.searchHighlighter):""!==t.html?e.innerHTML=t.html:e.textContent=t.text,this.settings.showOptionTooltips&&e.textContent&&e.setAttribute("title",e.textContent),t.display||e.classList.add(this.classes.hide),t.disabled&&e.classList.add(this.classes.disabled),t.selected&&this.settings.hideSelected&&e.classList.add(this.classes.hide),t.selected?(e.classList.add(this.classes.selected),e.setAttribute("aria-selected","true"),this.main.main.setAttribute("aria-activedescendant",e.id)):(e.classList.remove(this.classes.selected),e.setAttribute("aria-selected","false")),e.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation();const i=this.store.getSelected(),s=e.currentTarget,n=String(s.dataset.id);if(t.disabled||t.selected&&!this.settings.allowDeselect)return;if(this.settings.isMultiple&&this.settings.maxSelected<=i.length&&!t.selected||this.settings.isMultiple&&this.settings.minSelected>=i.length&&t.selected)return;let o=!1;const r=this.store.getSelectedOptions();let c=[];this.settings.isMultiple&&(c=t.selected?r.filter((t=>t.id!==n)):r.concat(t)),this.settings.isMultiple||(c=t.selected?[]:[t]),this.callbacks.beforeChange||(o=!0),this.callbacks.beforeChange&&(o=!1!==this.callbacks.beforeChange(c,r)),o&&(this.store.getOptionByID(n)||this.callbacks.addOption(t),this.callbacks.setSelected(c.map((t=>t.id)),!1),this.settings.closeOnSelect&&this.callbacks.close(),this.callbacks.afterChange&&this.callbacks.afterChange(c))})),e}destroy(){this.main.main.remove(),this.content.main.remove()}highlightText(t,e,i){let s=t;const n=new RegExp("(?![^<]*>)("+e.trim()+")(?![^<]*>[^<>]*</)","i");if(!t.match(n))return t;const o=t.match(n).index,r=o+t.match(n)[0].toString().length,c=t.substring(o,r);return s=s.replace(n,`<mark class="${i}">${c}</mark>`),s}moveContentAbove(){const t=this.main.main.offsetHeight,e=this.content.main.offsetHeight;this.main.main.classList.remove(this.classes.openBelow),this.main.main.classList.add(this.classes.openAbove),this.content.main.classList.remove(this.classes.openBelow),this.content.main.classList.add(this.classes.openAbove);const i=this.main.main.getBoundingClientRect();this.content.main.style.margin="-"+(t+e-1)+"px 0px 0px 0px",this.content.main.style.top=i.top+i.height+window.scrollY+"px",this.content.main.style.left=i.left+window.scrollX+"px",this.content.main.style.width=i.width+"px"}moveContentBelow(){this.main.main.classList.remove(this.classes.openAbove),this.main.main.classList.add(this.classes.openBelow),this.content.main.classList.remove(this.classes.openAbove),this.content.main.classList.add(this.classes.openBelow);const t=this.main.main.getBoundingClientRect();this.content.main.style.margin="-1px 0px 0px 0px","relative"!==this.settings.contentPosition&&(this.content.main.style.top=t.top+t.height+window.scrollY+"px",this.content.main.style.left=t.left+window.scrollX+"px",this.content.main.style.width=t.width+"px")}ensureElementInView(t,e){const i=t.scrollTop+t.offsetTop,s=i+t.clientHeight,n=e.offsetTop,o=n+e.clientHeight;n<i?t.scrollTop-=i-n:o>s&&(t.scrollTop+=o-s)}putContent(){const t=this.main.main.offsetHeight,e=this.main.main.getBoundingClientRect(),i=this.content.main.offsetHeight;return window.innerHeight-(e.top+t)<=i&&e.top>i?"up":"down"}updateDeselectAll(){if(!this.store||!this.settings)return;const t=this.store.getSelectedOptions(),e=t&&t.length>0,i=this.settings.isMultiple,s=this.settings.allowDeselect,n=this.main.deselect.main,o=this.classes.hide;!s||i&&!e?n.classList.add(o):n.classList.remove(o)}}class Select{constructor(t){this.listen=!1,this.observer=null,this.select=t,this.valueChange=this.valueChange.bind(this),this.select.addEventListener("change",this.valueChange,{passive:!0}),this.observer=new MutationObserver(this.observeCall.bind(this)),this.changeListen(!0)}enable(){this.select.disabled=!1}disable(){this.select.disabled=!0}hideUI(){this.select.tabIndex=-1,this.select.style.display="none",this.select.setAttribute("aria-hidden","true")}showUI(){this.select.removeAttribute("tabindex"),this.select.style.display="",this.select.removeAttribute("aria-hidden")}changeListen(t){this.listen=t,t&&this.observer&&this.observer.observe(this.select,{subtree:!0,childList:!0,attributes:!0}),t||this.observer&&this.observer.disconnect()}valueChange(t){return this.listen&&this.onValueChange&&this.onValueChange(this.getSelectedOptions()),!0}observeCall(t){if(!this.listen)return;let e=!1,i=!1,s=!1;for(const n of t){if(n.target===this.select&&("disabled"===n.attributeName&&(i=!0),"class"===n.attributeName&&(e=!0),"childList"===n.type)){for(const t of n.addedNodes)if("OPTION"===t.nodeName&&t.value===this.select.value){this.select.dispatchEvent(new Event("change"));break}s=!0}"OPTGROUP"!==n.target.nodeName&&"OPTION"!==n.target.nodeName||(s=!0)}e&&this.onClassChange&&this.onClassChange(this.select.className.split(" ")),i&&this.onDisabledChange&&(this.changeListen(!1),this.onDisabledChange(this.select.disabled),this.changeListen(!0)),s&&this.onOptionsChange&&(this.changeListen(!1),this.onOptionsChange(this.getData()),this.changeListen(!0))}getData(){let t=[];const e=this.select.childNodes;for(const i of e)"OPTGROUP"===i.nodeName&&t.push(this.getDataFromOptgroup(i)),"OPTION"===i.nodeName&&t.push(this.getDataFromOption(i));return t}getDataFromOptgroup(t){let e={id:t.id,label:t.label,selectAll:!!t.dataset&&"true"===t.dataset.selectall,selectAllText:t.dataset?t.dataset.selectalltext:"Select all",closable:t.dataset?t.dataset.closable:"off",options:[]};const i=t.childNodes;for(const t of i)"OPTION"===t.nodeName&&e.options.push(this.getDataFromOption(t));return e}getDataFromOption(t){return{id:t.id,value:t.value,text:t.text,html:t.dataset&&t.dataset.html?t.dataset.html:"",selected:t.selected,display:"none"!==t.style.display,disabled:t.disabled,mandatory:!!t.dataset&&"true"===t.dataset.mandatory,placeholder:"true"===t.dataset.placeholder,class:t.className,style:t.style.cssText,data:t.dataset}}getSelectedOptions(){let t=[];const e=this.select.childNodes;for(const i of e){if("OPTGROUP"===i.nodeName){const e=i.childNodes;for(const i of e)if("OPTION"===i.nodeName){const e=i;e.selected&&t.push(this.getDataFromOption(e))}}if("OPTION"===i.nodeName){const e=i;e.selected&&t.push(this.getDataFromOption(e))}}return t}getSelectedValues(){return this.getSelectedOptions().map((t=>t.value))}setSelected(t){this.changeListen(!1);const e=this.select.childNodes;for(const i of e){if("OPTGROUP"===i.nodeName){const e=i.childNodes;for(const i of e)if("OPTION"===i.nodeName){const e=i;e.selected=t.includes(e.id)}}if("OPTION"===i.nodeName){const e=i;e.selected=t.includes(e.id)}}this.changeListen(!0)}setSelectedByValue(t){this.changeListen(!1);const e=this.select.childNodes;for(const i of e){if("OPTGROUP"===i.nodeName){const e=i.childNodes;for(const i of e)if("OPTION"===i.nodeName){const e=i;e.selected=t.includes(e.value)}}if("OPTION"===i.nodeName){const e=i;e.selected=t.includes(e.value)}}this.changeListen(!0)}updateSelect(t,e,i){this.changeListen(!1),t&&(this.select.dataset.id=t),e&&(this.select.style.cssText=e),i&&(this.select.className="",i.forEach((t=>{""!==t.trim()&&this.select.classList.add(t.trim())}))),this.changeListen(!0)}updateOptions(t){this.changeListen(!1),this.select.innerHTML="";for(const e of t)e instanceof Optgroup&&this.select.appendChild(this.createOptgroup(e)),e instanceof Option&&this.select.appendChild(this.createOption(e));this.select.dispatchEvent(new Event("change",{bubbles:!0})),this.changeListen(!0)}createOptgroup(t){const e=document.createElement("optgroup");if(e.id=t.id,e.label=t.label,t.selectAll&&(e.dataset.selectAll="true"),"off"!==t.closable&&(e.dataset.closable=t.closable),t.options)for(const i of t.options)e.appendChild(this.createOption(i));return e}createOption(t){const e=document.createElement("option");return e.id=t.id,e.value=t.value,e.innerHTML=t.text,""!==t.html&&e.setAttribute("data-html",t.html),t.selected&&(e.selected=t.selected),t.disabled&&(e.disabled=!0),t.display||(e.style.display="none"),t.placeholder&&e.setAttribute("data-placeholder","true"),t.mandatory&&e.setAttribute("data-mandatory","true"),t.class&&t.class.split(" ").forEach((t=>{e.classList.add(t)})),t.data&&"object"==typeof t.data&&Object.keys(t.data).forEach((i=>{e.setAttribute("data-"+n(i),t.data[i])})),e}destroy(){this.changeListen(!1),this.select.removeEventListener("change",this.valueChange),this.observer&&(this.observer.disconnect(),this.observer=null),delete this.select.dataset.id,this.showUI()}}class Settings{constructor(e){this.id="",this.style="",this.class=[],this.isMultiple=!1,this.isOpen=!1,this.isFullOpen=!1,this.intervalMove=null,e||(e={}),this.id="ss-"+t(),this.style=e.style||"",this.class=e.class||[],this.disabled=void 0!==e.disabled&&e.disabled,this.alwaysOpen=void 0!==e.alwaysOpen&&e.alwaysOpen,this.showSearch=void 0===e.showSearch||e.showSearch,this.focusSearch=void 0===e.focusSearch||e.focusSearch,this.ariaLabel=e.ariaLabel||"Combobox",this.searchPlaceholder=e.searchPlaceholder||"Search",this.searchText=e.searchText||"No Results",this.searchingText=e.searchingText||"Searching...",this.searchHighlight=void 0!==e.searchHighlight&&e.searchHighlight,this.closeOnSelect=void 0===e.closeOnSelect||e.closeOnSelect,this.contentLocation=e.contentLocation||document.body,this.contentPosition=e.contentPosition||"absolute",this.openPosition=e.openPosition||"auto",this.placeholderText=void 0!==e.placeholderText?e.placeholderText:"Select Value",this.allowDeselect=void 0!==e.allowDeselect&&e.allowDeselect,this.hideSelected=void 0!==e.hideSelected&&e.hideSelected,this.keepOrder=void 0!==e.keepOrder&&e.keepOrder,this.showOptionTooltips=void 0!==e.showOptionTooltips&&e.showOptionTooltips,this.minSelected=e.minSelected||0,this.maxSelected=e.maxSelected||1e3,this.timeoutDelay=e.timeoutDelay||200,this.maxValuesShown=e.maxValuesShown||20,this.maxValuesMessage=e.maxValuesMessage||"{number} selected",this.addableText=e.addableText||'Press "Enter" to add {value}'}}class SlimSelect{constructor(t){var s;if(this.events={search:void 0,searchFilter:(t,e)=>-1!==t.text.toLowerCase().indexOf(e.toLowerCase()),addable:void 0,beforeChange:void 0,afterChange:void 0,beforeOpen:void 0,afterOpen:void 0,beforeClose:void 0,afterClose:void 0},this.windowResize=i((()=>{(this.settings.isOpen||this.settings.isFullOpen)&&this.render.moveContent()})),this.windowScroll=i((()=>{(this.settings.isOpen||this.settings.isFullOpen)&&this.render.moveContent()})),this.documentClick=t=>{this.settings.isOpen&&t.target&&!e(t.target,this.settings.id)&&this.close(t.type)},this.windowVisibilityChange=()=>{document.hidden&&this.close()},this.selectEl="string"==typeof t.select?document.querySelector(t.select):t.select,!this.selectEl)return void(t.events&&t.events.error&&t.events.error(new Error("Could not find select element")));if("SELECT"!==this.selectEl.tagName)return void(t.events&&t.events.error&&t.events.error(new Error("Element isnt of type select")));this.selectEl.dataset.ssid&&this.destroy(),this.settings=new Settings(t.settings),this.cssClasses=new CssClasses(t.cssClasses);const n=["afterChange","beforeOpen","afterOpen","beforeClose","afterClose"];for(const e in t.events)t.events.hasOwnProperty(e)&&(-1!==n.indexOf(e)?this.events[e]=i(t.events[e],100):this.events[e]=t.events[e]);this.settings.disabled=(null===(s=t.settings)||void 0===s?void 0:s.disabled)?t.settings.disabled:this.selectEl.disabled,this.settings.isMultiple=this.selectEl.multiple,this.settings.style=this.selectEl.style.cssText,this.settings.class=this.selectEl.className.split(" "),this.select=new Select(this.selectEl),this.select.updateSelect(this.settings.id,this.settings.style,this.settings.class),this.select.hideUI(),this.select.onValueChange=t=>{this.setSelected(t.map((t=>t.id)))},this.select.onClassChange=t=>{this.settings.class=t,this.render.updateClassStyles()},this.select.onDisabledChange=t=>{t?this.disable():this.enable()},this.select.onOptionsChange=t=>{this.setData(t)},this.store=new Store(this.settings.isMultiple?"multiple":"single",t.data?t.data:this.select.getData()),t.data&&this.select.updateOptions(this.store.getData());const o={open:this.open.bind(this),close:this.close.bind(this),addable:this.events.addable?this.events.addable:void 0,setSelected:this.setSelected.bind(this),addOption:this.addOption.bind(this),search:this.search.bind(this),beforeChange:this.events.beforeChange,afterChange:this.events.afterChange};this.render=new Render(this.settings,this.cssClasses,this.store,o),this.render.renderValues(),this.render.renderOptions(this.store.getData());const r=this.selectEl.getAttribute("aria-label"),c=this.selectEl.getAttribute("aria-labelledby");r?this.render.main.main.setAttribute("aria-label",r):c&&this.render.main.main.setAttribute("aria-labelledby",c),this.selectEl.parentNode&&this.selectEl.parentNode.insertBefore(this.render.main.main,this.selectEl.nextSibling),window.addEventListener("resize",this.windowResize,!1),"auto"===this.settings.openPosition&&window.addEventListener("scroll",this.windowScroll,!1),document.addEventListener("visibilitychange",this.windowVisibilityChange),this.settings.disabled&&this.disable(),this.settings.alwaysOpen&&this.open(),this.selectEl.slim=this}enable(){this.settings.disabled=!1,this.select.enable(),this.render.enable()}disable(){this.settings.disabled=!0,this.select.disable(),this.render.disable()}getData(){return this.store.getData()}setData(t){const e=this.store.getSelected(),i=this.store.validateDataArray(t);if(i)return void(this.events.error&&this.events.error(i));this.store.setData(t);const n=this.store.getData();this.select.updateOptions(n),this.render.renderValues(),this.render.renderOptions(n),this.events.afterChange&&!s(e,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}getSelected(){let t=this.store.getSelectedOptions();return this.settings.keepOrder&&(t=this.store.selectedOrderOptions(t)),t.map((t=>t.value))}setSelected(t,e=!0){const i=this.store.getSelected(),n=this.store.getDataOptions();t=Array.isArray(t)?t:[t];const o=[];for(const e of t)if(n.find((t=>t.id==e)))o.push(e);else for(const t of n.filter((t=>t.value==e)))o.push(t.id);this.store.setSelectedBy("id",o);const r=this.store.getData();this.select.updateOptions(r),this.render.renderValues(),""!==this.render.content.search.input.value?this.search(this.render.content.search.input.value):this.render.renderOptions(r),e&&this.events.afterChange&&!s(i,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}addOption(t){const e=this.store.getSelected();this.store.getDataOptions().some((e=>{var i;return e.value===(null!==(i=t.value)&&void 0!==i?i:t.text)}))||this.store.addOption(t);const i=this.store.getData();this.select.updateOptions(i),this.render.renderValues(),this.render.renderOptions(i),this.events.afterChange&&!s(e,this.store.getSelected())&&this.events.afterChange(this.store.getSelectedOptions())}open(){this.settings.disabled||this.settings.isOpen||(this.events.beforeOpen&&this.events.beforeOpen(),this.render.open(),this.settings.showSearch&&this.settings.focusSearch&&this.render.searchFocus(),this.settings.isOpen=!0,setTimeout((()=>{this.events.afterOpen&&this.events.afterOpen(),this.settings.isOpen&&(this.settings.isFullOpen=!0),document.addEventListener("click",this.documentClick)}),this.settings.timeoutDelay),"absolute"===this.settings.contentPosition&&(this.settings.intervalMove&&clearInterval(this.settings.intervalMove),this.settings.intervalMove=setInterval(this.render.moveContent.bind(this.render),500)))}close(t=null){this.settings.isOpen&&!this.settings.alwaysOpen&&(this.events.beforeClose&&this.events.beforeClose(),this.render.close(),""!==this.render.content.search.input.value&&this.search(""),this.render.mainFocus(t),this.settings.isOpen=!1,this.settings.isFullOpen=!1,setTimeout((()=>{this.events.afterClose&&this.events.afterClose(),document.removeEventListener("click",this.documentClick)}),this.settings.timeoutDelay),this.settings.intervalMove&&clearInterval(this.settings.intervalMove))}search(t){if(this.render.content.search.input.value!==t&&(this.render.content.search.input.value=t),!this.events.search)return void this.render.renderOptions(""===t?this.store.getData():this.store.search(t,this.events.searchFilter));this.render.renderSearching();const e=this.events.search(t,this.store.getSelectedOptions());e instanceof Promise?e.then((t=>{this.render.renderOptions(this.store.partialToFullData(t))})).catch((t=>{this.render.renderError("string"==typeof t?t:t.message)})):Array.isArray(e)?this.render.renderOptions(this.store.partialToFullData(e)):this.render.renderError("Search event must return a promise or an array of data")}destroy(){document.removeEventListener("click",this.documentClick),window.removeEventListener("resize",this.windowResize,!1),"auto"===this.settings.openPosition&&window.removeEventListener("scroll",this.windowScroll,!1),document.removeEventListener("visibilitychange",this.windowVisibilityChange),this.store.setData([]),this.render.destroy(),this.select.destroy()}}return SlimSelect}()),Rg.exports),Ng=d(Pg);
/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */
function Bg(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function Fg(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?Bg(Object(i),!0).forEach((function(e){jg(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Bg(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function qg(t){return qg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qg(t)}function jg(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function zg(){return zg=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s])}return t},zg.apply(this,arguments)}function Vg(t,e){if(null==t)return{};var i,s,n=function(t,e){if(null==t)return{};var i,s,n={},o=Object.keys(t);for(s=0;s<o.length;s++)i=o[s],e.indexOf(i)>=0||(n[i]=t[i]);return n}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)i=o[s],e.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("select").forEach((t=>{const e=document.createElement("div");e.classList.add("select","select_custom"),t.after(e),e.appendChild(t);const i={afterChange:()=>t.dispatchEvent(new CustomEvent("change",{bubbles:!0}))};t.hasAttribute("data-addable")&&(i.addable=e=>{e=e.replaceAll(/[\s]+/g," ").trim();const i=t.getAttribute("data-addable");if("slug"===i)return e=function(t,e="-"){const i=new RegExp(`[^A-Za-z0-9${e}]+`,"g"),s=new RegExp(`[${e}]+`,"g"),n=new RegExp(`^${e}`),o=new RegExp(`${e}$`);return function(t){const e={"а":"a","А":"A","б":"b","Б":"B","в":"v","В":"V","г":"g","Г":"G","д":"d","Д":"D","е":"e","Е":"E","ё":"e","Ё":"E","ж":"zh","Ж":"Zh","з":"z","З":"Z","и":"i","И":"I","й":"y","Й":"Y","к":"k","К":"K","л":"l","Л":"L","м":"m","М":"M","н":"n","Н":"N","о":"o","О":"O","п":"p","П":"P","р":"r","Р":"R","с":"s","С":"S","т":"t","Т":"T","у":"u","У":"U","ф":"f","Ф":"F","х":"kh","Х":"Kh","ц":"tz","Ц":"Tz","ч":"ch","Ч":"Ch","ш":"sh","Ш":"Sh","щ":"sch","Щ":"Sch","ы":"y","Ы":"Y","э":"e","Э":"E","ю":"iu","Ю":"Iu","я":"ia","Я":"Ia","ь":"","Ь":"","ъ":"","Ъ":"","ї":"yi","Ї":"Yi","і":"i","І":"I","ґ":"g","Ґ":"G","є":"e","Є":"E"};return t.split("").map((t=>e[t]||t)).join("")}(t).replaceAll(i,e).replaceAll(s,e).replace(n,"").replace(o,"").toLowerCase()}(e=e.replaceAll(/[^\p{L}\d ]+/giu,"")).toLowerCase(),e;let s=!1;const n="string"==typeof i&&"/"===i[0];if(n){const t=i.match(new RegExp("^/(.*?)/([a-z]*)$"));s=new RegExp(t[1],t[2]).test(e)}return!(n&&!s)&&e});const s=new Ng({select:t,settings:{contentLocation:e,contentPosition:"relative",allowDeselect:!0!==t.required,alwaysOpen:!!t.hasAttribute("data-always-open"),minSelected:t.hasAttribute("data-min")?t.getAttribute("data-min"):null,maxSelected:t.hasAttribute("data-max")?t.getAttribute("data-max"):null,showSearch:!(!(t.querySelectorAll("option").length>10||t.hasAttribute("data-show-search")||t.hasAttribute("data-addable"))||0==t.getAttribute("data-show-search")),placeholderText:t.hasAttribute("data-placeholder")?t.getAttribute("data-placeholder"):null,searchText:t.hasAttribute("data-search-text")?t.getAttribute("data-search-text"):null,searchPlaceholder:t.hasAttribute("data-search-placeholder")?t.getAttribute("data-search-placeholder"):null,searchHighlight:!!t.hasAttribute("data-search-highlight"),closeOnSelect:!t.multiple,hideSelected:t.hasAttribute("data-hide-selected")?"true"==t.getAttribute("data-hide-selected"):!!t.multiple,maxValuesShown:t.hasAttribute("data-max-values")?t.getAttribute("data-max-values"):100,maxValuesMessage:t.hasAttribute("data-max-values-text")?t.getAttribute("data-max-values-text"):null},events:i});t.instance=s,t.removeAttribute("style"),e.instance=s}))}));function Hg(t){if("undefined"!=typeof window&&window.navigator)return!!navigator.userAgent.match(t)}var $g=Hg(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ug=Hg(/Edge/i),Gg=Hg(/firefox/i),Wg=Hg(/safari/i)&&!Hg(/chrome/i)&&!Hg(/android/i),Yg=Hg(/iP(ad|od|hone)/i),Xg=Hg(/chrome/i)&&Hg(/android/i),Qg={capture:!1,passive:!1};function Zg(t,e,i){t.addEventListener(e,i,!$g&&Qg)}function Kg(t,e,i){t.removeEventListener(e,i,!$g&&Qg)}function Jg(t,e){if(e){if(">"===e[0]&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch(t){return!1}return!1}}function tm(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function em(t,e,i,s){if(t){i=i||document;do{if(null!=e&&(">"===e[0]?t.parentNode===i&&Jg(t,e):Jg(t,e))||s&&t===i)return t;if(t===i)break}while(t=tm(t))}return null}var im,sm=/\s+/g;function nm(t,e,i){if(t&&e)if(t.classList)t.classList[i?"add":"remove"](e);else{var s=(" "+t.className+" ").replace(sm," ").replace(" "+e+" "," ");t.className=(s+(i?" "+e:"")).replace(sm," ")}}function om(t,e,i){var s=t&&t.style;if(s){if(void 0===i)return document.defaultView&&document.defaultView.getComputedStyle?i=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(i=t.currentStyle),void 0===e?i:i[e];e in s||-1!==e.indexOf("webkit")||(e="-webkit-"+e),s[e]=i+("string"==typeof i?"":"px")}}function rm(t,e){var i="";if("string"==typeof t)i=t;else do{var s=om(t,"transform");s&&"none"!==s&&(i=s+" "+i)}while(!e&&(t=t.parentNode));var n=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return n&&new n(i)}function am(t,e,i){if(t){var s=t.getElementsByTagName(e),n=0,o=s.length;if(i)for(;n<o;n++)i(s[n],n);return s}return[]}function lm(){var t=document.scrollingElement;return t||document.documentElement}function cm(t,e,i,s,n){if(t.getBoundingClientRect||t===window){var o,r,c,h,d,u,p;if(t!==window&&t.parentNode&&t!==lm()?(r=(o=t.getBoundingClientRect()).top,c=o.left,h=o.bottom,d=o.right,u=o.height,p=o.width):(r=0,c=0,h=window.innerHeight,d=window.innerWidth,u=window.innerHeight,p=window.innerWidth),(e||i)&&t!==window&&(n=n||t.parentNode,!$g))do{if(n&&n.getBoundingClientRect&&("none"!==om(n,"transform")||i&&"static"!==om(n,"position"))){var m=n.getBoundingClientRect();r-=m.top+parseInt(om(n,"border-top-width")),c-=m.left+parseInt(om(n,"border-left-width")),h=r+o.height,d=c+o.width;break}}while(n=n.parentNode);if(s&&t!==window){var b=rm(n||t),v=b&&b.a,y=b&&b.d;b&&(h=(r/=y)+(u/=y),d=(c/=v)+(p/=v))}return{top:r,left:c,bottom:h,right:d,width:p,height:u}}}function hm(t,e,i){for(var s=gm(t,!0),n=cm(t)[e];s;){if(!(n>=cm(s)[i]))return s;if(s===lm())break;s=gm(s,!1)}return!1}function dm(t,e,i,s){for(var n=0,o=0,r=t.children;o<r.length;){if("none"!==r[o].style.display&&r[o]!==yb.ghost&&(s||r[o]!==yb.dragged)&&em(r[o],i.draggable,t,!1)){if(n===e)return r[o];n++}o++}return null}function um(t,e){for(var i=t.lastElementChild;i&&(i===yb.ghost||"none"===om(i,"display")||e&&!Jg(i,e));)i=i.previousElementSibling;return i||null}function pm(t,e){var i=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)"TEMPLATE"===t.nodeName.toUpperCase()||t===yb.clone||e&&!Jg(t,e)||i++;return i}function fm(t){var e=0,i=0,s=lm();if(t)do{var n=rm(t),o=n.a,r=n.d;e+=t.scrollLeft*o,i+=t.scrollTop*r}while(t!==s&&(t=t.parentNode));return[e,i]}function gm(t,e){if(!t||!t.getBoundingClientRect)return lm();var i=t,s=!1;do{if(i.clientWidth<i.scrollWidth||i.clientHeight<i.scrollHeight){var n=om(i);if(i.clientWidth<i.scrollWidth&&("auto"==n.overflowX||"scroll"==n.overflowX)||i.clientHeight<i.scrollHeight&&("auto"==n.overflowY||"scroll"==n.overflowY)){if(!i.getBoundingClientRect||i===document.body)return lm();if(s||e)return i;s=!0}}}while(i=i.parentNode);return lm()}function mm(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}function bm(t,e){return function(){if(!im){var i=arguments;1===i.length?t.call(this,i[0]):t.apply(this,i),im=setTimeout((function(){im=void 0}),e)}}}function vm(t,e,i){t.scrollLeft+=e,t.scrollTop+=i}function ym(t){var e=window.Polymer,i=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):i?i(t).clone(!0)[0]:t.cloneNode(!0)}function Em(t,e,i){var s={};return Array.from(t.children).forEach((function(n){var o,r,c,h;if(em(n,e.draggable,t,!1)&&!n.animated&&n!==i){var d=cm(n);s.left=Math.min(null!==(o=s.left)&&void 0!==o?o:1/0,d.left),s.top=Math.min(null!==(r=s.top)&&void 0!==r?r:1/0,d.top),s.right=Math.max(null!==(c=s.right)&&void 0!==c?c:-1/0,d.right),s.bottom=Math.max(null!==(h=s.bottom)&&void 0!==h?h:-1/0,d.bottom)}})),s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}var _m="Sortable"+(new Date).getTime();function xm(){var t,e=[];return{captureAnimationState:function(){(e=[],this.options.animation)&&[].slice.call(this.el.children).forEach((function(t){if("none"!==om(t,"display")&&t!==yb.ghost){e.push({target:t,rect:cm(t)});var i=Fg({},e[e.length-1].rect);if(t.thisAnimationDuration){var s=rm(t,!0);s&&(i.top-=s.f,i.left-=s.e)}t.fromRect=i}}))},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(function(t,e){for(var i in t)if(t.hasOwnProperty(i))for(var s in e)if(e.hasOwnProperty(s)&&e[s]===t[i][s])return Number(i);return-1}(e,{target:t}),1)},animateAll:function(i){var s=this;if(!this.options.animation)return clearTimeout(t),void("function"==typeof i&&i());var n=!1,o=0;e.forEach((function(t){var e=0,i=t.target,r=i.fromRect,c=cm(i),h=i.prevFromRect,d=i.prevToRect,u=t.rect,p=rm(i,!0);p&&(c.top-=p.f,c.left-=p.e),i.toRect=c,i.thisAnimationDuration&&mm(h,c)&&!mm(r,c)&&(u.top-c.top)/(u.left-c.left)==(r.top-c.top)/(r.left-c.left)&&(e=function(t,e,i,s){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))*s.animation}(u,h,d,s.options)),mm(c,r)||(i.prevFromRect=r,i.prevToRect=c,e||(e=s.options.animation),s.animate(i,u,c,e)),e&&(n=!0,o=Math.max(o,e),clearTimeout(i.animationResetTimer),i.animationResetTimer=setTimeout((function(){i.animationTime=0,i.prevFromRect=null,i.fromRect=null,i.prevToRect=null,i.thisAnimationDuration=null}),e),i.thisAnimationDuration=e)})),clearTimeout(t),n?t=setTimeout((function(){"function"==typeof i&&i()}),o):"function"==typeof i&&i(),e=[]},animate:function(t,e,i,s){if(s){om(t,"transition",""),om(t,"transform","");var n=rm(this.el),o=n&&n.a,r=n&&n.d,c=(e.left-i.left)/(o||1),h=(e.top-i.top)/(r||1);t.animatingX=!!c,t.animatingY=!!h,om(t,"transform","translate3d("+c+"px,"+h+"px,0)"),this.forRepaintDummy=function(t){return t.offsetWidth}(t),om(t,"transition","transform "+s+"ms"+(this.options.easing?" "+this.options.easing:"")),om(t,"transform","translate3d(0,0,0)"),"number"==typeof t.animated&&clearTimeout(t.animated),t.animated=setTimeout((function(){om(t,"transition",""),om(t,"transform",""),t.animated=!1,t.animatingX=!1,t.animatingY=!1}),s)}}}}var wm=[],Tm={initializeByDefault:!0},Am={mount:function(t){for(var e in Tm)Tm.hasOwnProperty(e)&&!(e in t)&&(t[e]=Tm[e]);wm.forEach((function(e){if(e.pluginName===t.pluginName)throw"Sortable: Cannot mount plugin ".concat(t.pluginName," more than once")})),wm.push(t)},pluginEvent:function(t,e,i){var s=this;this.eventCanceled=!1,i.cancel=function(){s.eventCanceled=!0};var n=t+"Global";wm.forEach((function(s){e[s.pluginName]&&(e[s.pluginName][n]&&e[s.pluginName][n](Fg({sortable:e},i)),e.options[s.pluginName]&&e[s.pluginName][t]&&e[s.pluginName][t](Fg({sortable:e},i)))}))},initializePlugins:function(t,e,i,s){for(var n in wm.forEach((function(s){var n=s.pluginName;if(t.options[n]||s.initializeByDefault){var o=new s(t,e,t.options);o.sortable=t,o.options=t.options,t[n]=o,zg(i,o.defaults)}})),t.options)if(t.options.hasOwnProperty(n)){var o=this.modifyOption(t,n,t.options[n]);void 0!==o&&(t.options[n]=o)}},getEventProperties:function(t,e){var i={};return wm.forEach((function(s){"function"==typeof s.eventProperties&&zg(i,s.eventProperties.call(e[s.pluginName],t))})),i},modifyOption:function(t,e,i){var s;return wm.forEach((function(n){t[n.pluginName]&&n.optionListeners&&"function"==typeof n.optionListeners[e]&&(s=n.optionListeners[e].call(t[n.pluginName],i))})),s}};var Sm=["evt"],Om=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.evt,n=Vg(i,Sm);Am.pluginEvent.bind(yb)(t,e,Fg({dragEl:Cm,parentEl:Im,ghostEl:Mm,rootEl:Lm,nextEl:km,lastDownEl:Rm,cloneEl:Pm,cloneHidden:Nm,dragStarted:Xm,putSortable:Vm,activeSortable:yb.active,originalEvent:s,oldIndex:Bm,oldDraggableIndex:qm,newIndex:Fm,newDraggableIndex:jm,hideGhostForTarget:gb,unhideGhostForTarget:mb,cloneNowHidden:function(){Nm=!0},cloneNowShown:function(){Nm=!1},dispatchSortableEvent:function(t){Dm({sortable:e,name:t,originalEvent:s})}},n))};function Dm(t){!function(t){var e=t.sortable,i=t.rootEl,s=t.name,n=t.targetEl,o=t.cloneEl,r=t.toEl,c=t.fromEl,h=t.oldIndex,d=t.newIndex,u=t.oldDraggableIndex,p=t.newDraggableIndex,m=t.originalEvent,b=t.putSortable,v=t.extraEventProperties;if(e=e||i&&i[_m]){var y,E=e.options,x="on"+s.charAt(0).toUpperCase()+s.substr(1);!window.CustomEvent||$g||Ug?(y=document.createEvent("Event")).initEvent(s,!0,!0):y=new CustomEvent(s,{bubbles:!0,cancelable:!0}),y.to=r||i,y.from=c||i,y.item=n||i,y.clone=o,y.oldIndex=h,y.newIndex=d,y.oldDraggableIndex=u,y.newDraggableIndex=p,y.originalEvent=m,y.pullMode=b?b.lastPutMode:void 0;var w=Fg(Fg({},v),Am.getEventProperties(s,e));for(var S in w)y[S]=w[S];i&&i.dispatchEvent(y),E[x]&&E[x].call(e,y)}}(Fg({putSortable:Vm,cloneEl:Pm,targetEl:Cm,rootEl:Lm,oldIndex:Bm,oldDraggableIndex:qm,newIndex:Fm,newDraggableIndex:jm},t))}var Cm,Im,Mm,Lm,km,Rm,Pm,Nm,Bm,Fm,qm,jm,zm,Vm,Hm,$m,Um,Gm,Wm,Ym,Xm,Qm,Zm,Km,Jm,tb=!1,eb=!1,ib=[],sb=!1,nb=!1,ob=[],rb=!1,ab=[],lb="undefined"!=typeof document,cb=Yg,hb=Ug||$g?"cssFloat":"float",db=lb&&!Xg&&!Yg&&"draggable"in document.createElement("div"),ub=function(){if(lb){if($g)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}}(),pb=function(t,e){var i=om(t),s=parseInt(i.width)-parseInt(i.paddingLeft)-parseInt(i.paddingRight)-parseInt(i.borderLeftWidth)-parseInt(i.borderRightWidth),n=dm(t,0,e),o=dm(t,1,e),r=n&&om(n),c=o&&om(o),h=r&&parseInt(r.marginLeft)+parseInt(r.marginRight)+cm(n).width,d=c&&parseInt(c.marginLeft)+parseInt(c.marginRight)+cm(o).width;if("flex"===i.display)return"column"===i.flexDirection||"column-reverse"===i.flexDirection?"vertical":"horizontal";if("grid"===i.display)return i.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(n&&r.float&&"none"!==r.float){var u="left"===r.float?"left":"right";return!o||"both"!==c.clear&&c.clear!==u?"horizontal":"vertical"}return n&&("block"===r.display||"flex"===r.display||"table"===r.display||"grid"===r.display||h>=s&&"none"===i[hb]||o&&"none"===i[hb]&&h+d>s)?"vertical":"horizontal"},fb=function(t){function e(t,i){return function(s,n,o,r){var c=s.options.group.name&&n.options.group.name&&s.options.group.name===n.options.group.name;if(null==t&&(i||c))return!0;if(null==t||!1===t)return!1;if(i&&"clone"===t)return t;if("function"==typeof t)return e(t(s,n,o,r),i)(s,n,o,r);var h=(i?s:n).options.group.name;return!0===t||"string"==typeof t&&t===h||t.join&&t.indexOf(h)>-1}}var i={},s=t.group;s&&"object"==qg(s)||(s={name:s}),i.name=s.name,i.checkPull=e(s.pull,!0),i.checkPut=e(s.put),i.revertClone=s.revertClone,t.group=i},gb=function(){!ub&&Mm&&om(Mm,"display","none")},mb=function(){!ub&&Mm&&om(Mm,"display","")};lb&&!Xg&&document.addEventListener("click",(function(t){if(eb)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),eb=!1,!1}),!0);var bb=function(t){if(Cm){var e=function(t,e){var i;return ib.some((function(s){var n=s[_m].options.emptyInsertThreshold;if(n&&!um(s)){var o=cm(s),r=t>=o.left-n&&t<=o.right+n,c=e>=o.top-n&&e<=o.bottom+n;return r&&c?i=s:void 0}})),i}((t=t.touches?t.touches[0]:t).clientX,t.clientY);if(e){var i={};for(var s in t)t.hasOwnProperty(s)&&(i[s]=t[s]);i.target=i.rootEl=e,i.preventDefault=void 0,i.stopPropagation=void 0,e[_m]._onDragOver(i)}}},vb=function(t){Cm&&Cm.parentNode[_m]._isOutsideThisEl(t.target)};function yb(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=zg({},e),t[_m]=this;var i={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return pb(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==yb.supportPointer&&"PointerEvent"in window&&!Wg,emptyInsertThreshold:5};for(var s in Am.initializePlugins(this,t,i),i)!(s in e)&&(e[s]=i[s]);for(var n in fb(e),this)"_"===n.charAt(0)&&"function"==typeof this[n]&&(this[n]=this[n].bind(this));this.nativeDraggable=!e.forceFallback&&db,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Zg(t,"pointerdown",this._onTapStart):(Zg(t,"mousedown",this._onTapStart),Zg(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Zg(t,"dragover",this),Zg(t,"dragenter",this)),ib.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),zg(this,xm())}function Eb(t,e,i,s,n,o,r,c){var h,d,u=t[_m],p=u.options.onMove;return!window.CustomEvent||$g||Ug?(h=document.createEvent("Event")).initEvent("move",!0,!0):h=new CustomEvent("move",{bubbles:!0,cancelable:!0}),h.to=e,h.from=t,h.dragged=i,h.draggedRect=s,h.related=n||e,h.relatedRect=o||cm(e),h.willInsertAfter=c,h.originalEvent=r,t.dispatchEvent(h),p&&(d=p.call(u,h,r)),d}function _b(t){t.draggable=!1}function xb(){rb=!1}function wb(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,i=e.length,s=0;i--;)s+=e.charCodeAt(i);return s.toString(36)}function Tb(t){return setTimeout(t,0)}function Ab(t){return clearTimeout(t)}yb.prototype={constructor:yb,_isOutsideThisEl:function(t){this.el.contains(t)||t===this.el||(Qm=null)},_getDirection:function(t,e){return"function"==typeof this.options.direction?this.options.direction.call(this,t,e,Cm):this.options.direction},_onTapStart:function(t){if(t.cancelable){var e=this,i=this.el,s=this.options,n=s.preventOnFilter,o=t.type,r=t.touches&&t.touches[0]||t.pointerType&&"touch"===t.pointerType&&t,c=(r||t).target,h=t.target.shadowRoot&&(t.path&&t.path[0]||t.composedPath&&t.composedPath()[0])||c,d=s.filter;if(function(t){ab.length=0;var e=t.getElementsByTagName("input"),i=e.length;for(;i--;){var s=e[i];s.checked&&ab.push(s)}}(i),!Cm&&!(/mousedown|pointerdown/.test(o)&&0!==t.button||s.disabled)&&!h.isContentEditable&&(this.nativeDraggable||!Wg||!c||"SELECT"!==c.tagName.toUpperCase())&&!((c=em(c,s.draggable,i,!1))&&c.animated||Rm===c)){if(Bm=pm(c),qm=pm(c,s.draggable),"function"==typeof d){if(d.call(this,t,c,this))return Dm({sortable:e,rootEl:h,name:"filter",targetEl:c,toEl:i,fromEl:i}),Om("filter",e,{evt:t}),void(n&&t.cancelable&&t.preventDefault())}else if(d&&(d=d.split(",").some((function(s){if(s=em(h,s.trim(),i,!1))return Dm({sortable:e,rootEl:s,name:"filter",targetEl:c,fromEl:i,toEl:i}),Om("filter",e,{evt:t}),!0}))))return void(n&&t.cancelable&&t.preventDefault());s.handle&&!em(h,s.handle,i,!1)||this._prepareDragStart(t,r,c)}}},_prepareDragStart:function(t,e,i){var s,n=this,o=n.el,r=n.options,c=o.ownerDocument;if(i&&!Cm&&i.parentNode===o){var h=cm(i);if(Lm=o,Im=(Cm=i).parentNode,km=Cm.nextSibling,Rm=i,zm=r.group,yb.dragged=Cm,Hm={target:Cm,clientX:(e||t).clientX,clientY:(e||t).clientY},Wm=Hm.clientX-h.left,Ym=Hm.clientY-h.top,this._lastX=(e||t).clientX,this._lastY=(e||t).clientY,Cm.style["will-change"]="all",s=function(){Om("delayEnded",n,{evt:t}),yb.eventCanceled?n._onDrop():(n._disableDelayedDragEvents(),!Gg&&n.nativeDraggable&&(Cm.draggable=!0),n._triggerDragStart(t,e),Dm({sortable:n,name:"choose",originalEvent:t}),nm(Cm,r.chosenClass,!0))},r.ignore.split(",").forEach((function(t){am(Cm,t.trim(),_b)})),Zg(c,"dragover",bb),Zg(c,"mousemove",bb),Zg(c,"touchmove",bb),Zg(c,"mouseup",n._onDrop),Zg(c,"touchend",n._onDrop),Zg(c,"touchcancel",n._onDrop),Gg&&this.nativeDraggable&&(this.options.touchStartThreshold=4,Cm.draggable=!0),Om("delayStart",this,{evt:t}),!r.delay||r.delayOnTouchOnly&&!e||this.nativeDraggable&&(Ug||$g))s();else{if(yb.eventCanceled)return void this._onDrop();Zg(c,"mouseup",n._disableDelayedDrag),Zg(c,"touchend",n._disableDelayedDrag),Zg(c,"touchcancel",n._disableDelayedDrag),Zg(c,"mousemove",n._delayedDragTouchMoveHandler),Zg(c,"touchmove",n._delayedDragTouchMoveHandler),r.supportPointer&&Zg(c,"pointermove",n._delayedDragTouchMoveHandler),n._dragStartTimer=setTimeout(s,r.delay)}}},_delayedDragTouchMoveHandler:function(t){var e=t.touches?t.touches[0]:t;Math.max(Math.abs(e.clientX-this._lastX),Math.abs(e.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){Cm&&_b(Cm),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var t=this.el.ownerDocument;Kg(t,"mouseup",this._disableDelayedDrag),Kg(t,"touchend",this._disableDelayedDrag),Kg(t,"touchcancel",this._disableDelayedDrag),Kg(t,"mousemove",this._delayedDragTouchMoveHandler),Kg(t,"touchmove",this._delayedDragTouchMoveHandler),Kg(t,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(t,e){e=e||"touch"==t.pointerType&&t,!this.nativeDraggable||e?this.options.supportPointer?Zg(document,"pointermove",this._onTouchMove):Zg(document,e?"touchmove":"mousemove",this._onTouchMove):(Zg(Cm,"dragend",this),Zg(Lm,"dragstart",this._onDragStart));try{document.selection?Tb((function(){document.selection.empty()})):window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(t,e){if(tb=!1,Lm&&Cm){Om("dragStarted",this,{evt:e}),this.nativeDraggable&&Zg(document,"dragover",vb);var i=this.options;!t&&nm(Cm,i.dragClass,!1),nm(Cm,i.ghostClass,!0),yb.active=this,t&&this._appendGhost(),Dm({sortable:this,name:"start",originalEvent:e})}else this._nulling()},_emulateDragOver:function(){if($m){this._lastX=$m.clientX,this._lastY=$m.clientY,gb();for(var t=document.elementFromPoint($m.clientX,$m.clientY),e=t;t&&t.shadowRoot&&(t=t.shadowRoot.elementFromPoint($m.clientX,$m.clientY))!==e;)e=t;if(Cm.parentNode[_m]._isOutsideThisEl(t),e)do{if(e[_m]){if(e[_m]._onDragOver({clientX:$m.clientX,clientY:$m.clientY,target:t,rootEl:e})&&!this.options.dragoverBubble)break}t=e}while(e=tm(e));mb()}},_onTouchMove:function(t){if(Hm){var e=this.options,i=e.fallbackTolerance,s=e.fallbackOffset,n=t.touches?t.touches[0]:t,o=Mm&&rm(Mm,!0),r=Mm&&o&&o.a,c=Mm&&o&&o.d,h=cb&&Jm&&fm(Jm),d=(n.clientX-Hm.clientX+s.x)/(r||1)+(h?h[0]-ob[0]:0)/(r||1),u=(n.clientY-Hm.clientY+s.y)/(c||1)+(h?h[1]-ob[1]:0)/(c||1);if(!yb.active&&!tb){if(i&&Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))<i)return;this._onDragStart(t,!0)}if(Mm){o?(o.e+=d-(Um||0),o.f+=u-(Gm||0)):o={a:1,b:0,c:0,d:1,e:d,f:u};var p="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");om(Mm,"webkitTransform",p),om(Mm,"mozTransform",p),om(Mm,"msTransform",p),om(Mm,"transform",p),Um=d,Gm=u,$m=n}t.cancelable&&t.preventDefault()}},_appendGhost:function(){if(!Mm){var t=this.options.fallbackOnBody?document.body:Lm,e=cm(Cm,!0,cb,!0,t),i=this.options;if(cb){for(Jm=t;"static"===om(Jm,"position")&&"none"===om(Jm,"transform")&&Jm!==document;)Jm=Jm.parentNode;Jm!==document.body&&Jm!==document.documentElement?(Jm===document&&(Jm=lm()),e.top+=Jm.scrollTop,e.left+=Jm.scrollLeft):Jm=lm(),ob=fm(Jm)}nm(Mm=Cm.cloneNode(!0),i.ghostClass,!1),nm(Mm,i.fallbackClass,!0),nm(Mm,i.dragClass,!0),om(Mm,"transition",""),om(Mm,"transform",""),om(Mm,"box-sizing","border-box"),om(Mm,"margin",0),om(Mm,"top",e.top),om(Mm,"left",e.left),om(Mm,"width",e.width),om(Mm,"height",e.height),om(Mm,"opacity","0.8"),om(Mm,"position",cb?"absolute":"fixed"),om(Mm,"zIndex","100000"),om(Mm,"pointerEvents","none"),yb.ghost=Mm,t.appendChild(Mm),om(Mm,"transform-origin",Wm/parseInt(Mm.style.width)*100+"% "+Ym/parseInt(Mm.style.height)*100+"%")}},_onDragStart:function(t,e){var i=this,s=t.dataTransfer,n=i.options;Om("dragStart",this,{evt:t}),yb.eventCanceled?this._onDrop():(Om("setupClone",this),yb.eventCanceled||((Pm=ym(Cm)).removeAttribute("id"),Pm.draggable=!1,Pm.style["will-change"]="",this._hideClone(),nm(Pm,this.options.chosenClass,!1),yb.clone=Pm),i.cloneId=Tb((function(){Om("clone",i),yb.eventCanceled||(i.options.removeCloneOnHide||Lm.insertBefore(Pm,Cm),i._hideClone(),Dm({sortable:i,name:"clone"}))})),!e&&nm(Cm,n.dragClass,!0),e?(eb=!0,i._loopId=setInterval(i._emulateDragOver,50)):(Kg(document,"mouseup",i._onDrop),Kg(document,"touchend",i._onDrop),Kg(document,"touchcancel",i._onDrop),s&&(s.effectAllowed="move",n.setData&&n.setData.call(i,s,Cm)),Zg(document,"drop",i),om(Cm,"transform","translateZ(0)")),tb=!0,i._dragStartId=Tb(i._dragStarted.bind(i,e,t)),Zg(document,"selectstart",i),Xm=!0,Wg&&om(document.body,"user-select","none"))},_onDragOver:function(t){var e,i,s,n,o=this.el,r=t.target,c=this.options,h=c.group,d=yb.active,u=zm===h,p=c.sort,m=Vm||d,b=this,v=!1;if(!rb){if(void 0!==t.preventDefault&&t.cancelable&&t.preventDefault(),r=em(r,c.draggable,o,!0),j("dragOver"),yb.eventCanceled)return v;if(Cm.contains(t.target)||r.animated&&r.animatingX&&r.animatingY||b._ignoreWhileAnimating===r)return $(!1);if(eb=!1,d&&!c.disabled&&(u?p||(s=Im!==Lm):Vm===this||(this.lastPutMode=zm.checkPull(this,d,Cm,t))&&h.checkPut(this,d,Cm,t))){if(n="vertical"===this._getDirection(t,r),e=cm(Cm),j("dragOverValid"),yb.eventCanceled)return v;if(s)return Im=Lm,z(),this._hideClone(),j("revert"),yb.eventCanceled||(km?Lm.insertBefore(Cm,km):Lm.appendChild(Cm)),$(!0);var y=um(o,c.draggable);if(!y||function(t,e,i){var s=cm(um(i.el,i.options.draggable)),n=Em(i.el,i.options,Mm),o=10;return e?t.clientX>n.right+o||t.clientY>s.bottom&&t.clientX>s.left:t.clientY>n.bottom+o||t.clientX>s.right&&t.clientY>s.top}(t,n,this)&&!y.animated){if(y===Cm)return $(!1);if(y&&o===t.target&&(r=y),r&&(i=cm(r)),!1!==Eb(Lm,o,Cm,e,r,i,t,!!r))return z(),y&&y.nextSibling?o.insertBefore(Cm,y.nextSibling):o.appendChild(Cm),Im=o,U(),$(!0)}else if(y&&function(t,e,i){var s=cm(dm(i.el,0,i.options,!0)),n=Em(i.el,i.options,Mm),o=10;return e?t.clientX<n.left-o||t.clientY<s.top&&t.clientX<s.right:t.clientY<n.top-o||t.clientY<s.bottom&&t.clientX<s.left}(t,n,this)){var E=dm(o,0,c,!0);if(E===Cm)return $(!1);if(i=cm(r=E),!1!==Eb(Lm,o,Cm,e,r,i,t,!1))return z(),o.insertBefore(Cm,E),Im=o,U(),$(!0)}else if(r.parentNode===o){i=cm(r);var x,w,S,O=Cm.parentNode!==o,D=!function(t,e,i){var s=i?t.left:t.top,n=i?t.right:t.bottom,o=i?t.width:t.height,r=i?e.left:e.top,c=i?e.right:e.bottom,h=i?e.width:e.height;return s===r||n===c||s+o/2===r+h/2}(Cm.animated&&Cm.toRect||e,r.animated&&r.toRect||i,n),M=n?"top":"left",k=hm(r,"top","top")||hm(Cm,"top","top"),P=k?k.scrollTop:void 0;if(Qm!==r&&(w=i[M],sb=!1,nb=!D&&c.invertSwap||O),x=function(t,e,i,s,n,o,r,c){var h=s?t.clientY:t.clientX,d=s?i.height:i.width,u=s?i.top:i.left,p=s?i.bottom:i.right,m=!1;if(!r)if(c&&Km<d*n){if(!sb&&(1===Zm?h>u+d*o/2:h<p-d*o/2)&&(sb=!0),sb)m=!0;else if(1===Zm?h<u+Km:h>p-Km)return-Zm}else if(h>u+d*(1-n)/2&&h<p-d*(1-n)/2)return function(t){return pm(Cm)<pm(t)?1:-1}(e);if((m=m||r)&&(h<u+d*o/2||h>p-d*o/2))return h>u+d/2?1:-1;return 0}(t,r,i,n,D?1:c.swapThreshold,null==c.invertedSwapThreshold?c.swapThreshold:c.invertedSwapThreshold,nb,Qm===r),0!==x){var N=pm(Cm);do{N-=x,S=Im.children[N]}while(S&&("none"===om(S,"display")||S===Mm))}if(0===x||S===r)return $(!1);Qm=r,Zm=x;var B=r.nextElementSibling,F=!1,q=Eb(Lm,o,Cm,e,r,i,t,F=1===x);if(!1!==q)return 1!==q&&-1!==q||(F=1===q),rb=!0,setTimeout(xb,30),z(),F&&!B?o.appendChild(Cm):r.parentNode.insertBefore(Cm,F?B:r),k&&vm(k,0,P-k.scrollTop),Im=Cm.parentNode,void 0===w||nb||(Km=Math.abs(w-cm(r)[M])),U(),$(!0)}if(o.contains(Cm))return $(!1)}return!1}function j(c,h){Om(c,b,Fg({evt:t,isOwner:u,axis:n?"vertical":"horizontal",revert:s,dragRect:e,targetRect:i,canSort:p,fromSortable:m,target:r,completed:$,onMove:function(i,s){return Eb(Lm,o,Cm,e,i,cm(i),t,s)},changed:U},h))}function z(){j("dragOverAnimationCapture"),b.captureAnimationState(),b!==m&&m.captureAnimationState()}function $(e){return j("dragOverCompleted",{insertion:e}),e&&(u?d._hideClone():d._showClone(b),b!==m&&(nm(Cm,Vm?Vm.options.ghostClass:d.options.ghostClass,!1),nm(Cm,c.ghostClass,!0)),Vm!==b&&b!==yb.active?Vm=b:b===yb.active&&Vm&&(Vm=null),m===b&&(b._ignoreWhileAnimating=r),b.animateAll((function(){j("dragOverAnimationComplete"),b._ignoreWhileAnimating=null})),b!==m&&(m.animateAll(),m._ignoreWhileAnimating=null)),(r===Cm&&!Cm.animated||r===o&&!r.animated)&&(Qm=null),c.dragoverBubble||t.rootEl||r===document||(Cm.parentNode[_m]._isOutsideThisEl(t.target),!e&&bb(t)),!c.dragoverBubble&&t.stopPropagation&&t.stopPropagation(),v=!0}function U(){Fm=pm(Cm),jm=pm(Cm,c.draggable),Dm({sortable:b,name:"change",toEl:o,newIndex:Fm,newDraggableIndex:jm,originalEvent:t})}},_ignoreWhileAnimating:null,_offMoveEvents:function(){Kg(document,"mousemove",this._onTouchMove),Kg(document,"touchmove",this._onTouchMove),Kg(document,"pointermove",this._onTouchMove),Kg(document,"dragover",bb),Kg(document,"mousemove",bb),Kg(document,"touchmove",bb)},_offUpEvents:function(){var t=this.el.ownerDocument;Kg(t,"mouseup",this._onDrop),Kg(t,"touchend",this._onDrop),Kg(t,"pointerup",this._onDrop),Kg(t,"touchcancel",this._onDrop),Kg(document,"selectstart",this)},_onDrop:function(t){var e=this.el,i=this.options;Fm=pm(Cm),jm=pm(Cm,i.draggable),Om("drop",this,{evt:t}),Im=Cm&&Cm.parentNode,Fm=pm(Cm),jm=pm(Cm,i.draggable),yb.eventCanceled||(tb=!1,nb=!1,sb=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Ab(this.cloneId),Ab(this._dragStartId),this.nativeDraggable&&(Kg(document,"drop",this),Kg(e,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Wg&&om(document.body,"user-select",""),om(Cm,"transform",""),t&&(Xm&&(t.cancelable&&t.preventDefault(),!i.dropBubble&&t.stopPropagation()),Mm&&Mm.parentNode&&Mm.parentNode.removeChild(Mm),(Lm===Im||Vm&&"clone"!==Vm.lastPutMode)&&Pm&&Pm.parentNode&&Pm.parentNode.removeChild(Pm),Cm&&(this.nativeDraggable&&Kg(Cm,"dragend",this),_b(Cm),Cm.style["will-change"]="",Xm&&!tb&&nm(Cm,Vm?Vm.options.ghostClass:this.options.ghostClass,!1),nm(Cm,this.options.chosenClass,!1),Dm({sortable:this,name:"unchoose",toEl:Im,newIndex:null,newDraggableIndex:null,originalEvent:t}),Lm!==Im?(Fm>=0&&(Dm({rootEl:Im,name:"add",toEl:Im,fromEl:Lm,originalEvent:t}),Dm({sortable:this,name:"remove",toEl:Im,originalEvent:t}),Dm({rootEl:Im,name:"sort",toEl:Im,fromEl:Lm,originalEvent:t}),Dm({sortable:this,name:"sort",toEl:Im,originalEvent:t})),Vm&&Vm.save()):Fm!==Bm&&Fm>=0&&(Dm({sortable:this,name:"update",toEl:Im,originalEvent:t}),Dm({sortable:this,name:"sort",toEl:Im,originalEvent:t})),yb.active&&(null!=Fm&&-1!==Fm||(Fm=Bm,jm=qm),Dm({sortable:this,name:"end",toEl:Im,originalEvent:t}),this.save())))),this._nulling()},_nulling:function(){Om("nulling",this),Lm=Cm=Im=Mm=km=Pm=Rm=Nm=Hm=$m=Xm=Fm=jm=Bm=qm=Qm=Zm=Vm=zm=yb.dragged=yb.ghost=yb.clone=yb.active=null,ab.forEach((function(t){t.checked=!0})),ab.length=Um=Gm=0},handleEvent:function(t){switch(t.type){case"drop":case"dragend":this._onDrop(t);break;case"dragenter":case"dragover":Cm&&(this._onDragOver(t),function(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move");t.cancelable&&t.preventDefault()}(t));break;case"selectstart":t.preventDefault()}},toArray:function(){for(var t,e=[],i=this.el.children,s=0,n=i.length,o=this.options;s<n;s++)em(t=i[s],o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||wb(t));return e},sort:function(t,e){var i={},s=this.el;this.toArray().forEach((function(t,e){var n=s.children[e];em(n,this.options.draggable,s,!1)&&(i[t]=n)}),this),e&&this.captureAnimationState(),t.forEach((function(t){i[t]&&(s.removeChild(i[t]),s.appendChild(i[t]))})),e&&this.animateAll()},save:function(){var t=this.options.store;t&&t.set&&t.set(this)},closest:function(t,e){return em(t,e||this.options.draggable,this.el,!1)},option:function(t,e){var i=this.options;if(void 0===e)return i[t];var s=Am.modifyOption(this,t,e);i[t]=void 0!==s?s:e,"group"===t&&fb(i)},destroy:function(){Om("destroy",this);var t=this.el;t[_m]=null,Kg(t,"mousedown",this._onTapStart),Kg(t,"touchstart",this._onTapStart),Kg(t,"pointerdown",this._onTapStart),this.nativeDraggable&&(Kg(t,"dragover",this),Kg(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),(function(t){t.removeAttribute("draggable")})),this._onDrop(),this._disableDelayedDragEvents(),ib.splice(ib.indexOf(this.el),1),this.el=t=null},_hideClone:function(){if(!Nm){if(Om("hideClone",this),yb.eventCanceled)return;om(Pm,"display","none"),this.options.removeCloneOnHide&&Pm.parentNode&&Pm.parentNode.removeChild(Pm),Nm=!0}},_showClone:function(t){if("clone"===t.lastPutMode){if(Nm){if(Om("showClone",this),yb.eventCanceled)return;Cm.parentNode!=Lm||this.options.group.revertClone?km?Lm.insertBefore(Pm,km):Lm.appendChild(Pm):Lm.insertBefore(Pm,Cm),this.options.group.revertClone&&this.animate(Cm,Pm),om(Pm,"display",""),Nm=!1}}else this._hideClone()}},lb&&Zg(document,"touchmove",(function(t){(yb.active||tb)&&t.cancelable&&t.preventDefault()})),yb.utils={on:Zg,off:Kg,css:om,find:am,is:function(t,e){return!!em(t,e,t,!1)},extend:function(t,e){if(t&&e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},throttle:bm,closest:em,toggleClass:nm,clone:ym,index:pm,nextTick:Tb,cancelNextTick:Ab,detectDirection:pb,getChild:dm,expando:_m},yb.get=function(t){return t[_m]},yb.mount=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e[0].constructor===Array&&(e=e[0]),e.forEach((function(t){if(!t.prototype||!t.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(t));t.utils&&(yb.utils=Fg(Fg({},yb.utils),t.utils)),Am.mount(t)}))},yb.create=function(t,e){return new yb(t,e)},yb.version="1.15.3";var Sb,Ob,Db,Cb,Ib,Mb,Lb=[],kb=!1;function Rb(){Lb.forEach((function(t){clearInterval(t.pid)})),Lb=[]}function Pb(){clearInterval(Mb)}var Nb=bm((function(t,e,i,s){if(e.scroll){var n,o=(t.touches?t.touches[0]:t).clientX,r=(t.touches?t.touches[0]:t).clientY,c=e.scrollSensitivity,h=e.scrollSpeed,d=lm(),u=!1;Ob!==i&&(Ob=i,Rb(),Sb=e.scroll,n=e.scrollFn,!0===Sb&&(Sb=gm(i,!0)));var p=0,m=Sb;do{var b=m,v=cm(b),y=v.top,E=v.bottom,x=v.left,w=v.right,S=v.width,O=v.height,D=void 0,M=void 0,k=b.scrollWidth,P=b.scrollHeight,N=om(b),B=b.scrollLeft,F=b.scrollTop;b===d?(D=S<k&&("auto"===N.overflowX||"scroll"===N.overflowX||"visible"===N.overflowX),M=O<P&&("auto"===N.overflowY||"scroll"===N.overflowY||"visible"===N.overflowY)):(D=S<k&&("auto"===N.overflowX||"scroll"===N.overflowX),M=O<P&&("auto"===N.overflowY||"scroll"===N.overflowY));var q=D&&(Math.abs(w-o)<=c&&B+S<k)-(Math.abs(x-o)<=c&&!!B),j=M&&(Math.abs(E-r)<=c&&F+O<P)-(Math.abs(y-r)<=c&&!!F);if(!Lb[p])for(var z=0;z<=p;z++)Lb[z]||(Lb[z]={});Lb[p].vx==q&&Lb[p].vy==j&&Lb[p].el===b||(Lb[p].el=b,Lb[p].vx=q,Lb[p].vy=j,clearInterval(Lb[p].pid),0==q&&0==j||(u=!0,Lb[p].pid=setInterval(function(){s&&0===this.layer&&yb.active._onTouchMove(Ib);var e=Lb[this.layer].vy?Lb[this.layer].vy*h:0,i=Lb[this.layer].vx?Lb[this.layer].vx*h:0;"function"==typeof n&&"continue"!==n.call(yb.dragged.parentNode[_m],i,e,t,Ib,Lb[this.layer].el)||vm(Lb[this.layer].el,i,e)}.bind({layer:p}),24))),p++}while(e.bubbleScroll&&m!==d&&(m=gm(m,!1)));kb=u}}),30),Bb=function(t){var e=t.originalEvent,i=t.putSortable,s=t.dragEl,n=t.activeSortable,o=t.dispatchSortableEvent,r=t.hideGhostForTarget,c=t.unhideGhostForTarget;if(e){var h=i||n;r();var d=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e,u=document.elementFromPoint(d.clientX,d.clientY);c(),h&&!h.el.contains(u)&&(o("spill"),this.onSpill({dragEl:s,putSortable:i}))}};function Fb(){}function qb(){}Fb.prototype={startIndex:null,dragStart:function(t){var e=t.oldDraggableIndex;this.startIndex=e},onSpill:function(t){var e=t.dragEl,i=t.putSortable;this.sortable.captureAnimationState(),i&&i.captureAnimationState();var s=dm(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(e,s):this.sortable.el.appendChild(e),this.sortable.animateAll(),i&&i.animateAll()},drop:Bb},zg(Fb,{pluginName:"revertOnSpill"}),qb.prototype={onSpill:function(t){var e=t.dragEl,i=t.putSortable||this.sortable;i.captureAnimationState(),e.parentNode&&e.parentNode.removeChild(e),i.animateAll()},drop:Bb},zg(qb,{pluginName:"removeOnSpill"}),yb.mount(new function(){function t(){for(var t in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)"_"===t.charAt(0)&&"function"==typeof this[t]&&(this[t]=this[t].bind(this))}return t.prototype={dragStarted:function(t){var e=t.originalEvent;this.sortable.nativeDraggable?Zg(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Zg(document,"pointermove",this._handleFallbackAutoScroll):e.touches?Zg(document,"touchmove",this._handleFallbackAutoScroll):Zg(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var e=t.originalEvent;this.options.dragOverBubble||e.rootEl||this._handleAutoScroll(e)},drop:function(){this.sortable.nativeDraggable?Kg(document,"dragover",this._handleAutoScroll):(Kg(document,"pointermove",this._handleFallbackAutoScroll),Kg(document,"touchmove",this._handleFallbackAutoScroll),Kg(document,"mousemove",this._handleFallbackAutoScroll)),Pb(),Rb(),clearTimeout(im),im=void 0},nulling:function(){Ib=Ob=Sb=kb=Mb=Db=Cb=null,Lb.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,e){var i=this,s=(t.touches?t.touches[0]:t).clientX,n=(t.touches?t.touches[0]:t).clientY,o=document.elementFromPoint(s,n);if(Ib=t,e||this.options.forceAutoScrollFallback||Ug||$g||Wg){Nb(t,this.options,o,e);var r=gm(o,!0);!kb||Mb&&s===Db&&n===Cb||(Mb&&Pb(),Mb=setInterval((function(){var o=gm(document.elementFromPoint(s,n),!0);o!==r&&(r=o,Rb()),Nb(t,i.options,o,e)}),10),Db=s,Cb=n)}else{if(!this.options.bubbleScroll||gm(o,!0)===lm())return void Rb();Nb(t,this.options,gm(o,!1),!1)}}},zg(t,{pluginName:"scroll",initializeByDefault:!0})}),yb.mount(qb,Fb),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("[data-sortable]").forEach((t=>function(t){const e=new yb(t,{multiDrag:!!t.hasAttribute("data-multi"),group:!!t.hasAttribute("data-multi")&&t.getAttribute("data-multi"),handle:!!t.hasAttribute("data-handle")&&t.getAttribute("data-handle"),filter:t.hasAttribute("data-disabled")?t.getAttribute("data-disabled"):".sortable__disabled",ghostClass:t.hasAttribute("data-ghost")?t.getAttribute("data-ghost"):"sortable__ghost",fallbackOnBody:!1,swapThreshold:.5,animation:150,onEnd:e=>{t.onEnd&&t.onEnd instanceof Function&&t.onEnd(),t.hasAttribute("data-callback")&&window[t.getAttribute("data-callback")]&&window[t.getAttribute("data-callback")](e)}});t.instance=e}(t)))}));var jb="object"==typeof global&&global&&global.Object===Object&&global,zb="object"==typeof self&&self&&self.Object===Object&&self,Vb=jb||zb||Function("return this")(),Hb=Vb.Symbol,$b=Object.prototype,Ub=$b.hasOwnProperty,Gb=$b.toString,Wb=Hb?Hb.toStringTag:void 0;var Yb=Object.prototype.toString;var Xb="[object Null]",Qb="[object Undefined]",Zb=Hb?Hb.toStringTag:void 0;function Kb(t){return null==t?void 0===t?Qb:Xb:Zb&&Zb in Object(t)?function(t){var e=Ub.call(t,Wb),i=t[Wb];try{t[Wb]=void 0;var s=!0}catch(t){}var n=Gb.call(t);return s&&(e?t[Wb]=i:delete t[Wb]),n}(t):function(t){return Yb.call(t)}(t)}function Jb(t){return null!=t&&"object"==typeof t}var tv=Array.isArray;function ev(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function iv(t){return t}var sv="[object AsyncFunction]",nv="[object Function]",ov="[object GeneratorFunction]",rv="[object Proxy]";function av(t){if(!ev(t))return!1;var e=Kb(t);return e==nv||e==ov||e==sv||e==rv}var lv=Vb["__core-js_shared__"],cv=function(){var t=/[^.]+$/.exec(lv&&lv.keys&&lv.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var hv=Function.prototype.toString;function dv(t){if(null!=t){try{return hv.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var uv=/^\[object .+?Constructor\]$/,pv=Function.prototype,fv=Object.prototype,gv=pv.toString,mv=fv.hasOwnProperty,bv=RegExp("^"+gv.call(mv).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vv(t){return!(!ev(t)||(e=t,cv&&cv in e))&&(av(t)?bv:uv).test(dv(t));var e}function yv(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return vv(i)?i:void 0}var Ev=yv(Vb,"WeakMap"),_v=Object.create,xv=function(){function t(){}return function(e){if(!ev(e))return{};if(_v)return _v(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();var wv=Date.now;var Tv,Av,Sv,Ov=function(){try{var t=yv(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Dv=Ov?function(t,e){return Ov(t,"toString",{configurable:!0,enumerable:!1,value:(i=e,function(){return i}),writable:!0});var i}:iv,Cv=(Tv=Dv,Av=0,Sv=0,function(){var t=wv(),e=16-(t-Sv);if(Sv=t,e>0){if(++Av>=800)return arguments[0]}else Av=0;return Tv.apply(void 0,arguments)});var Iv=9007199254740991,Mv=/^(?:0|[1-9]\d*)$/;function Lv(t,e){var i=typeof t;return!!(e=null==e?Iv:e)&&("number"==i||"symbol"!=i&&Mv.test(t))&&t>-1&&t%1==0&&t<e}function kv(t,e,i){"__proto__"==e&&Ov?Ov(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function Rv(t,e){return t===e||t!=t&&e!=e}var Pv=Object.prototype.hasOwnProperty;function Nv(t,e,i){var s=t[e];Pv.call(t,e)&&Rv(s,i)&&(void 0!==i||e in t)||kv(t,e,i)}var Bv=Math.max;function Fv(t,e){return Cv(function(t,e,i){return e=Bv(void 0===e?t.length-1:e,0),function(){for(var s=arguments,n=-1,o=Bv(s.length-e,0),r=Array(o);++n<o;)r[n]=s[e+n];n=-1;for(var c=Array(e+1);++n<e;)c[n]=s[n];return c[e]=i(r),function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}(t,this,c)}}(t,e,iv),t+"")}var qv=9007199254740991;function jv(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=qv}function zv(t){return null!=t&&jv(t.length)&&!av(t)}var Vv=Object.prototype;function Hv(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Vv)}function $v(t){return Jb(t)&&"[object Arguments]"==Kb(t)}var Uv=Object.prototype,Gv=Uv.hasOwnProperty,Wv=Uv.propertyIsEnumerable,Yv=$v(function(){return arguments}())?$v:function(t){return Jb(t)&&Gv.call(t,"callee")&&!Wv.call(t,"callee")};var Xv="object"==typeof exports&&exports&&!exports.nodeType&&exports,Qv=Xv&&"object"==typeof module&&module&&!module.nodeType&&module,Zv=Qv&&Qv.exports===Xv?Vb.Buffer:void 0,Kv=(Zv?Zv.isBuffer:void 0)||function(){return!1},Jv={};function ty(t){return function(e){return t(e)}}Jv["[object Float32Array]"]=Jv["[object Float64Array]"]=Jv["[object Int8Array]"]=Jv["[object Int16Array]"]=Jv["[object Int32Array]"]=Jv["[object Uint8Array]"]=Jv["[object Uint8ClampedArray]"]=Jv["[object Uint16Array]"]=Jv["[object Uint32Array]"]=!0,Jv["[object Arguments]"]=Jv["[object Array]"]=Jv["[object ArrayBuffer]"]=Jv["[object Boolean]"]=Jv["[object DataView]"]=Jv["[object Date]"]=Jv["[object Error]"]=Jv["[object Function]"]=Jv["[object Map]"]=Jv["[object Number]"]=Jv["[object Object]"]=Jv["[object RegExp]"]=Jv["[object Set]"]=Jv["[object String]"]=Jv["[object WeakMap]"]=!1;var ey="object"==typeof exports&&exports&&!exports.nodeType&&exports,iy=ey&&"object"==typeof module&&module&&!module.nodeType&&module,sy=iy&&iy.exports===ey&&jb.process,ny=function(){try{var t=iy&&iy.require&&iy.require("util").types;return t||sy&&sy.binding&&sy.binding("util")}catch(t){}}(),oy=ny&&ny.isTypedArray,ry=oy?ty(oy):function(t){return Jb(t)&&jv(t.length)&&!!Jv[Kb(t)]},ay=Object.prototype.hasOwnProperty;function ly(t,e){var i=tv(t),s=!i&&Yv(t),n=!i&&!s&&Kv(t),o=!i&&!s&&!n&&ry(t),r=i||s||n||o,c=r?function(t,e){for(var i=-1,s=Array(t);++i<t;)s[i]=e(i);return s}(t.length,String):[],h=c.length;for(var d in t)!e&&!ay.call(t,d)||r&&("length"==d||n&&("offset"==d||"parent"==d)||o&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||Lv(d,h))||c.push(d);return c}function cy(t,e){return function(i){return t(e(i))}}var hy=cy(Object.keys,Object),dy=Object.prototype.hasOwnProperty;function uy(t){return zv(t)?ly(t):function(t){if(!Hv(t))return hy(t);var e=[];for(var i in Object(t))dy.call(t,i)&&"constructor"!=i&&e.push(i);return e}(t)}var py=Object.prototype.hasOwnProperty;function fy(t){if(!ev(t))return function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}(t);var e=Hv(t),i=[];for(var s in t)("constructor"!=s||!e&&py.call(t,s))&&i.push(s);return i}function gy(t){return zv(t)?ly(t,!0):fy(t)}var my=yv(Object,"create");var by=Object.prototype.hasOwnProperty;var vy=Object.prototype.hasOwnProperty;function yy(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}function Ey(t,e){for(var i=t.length;i--;)if(Rv(t[i][0],e))return i;return-1}yy.prototype.clear=function(){this.__data__=my?my(null):{},this.size=0},yy.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},yy.prototype.get=function(t){var e=this.__data__;if(my){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return by.call(e,t)?e[t]:void 0},yy.prototype.has=function(t){var e=this.__data__;return my?void 0!==e[t]:vy.call(e,t)},yy.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=my&&void 0===e?"__lodash_hash_undefined__":e,this};var _y=Array.prototype.splice;function xy(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}xy.prototype.clear=function(){this.__data__=[],this.size=0},xy.prototype.delete=function(t){var e=this.__data__,i=Ey(e,t);return!(i<0)&&(i==e.length-1?e.pop():_y.call(e,i,1),--this.size,!0)},xy.prototype.get=function(t){var e=this.__data__,i=Ey(e,t);return i<0?void 0:e[i][1]},xy.prototype.has=function(t){return Ey(this.__data__,t)>-1},xy.prototype.set=function(t,e){var i=this.__data__,s=Ey(i,t);return s<0?(++this.size,i.push([t,e])):i[s][1]=e,this};var wy=yv(Vb,"Map");function Ty(t,e){var i,s,n=t.__data__;return("string"==(s=typeof(i=e))||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==i:null===i)?n["string"==typeof e?"string":"hash"]:n.map}function Ay(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}Ay.prototype.clear=function(){this.size=0,this.__data__={hash:new yy,map:new(wy||xy),string:new yy}},Ay.prototype.delete=function(t){var e=Ty(this,t).delete(t);return this.size-=e?1:0,e},Ay.prototype.get=function(t){return Ty(this,t).get(t)},Ay.prototype.has=function(t){return Ty(this,t).has(t)},Ay.prototype.set=function(t,e){var i=Ty(this,t),s=i.size;return i.set(t,e),this.size+=i.size==s?0:1,this};var Sy=cy(Object.getPrototypeOf,Object),Oy="[object Object]",Dy=Function.prototype,Cy=Object.prototype,Iy=Dy.toString,My=Cy.hasOwnProperty,Ly=Iy.call(Object);function ky(t){var e=this.__data__=new xy(t);this.size=e.size}ky.prototype.clear=function(){this.__data__=new xy,this.size=0},ky.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},ky.prototype.get=function(t){return this.__data__.get(t)},ky.prototype.has=function(t){return this.__data__.has(t)},ky.prototype.set=function(t,e){var i=this.__data__;if(i instanceof xy){var s=i.__data__;if(!wy||s.length<199)return s.push([t,e]),this.size=++i.size,this;i=this.__data__=new Ay(s)}return i.set(t,e),this.size=i.size,this};var Ry="object"==typeof exports&&exports&&!exports.nodeType&&exports,Py=Ry&&"object"==typeof module&&module&&!module.nodeType&&module,Ny=Py&&Py.exports===Ry?Vb.Buffer:void 0,By=Ny?Ny.allocUnsafe:void 0;function Fy(t,e){if(e)return t.slice();var i=t.length,s=By?By(i):new t.constructor(i);return t.copy(s),s}var qy=Object.prototype.propertyIsEnumerable,jy=Object.getOwnPropertySymbols,zy=jy?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var i=-1,s=null==t?0:t.length,n=0,o=[];++i<s;){var r=t[i];e(r,i,t)&&(o[n++]=r)}return o}(jy(t),(function(e){return qy.call(t,e)})))}:function(){return[]};function Vy(t){return function(t,e,i){var s=e(t);return tv(t)?s:function(t,e){for(var i=-1,s=e.length,n=t.length;++i<s;)t[n+i]=e[i];return t}(s,i(t))}(t,uy,zy)}var Hy=yv(Vb,"DataView"),$y=yv(Vb,"Promise"),Uy=yv(Vb,"Set"),Gy="[object Map]",Wy="[object Promise]",Yy="[object Set]",Xy="[object WeakMap]",Qy="[object DataView]",Zy=dv(Hy),Ky=dv(wy),Jy=dv($y),tE=dv(Uy),eE=dv(Ev),iE=Kb;(Hy&&iE(new Hy(new ArrayBuffer(1)))!=Qy||wy&&iE(new wy)!=Gy||$y&&iE($y.resolve())!=Wy||Uy&&iE(new Uy)!=Yy||Ev&&iE(new Ev)!=Xy)&&(iE=function(t){var e=Kb(t),i="[object Object]"==e?t.constructor:void 0,s=i?dv(i):"";if(s)switch(s){case Zy:return Qy;case Ky:return Gy;case Jy:return Wy;case tE:return Yy;case eE:return Xy}return e});var sE=Object.prototype.hasOwnProperty;var nE=Vb.Uint8Array;function oE(t){var e=new t.constructor(t.byteLength);return new nE(e).set(new nE(t)),e}var rE=/\w*$/;var aE=Hb?Hb.prototype:void 0,lE=aE?aE.valueOf:void 0;function cE(t,e){var i=e?oE(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}var hE="[object Boolean]",dE="[object Date]",uE="[object Map]",pE="[object Number]",fE="[object RegExp]",gE="[object Set]",mE="[object String]",bE="[object Symbol]",vE="[object ArrayBuffer]",yE="[object DataView]",EE="[object Float32Array]",_E="[object Float64Array]",xE="[object Int8Array]",wE="[object Int16Array]",TE="[object Int32Array]",AE="[object Uint8Array]",SE="[object Uint8ClampedArray]",OE="[object Uint16Array]",DE="[object Uint32Array]";function CE(t,e,i){var s,n,o,r,c,h=t.constructor;switch(e){case vE:return oE(t);case hE:case dE:return new h(+t);case yE:return c=oE((r=t).buffer),new r.constructor(c,r.byteOffset,r.byteLength);case EE:case _E:case xE:case wE:case TE:case AE:case SE:case OE:case DE:return cE(t,i);case uE:return new h;case pE:case mE:return new h(t);case fE:return(o=new(n=t).constructor(n.source,rE.exec(n))).lastIndex=n.lastIndex,o;case gE:return new h;case bE:return s=t,lE?Object(lE.call(s)):{}}}function IE(t){return"function"!=typeof t.constructor||Hv(t)?{}:xv(Sy(t))}var ME=ny&&ny.isMap,LE=ME?ty(ME):function(t){return Jb(t)&&"[object Map]"==iE(t)};var kE=ny&&ny.isSet,RE=kE?ty(kE):function(t){return Jb(t)&&"[object Set]"==iE(t)},PE=1,NE="[object Arguments]",BE="[object Function]",FE="[object GeneratorFunction]",qE="[object Object]",jE={};function zE(t,e,i,s,n,o){var r,c=e&PE;if(void 0!==r)return r;if(!ev(t))return t;var h=tv(t);if(h)r=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&sE.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t);else{var d=iE(t),u=d==BE||d==FE;if(Kv(t))return Fy(t,c);if(d==qE||d==NE||u&&!n)r=u?{}:IE(t);else{if(!jE[d])return n?t:{};r=CE(t,d,c)}}o||(o=new ky);var p=o.get(t);if(p)return p;o.set(t,r),RE(t)?t.forEach((function(s){r.add(zE(s,e,i,s,t,o))})):LE(t)&&t.forEach((function(s,n){r.set(n,zE(s,e,i,n,t,o))}));var m=h?void 0:Vy(t);return function(t,e){for(var i=-1,s=null==t?0:t.length;++i<s&&!1!==e(t[i],i,t););}(m||t,(function(s,n){m&&(s=t[n=s]),Nv(r,n,zE(s,e,i,n,t,o))})),r}jE[NE]=jE["[object Array]"]=jE["[object ArrayBuffer]"]=jE["[object DataView]"]=jE["[object Boolean]"]=jE["[object Date]"]=jE["[object Float32Array]"]=jE["[object Float64Array]"]=jE["[object Int8Array]"]=jE["[object Int16Array]"]=jE["[object Int32Array]"]=jE["[object Map]"]=jE["[object Number]"]=jE[qE]=jE["[object RegExp]"]=jE["[object Set]"]=jE["[object String]"]=jE["[object Symbol]"]=jE["[object Uint8Array]"]=jE["[object Uint8ClampedArray]"]=jE["[object Uint16Array]"]=jE["[object Uint32Array]"]=!0,jE["[object Error]"]=jE[BE]=jE["[object WeakMap]"]=!1;var VE=1,HE=4;function $E(t){return zE(t,VE|HE)}function UE(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new Ay;++e<i;)this.add(t[e])}function GE(t,e){for(var i=-1,s=null==t?0:t.length;++i<s;)if(e(t[i],i,t))return!0;return!1}UE.prototype.add=UE.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},UE.prototype.has=function(t){return this.__data__.has(t)};var WE=1,YE=2;function XE(t,e,i,s,n,o){var r=i&WE,c=t.length,h=e.length;if(c!=h&&!(r&&h>c))return!1;var d=o.get(t),u=o.get(e);if(d&&u)return d==e&&u==t;var p=-1,m=!0,b=i&YE?new UE:void 0;for(o.set(t,e),o.set(e,t);++p<c;){var v=t[p],y=e[p];if(s)var E=r?s(y,v,p,e,t,o):s(v,y,p,t,e,o);if(void 0!==E){if(E)continue;m=!1;break}if(b){if(!GE(e,(function(t,e){if(r=e,!b.has(r)&&(v===t||n(v,t,i,s,o)))return b.push(e);var r}))){m=!1;break}}else if(v!==y&&!n(v,y,i,s,o)){m=!1;break}}return o.delete(t),o.delete(e),m}function QE(t){var e=-1,i=Array(t.size);return t.forEach((function(t,s){i[++e]=[s,t]})),i}function ZE(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}var KE=1,JE=2,t_="[object Boolean]",e_="[object Date]",i_="[object Error]",s_="[object Map]",n_="[object Number]",o_="[object RegExp]",r_="[object Set]",a_="[object String]",l_="[object Symbol]",c_="[object ArrayBuffer]",h_="[object DataView]",d_=Hb?Hb.prototype:void 0,u_=d_?d_.valueOf:void 0;var p_=1,f_=Object.prototype.hasOwnProperty;var g_=1,m_="[object Arguments]",b_="[object Array]",v_="[object Object]",y_=Object.prototype.hasOwnProperty;function E_(t,e,i,s,n,o){var r=tv(t),c=tv(e),h=r?b_:iE(t),d=c?b_:iE(e),u=(h=h==m_?v_:h)==v_,p=(d=d==m_?v_:d)==v_,m=h==d;if(m&&Kv(t)){if(!Kv(e))return!1;r=!0,u=!1}if(m&&!u)return o||(o=new ky),r||ry(t)?XE(t,e,i,s,n,o):function(t,e,i,s,n,o,r){switch(i){case h_:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case c_:return!(t.byteLength!=e.byteLength||!o(new nE(t),new nE(e)));case t_:case e_:case n_:return Rv(+t,+e);case i_:return t.name==e.name&&t.message==e.message;case o_:case a_:return t==e+"";case s_:var c=QE;case r_:var h=s&KE;if(c||(c=ZE),t.size!=e.size&&!h)return!1;var d=r.get(t);if(d)return d==e;s|=JE,r.set(t,e);var u=XE(c(t),c(e),s,n,o,r);return r.delete(t),u;case l_:if(u_)return u_.call(t)==u_.call(e)}return!1}(t,e,h,i,s,n,o);if(!(i&g_)){var b=u&&y_.call(t,"__wrapped__"),v=p&&y_.call(e,"__wrapped__");if(b||v){var y=b?t.value():t,E=v?e.value():e;return o||(o=new ky),n(y,E,i,s,o)}}return!!m&&(o||(o=new ky),function(t,e,i,s,n,o){var r=i&p_,c=Vy(t),h=c.length;if(h!=Vy(e).length&&!r)return!1;for(var d=h;d--;){var u=c[d];if(!(r?u in e:f_.call(e,u)))return!1}var p=o.get(t),m=o.get(e);if(p&&m)return p==e&&m==t;var b=!0;o.set(t,e),o.set(e,t);for(var v=r;++d<h;){var y=t[u=c[d]],E=e[u];if(s)var x=r?s(E,y,u,e,t,o):s(y,E,u,t,e,o);if(!(void 0===x?y===E||n(y,E,i,s,o):x)){b=!1;break}v||(v="constructor"==u)}if(b&&!v){var w=t.constructor,S=e.constructor;w==S||!("constructor"in t)||!("constructor"in e)||"function"==typeof w&&w instanceof w&&"function"==typeof S&&S instanceof S||(b=!1)}return o.delete(t),o.delete(e),b}(t,e,i,s,n,o))}function __(t,e,i,s,n){return t===e||(null==t||null==e||!Jb(t)&&!Jb(e)?t!=t&&e!=e:E_(t,e,i,s,__,n))}var x_=function(t,e,i){for(var s=-1,n=Object(t),o=i(t),r=o.length;r--;){var c=o[++s];if(!1===e(n[c],c,n))break}return t};function w_(t,e,i){(void 0!==i&&!Rv(t[e],i)||void 0===i&&!(e in t))&&kv(t,e,i)}function T_(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function A_(t){return function(t,e,i,s){var n=!i;i||(i={});for(var o=-1,r=e.length;++o<r;){var c=e[o],h=void 0;void 0===h&&(h=t[c]),n?kv(i,c,h):Nv(i,c,h)}return i}(t,gy(t))}function S_(t,e,i,s,n,o,r){var c=T_(t,i),h=T_(e,i),d=r.get(h);if(d)w_(t,i,d);else{var u,p=o?o(c,h,i+"",t,e,r):void 0,m=void 0===p;if(m){var b=tv(h),v=!b&&Kv(h),y=!b&&!v&&ry(h);p=h,b||v||y?tv(c)?p=c:Jb(u=c)&&zv(u)?p=function(t,e){var i=-1,s=t.length;for(e||(e=Array(s));++i<s;)e[i]=t[i];return e}(c):v?(m=!1,p=Fy(h,!0)):y?(m=!1,p=cE(h,!0)):p=[]:function(t){if(!Jb(t)||Kb(t)!=Oy)return!1;var e=Sy(t);if(null===e)return!0;var i=My.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&Iy.call(i)==Ly}(h)||Yv(h)?(p=c,Yv(c)?p=A_(c):ev(c)&&!av(c)||(p=IE(h))):m=!1}m&&(r.set(h,p),n(p,h,s,o,r),r.delete(h)),w_(t,i,p)}}function O_(t,e,i,s,n){t!==e&&x_(e,(function(o,r){if(n||(n=new ky),ev(o))S_(t,e,r,i,O_,s,n);else{var c=s?s(T_(t,r),o,r+"",t,e,n):void 0;void 0===c&&(c=o),w_(t,r,c)}}),gy)}function D_(t,e){return __(t,e)}var C_,I_=(C_=function(t,e,i){O_(t,e,i)},Fv((function(t,e){var i=-1,s=e.length,n=s>1?e[s-1]:void 0,o=s>2?e[2]:void 0;for(n=C_.length>3&&"function"==typeof n?(s--,n):void 0,o&&function(t,e,i){if(!ev(i))return!1;var s=typeof e;return!!("number"==s?zv(i)&&Lv(e,i.length):"string"==s&&e in i)&&Rv(i[e],t)}(e[0],e[1],o)&&(n=s<3?void 0:n,s=1),t=Object(t);++i<s;){var r=e[i];r&&C_(t,r,i,n)}return t}))),M_=(t=>(t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY",t))(M_||{});class Attributor{constructor(t,e,i={}){this.attrName=t,this.keyName=e;const s=M_.TYPE&M_.ATTRIBUTE;this.scope=null!=i.scope?i.scope&M_.LEVEL|s:M_.ATTRIBUTE,null!=i.whitelist&&(this.whitelist=i.whitelist)}static keys(t){return Array.from(t.attributes).map((t=>t.name))}add(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)}canAdd(t,e){return null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1)}remove(t){t.removeAttribute(this.keyName)}value(t){const e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""}}class ParchmentError extends Error{constructor(t){super(t="[Parchment] "+t),this.message=t,this.name=this.constructor.name}}const L_=class _Registry{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(t,e=!1){if(null==t)return null;if(this.blots.has(t))return this.blots.get(t)||null;if(e){let i=null;try{i=t.parentNode}catch{return null}return this.find(i,e)}return null}create(t,e,i){const s=this.query(e);if(null==s)throw new ParchmentError(`Unable to create ${e} blot`);const n=s,o=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:n.create(i),r=new n(t,o,i);return _Registry.blots.set(r.domNode,r),r}find(t,e=!1){return _Registry.find(t,e)}query(t,e=M_.ANY){let i;return"string"==typeof t?i=this.types[t]||this.attributes[t]:t instanceof Text||t.nodeType===Node.TEXT_NODE?i=this.types.text:"number"==typeof t?t&M_.LEVEL&M_.BLOCK?i=this.types.block:t&M_.LEVEL&M_.INLINE&&(i=this.types.inline):t instanceof Element&&((t.getAttribute("class")||"").split(/\s+/).some((t=>(i=this.classes[t],!!i))),i=i||this.tags[t.tagName]),null==i?null:"scope"in i&&e&M_.LEVEL&i.scope&&e&M_.TYPE&i.scope?i:null}register(...t){return t.map((t=>{const e="blotName"in t,i="attrName"in t;if(!e&&!i)throw new ParchmentError("Invalid definition");if(e&&"abstract"===t.blotName)throw new ParchmentError("Cannot register abstract class");const s=e?t.blotName:i?t.attrName:void 0;return this.types[s]=t,i?"string"==typeof t.keyName&&(this.attributes[t.keyName]=t):e&&(t.className&&(this.classes[t.className]=t),t.tagName&&(Array.isArray(t.tagName)?t.tagName=t.tagName.map((t=>t.toUpperCase())):t.tagName=t.tagName.toUpperCase(),(Array.isArray(t.tagName)?t.tagName:[t.tagName]).forEach((e=>{(null==this.tags[e]||null==t.className)&&(this.tags[e]=t)})))),t}))}};L_.blots=new WeakMap;let k_=L_;function R_(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((t=>0===t.indexOf(`${e}-`)))}const P_=class ClassAttributor extends Attributor{static keys(t){return(t.getAttribute("class")||"").split(/\s+/).map((t=>t.split("-").slice(0,-1).join("-")))}add(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(`${this.keyName}-${e}`),!0)}remove(t){R_(t,this.keyName).forEach((e=>{t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")}value(t){const e=(R_(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""}};function N_(t){const e=t.split("-"),i=e.slice(1).map((t=>t[0].toUpperCase()+t.slice(1))).join("");return e[0]+i}const B_=class StyleAttributor extends Attributor{static keys(t){return(t.getAttribute("style")||"").split(";").map((t=>t.split(":")[0].trim()))}add(t,e){return!!this.canAdd(t,e)&&(t.style[N_(this.keyName)]=e,!0)}remove(t){t.style[N_(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")}value(t){const e=t.style[N_(this.keyName)];return this.canAdd(t,e)?e:""}};const F_=class AttributorStore{constructor(t){this.attributes={},this.domNode=t,this.build()}attribute(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])}build(){this.attributes={};const t=k_.find(this.domNode);if(null==t)return;const e=Attributor.keys(this.domNode),i=P_.keys(this.domNode),s=B_.keys(this.domNode);e.concat(i).concat(s).forEach((e=>{const i=t.scroll.query(e,M_.ATTRIBUTE);i instanceof Attributor&&(this.attributes[i.attrName]=i)}))}copy(t){Object.keys(this.attributes).forEach((e=>{const i=this.attributes[e].value(this.domNode);t.format(e,i)}))}move(t){this.copy(t),Object.keys(this.attributes).forEach((t=>{this.attributes[t].remove(this.domNode)})),this.attributes={}}values(){return Object.keys(this.attributes).reduce(((t,e)=>(t[e]=this.attributes[e].value(this.domNode),t)),{})}},q_=class _ShadowBlot{constructor(t,e){this.scroll=t,this.domNode=e,k_.blots.set(e,this),this.prev=null,this.next=null}static create(t){if(null==this.tagName)throw new ParchmentError("Blot definition missing tagName");let e,i;return Array.isArray(this.tagName)?("string"==typeof t?(i=t.toUpperCase(),parseInt(i,10).toString()===i&&(i=parseInt(i,10))):"number"==typeof t&&(i=t),e="number"==typeof i?document.createElement(this.tagName[i-1]):i&&this.tagName.indexOf(i)>-1?document.createElement(i):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const t=this.domNode.cloneNode(!1);return this.scroll.create(t)}detach(){null!=this.parent&&this.parent.removeChild(this),k_.blots.delete(this.domNode)}deleteAt(t,e){this.isolate(t,e).remove()}formatAt(t,e,i,s){const n=this.isolate(t,e);if(null!=this.scroll.query(i,M_.BLOT)&&s)n.wrap(i,s);else if(null!=this.scroll.query(i,M_.ATTRIBUTE)){const t=this.scroll.create(this.statics.scope);n.wrap(t),t.format(i,s)}}insertAt(t,e,i){const s=null==i?this.scroll.create("text",e):this.scroll.create(e,i),n=this.split(t);this.parent.insertBefore(s,n||void 0)}isolate(t,e){const i=this.split(t);if(null==i)throw new Error("Attempt to isolate at end");return i.split(e),i}length(){return 1}offset(t=this.parent){return null==this.parent||this===t?0:this.parent.children.offset(this)+this.parent.offset(t)}optimize(t){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(t,e){const i="string"==typeof t?this.scroll.create(t,e):t;return null!=this.parent&&(this.parent.insertBefore(i,this.next||void 0),this.remove()),i}split(t,e){return 0===t?this:this.next}update(t,e){}wrap(t,e){const i="string"==typeof t?this.scroll.create(t,e):t;if(null!=this.parent&&this.parent.insertBefore(i,this.next||void 0),"function"!=typeof i.appendChild)throw new ParchmentError(`Cannot wrap ${t}`);return i.appendChild(this),i}};q_.blotName="abstract";let j_=q_;const z_=class _LeafBlot extends j_{static value(t){return!0}index(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(t,e){let i=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return t>0&&(i+=1),[this.parent.domNode,i]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};z_.scope=M_.INLINE_BLOT;const V_=z_;class LinkedList{constructor(){this.head=null,this.tail=null,this.length=0}append(...t){if(this.insertBefore(t[0],null),t.length>1){const e=t.slice(1);this.append(...e)}}at(t){const e=this.iterator();let i=e();for(;i&&t>0;)t-=1,i=e();return i}contains(t){const e=this.iterator();let i=e();for(;i;){if(i===t)return!0;i=e()}return!1}indexOf(t){const e=this.iterator();let i=e(),s=0;for(;i;){if(i===t)return s;s+=1,i=e()}return-1}insertBefore(t,e){null!=t&&(this.remove(t),t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)}offset(t){let e=0,i=this.head;for(;null!=i;){if(i===t)return e;e+=i.length(),i=i.next}return-1}remove(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)}iterator(t=this.head){return()=>{const e=t;return null!=t&&(t=t.next),e}}find(t,e=!1){const i=this.iterator();let s=i();for(;s;){const n=s.length();if(t<n||e&&t===n&&(null==s.next||0!==s.next.length()))return[s,t];t-=n,s=i()}return[null,0]}forEach(t){const e=this.iterator();let i=e();for(;i;)t(i),i=e()}forEachAt(t,e,i){if(e<=0)return;const[s,n]=this.find(t);let o=t-n;const r=this.iterator(s);let c=r();for(;c&&o<t+e;){const s=c.length();t>o?i(c,t-o,Math.min(e,o+s-t)):i(c,0,Math.min(s,t+e-o)),o+=s,c=r()}}map(t){return this.reduce(((e,i)=>(e.push(t(i)),e)),[])}reduce(t,e){const i=this.iterator();let s=i();for(;s;)e=t(e,s),s=i();return e}}function H_(t,e){const i=e.find(t);if(i)return i;try{return e.create(t)}catch{const i=e.create(M_.INLINE);return Array.from(t.childNodes).forEach((t=>{i.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(i.domNode,t),i.attach(),i}}const $_=class _ParentBlot extends j_{constructor(t,e){super(t,e),this.uiNode=null,this.build()}appendChild(t){this.insertBefore(t)}attach(){super.attach(),this.children.forEach((t=>{t.attach()}))}attachUI(t){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=t,_ParentBlot.uiClass&&this.uiNode.classList.add(_ParentBlot.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new LinkedList,Array.from(this.domNode.childNodes).filter((t=>t!==this.uiNode)).reverse().forEach((t=>{try{const e=H_(t,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(t){if(t instanceof ParchmentError)return;throw t}}))}deleteAt(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,((t,e,i)=>{t.deleteAt(e,i)}))}descendant(t,e=0){const[i,s]=this.children.find(e);return null==t.blotName&&t(i)||null!=t.blotName&&i instanceof t?[i,s]:i instanceof _ParentBlot?i.descendant(t,s):[null,-1]}descendants(t,e=0,i=Number.MAX_VALUE){let s=[],n=i;return this.children.forEachAt(e,i,((e,i,o)=>{(null==t.blotName&&t(e)||null!=t.blotName&&e instanceof t)&&s.push(e),e instanceof _ParentBlot&&(s=s.concat(e.descendants(t,i,n))),n-=o})),s}detach(){this.children.forEach((t=>{t.detach()})),super.detach()}enforceAllowedChildren(){let t=!1;this.children.forEach((e=>{t||this.statics.allowedChildren.some((t=>e instanceof t))||(e.statics.scope===M_.BLOCK_BLOT?(null!=e.next&&this.splitAfter(e),null!=e.prev&&this.splitAfter(e.prev),e.parent.unwrap(),t=!0):e instanceof _ParentBlot?e.unwrap():e.remove())}))}formatAt(t,e,i,s){this.children.forEachAt(t,e,((t,e,n)=>{t.formatAt(e,n,i,s)}))}insertAt(t,e,i){const[s,n]=this.children.find(t);if(s)s.insertAt(n,e,i);else{const t=null==i?this.scroll.create("text",e):this.scroll.create(e,i);this.appendChild(t)}}insertBefore(t,e){null!=t.parent&&t.parent.children.remove(t);let i=null;this.children.insertBefore(t,e||null),t.parent=this,null!=e&&(i=e.domNode),(this.domNode.parentNode!==t.domNode||this.domNode.nextSibling!==i)&&this.domNode.insertBefore(t.domNode,i),t.attach()}length(){return this.children.reduce(((t,e)=>t+e.length()),0)}moveChildren(t,e){this.children.forEach((i=>{t.insertBefore(i,e)}))}optimize(t){if(super.optimize(t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t)}else this.remove()}path(t,e=!1){const[i,s]=this.children.find(t,e),n=[[this,t]];return i instanceof _ParentBlot?n.concat(i.path(s,e)):(null!=i&&n.push([i,s]),n)}removeChild(t){this.children.remove(t)}replaceWith(t,e){const i="string"==typeof t?this.scroll.create(t,e):t;return i instanceof _ParentBlot&&this.moveChildren(i),super.replaceWith(i)}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const i=this.clone();return this.parent&&this.parent.insertBefore(i,this.next||void 0),this.children.forEachAt(t,this.length(),((t,s,n)=>{const o=t.split(s,e);null!=o&&i.appendChild(o)})),i}splitAfter(t){const e=this.clone();for(;null!=t.next;)e.appendChild(t.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(t,e){const i=[],s=[];t.forEach((t=>{t.target===this.domNode&&"childList"===t.type&&(i.push(...t.addedNodes),s.push(...t.removedNodes))})),s.forEach((t=>{if(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const e=this.scroll.find(t);null!=e&&(null==e.domNode.parentNode||e.domNode.parentNode===this.domNode)&&e.detach()})),i.filter((t=>t.parentNode===this.domNode&&t!==this.uiNode)).sort(((t,e)=>t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1)).forEach((t=>{let e=null;null!=t.nextSibling&&(e=this.scroll.find(t.nextSibling));const i=H_(t,this.scroll);(i.next!==e||null==i.next)&&(null!=i.parent&&i.parent.removeChild(this),this.insertBefore(i,e||void 0))})),this.enforceAllowedChildren()}};$_.uiClass="";const U_=$_;const G_=class _InlineBlot extends U_{static create(t){return super.create(t)}static formats(t,e){const i=e.query(_InlineBlot.blotName);if(null==i||t.tagName!==i.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new F_(this.domNode)}format(t,e){if(t!==this.statics.blotName||e){const i=this.scroll.query(t,M_.INLINE);if(null==i)return;i instanceof Attributor?this.attributes.attribute(i,e):e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e)}else this.children.forEach((t=>{t instanceof _InlineBlot||(t=t.wrap(_InlineBlot.blotName,!0)),this.attributes.copy(t)})),this.unwrap()}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,i,s){null!=this.formats()[i]||this.scroll.query(i,M_.ATTRIBUTE)?this.isolate(t,e).format(i,s):super.formatAt(t,e,i,s)}optimize(t){super.optimize(t);const e=this.formats();if(0===Object.keys(e).length)return this.unwrap();const i=this.next;i instanceof _InlineBlot&&i.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const i in t)if(t[i]!==e[i])return!1;return!0}(e,i.formats())&&(i.moveChildren(this),i.remove())}replaceWith(t,e){const i=super.replaceWith(t,e);return this.attributes.copy(i),i}update(t,e){super.update(t,e),t.some((t=>t.target===this.domNode&&"attributes"===t.type))&&this.attributes.build()}wrap(t,e){const i=super.wrap(t,e);return i instanceof _InlineBlot&&this.attributes.move(i),i}};G_.allowedChildren=[G_,V_],G_.blotName="inline",G_.scope=M_.INLINE_BLOT,G_.tagName="SPAN";const W_=G_,Y_=class _BlockBlot extends U_{static create(t){return super.create(t)}static formats(t,e){const i=e.query(_BlockBlot.blotName);if(null==i||t.tagName!==i.tagName){if("string"==typeof this.tagName)return!0;if(Array.isArray(this.tagName))return t.tagName.toLowerCase()}}constructor(t,e){super(t,e),this.attributes=new F_(this.domNode)}format(t,e){const i=this.scroll.query(t,M_.BLOCK);null!=i&&(i instanceof Attributor?this.attributes.attribute(i,e):t!==this.statics.blotName||e?e&&(t!==this.statics.blotName||this.formats()[t]!==e)&&this.replaceWith(t,e):this.replaceWith(_BlockBlot.blotName))}formats(){const t=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return null!=e&&(t[this.statics.blotName]=e),t}formatAt(t,e,i,s){null!=this.scroll.query(i,M_.BLOCK)?this.format(i,s):super.formatAt(t,e,i,s)}insertAt(t,e,i){if(null==i||null!=this.scroll.query(e,M_.INLINE))super.insertAt(t,e,i);else{const s=this.split(t);if(null==s)throw new Error("Attempt to insertAt after block boundaries");{const t=this.scroll.create(e,i);s.parent.insertBefore(t,s)}}}replaceWith(t,e){const i=super.replaceWith(t,e);return this.attributes.copy(i),i}update(t,e){super.update(t,e),t.some((t=>t.target===this.domNode&&"attributes"===t.type))&&this.attributes.build()}};Y_.blotName="block",Y_.scope=M_.BLOCK_BLOT,Y_.tagName="P",Y_.allowedChildren=[W_,Y_,V_];const X_=Y_,Q_=class _ContainerBlot extends U_{checkMerge(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName}deleteAt(t,e){super.deleteAt(t,e),this.enforceAllowedChildren()}formatAt(t,e,i,s){super.formatAt(t,e,i,s),this.enforceAllowedChildren()}insertAt(t,e,i){super.insertAt(t,e,i),this.enforceAllowedChildren()}optimize(t){super.optimize(t),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Q_.blotName="container",Q_.scope=M_.BLOCK_BLOT;const Z_=Q_;const K_=class EmbedBlot extends V_{static formats(t,e){}format(t,e){super.formatAt(0,this.length(),t,e)}formatAt(t,e,i,s){0===t&&e===this.length()?this.format(i,s):super.formatAt(t,e,i,s)}formats(){return this.statics.formats(this.domNode,this.scroll)}},J_={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},tx=class _ScrollBlot extends U_{constructor(t,e){super(null,e),this.registry=t,this.scroll=this,this.build(),this.observer=new MutationObserver((t=>{this.update(t)})),this.observer.observe(this.domNode,J_),this.attach()}create(t,e){return this.registry.create(this,t,e)}find(t,e=!1){const i=this.registry.find(t,e);return i?i.scroll===this?i:e?this.find(i.scroll.domNode.parentNode,!0):null:null}query(t,e=M_.ANY){return this.registry.query(t,e)}register(...t){return this.registry.register(...t)}build(){null!=this.scroll&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(t,e){this.update(),0===t&&e===this.length()?this.children.forEach((t=>{t.remove()})):super.deleteAt(t,e)}formatAt(t,e,i,s){this.update(),super.formatAt(t,e,i,s)}insertAt(t,e,i){this.update(),super.insertAt(t,e,i)}optimize(t=[],e={}){super.optimize(e);const i=e.mutationsMap||new WeakMap;let s=Array.from(this.observer.takeRecords());for(;s.length>0;)t.push(s.pop());const n=(t,e=!0)=>{null==t||t===this||null!=t.domNode.parentNode&&(i.has(t.domNode)||i.set(t.domNode,[]),e&&n(t.parent))},o=t=>{i.has(t.domNode)&&(t instanceof U_&&t.children.forEach(o),i.delete(t.domNode),t.optimize(e))};let r=t;for(let e=0;r.length>0;e+=1){if(e>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(r.forEach((t=>{const e=this.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(n(this.find(t.previousSibling,!1)),Array.from(t.addedNodes).forEach((t=>{const e=this.find(t,!1);n(e,!1),e instanceof U_&&e.children.forEach((t=>{n(t,!1)}))}))):"attributes"===t.type&&n(e.prev)),n(e))})),this.children.forEach(o),r=Array.from(this.observer.takeRecords()),s=r.slice();s.length>0;)t.push(s.pop())}}update(t,e={}){t=t||this.observer.takeRecords();const i=new WeakMap;t.map((t=>{const e=this.find(t.target,!0);return null==e?null:i.has(e.domNode)?(i.get(e.domNode).push(t),null):(i.set(e.domNode,[t]),e)})).forEach((t=>{null!=t&&t!==this&&i.has(t.domNode)&&t.update(i.get(t.domNode)||[],e)})),e.mutationsMap=i,i.has(this.domNode)&&super.update(i.get(this.domNode),e),this.optimize(t,e)}};tx.blotName="scroll",tx.defaultChild=X_,tx.allowedChildren=[X_,Z_],tx.scope=M_.BLOCK_BLOT,tx.tagName="DIV";const ex=tx,ix=class _TextBlot extends V_{static create(t){return document.createTextNode(t)}static value(t){return t.data}constructor(t,e){super(t,e),this.text=this.statics.value(this.domNode)}deleteAt(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)}index(t,e){return this.domNode===t?e:-1}insertAt(t,e,i){null==i?(this.text=this.text.slice(0,t)+e+this.text.slice(t),this.domNode.data=this.text):super.insertAt(t,e,i)}length(){return this.text.length}optimize(t){super.optimize(t),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof _TextBlot&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(t,e=!1){return[this.domNode,t]}split(t,e=!1){if(!e){if(0===t)return this;if(t===this.length())return this.next}const i=this.scroll.create(this.domNode.splitText(t));return this.parent.insertBefore(i,this.next||void 0),this.text=this.statics.value(this.domNode),i}update(t,e){t.some((t=>"characterData"===t.type&&t.target===this.domNode))&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};ix.blotName="text",ix.scope=M_.INLINE_BLOT;const sx=ix;var nx,ox,rx=Object.freeze({__proto__:null,Attributor:Attributor,AttributorStore:F_,BlockBlot:X_,ClassAttributor:P_,ContainerBlot:Z_,EmbedBlot:K_,InlineBlot:W_,LeafBlot:V_,ParentBlot:U_,Registry:k_,Scope:M_,ScrollBlot:ex,StyleAttributor:B_,TextBlot:sx}),ax={exports:{}};function lx(){if(ox)return nx;ox=1;var t=-1,e=1,i=0;function s(v,y,E,x,S){if(v===y)return v?[[i,v]]:[];if(null!=E){var O=function(t,e,i){var s="number"==typeof i?{index:i,length:0}:i.oldRange,n="number"==typeof i?null:i.newRange,o=t.length,r=e.length;if(0===s.length&&(null===n||0===n.length)){var c=s.index,h=t.slice(0,c),d=t.slice(c),u=n?n.index:null,p=c+r-o;if((null===u||u===p)&&!(p<0||p>r)){var m=e.slice(0,p);if((y=e.slice(p))===d){var b=Math.min(c,p);if((x=h.slice(0,b))===(O=m.slice(0,b)))return w(x,h.slice(b),m.slice(b),d)}}if(null===u||u===c){var v=c,y=(m=e.slice(0,v),e.slice(v));if(m===h){var E=Math.min(o-v,r-v);if((S=d.slice(d.length-E))===(D=y.slice(y.length-E)))return w(h,d.slice(0,d.length-E),y.slice(0,y.length-E),S)}}}if(s.length>0&&n&&0===n.length){var x=t.slice(0,s.index),S=t.slice(s.index+s.length);if(!(r<(b=x.length)+(E=S.length))){var O=e.slice(0,b),D=e.slice(r-E);if(x===O&&S===D)return w(x,t.slice(b,o-E),e.slice(b,r-E),S)}}return null}(v,y,E);if(O)return O}var D=o(v,y),M=v.substring(0,D);D=c(v=v.substring(D),y=y.substring(D));var k=v.substring(v.length-D),P=function(r,h){var d;if(!r)return[[e,h]];if(!h)return[[t,r]];var u=r.length>h.length?r:h,p=r.length>h.length?h:r,m=u.indexOf(p);if(-1!==m)return d=[[e,u.substring(0,m)],[i,p],[e,u.substring(m+p.length)]],r.length>h.length&&(d[0][0]=d[2][0]=t),d;if(1===p.length)return[[t,r],[e,h]];var b=function(t,e){var i=t.length>e.length?t:e,s=t.length>e.length?e:t;if(i.length<4||2*s.length<i.length)return null;function n(t,e,i){for(var s,n,r,h,d=t.substring(i,i+Math.floor(t.length/4)),u=-1,p="";-1!==(u=e.indexOf(d,u+1));){var m=o(t.substring(i),e.substring(u)),b=c(t.substring(0,i),e.substring(0,u));p.length<b+m&&(p=e.substring(u-b,u)+e.substring(u,u+m),s=t.substring(0,i-b),n=t.substring(i+m),r=e.substring(0,u-b),h=e.substring(u+m))}return 2*p.length>=t.length?[s,n,r,h,p]:null}var r,h,d,u,p,m=n(i,s,Math.ceil(i.length/4)),b=n(i,s,Math.ceil(i.length/2));if(!m&&!b)return null;r=b?m&&m[4].length>b[4].length?m:b:m;t.length>e.length?(h=r[0],d=r[1],u=r[2],p=r[3]):(u=r[0],p=r[1],h=r[2],d=r[3]);var v=r[4];return[h,d,u,p,v]}(r,h);if(b){var v=b[0],y=b[1],E=b[2],x=b[3],w=b[4],S=s(v,E),O=s(y,x);return S.concat([[i,w]],O)}return function(i,s){for(var o=i.length,r=s.length,c=Math.ceil((o+r)/2),h=c,d=2*c,u=new Array(d),p=new Array(d),m=0;m<d;m++)u[m]=-1,p[m]=-1;u[h+1]=0,p[h+1]=0;for(var b=o-r,v=b%2!=0,y=0,E=0,x=0,w=0,S=0;S<c;S++){for(var O=-S+y;O<=S-E;O+=2){for(var D=h+O,M=(F=O===-S||O!==S&&u[D-1]<u[D+1]?u[D+1]:u[D-1]+1)-O;F<o&&M<r&&i.charAt(F)===s.charAt(M);)F++,M++;if(u[D]=F,F>o)E+=2;else if(M>r)y+=2;else if(v){if((N=h+b-O)>=0&&N<d&&-1!==p[N])if(F>=(P=o-p[N]))return n(i,s,F,M)}}for(var k=-S+x;k<=S-w;k+=2){for(var P,N=h+k,B=(P=k===-S||k!==S&&p[N-1]<p[N+1]?p[N+1]:p[N-1]+1)-k;P<o&&B<r&&i.charAt(o-P-1)===s.charAt(r-B-1);)P++,B++;if(p[N]=P,P>o)w+=2;else if(B>r)x+=2;else if(!v){if((D=h+b-k)>=0&&D<d&&-1!==u[D]){var F;M=h+(F=u[D])-D;if(F>=(P=o-P))return n(i,s,F,M)}}}}return[[t,i],[e,s]]}(r,h)}(v=v.substring(0,v.length-D),y=y.substring(0,y.length-D));return M&&P.unshift([i,M]),k&&P.push([i,k]),b(P,S),x&&function(s){var n=!1,o=[],v=0,y=null,E=0,x=0,w=0,S=0,O=0;for(;E<s.length;)s[E][0]==i?(o[v++]=E,x=S,w=O,S=0,O=0,y=s[E][1]):(s[E][0]==e?S+=s[E][1].length:O+=s[E][1].length,y&&y.length<=Math.max(x,w)&&y.length<=Math.max(S,O)&&(s.splice(o[v-1],0,[t,y]),s[o[v-1]+1][0]=e,v--,E=--v>0?o[v-1]:-1,x=0,w=0,S=0,O=0,y=null,n=!0)),E++;n&&b(s);(function(t){function e(t,e){if(!t||!e)return 6;var i=t.charAt(t.length-1),s=e.charAt(0),n=i.match(h),o=s.match(h),r=n&&i.match(d),c=o&&s.match(d),b=r&&i.match(u),v=c&&s.match(u),y=b&&t.match(p),E=v&&e.match(m);return y||E?5:b||v?4:n&&!r&&c?3:r||c?2:n||o?1:0}var s=1;for(;s<t.length-1;){if(t[s-1][0]==i&&t[s+1][0]==i){var n=t[s-1][1],o=t[s][1],r=t[s+1][1],b=c(n,o);if(b){var v=o.substring(o.length-b);n=n.substring(0,n.length-b),o=v+o.substring(0,o.length-b),r=v+r}for(var y=n,E=o,x=r,w=e(n,o)+e(o,r);o.charAt(0)===r.charAt(0);){n+=o.charAt(0),o=o.substring(1)+r.charAt(0),r=r.substring(1);var S=e(n,o)+e(o,r);S>=w&&(w=S,y=n,E=o,x=r)}t[s-1][1]!=y&&(y?t[s-1][1]=y:(t.splice(s-1,1),s--),t[s][1]=E,x?t[s+1][1]=x:(t.splice(s+1,1),s--))}s++}})(s),E=1;for(;E<s.length;){if(s[E-1][0]==t&&s[E][0]==e){var D=s[E-1][1],M=s[E][1],k=r(D,M),P=r(M,D);k>=P?(k>=D.length/2||k>=M.length/2)&&(s.splice(E,0,[i,M.substring(0,k)]),s[E-1][1]=D.substring(0,D.length-k),s[E+1][1]=M.substring(k),E++):(P>=D.length/2||P>=M.length/2)&&(s.splice(E,0,[i,D.substring(0,P)]),s[E-1][0]=e,s[E-1][1]=M.substring(0,M.length-P),s[E+1][0]=t,s[E+1][1]=D.substring(P),E++),E++}E++}}(P),P}function n(t,e,i,n){var o=t.substring(0,i),r=e.substring(0,n),c=t.substring(i),h=e.substring(n),d=s(o,r),u=s(c,h);return d.concat(u)}function o(t,e){if(!t||!e||t.charAt(0)!==e.charAt(0))return 0;for(var i=0,s=Math.min(t.length,e.length),n=s,o=0;i<n;)t.substring(o,n)==e.substring(o,n)?o=i=n:s=n,n=Math.floor((s-i)/2+i);return v(t.charCodeAt(n-1))&&n--,n}function r(t,e){var i=t.length,s=e.length;if(0==i||0==s)return 0;i>s?t=t.substring(i-s):i<s&&(e=e.substring(0,i));var n=Math.min(i,s);if(t==e)return n;for(var o=0,r=1;;){var c=t.substring(n-r),h=e.indexOf(c);if(-1==h)return o;r+=h,0!=h&&t.substring(n-r)!=e.substring(0,r)||(o=r,r++)}}function c(t,e){if(!t||!e||t.slice(-1)!==e.slice(-1))return 0;for(var i=0,s=Math.min(t.length,e.length),n=s,o=0;i<n;)t.substring(t.length-n,t.length-o)==e.substring(e.length-n,e.length-o)?o=i=n:s=n,n=Math.floor((s-i)/2+i);return y(t.charCodeAt(t.length-n))&&n--,n}var h=/[^a-zA-Z0-9]/,d=/\s/,u=/[\r\n]/,p=/\n\r?\n$/,m=/^\r?\n\r?\n/;function b(s,n){s.push([i,""]);for(var r,h=0,d=0,u=0,p="",m="";h<s.length;)if(h<s.length-1&&!s[h][1])s.splice(h,1);else switch(s[h][0]){case e:u++,m+=s[h][1],h++;break;case t:d++,p+=s[h][1],h++;break;case i:var v=h-u-d-1;if(n){if(v>=0&&x(s[v][1])){var y=s[v][1].slice(-1);if(s[v][1]=s[v][1].slice(0,-1),p=y+p,m=y+m,!s[v][1]){s.splice(v,1),h--;var w=v-1;s[w]&&s[w][0]===e&&(u++,m=s[w][1]+m,w--),s[w]&&s[w][0]===t&&(d++,p=s[w][1]+p,w--),v=w}}if(E(s[h][1])){y=s[h][1].charAt(0);s[h][1]=s[h][1].slice(1),p+=y,m+=y}}if(h<s.length-1&&!s[h][1]){s.splice(h,1);break}if(p.length>0||m.length>0){p.length>0&&m.length>0&&(0!==(r=o(m,p))&&(v>=0?s[v][1]+=m.substring(0,r):(s.splice(0,0,[i,m.substring(0,r)]),h++),m=m.substring(r),p=p.substring(r)),0!==(r=c(m,p))&&(s[h][1]=m.substring(m.length-r)+s[h][1],m=m.substring(0,m.length-r),p=p.substring(0,p.length-r)));var S=u+d;0===p.length&&0===m.length?(s.splice(h-S,S),h-=S):0===p.length?(s.splice(h-S,S,[e,m]),h=h-S+1):0===m.length?(s.splice(h-S,S,[t,p]),h=h-S+1):(s.splice(h-S,S,[t,p],[e,m]),h=h-S+2)}0!==h&&s[h-1][0]===i?(s[h-1][1]+=s[h][1],s.splice(h,1)):h++,u=0,d=0,p="",m=""}""===s[s.length-1][1]&&s.pop();var O=!1;for(h=1;h<s.length-1;)s[h-1][0]===i&&s[h+1][0]===i&&(s[h][1].substring(s[h][1].length-s[h-1][1].length)===s[h-1][1]?(s[h][1]=s[h-1][1]+s[h][1].substring(0,s[h][1].length-s[h-1][1].length),s[h+1][1]=s[h-1][1]+s[h+1][1],s.splice(h-1,1),O=!0):s[h][1].substring(0,s[h+1][1].length)==s[h+1][1]&&(s[h-1][1]+=s[h+1][1],s[h][1]=s[h][1].substring(s[h+1][1].length)+s[h+1][1],s.splice(h+1,1),O=!0)),h++;O&&b(s,n)}function v(t){return t>=55296&&t<=56319}function y(t){return t>=56320&&t<=57343}function E(t){return y(t.charCodeAt(0))}function x(t){return v(t.charCodeAt(t.length-1))}function w(s,n,o,r){return x(s)||E(r)?null:function(t){for(var e=[],i=0;i<t.length;i++)t[i][1].length>0&&e.push(t[i]);return e}([[i,s],[t,n],[e,o],[i,r]])}function S(t,e,i,n){return s(t,e,i,n,!0)}return S.INSERT=e,S.DELETE=t,S.EQUAL=i,nx=S}var cx,hx={exports:{}};function dx(){return cx||(cx=1,function(t,e){var i="__lodash_hash_undefined__",s=9007199254740991,n="[object Arguments]",o="[object Boolean]",r="[object Date]",c="[object Function]",d="[object GeneratorFunction]",u="[object Map]",p="[object Number]",m="[object Object]",b="[object Promise]",v="[object RegExp]",y="[object Set]",E="[object String]",x="[object Symbol]",w="[object WeakMap]",S="[object ArrayBuffer]",O="[object DataView]",D="[object Float32Array]",M="[object Float64Array]",k="[object Int8Array]",P="[object Int16Array]",N="[object Int32Array]",B="[object Uint8Array]",F="[object Uint8ClampedArray]",q="[object Uint16Array]",j="[object Uint32Array]",z=/\w*$/,$=/^\[object .+?Constructor\]$/,U=/^(?:0|[1-9]\d*)$/,G={};G[n]=G["[object Array]"]=G[S]=G[O]=G[o]=G[r]=G[D]=G[M]=G[k]=G[P]=G[N]=G[u]=G[p]=G[m]=G[v]=G[y]=G[E]=G[x]=G[B]=G[F]=G[q]=G[j]=!0,G["[object Error]"]=G[c]=G[w]=!1;var Y="object"==typeof h&&h&&h.Object===Object&&h,X="object"==typeof self&&self&&self.Object===Object&&self,K=Y||X||Function("return this")(),J=e&&!e.nodeType&&e,tt=J&&t&&!t.nodeType&&t,et=tt&&tt.exports===J;function it(t,e){return t.set(e[0],e[1]),t}function st(t,e){return t.add(e),t}function nt(t,e,i,s){for(var n=-1,o=t?t.length:0;++n<o;)i=e(i,t[n],n,t);return i}function ot(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function rt(t){var e=-1,i=Array(t.size);return t.forEach((function(t,s){i[++e]=[s,t]})),i}function at(t,e){return function(i){return t(e(i))}}function lt(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}var ct=Array.prototype,ht=Function.prototype,dt=Object.prototype,ut=K["__core-js_shared__"],pt=function(){var t=/[^.]+$/.exec(ut&&ut.keys&&ut.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),ft=ht.toString,gt=dt.hasOwnProperty,mt=dt.toString,bt=RegExp("^"+ft.call(gt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),vt=et?K.Buffer:void 0,yt=K.Symbol,Et=K.Uint8Array,_t=at(Object.getPrototypeOf,Object),xt=Object.create,Tt=dt.propertyIsEnumerable,At=ct.splice,St=Object.getOwnPropertySymbols,Ot=vt?vt.isBuffer:void 0,Ct=at(Object.keys,Object),Mt=oe(K,"DataView"),kt=oe(K,"Map"),Rt=oe(K,"Promise"),Pt=oe(K,"Set"),Nt=oe(K,"WeakMap"),Bt=oe(Object,"create"),Ft=he(Mt),qt=he(kt),jt=he(Rt),zt=he(Pt),Vt=he(Nt),Ht=yt?yt.prototype:void 0,$t=Ht?Ht.valueOf:void 0;function Ut(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}function Gt(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}function Wt(t){var e=-1,i=t?t.length:0;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}function Xt(t){this.__data__=new Gt(t)}function Zt(t,e){var i=ue(t)||function(t){return function(t){return function(t){return!!t&&"object"==typeof t}(t)&&pe(t)}(t)&&gt.call(t,"callee")&&(!Tt.call(t,"callee")||mt.call(t)==n)}(t)?function(t,e){for(var i=-1,s=Array(t);++i<t;)s[i]=e(i);return s}(t.length,String):[],s=i.length,o=!!s;for(var r in t)!gt.call(t,r)||o&&("length"==r||le(r,s))||i.push(r);return i}function Kt(t,e,i){var s=t[e];gt.call(t,e)&&de(s,i)&&(void 0!==i||e in t)||(t[e]=i)}function Jt(t,e){for(var i=t.length;i--;)if(de(t[i][0],e))return i;return-1}function te(t,e,i,s,h,b,w){var $;if(s&&($=b?s(t,h,b,w):s(t)),void 0!==$)return $;if(!me(t))return t;var U=ue(t);if(U){if($=function(t){var e=t.length,i=t.constructor(e);e&&"string"==typeof t[0]&&gt.call(t,"index")&&(i.index=t.index,i.input=t.input);return i}(t),!e)return function(t,e){var i=-1,s=t.length;e||(e=Array(s));for(;++i<s;)e[i]=t[i];return e}(t,$)}else{var Y=ae(t),X=Y==c||Y==d;if(fe(t))return function(t,e){if(e)return t.slice();var i=new t.constructor(t.length);return t.copy(i),i}(t,e);if(Y==m||Y==n||X&&!b){if(ot(t))return b?t:{};if($=function(t){return"function"!=typeof t.constructor||ce(t)?{}:(e=_t(t),me(e)?xt(e):{});var e}(X?{}:t),!e)return function(t,e){return se(t,re(t),e)}(t,function(t,e){return t&&se(e,be(e),t)}($,t))}else{if(!G[Y])return b?t:{};$=function(t,e,i,s){var n=t.constructor;switch(e){case S:return ie(t);case o:case r:return new n(+t);case O:return function(t,e){var i=e?ie(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,s);case D:case M:case k:case P:case N:case B:case F:case q:case j:return function(t,e){var i=e?ie(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}(t,s);case u:return function(t,e,i){var s=e?i(rt(t),!0):rt(t);return nt(s,it,new t.constructor)}(t,s,i);case p:case E:return new n(t);case v:return function(t){var e=new t.constructor(t.source,z.exec(t));return e.lastIndex=t.lastIndex,e}(t);case y:return function(t,e,i){var s=e?i(lt(t),!0):lt(t);return nt(s,st,new t.constructor)}(t,s,i);case x:return c=t,$t?Object($t.call(c)):{}}var c}(t,Y,te,e)}}w||(w=new Xt);var K=w.get(t);if(K)return K;if(w.set(t,$),!U)var J=i?function(t){return function(t,e,i){var s=e(t);return ue(t)?s:function(t,e){for(var i=-1,s=e.length,n=t.length;++i<s;)t[n+i]=e[i];return t}(s,i(t))}(t,be,re)}(t):be(t);return function(t,e){for(var i=-1,s=t?t.length:0;++i<s&&!1!==e(t[i],i,t););}(J||t,(function(n,o){J&&(n=t[o=n]),Kt($,o,te(n,e,i,s,o,t,w))})),$}function ee(t){return!(!me(t)||function(t){return!!pt&&pt in t}(t))&&(ge(t)||ot(t)?bt:$).test(he(t))}function ie(t){var e=new t.constructor(t.byteLength);return new Et(e).set(new Et(t)),e}function se(t,e,i,s){i||(i={});for(var n=-1,o=e.length;++n<o;){var r=e[n];Kt(i,r,t[r])}return i}function ne(t,e){var i,s,n=t.__data__;return("string"==(s=typeof(i=e))||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==i:null===i)?n["string"==typeof e?"string":"hash"]:n.map}function oe(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return ee(i)?i:void 0}Ut.prototype.clear=function(){this.__data__=Bt?Bt(null):{}},Ut.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Ut.prototype.get=function(t){var e=this.__data__;if(Bt){var s=e[t];return s===i?void 0:s}return gt.call(e,t)?e[t]:void 0},Ut.prototype.has=function(t){var e=this.__data__;return Bt?void 0!==e[t]:gt.call(e,t)},Ut.prototype.set=function(t,e){return this.__data__[t]=Bt&&void 0===e?i:e,this},Gt.prototype.clear=function(){this.__data__=[]},Gt.prototype.delete=function(t){var e=this.__data__,i=Jt(e,t);return!(i<0)&&(i==e.length-1?e.pop():At.call(e,i,1),!0)},Gt.prototype.get=function(t){var e=this.__data__,i=Jt(e,t);return i<0?void 0:e[i][1]},Gt.prototype.has=function(t){return Jt(this.__data__,t)>-1},Gt.prototype.set=function(t,e){var i=this.__data__,s=Jt(i,t);return s<0?i.push([t,e]):i[s][1]=e,this},Wt.prototype.clear=function(){this.__data__={hash:new Ut,map:new(kt||Gt),string:new Ut}},Wt.prototype.delete=function(t){return ne(this,t).delete(t)},Wt.prototype.get=function(t){return ne(this,t).get(t)},Wt.prototype.has=function(t){return ne(this,t).has(t)},Wt.prototype.set=function(t,e){return ne(this,t).set(t,e),this},Xt.prototype.clear=function(){this.__data__=new Gt},Xt.prototype.delete=function(t){return this.__data__.delete(t)},Xt.prototype.get=function(t){return this.__data__.get(t)},Xt.prototype.has=function(t){return this.__data__.has(t)},Xt.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Gt){var s=i.__data__;if(!kt||s.length<199)return s.push([t,e]),this;i=this.__data__=new Wt(s)}return i.set(t,e),this};var re=St?at(St,Object):function(){return[]},ae=function(t){return mt.call(t)};function le(t,e){return!!(e=null==e?s:e)&&("number"==typeof t||U.test(t))&&t>-1&&t%1==0&&t<e}function ce(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||dt)}function he(t){if(null!=t){try{return ft.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function de(t,e){return t===e||t!=t&&e!=e}(Mt&&ae(new Mt(new ArrayBuffer(1)))!=O||kt&&ae(new kt)!=u||Rt&&ae(Rt.resolve())!=b||Pt&&ae(new Pt)!=y||Nt&&ae(new Nt)!=w)&&(ae=function(t){var e=mt.call(t),i=e==m?t.constructor:void 0,s=i?he(i):void 0;if(s)switch(s){case Ft:return O;case qt:return u;case jt:return b;case zt:return y;case Vt:return w}return e});var ue=Array.isArray;function pe(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=s}(t.length)&&!ge(t)}var fe=Ot||function(){return!1};function ge(t){var e=me(t)?mt.call(t):"";return e==c||e==d}function me(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function be(t){return pe(t)?Zt(t):function(t){if(!ce(t))return Ct(t);var e=[];for(var i in Object(t))gt.call(t,i)&&"constructor"!=i&&e.push(i);return e}(t)}t.exports=function(t){return te(t,!0,!0)}}(hx,hx.exports)),hx.exports}hx.exports;var ux,px={exports:{}};function fx(){return ux||(ux=1,function(t,e){var i="__lodash_hash_undefined__",s=1,n=2,o=9007199254740991,r="[object Arguments]",c="[object Array]",d="[object AsyncFunction]",u="[object Boolean]",p="[object Date]",m="[object Error]",b="[object Function]",v="[object GeneratorFunction]",y="[object Map]",E="[object Number]",x="[object Null]",w="[object Object]",S="[object Promise]",O="[object Proxy]",D="[object RegExp]",M="[object Set]",k="[object String]",P="[object Symbol]",N="[object Undefined]",B="[object WeakMap]",F="[object ArrayBuffer]",q="[object DataView]",j=/^\[object .+?Constructor\]$/,z=/^(?:0|[1-9]\d*)$/,$={};$["[object Float32Array]"]=$["[object Float64Array]"]=$["[object Int8Array]"]=$["[object Int16Array]"]=$["[object Int32Array]"]=$["[object Uint8Array]"]=$["[object Uint8ClampedArray]"]=$["[object Uint16Array]"]=$["[object Uint32Array]"]=!0,$[r]=$[c]=$[F]=$[u]=$[q]=$[p]=$[m]=$[b]=$[y]=$[E]=$[w]=$[D]=$[M]=$[k]=$[B]=!1;var U="object"==typeof h&&h&&h.Object===Object&&h,G="object"==typeof self&&self&&self.Object===Object&&self,Y=U||G||Function("return this")(),X=e&&!e.nodeType&&e,K=X&&t&&!t.nodeType&&t,J=K&&K.exports===X,tt=J&&U.process,et=function(){try{return tt&&tt.binding&&tt.binding("util")}catch(t){}}(),it=et&&et.isTypedArray;function st(t,e){for(var i=-1,s=null==t?0:t.length;++i<s;)if(e(t[i],i,t))return!0;return!1}function nt(t){var e=-1,i=Array(t.size);return t.forEach((function(t,s){i[++e]=[s,t]})),i}function ot(t){var e=-1,i=Array(t.size);return t.forEach((function(t){i[++e]=t})),i}var rt=Array.prototype,at=Function.prototype,lt=Object.prototype,ct=Y["__core-js_shared__"],ht=at.toString,dt=lt.hasOwnProperty,ut=function(){var t=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),pt=lt.toString,ft=RegExp("^"+ht.call(dt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gt=J?Y.Buffer:void 0,mt=Y.Symbol,bt=Y.Uint8Array,vt=lt.propertyIsEnumerable,yt=rt.splice,Et=mt?mt.toStringTag:void 0,_t=Object.getOwnPropertySymbols,xt=gt?gt.isBuffer:void 0,Tt=function(t,e){return function(i){return t(e(i))}}(Object.keys,Object),At=ne(Y,"DataView"),St=ne(Y,"Map"),Ot=ne(Y,"Promise"),Ct=ne(Y,"Set"),Mt=ne(Y,"WeakMap"),kt=ne(Object,"create"),Rt=le(At),Pt=le(St),Nt=le(Ot),Bt=le(Ct),Ft=le(Mt),qt=mt?mt.prototype:void 0,jt=qt?qt.valueOf:void 0;function zt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}function Vt(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}function Ht(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var s=t[e];this.set(s[0],s[1])}}function $t(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new Ht;++e<i;)this.add(t[e])}function Ut(t){var e=this.__data__=new Vt(t);this.size=e.size}function Gt(t,e){var i=de(t),s=!i&&he(t),n=!i&&!s&&ue(t),o=!i&&!s&&!n&&be(t),r=i||s||n||o,c=r?function(t,e){for(var i=-1,s=Array(t);++i<t;)s[i]=e(i);return s}(t.length,String):[],h=c.length;for(var d in t)!dt.call(t,d)||r&&("length"==d||n&&("offset"==d||"parent"==d)||o&&("buffer"==d||"byteLength"==d||"byteOffset"==d)||ae(d,h))||c.push(d);return c}function Wt(t,e){for(var i=t.length;i--;)if(ce(t[i][0],e))return i;return-1}function Xt(t){return null==t?void 0===t?N:x:Et&&Et in Object(t)?function(t){var e=dt.call(t,Et),i=t[Et];try{t[Et]=void 0;var s=!0}catch(t){}var n=pt.call(t);s&&(e?t[Et]=i:delete t[Et]);return n}(t):function(t){return pt.call(t)}(t)}function Zt(t){return me(t)&&Xt(t)==r}function Kt(t,e,i,o,h){return t===e||(null==t||null==e||!me(t)&&!me(e)?t!=t&&e!=e:function(t,e,i,o,h,d){var b=de(t),v=de(e),x=b?c:re(t),S=v?c:re(e),O=(x=x==r?w:x)==w,N=(S=S==r?w:S)==w,B=x==S;if(B&&ue(t)){if(!ue(e))return!1;b=!0,O=!1}if(B&&!O)return d||(d=new Ut),b||be(t)?ee(t,e,i,o,h,d):function(t,e,i,o,r,c,h){switch(i){case q:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case F:return!(t.byteLength!=e.byteLength||!c(new bt(t),new bt(e)));case u:case p:case E:return ce(+t,+e);case m:return t.name==e.name&&t.message==e.message;case D:case k:return t==e+"";case y:var d=nt;case M:var b=o&s;if(d||(d=ot),t.size!=e.size&&!b)return!1;var v=h.get(t);if(v)return v==e;o|=n,h.set(t,e);var x=ee(d(t),d(e),o,r,c,h);return h.delete(t),x;case P:if(jt)return jt.call(t)==jt.call(e)}return!1}(t,e,x,i,o,h,d);if(!(i&s)){var j=O&&dt.call(t,"__wrapped__"),z=N&&dt.call(e,"__wrapped__");if(j||z){var $=j?t.value():t,U=z?e.value():e;return d||(d=new Ut),h($,U,i,o,d)}}if(!B)return!1;return d||(d=new Ut),function(t,e,i,n,o,r){var c=i&s,h=ie(t),d=h.length,u=ie(e),p=u.length;if(d!=p&&!c)return!1;var m=d;for(;m--;){var b=h[m];if(!(c?b in e:dt.call(e,b)))return!1}var v=r.get(t);if(v&&r.get(e))return v==e;var y=!0;r.set(t,e),r.set(e,t);var E=c;for(;++m<d;){var x=t[b=h[m]],w=e[b];if(n)var S=c?n(w,x,b,e,t,r):n(x,w,b,t,e,r);if(!(void 0===S?x===w||o(x,w,i,n,r):S)){y=!1;break}E||(E="constructor"==b)}if(y&&!E){var O=t.constructor,D=e.constructor;O==D||!("constructor"in t)||!("constructor"in e)||"function"==typeof O&&O instanceof O&&"function"==typeof D&&D instanceof D||(y=!1)}return r.delete(t),r.delete(e),y}(t,e,i,o,h,d)}(t,e,i,o,Kt,h))}function Jt(t){return!(!ge(t)||function(t){return!!ut&&ut in t}(t))&&(pe(t)?ft:j).test(le(t))}function te(t){if(i=(e=t)&&e.constructor,s="function"==typeof i&&i.prototype||lt,e!==s)return Tt(t);var e,i,s,n=[];for(var o in Object(t))dt.call(t,o)&&"constructor"!=o&&n.push(o);return n}function ee(t,e,i,o,r,c){var h=i&s,d=t.length,u=e.length;if(d!=u&&!(h&&u>d))return!1;var p=c.get(t);if(p&&c.get(e))return p==e;var m=-1,b=!0,v=i&n?new $t:void 0;for(c.set(t,e),c.set(e,t);++m<d;){var y=t[m],E=e[m];if(o)var x=h?o(E,y,m,e,t,c):o(y,E,m,t,e,c);if(void 0!==x){if(x)continue;b=!1;break}if(v){if(!st(e,(function(t,e){if(s=e,!v.has(s)&&(y===t||r(y,t,i,o,c)))return v.push(e);var s}))){b=!1;break}}else if(y!==E&&!r(y,E,i,o,c)){b=!1;break}}return c.delete(t),c.delete(e),b}function ie(t){return function(t,e,i){var s=e(t);return de(t)?s:function(t,e){for(var i=-1,s=e.length,n=t.length;++i<s;)t[n+i]=e[i];return t}(s,i(t))}(t,ve,oe)}function se(t,e){var i,s,n=t.__data__;return("string"==(s=typeof(i=e))||"number"==s||"symbol"==s||"boolean"==s?"__proto__"!==i:null===i)?n["string"==typeof e?"string":"hash"]:n.map}function ne(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return Jt(i)?i:void 0}zt.prototype.clear=function(){this.__data__=kt?kt(null):{},this.size=0},zt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},zt.prototype.get=function(t){var e=this.__data__;if(kt){var s=e[t];return s===i?void 0:s}return dt.call(e,t)?e[t]:void 0},zt.prototype.has=function(t){var e=this.__data__;return kt?void 0!==e[t]:dt.call(e,t)},zt.prototype.set=function(t,e){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=kt&&void 0===e?i:e,this},Vt.prototype.clear=function(){this.__data__=[],this.size=0},Vt.prototype.delete=function(t){var e=this.__data__,i=Wt(e,t);return!(i<0)&&(i==e.length-1?e.pop():yt.call(e,i,1),--this.size,!0)},Vt.prototype.get=function(t){var e=this.__data__,i=Wt(e,t);return i<0?void 0:e[i][1]},Vt.prototype.has=function(t){return Wt(this.__data__,t)>-1},Vt.prototype.set=function(t,e){var i=this.__data__,s=Wt(i,t);return s<0?(++this.size,i.push([t,e])):i[s][1]=e,this},Ht.prototype.clear=function(){this.size=0,this.__data__={hash:new zt,map:new(St||Vt),string:new zt}},Ht.prototype.delete=function(t){var e=se(this,t).delete(t);return this.size-=e?1:0,e},Ht.prototype.get=function(t){return se(this,t).get(t)},Ht.prototype.has=function(t){return se(this,t).has(t)},Ht.prototype.set=function(t,e){var i=se(this,t),s=i.size;return i.set(t,e),this.size+=i.size==s?0:1,this},$t.prototype.add=$t.prototype.push=function(t){return this.__data__.set(t,i),this},$t.prototype.has=function(t){return this.__data__.has(t)},Ut.prototype.clear=function(){this.__data__=new Vt,this.size=0},Ut.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},Ut.prototype.get=function(t){return this.__data__.get(t)},Ut.prototype.has=function(t){return this.__data__.has(t)},Ut.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Vt){var s=i.__data__;if(!St||s.length<199)return s.push([t,e]),this.size=++i.size,this;i=this.__data__=new Ht(s)}return i.set(t,e),this.size=i.size,this};var oe=_t?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var i=-1,s=null==t?0:t.length,n=0,o=[];++i<s;){var r=t[i];e(r,i,t)&&(o[n++]=r)}return o}(_t(t),(function(e){return vt.call(t,e)})))}:function(){return[]},re=Xt;function ae(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||z.test(t))&&t>-1&&t%1==0&&t<e}function le(t){if(null!=t){try{return ht.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function ce(t,e){return t===e||t!=t&&e!=e}(At&&re(new At(new ArrayBuffer(1)))!=q||St&&re(new St)!=y||Ot&&re(Ot.resolve())!=S||Ct&&re(new Ct)!=M||Mt&&re(new Mt)!=B)&&(re=function(t){var e=Xt(t),i=e==w?t.constructor:void 0,s=i?le(i):"";if(s)switch(s){case Rt:return q;case Pt:return y;case Nt:return S;case Bt:return M;case Ft:return B}return e});var he=Zt(function(){return arguments}())?Zt:function(t){return me(t)&&dt.call(t,"callee")&&!vt.call(t,"callee")},de=Array.isArray;var ue=xt||function(){return!1};function pe(t){if(!ge(t))return!1;var e=Xt(t);return e==b||e==v||e==d||e==O}function fe(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}function ge(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function me(t){return null!=t&&"object"==typeof t}var be=it?function(t){return function(e){return t(e)}}(it):function(t){return me(t)&&fe(t.length)&&!!$[Xt(t)]};function ve(t){return null!=(e=t)&&fe(e.length)&&!pe(e)?Gt(t):te(t);var e}t.exports=function(t,e){return Kt(t,e)}}(px,px.exports)),px.exports}px.exports;var gx,mx={};var bx,vx={};function yx(){return bx||(bx=1,Object.defineProperty(vx,"__esModule",{value:!0}),function(t){t.length=function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"object"==typeof t.retain&&null!==t.retain?1:"string"==typeof t.insert?t.insert.length:1}}(t||(t={})),vx.default=t),vx;var t}var Ex,_x,xx={};var wx=(_x||(_x=1,function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AttributeMap=e.OpIterator=e.Op=void 0;const i=lx(),s=dx(),n=fx(),o=function(){if(gx)return mx;gx=1,Object.defineProperty(mx,"__esModule",{value:!0});const t=dx(),e=fx();var i;return function(i){i.compose=function(e={},i={},s=!1){"object"!=typeof e&&(e={}),"object"!=typeof i&&(i={});let n=t(i);s||(n=Object.keys(n).reduce(((t,e)=>(null!=n[e]&&(t[e]=n[e]),t)),{}));for(const t in e)void 0!==e[t]&&void 0===i[t]&&(n[t]=e[t]);return Object.keys(n).length>0?n:void 0},i.diff=function(t={},i={}){"object"!=typeof t&&(t={}),"object"!=typeof i&&(i={});const s=Object.keys(t).concat(Object.keys(i)).reduce(((s,n)=>(e(t[n],i[n])||(s[n]=void 0===i[n]?null:i[n]),s)),{});return Object.keys(s).length>0?s:void 0},i.invert=function(t={},e={}){t=t||{};const i=Object.keys(e).reduce(((i,s)=>(e[s]!==t[s]&&void 0!==t[s]&&(i[s]=e[s]),i)),{});return Object.keys(t).reduce(((i,s)=>(t[s]!==e[s]&&void 0===e[s]&&(i[s]=null),i)),i)},i.transform=function(t,e,i=!1){if("object"!=typeof t)return e;if("object"!=typeof e)return;if(!i)return e;const s=Object.keys(e).reduce(((i,s)=>(void 0===t[s]&&(i[s]=e[s]),i)),{});return Object.keys(s).length>0?s:void 0}}(i||(i={})),mx.default=i,mx}();e.AttributeMap=o.default;const r=yx();e.Op=r.default;const c=function(){if(Ex)return xx;Ex=1,Object.defineProperty(xx,"__esModule",{value:!0});const t=yx();return xx.default=class Iterator{constructor(t){this.ops=t,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);const i=this.ops[this.index];if(i){const s=this.offset,n=t.default.length(i);if(e>=n-s?(e=n-s,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof i.delete)return{delete:e};{const t={};return i.attributes&&(t.attributes=i.attributes),"number"==typeof i.retain?t.retain=e:"object"==typeof i.retain&&null!==i.retain?t.retain=i.retain:"string"==typeof i.insert?t.insert=i.insert.substr(s,e):t.insert=i.insert,t}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?t.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const t=this.ops[this.index];return t?"number"==typeof t.delete?"delete":"number"==typeof t.retain||"object"==typeof t.retain&&null!==t.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const t=this.offset,e=this.index,i=this.next(),s=this.ops.slice(this.index);return this.offset=t,this.index=e,[i].concat(s)}}return[]}},xx}();e.OpIterator=c.default;const h=String.fromCharCode(0),d=(t,e)=>{if("object"!=typeof t||null===t)throw new Error("cannot retain a "+typeof t);if("object"!=typeof e||null===e)throw new Error("cannot retain a "+typeof e);const i=Object.keys(t)[0];if(!i||i!==Object.keys(e)[0])throw new Error(`embed types not matched: ${i} != ${Object.keys(e)[0]}`);return[i,t[i],e[i]]};class Delta{constructor(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]}static registerEmbed(t,e){this.handlers[t]=e}static unregisterEmbed(t){delete this.handlers[t]}static getHandler(t){const e=this.handlers[t];if(!e)throw new Error(`no handlers for embed type "${t}"`);return e}insert(t,e){const i={};return"string"==typeof t&&0===t.length?this:(i.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(i.attributes=e),this.push(i))}delete(t){return t<=0?this:this.push({delete:t})}retain(t,e){if("number"==typeof t&&t<=0)return this;const i={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(i.attributes=e),this.push(i)}push(t){let e=this.ops.length,i=this.ops[e-1];if(t=s(t),"object"==typeof i){if("number"==typeof t.delete&&"number"==typeof i.delete)return this.ops[e-1]={delete:i.delete+t.delete},this;if("number"==typeof i.delete&&null!=t.insert&&(e-=1,i=this.ops[e-1],"object"!=typeof i))return this.ops.unshift(t),this;if(n(t.attributes,i.attributes)){if("string"==typeof t.insert&&"string"==typeof i.insert)return this.ops[e-1]={insert:i.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof i.retain)return this.ops[e-1]={retain:i.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this}chop(){const t=this.ops[this.ops.length-1];return t&&"number"==typeof t.retain&&!t.attributes&&this.ops.pop(),this}filter(t){return this.ops.filter(t)}forEach(t){this.ops.forEach(t)}map(t){return this.ops.map(t)}partition(t){const e=[],i=[];return this.forEach((s=>{(t(s)?e:i).push(s)})),[e,i]}reduce(t,e){return this.ops.reduce(t,e)}changeLength(){return this.reduce(((t,e)=>e.insert?t+r.default.length(e):e.delete?t-e.delete:t),0)}length(){return this.reduce(((t,e)=>t+r.default.length(e)),0)}slice(t=0,e=1/0){const i=[],s=new c.default(this.ops);let n=0;for(;n<e&&s.hasNext();){let o;n<t?o=s.next(t-n):(o=s.next(e-n),i.push(o)),n+=r.default.length(o)}return new Delta(i)}compose(t){const e=new c.default(this.ops),i=new c.default(t.ops),s=[],r=i.peek();if(null!=r&&"number"==typeof r.retain&&null==r.attributes){let t=r.retain;for(;"insert"===e.peekType()&&e.peekLength()<=t;)t-=e.peekLength(),s.push(e.next());r.retain-t>0&&i.next(r.retain-t)}const h=new Delta(s);for(;e.hasNext()||i.hasNext();)if("insert"===i.peekType())h.push(i.next());else if("delete"===e.peekType())h.push(e.next());else{const t=Math.min(e.peekLength(),i.peekLength()),s=e.next(t),r=i.next(t);if(r.retain){const c={};if("number"==typeof s.retain)c.retain="number"==typeof r.retain?t:r.retain;else if("number"==typeof r.retain)null==s.retain?c.insert=s.insert:c.retain=s.retain;else{const t=null==s.retain?"insert":"retain",[e,i,n]=d(s[t],r.retain),o=Delta.getHandler(e);c[t]={[e]:o.compose(i,n,"retain"===t)}}const u=o.default.compose(s.attributes,r.attributes,"number"==typeof s.retain);if(u&&(c.attributes=u),h.push(c),!i.hasNext()&&n(h.ops[h.ops.length-1],c)){const t=new Delta(e.rest());return h.concat(t).chop()}}else"number"==typeof r.delete&&("number"==typeof s.retain||"object"==typeof s.retain&&null!==s.retain)&&h.push(r)}return h.chop()}concat(t){const e=new Delta(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e}diff(t,e){if(this.ops===t.ops)return new Delta;const s=[this,t].map((e=>e.map((i=>{if(null!=i.insert)return"string"==typeof i.insert?i.insert:h;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join(""))),r=new Delta,d=i(s[0],s[1],e,!0),u=new c.default(this.ops),p=new c.default(t.ops);return d.forEach((t=>{let e=t[1].length;for(;e>0;){let s=0;switch(t[0]){case i.INSERT:s=Math.min(p.peekLength(),e),r.push(p.next(s));break;case i.DELETE:s=Math.min(e,u.peekLength()),u.next(s),r.delete(s);break;case i.EQUAL:s=Math.min(u.peekLength(),p.peekLength(),e);const t=u.next(s),c=p.next(s);n(t.insert,c.insert)?r.retain(s,o.default.diff(t.attributes,c.attributes)):r.push(c).delete(s)}e-=s}})),r.chop()}eachLine(t,e="\n"){const i=new c.default(this.ops);let s=new Delta,n=0;for(;i.hasNext();){if("insert"!==i.peekType())return;const o=i.peek(),c=r.default.length(o)-i.peekLength(),h="string"==typeof o.insert?o.insert.indexOf(e,c)-c:-1;if(h<0)s.push(i.next());else if(h>0)s.push(i.next(h));else{if(!1===t(s,i.next(1).attributes||{},n))return;n+=1,s=new Delta}}s.length()>0&&t(s,{},n)}invert(t){const e=new Delta;return this.reduce(((i,s)=>{if(s.insert)e.delete(r.default.length(s));else{if("number"==typeof s.retain&&null==s.attributes)return e.retain(s.retain),i+s.retain;if(s.delete||"number"==typeof s.retain){const n=s.delete||s.retain;return t.slice(i,i+n).forEach((t=>{s.delete?e.push(t):s.retain&&s.attributes&&e.retain(r.default.length(t),o.default.invert(s.attributes,t.attributes))})),i+n}if("object"==typeof s.retain&&null!==s.retain){const n=t.slice(i,i+1),r=new c.default(n.ops).next(),[h,u,p]=d(s.retain,r.insert),m=Delta.getHandler(h);return e.retain({[h]:m.invert(u,p)},o.default.invert(s.attributes,r.attributes)),i+1}}return i}),0),e.chop()}transform(t,e=!1){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);const i=t,s=new c.default(this.ops),n=new c.default(i.ops),h=new Delta;for(;s.hasNext()||n.hasNext();)if("insert"!==s.peekType()||!e&&"insert"===n.peekType())if("insert"===n.peekType())h.push(n.next());else{const t=Math.min(s.peekLength(),n.peekLength()),i=s.next(t),r=n.next(t);if(i.delete)continue;if(r.delete)h.push(r);else{const s=i.retain,n=r.retain;let c="object"==typeof n&&null!==n?n:t;if("object"==typeof s&&null!==s&&"object"==typeof n&&null!==n){const t=Object.keys(s)[0];if(t===Object.keys(n)[0]){const i=Delta.getHandler(t);i&&(c={[t]:i.transform(s[t],n[t],e)})}}h.retain(c,o.default.transform(i.attributes,r.attributes,e))}}else h.retain(r.default.length(s.next()));return h.chop()}transformPosition(t,e=!1){e=!!e;const i=new c.default(this.ops);let s=0;for(;i.hasNext()&&s<=t;){const n=i.peekLength(),o=i.peekType();i.next(),"delete"!==o?("insert"===o&&(s<t||!e)&&(t+=n),s+=n):t-=Math.min(n,t-s)}return t}}Delta.Op=r.default,Delta.OpIterator=c.default,Delta.AttributeMap=o.default,Delta.handlers={},e.default=Delta,t.exports=Delta,t.exports.default=Delta}(ax,ax.exports)),ax.exports),Tx=d(wx);class Break extends K_{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}Break.blotName="break",Break.tagName="BR";let Ax=class Text extends sx{};function Sx(t){return t.replace(/[&<>"']/g,(t=>({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t])))}class Inline extends W_{static allowedChildren=[Inline,Break,K_,Ax];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(t,e){const i=Inline.order.indexOf(t),s=Inline.order.indexOf(e);return i>=0||s>=0?i-s:t===e?0:t<e?-1:1}formatAt(t,e,i,s){if(Inline.compare(this.statics.blotName,i)<0&&this.scroll.query(i,M_.BLOT)){const n=this.isolate(t,e);s&&n.wrap(i,s)}else super.formatAt(t,e,i,s)}optimize(t){if(super.optimize(t),this.parent instanceof Inline&&Inline.compare(this.statics.blotName,this.parent.statics.blotName)>0){const t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}class Block extends X_{cache={};delta(){return null==this.cache.delta&&(this.cache.delta=Ox(this)),this.cache.delta}deleteAt(t,e){super.deleteAt(t,e),this.cache={}}formatAt(t,e,i,s){e<=0||(this.scroll.query(i,M_.BLOCK)?t+e===this.length()&&this.format(i,s):super.formatAt(t,Math.min(e,this.length()-t-1),i,s),this.cache={})}insertAt(t,e,i){if(null!=i)return super.insertAt(t,e,i),void(this.cache={});if(0===e.length)return;const s=e.split("\n"),n=s.shift();n.length>0&&(t<this.length()-1||null==this.children.tail?super.insertAt(Math.min(t,this.length()-1),n):this.children.tail.insertAt(this.children.tail.length(),n),this.cache={});let o=this;s.reduce(((t,e)=>(o=o.split(t,!0),o.insertAt(0,e),e.length)),t+n.length)}insertBefore(t,e){const{head:i}=this.children;super.insertBefore(t,e),i instanceof Break&&i.remove(),this.cache={}}length(){return null==this.cache.length&&(this.cache.length=super.length()+1),this.cache.length}moveChildren(t,e){super.moveChildren(t,e),this.cache={}}optimize(t){super.optimize(t),this.cache={}}path(t){return super.path(t,!0)}removeChild(t){super.removeChild(t),this.cache={}}split(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e&&(0===t||t>=this.length()-1)){const e=this.clone();return 0===t?(this.parent.insertBefore(e,this),this):(this.parent.insertBefore(e,this.next),e)}const i=super.split(t,e);return this.cache={},i}}Block.blotName="block",Block.tagName="P",Block.defaultChild=Break,Block.allowedChildren=[Break,Inline,K_,Ax];class BlockEmbed extends K_{attach(){super.attach(),this.attributes=new F_(this.domNode)}delta(){return(new Tx).insert(this.value(),{...this.formats(),...this.attributes.values()})}format(t,e){const i=this.scroll.query(t,M_.BLOCK_ATTRIBUTE);null!=i&&this.attributes.attribute(i,e)}formatAt(t,e,i,s){this.format(i,s)}insertAt(t,e,i){if(null!=i)return void super.insertAt(t,e,i);const s=e.split("\n"),n=s.pop(),o=s.map((t=>{const e=this.scroll.create(Block.blotName);return e.insertAt(0,t),e})),r=this.split(t);o.forEach((t=>{this.parent.insertBefore(t,r)})),n&&this.parent.insertBefore(this.scroll.create("text",n),r)}}function Ox(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.descendants(V_).reduce(((t,i)=>0===i.length()?t:t.insert(i.value(),Dx(i,{},e))),new Tx).insert("\n",Dx(t))}function Dx(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==t?e:("formats"in t&&"function"==typeof t.formats&&(e={...e,...t.formats()},i&&delete e["code-token"]),null==t.parent||"scroll"===t.parent.statics.blotName||t.parent.statics.scope!==t.statics.scope?e:Dx(t.parent,e,i))}BlockEmbed.scope=M_.BLOCK_BLOT;class Cursor extends K_{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\ufeff";static value(){}constructor(t,e,i){super(t,e),this.selection=i,this.textNode=document.createTextNode(Cursor.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){null!=this.parent&&this.parent.removeChild(this)}format(t,e){if(0!==this.savedLength)return void super.format(t,e);let i=this,s=0;for(;null!=i&&i.statics.scope!==M_.BLOCK_BLOT;)s+=i.offset(i.parent),i=i.parent;null!=i&&(this.savedLength=Cursor.CONTENTS.length,i.optimize(),i.formatAt(s,Cursor.CONTENTS.length,t,e),this.savedLength=0)}index(t,e){return t===this.textNode?0:super.index(t,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||null==this.parent)return null;const t=this.selection.getNativeRange();for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof Ax?this.prev:null,i=e?e.length():0,s=this.next instanceof Ax?this.next:null,n=s?s.text:"",{textNode:o}=this,r=o.data.split(Cursor.CONTENTS).join("");let c;if(o.data=Cursor.CONTENTS,e)c=e,(r||s)&&(e.insertAt(e.length(),r+n),s&&s.remove());else if(s)c=s,s.insertAt(0,r);else{const t=document.createTextNode(r);c=this.scroll.create(t),this.parent.insertBefore(c,this)}if(this.remove(),t){const n=(t,n)=>e&&t===e.domNode?n:t===o?i+n-1:s&&t===s.domNode?i+r.length+n:null,h=n(t.start.node,t.start.offset),d=n(t.end.node,t.end.offset);if(null!==h&&null!==d)return{startNode:c.domNode,startOffset:h,endNode:c.domNode,endOffset:d}}return null}update(t,e){if(t.some((t=>"characterData"===t.type&&t.target===this.textNode))){const t=this.restore();t&&(e.range=t)}}optimize(t){super.optimize(t);let{parent:e}=this;for(;e;){if("A"===e.domNode.tagName){this.savedLength=Cursor.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}}var Cx,Ix={exports:{}};var Mx=(Cx||(Cx=1,function(t){var e=Object.prototype.hasOwnProperty,i="~";function s(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function o(t,e,s,o,r){if("function"!=typeof s)throw new TypeError("The listener must be a function");var c=new n(s,o||t,r),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],c]:t._events[h].push(c):(t._events[h]=c,t._eventsCount++),t}function r(t,e){0==--t._eventsCount?t._events=new s:delete t._events[e]}function c(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(i=!1)),c.prototype.eventNames=function(){var t,s,n=[];if(0===this._eventsCount)return n;for(s in t=this._events)e.call(t,s)&&n.push(i?s.slice(1):s);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},c.prototype.listeners=function(t){var e=i?i+t:t,s=this._events[e];if(!s)return[];if(s.fn)return[s.fn];for(var n=0,o=s.length,r=new Array(o);n<o;n++)r[n]=s[n].fn;return r},c.prototype.listenerCount=function(t){var e=i?i+t:t,s=this._events[e];return s?s.fn?1:s.length:0},c.prototype.emit=function(t,e,s,n,o,r){var c=i?i+t:t;if(!this._events[c])return!1;var h,d,u=this._events[c],p=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),p){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,s),!0;case 4:return u.fn.call(u.context,e,s,n),!0;case 5:return u.fn.call(u.context,e,s,n,o),!0;case 6:return u.fn.call(u.context,e,s,n,o,r),!0}for(d=1,h=new Array(p-1);d<p;d++)h[d-1]=arguments[d];u.fn.apply(u.context,h)}else{var m,b=u.length;for(d=0;d<b;d++)switch(u[d].once&&this.removeListener(t,u[d].fn,void 0,!0),p){case 1:u[d].fn.call(u[d].context);break;case 2:u[d].fn.call(u[d].context,e);break;case 3:u[d].fn.call(u[d].context,e,s);break;case 4:u[d].fn.call(u[d].context,e,s,n);break;default:if(!h)for(m=1,h=new Array(p-1);m<p;m++)h[m-1]=arguments[m];u[d].fn.apply(u[d].context,h)}}return!0},c.prototype.on=function(t,e,i){return o(this,t,e,i,!1)},c.prototype.once=function(t,e,i){return o(this,t,e,i,!0)},c.prototype.removeListener=function(t,e,s,n){var o=i?i+t:t;if(!this._events[o])return this;if(!e)return r(this,o),this;var c=this._events[o];if(c.fn)c.fn!==e||n&&!c.once||s&&c.context!==s||r(this,o);else{for(var h=0,d=[],u=c.length;h<u;h++)(c[h].fn!==e||n&&!c[h].once||s&&c[h].context!==s)&&d.push(c[h]);d.length?this._events[o]=1===d.length?d[0]:d:r(this,o)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&r(this,e)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,t.exports=c}(Ix)),Ix.exports),Lx=d(Mx),kx=new WeakMap;const Rx=["error","warn","log","info"];let Px="warn";function Nx(t){if(Px&&Rx.indexOf(t)<=Rx.indexOf(Px)){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];console[t](...i)}}function Bx(t){return Rx.reduce(((e,i)=>(e[i]=Nx.bind(console,i,t),e)),{})}Bx.level=t=>{Px=t},Nx.level=Bx.level;const Fx=Bx("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((t=>{document.addEventListener(t,(function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Array.from(document.querySelectorAll(".ql-container")).forEach((t=>{const i=kx.get(t);i&&i.emitter&&i.emitter.handleDOM(...e)}))}))}));class Emitter extends Lx{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",Fx.error)}emit(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Fx.log.call(Fx,...e),super.emit(...e)}handleDOM(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];(this.domListeners[t.type]||[]).forEach((e=>{let{node:s,handler:n}=e;(t.target===s||s.contains(t.target))&&n(t,...i)}))}listenDOM(t,e,i){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:i})}}const qx=Bx("quill:selection");class Range{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.index=t,this.length=e}}class Selection{constructor(t,e){this.emitter=e,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Range(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(()=>{this.mouseDown||this.composing||setTimeout(this.update.bind(this,Emitter.sources.USER),1)})),this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE,(()=>{if(!this.hasFocus())return;const t=this.getNativeRange();null!=t&&t.start.node!==this.cursor.textNode&&this.emitter.once(Emitter.events.SCROLL_UPDATE,((e,i)=>{try{this.root.contains(t.start.node)&&this.root.contains(t.end.node)&&this.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset);const s=i.some((t=>"characterData"===t.type||"childList"===t.type||"attributes"===t.type&&t.target===this.root));this.update(s?Emitter.sources.SILENT:e)}catch(t){}}))})),this.emitter.on(Emitter.events.SCROLL_OPTIMIZE,((t,e)=>{if(e.range){const{startNode:t,startOffset:i,endNode:s,endOffset:n}=e.range;this.setNativeRange(t,i,s,n),this.update(Emitter.sources.SILENT)}})),this.update(Emitter.sources.SILENT)}handleComposition(){this.emitter.on(Emitter.events.COMPOSITION_BEFORE_START,(()=>{this.composing=!0})),this.emitter.on(Emitter.events.COMPOSITION_END,(()=>{if(this.composing=!1,this.cursor.parent){const t=this.cursor.restore();if(!t)return;setTimeout((()=>{this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}handleDragging(){this.emitter.listenDOM("mousedown",document.body,(()=>{this.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(()=>{this.mouseDown=!1,this.update(Emitter.sources.USER)}))}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(t,e){this.scroll.update();const i=this.getNativeRange();if(null!=i&&i.native.collapsed&&!this.scroll.query(t,M_.BLOCK)){if(i.start.node!==this.cursor.textNode){const t=this.scroll.find(i.start.node,!1);if(null==t)return;if(t instanceof V_){const e=t.split(i.start.offset);t.parent.insertBefore(this.cursor,e)}else t.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=this.scroll.length();let s;t=Math.min(t,i-1),e=Math.min(t+e,i-1)-t;let[n,o]=this.scroll.leaf(t);if(null==n)return null;if(e>0&&o===n.length()){const[e]=this.scroll.leaf(t+1);if(e){const[i]=this.scroll.line(t),[s]=this.scroll.line(t+1);i===s&&(n=e,o=0)}}[s,o]=n.position(o,!0);const r=document.createRange();if(e>0)return r.setStart(s,o),[n,o]=this.scroll.leaf(t+e),null==n?null:([s,o]=n.position(o,!0),r.setEnd(s,o),r.getBoundingClientRect());let c,h="left";if(s instanceof Text){if(!s.data.length)return null;o<s.data.length?(r.setStart(s,o),r.setEnd(s,o+1)):(r.setStart(s,o-1),r.setEnd(s,o),h="right"),c=r.getBoundingClientRect()}else{if(!(n.domNode instanceof Element))return null;c=n.domNode.getBoundingClientRect(),o>0&&(h="right")}return{bottom:c.top+c.height,height:c.height,left:c[h],right:c[h],top:c.top,width:0}}getNativeRange(){const t=document.getSelection();if(null==t||t.rangeCount<=0)return null;const e=t.getRangeAt(0);if(null==e)return null;const i=this.normalizeNative(e);return qx.info("getNativeRange",i),i}getRange(){const t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];const e=this.getNativeRange();if(null==e)return[null,null];return[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||null!=document.activeElement&&jx(this.root,document.activeElement)}normalizedToRange(t){const e=[[t.start.node,t.start.offset]];t.native.collapsed||e.push([t.end.node,t.end.offset]);const i=e.map((t=>{const[e,i]=t,s=this.scroll.find(e,!0),n=s.offset(this.scroll);return 0===i?n:s instanceof V_?n+s.index(e,i):n+s.length()})),s=Math.min(Math.max(...i),this.scroll.length()-1),n=Math.min(s,...i);return new Range(n,s-n)}normalizeNative(t){if(!jx(this.root,t.startContainer)||!t.collapsed&&!jx(this.root,t.endContainer))return null;const e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((t=>{let{node:e,offset:i}=t;for(;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>i)e=e.childNodes[i],i=0;else{if(e.childNodes.length!==i)break;e=e.lastChild,i=e instanceof Text?e.data.length:e.childNodes.length>0?e.childNodes.length:e.childNodes.length+1}t.node=e,t.offset=i})),e}rangeToNative(t){const e=this.scroll.length(),i=(t,i)=>{t=Math.min(e-1,t);const[s,n]=this.scroll.leaf(t);return s?s.position(n,i):[null,-1]};return[...i(t.index,!1),...i(t.index+t.length,!0)]}setNativeRange(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(qx.info("setNativeRange",t,e,i,s),null!=t&&(null==this.root.parentNode||null==t.parentNode||null==i.parentNode))return;const o=document.getSelection();if(null!=o)if(null!=t){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:r}=this.getNativeRange()||{};if(null==r||n||t!==r.startContainer||e!==r.startOffset||i!==r.endContainer||s!==r.endOffset){t instanceof Element&&"BR"===t.tagName&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),i instanceof Element&&"BR"===i.tagName&&(s=Array.from(i.parentNode.childNodes).indexOf(i),i=i.parentNode);const n=document.createRange();n.setStart(t,e),n.setEnd(i,s),o.removeAllRanges(),o.addRange(n)}}else o.removeAllRanges(),this.root.blur()}setRange(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Emitter.sources.API;if("string"==typeof e&&(i=e,e=!1),qx.info("setRange",t),null!=t){const i=this.rangeToNative(t);this.setNativeRange(...i,e)}else this.setNativeRange(null);this.update(i)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Emitter.sources.USER;const e=this.lastRange,[i,s]=this.getRange();if(this.lastRange=i,this.lastNative=s,null!=this.lastRange&&(this.savedRange=this.lastRange),!D_(e,this.lastRange)){if(!this.composing&&null!=s&&s.native.collapsed&&s.start.node!==this.cursor.textNode){const t=this.cursor.restore();t&&this.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}const i=[Emitter.events.SELECTION_CHANGE,$E(this.lastRange),$E(e),t];this.emitter.emit(Emitter.events.EDITOR_CHANGE,...i),t!==Emitter.sources.SILENT&&this.emitter.emit(...i)}}}function jx(t,e){try{e.parentNode}catch(t){return!1}return t.contains(e)}const zx=/^[ -~]*$/;class Editor{constructor(t){this.scroll=t,this.delta=this.getDelta()}applyDelta(t){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const i=Gx(t),s=new Tx,n=function(t){const e=[];return t.forEach((t=>{if("string"==typeof t.insert){t.insert.split("\n").forEach(((i,s)=>{s&&e.push({insert:"\n",attributes:t.attributes}),i&&e.push({insert:i,attributes:t.attributes})}))}else e.push(t)})),e}(i.ops.slice());return n.reduce(((t,i)=>{const n=wx.Op.length(i);let o=i.attributes||{},r=!1,c=!1;if(null!=i.insert){if(s.retain(n),"string"==typeof i.insert){const s=i.insert;c=!s.endsWith("\n")&&(e<=t||!!this.scroll.descendant(BlockEmbed,t)[0]),this.scroll.insertAt(t,s);const[n,r]=this.scroll.line(t);let h=I_({},Dx(n));if(n instanceof Block){const[t]=n.descendant(V_,r);t&&(h=I_(h,Dx(t)))}o=wx.AttributeMap.diff(h,o)||{}}else if("object"==typeof i.insert){const s=Object.keys(i.insert)[0];if(null==s)return t;const n=null!=this.scroll.query(s,M_.INLINE);if(n)(e<=t||this.scroll.descendant(BlockEmbed,t)[0])&&(c=!0);else if(t>0){const[e,i]=this.scroll.descendant(V_,t-1);if(e instanceof Ax){"\n"!==e.value()[i]&&(r=!0)}else e instanceof K_&&e.statics.scope===M_.INLINE_BLOT&&(r=!0)}if(this.scroll.insertAt(t,s,i.insert[s]),n){const[e]=this.scroll.descendant(V_,t);if(e){const t=I_({},Dx(e));o=wx.AttributeMap.diff(t,o)||{}}}}e+=n}else if(s.push(i),null!==i.retain&&"object"==typeof i.retain){const e=Object.keys(i.retain)[0];if(null==e)return t;this.scroll.updateEmbedAt(t,e,i.retain[e])}Object.keys(o).forEach((e=>{this.scroll.formatAt(t,n,e,o[e])}));const h=r?1:0,d=c?1:0;return e+=h+d,s.retain(h),s.delete(d),t+n+h+d}),0),s.reduce(((t,e)=>"number"==typeof e.delete?(this.scroll.deleteAt(t,e.delete),t):t+wx.Op.length(e)),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(i)}deleteText(t,e){return this.scroll.deleteAt(t,e),this.update((new Tx).retain(t).delete(e))}formatLine(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(i).forEach((s=>{this.scroll.lines(t,Math.max(e,1)).forEach((t=>{t.format(s,i[s])}))})),this.scroll.optimize();const s=(new Tx).retain(t).retain(e,$E(i));return this.update(s)}formatText(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(i).forEach((s=>{this.scroll.formatAt(t,e,s,i[s])}));const s=(new Tx).retain(t).retain(e,$E(i));return this.update(s)}getContents(t,e){return this.delta.slice(t,t+e)}getDelta(){return this.scroll.lines().reduce(((t,e)=>t.concat(e.delta())),new Tx)}getFormat(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[],s=[];0===e?this.scroll.path(t).forEach((t=>{const[e]=t;e instanceof Block?i.push(e):e instanceof V_&&s.push(e)})):(i=this.scroll.lines(t,e),s=this.scroll.descendants(V_,t,e));const[n,o]=[i,s].map((t=>{const e=t.shift();if(null==e)return{};let i=Dx(e);for(;Object.keys(i).length>0;){const e=t.shift();if(null==e)return i;i=$x(Dx(e),i)}return i}));return{...n,...o}}getHTML(t,e){const[i,s]=this.scroll.line(t);if(i){const n=i.length();return!(i.length()>=s+e)||0===s&&e===n?Hx(this.scroll,t,e,!0):Hx(i,s,e,!0)}return""}getText(t,e){return this.getContents(t,e).filter((t=>"string"==typeof t.insert)).map((t=>t.insert)).join("")}insertContents(t,e){const i=Gx(e),s=(new Tx).retain(t).concat(i);return this.scroll.insertContents(t,i),this.update(s)}insertEmbed(t,e,i){return this.scroll.insertAt(t,e,i),this.update((new Tx).retain(t).insert({[e]:i}))}insertText(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(i).forEach((s=>{this.scroll.formatAt(t,e.length,s,i[s])})),this.update((new Tx).retain(t).insert(e,$E(i)))}isBlank(){if(0===this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;const t=this.scroll.children.head;if(t?.statics.blotName!==Block.blotName)return!1;const e=t;return!(e.children.length>1)&&e.children.head instanceof Break}removeFormat(t,e){const i=this.getText(t,e),[s,n]=this.scroll.line(t+e);let o=0,r=new Tx;null!=s&&(o=s.length()-n,r=s.delta().slice(n,n+o-1).insert("\n"));const c=this.getContents(t,e+o).diff((new Tx).insert(i).concat(r)),h=(new Tx).retain(t).concat(c);return this.applyDelta(h)}update(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;const s=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(zx)&&this.scroll.find(e[0].target)){const n=this.scroll.find(e[0].target),o=Dx(n),r=n.offset(this.scroll),c=e[0].oldValue.replace(Cursor.CONTENTS,""),h=(new Tx).insert(c),d=(new Tx).insert(n.value()),u=i&&{oldRange:Wx(i.oldRange,-r),newRange:Wx(i.newRange,-r)};t=(new Tx).retain(r).concat(h.diff(d,u)).reduce(((t,e)=>e.insert?t.insert(e.insert,o):t.push(e)),new Tx),this.delta=s.compose(t)}else this.delta=this.getDelta(),t&&D_(s.compose(t),this.delta)||(t=s.diff(this.delta,i));return t}}function Vx(t,e,i){if(0===t.length){const[t]=Ux(i.pop());return e<=0?`</li></${t}>`:`</li></${t}>${Vx([],e-1,i)}`}const[{child:s,offset:n,length:o,indent:r,type:c},...h]=t,[d,u]=Ux(c);if(r>e)return i.push(c),r===e+1?`<${d}><li${u}>${Hx(s,n,o)}${Vx(h,r,i)}`:`<${d}><li>${Vx(t,e+1,i)}`;const p=i[i.length-1];if(r===e&&c===p)return`</li><li${u}>${Hx(s,n,o)}${Vx(h,r,i)}`;const[m]=Ux(i.pop());return`</li></${m}>${Vx(t,e-1,i)}`}function Hx(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("html"in t&&"function"==typeof t.html)return t.html(e,i);if(t instanceof Ax)return Sx(t.value().slice(e,e+i));if(t instanceof U_){if("list-container"===t.statics.blotName){const s=[];return t.children.forEachAt(e,i,((t,e,i)=>{const n="formats"in t&&"function"==typeof t.formats?t.formats():{};s.push({child:t,offset:e,length:i,indent:n.indent||0,type:n.list})})),Vx(s,-1,[])}const n=[];if(t.children.forEachAt(e,i,((t,e,i)=>{n.push(Hx(t,e,i))})),s||"list"===t.statics.blotName)return n.join("");const{outerHTML:o,innerHTML:r}=t.domNode,[c,h]=o.split(`>${r}<`);return"<table"===c?`<table style="border: 1px solid #000;">${n.join("")}<${h}`:`${c}>${n.join("")}<${h}`}return t.domNode instanceof Element?t.domNode.outerHTML:""}function $x(t,e){return Object.keys(e).reduce(((i,s)=>{if(null==t[s])return i;const n=e[s];return n===t[s]?i[s]=n:Array.isArray(n)?n.indexOf(t[s])<0?i[s]=n.concat([t[s]]):i[s]=n:i[s]=[n,t[s]],i}),{})}function Ux(t){const e="ordered"===t?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function Gx(t){return t.reduce(((t,e)=>{if("string"==typeof e.insert){const i=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(i,e.attributes)}return t.push(e)}),new Tx)}function Wx(t,e){let{index:i,length:s}=t;return new Range(i+e,s)}class Module{static DEFAULTS={};constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.quill=t,this.options=e}}const Yx="\ufeff";class Embed extends K_{constructor(t,e){super(t,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach((t=>{this.contentNode.appendChild(t)})),this.leftGuard=document.createTextNode(Yx),this.rightGuard=document.createTextNode(Yx),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(t,e){return t===this.leftGuard?0:t===this.rightGuard?1:super.index(t,e)}restore(t){let e,i=null;const s=t.data.split(Yx).join("");if(t===this.leftGuard)if(this.prev instanceof Ax){const t=this.prev.length();this.prev.insertAt(t,s),i={startNode:this.prev.domNode,startOffset:t+s.length}}else e=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(e),this),i={startNode:e,startOffset:s.length};else t===this.rightGuard&&(this.next instanceof Ax?(this.next.insertAt(0,s),i={startNode:this.next.domNode,startOffset:s.length}):(e=document.createTextNode(s),this.parent.insertBefore(this.scroll.create(e),this.next),i={startNode:e,startOffset:s.length}));return t.data=Yx,i}update(t,e){t.forEach((t=>{if("characterData"===t.type&&(t.target===this.leftGuard||t.target===this.rightGuard)){const i=this.restore(t.target);i&&(e.range=i)}}))}}class Composition{isComposing=!1;constructor(t,e){this.scroll=t,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",(t=>{this.isComposing||this.handleCompositionStart(t)})),this.scroll.domNode.addEventListener("compositionend",(t=>{this.isComposing&&queueMicrotask((()=>{this.handleCompositionEnd(t)}))}))}handleCompositionStart(t){const e=t.target instanceof Node?this.scroll.find(t.target,!0):null;!e||e instanceof Embed||(this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(Emitter.events.COMPOSITION_START,t),this.isComposing=!0)}handleCompositionEnd(t){this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(Emitter.events.COMPOSITION_END,t),this.isComposing=!1}}class Theme{static DEFAULTS={modules:{}};static themes={default:Theme};modules={};constructor(t,e){this.quill=t,this.options=e}init(){Object.keys(this.options.modules).forEach((t=>{null==this.modules[t]&&this.addModule(t)}))}addModule(t){const e=this.quill.constructor.import(`modules/${t}`);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}const Xx=t=>{const e=t.getBoundingClientRect(),i="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,s="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*i,bottom:e.top+t.clientHeight*s,left:e.left}},Qx=t=>{const e=parseInt(t,10);return Number.isNaN(e)?0:e},Zx=(t,e,i,s,n,o)=>t<i&&e>s?0:t<i?-(i-t+n):e>s?e-t>s-i?t+n-i:e-s+o:0,Kx=["block","break","cursor","inline","scroll","text"],Jx=Bx("quill"),tw=new k_;U_.uiClass="ql-ui";class Quill{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:tw,theme:"default"};static events=Emitter.events;static sources=Emitter.sources;static version="2.0.2";static imports={delta:Tx,parchment:rx,"core/module":Module,"core/theme":Theme};static debug(t){!0===t&&(t="log"),Bx.level(t)}static find(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return kx.get(t)||tw.find(t,e)}static import(t){return null==this.imports[t]&&Jx.error(`Cannot import ${t}. Are you sure it was registered?`),this.imports[t]}static register(){if("string"!=typeof(arguments.length<=0?void 0:arguments[0])){const t=arguments.length<=0?void 0:arguments[0],e=!!(arguments.length<=1?void 0:arguments[1]),i="attrName"in t?t.attrName:t.blotName;"string"==typeof i?this.register(`formats/${i}`,t,e):Object.keys(t).forEach((i=>{this.register(i,t[i],e)}))}else{const t=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],i=!!(arguments.length<=2?void 0:arguments[2]);null==this.imports[t]||i||Jx.warn(`Overwriting ${t} with`,e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&"boolean"!=typeof e&&"abstract"!==e.blotName&&tw.register(e),"function"==typeof e.register&&e.register(tw)}}constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options=function(t,e){const i=ew(t);if(!i)throw new Error("Invalid Quill container");const s=!e.theme||e.theme===Quill.DEFAULTS.theme,n=s?Theme:Quill.import(`themes/${e.theme}`);if(!n)throw new Error(`Invalid theme ${e.theme}. Did you register it?`);const{modules:o,...r}=Quill.DEFAULTS,{modules:c,...h}=n.DEFAULTS;let d=iw(e.modules);null!=d&&d.toolbar&&d.toolbar.constructor!==Object&&(d={...d,toolbar:{container:d.toolbar}});const u=I_({},iw(o),iw(c),d),p={...r,...sw(h),...sw(e)};let m=e.registry;m?e.formats&&Jx.warn('Ignoring "formats" option because "registry" is specified'):m=e.formats?((t,e,i)=>{const s=new k_;return Kx.forEach((t=>{const i=e.query(t);i&&s.register(i)})),t.forEach((t=>{let n=e.query(t);n||i.error(`Cannot register "${t}" specified in "formats" config. Are you sure it was registered?`);let o=0;for(;n;)if(s.register(n),n="blotName"in n?n.requiredContainer??null:null,o+=1,o>100){i.error(`Cycle detected in registering blot requiredContainer: "${t}"`);break}})),s})(e.formats,p.registry,Jx):p.registry;return{...p,registry:m,container:i,theme:n,modules:Object.entries(u).reduce(((t,e)=>{let[i,s]=e;if(!s)return t;const n=Quill.import(`modules/${i}`);return null==n?(Jx.error(`Cannot load ${i} module. Are you sure you registered it?`),t):{...t,[i]:I_({},n.DEFAULTS||{},s)}}),{}),bounds:ew(p.bounds)}}(t,e),this.container=this.options.container,null==this.container)return void Jx.error("Invalid Quill container",t);this.options.debug&&Quill.debug(this.options.debug);const i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",kx.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Emitter;const s=ex.blotName,n=this.options.registry.query(s);if(!n||!("blotName"in n))throw new Error(`Cannot initialize Quill without "${s}" blot`);if(this.scroll=new n(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Editor(this.scroll),this.selection=new Selection(this.scroll,this.emitter),this.composition=new Composition(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Emitter.events.EDITOR_CHANGE,(t=>{t===Emitter.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())})),this.emitter.on(Emitter.events.SCROLL_UPDATE,((t,e)=>{const i=this.selection.lastRange,[s]=this.selection.getRange(),n=i&&s?{oldRange:i,newRange:s}:void 0;nw.call(this,(()=>this.editor.update(null,e,n)),t)})),this.emitter.on(Emitter.events.SCROLL_EMBED_UPDATE,((t,e)=>{const i=this.selection.lastRange,[s]=this.selection.getRange(),n=i&&s?{oldRange:i,newRange:s}:void 0;nw.call(this,(()=>{const i=(new Tx).retain(t.offset(this)).retain({[t.statics.blotName]:e});return this.editor.update(i,[],n)}),Quill.sources.USER)})),i){const t=this.clipboard.convert({html:`${i}<p><br></p>`,text:"\n"});this.setContents(t)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){const e=t;(t=document.createElement("div")).classList.add(e)}return this.container.insertBefore(t,e),t}blur(){this.selection.setRange(null)}deleteText(t,e,i){return[t,e,,i]=ow(t,e,i),nw.call(this,(()=>this.editor.deleteText(t,e)),i,t,-1*e)}disable(){this.enable(!1)}editReadOnly(t){this.allowReadOnlyEdits=!0;const e=t();return this.allowReadOnlyEdits=!1,e}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}focus(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}format(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Emitter.sources.API;return nw.call(this,(()=>{const i=this.getSelection(!0);let s=new Tx;if(null==i)return s;if(this.scroll.query(t,M_.BLOCK))s=this.editor.formatLine(i.index,i.length,{[t]:e});else{if(0===i.length)return this.selection.format(t,e),s;s=this.editor.formatText(i.index,i.length,{[t]:e})}return this.setSelection(i,Emitter.sources.SILENT),s}),i)}formatLine(t,e,i,s,n){let o;return[t,e,o,n]=ow(t,e,i,s,n),nw.call(this,(()=>this.editor.formatLine(t,e,o)),n,t,0)}formatText(t,e,i,s,n){let o;return[t,e,o,n]=ow(t,e,i,s,n),nw.call(this,(()=>this.editor.formatText(t,e,o)),n,t,0)}getBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=null;if(i="number"==typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length),!i)return null;const s=this.container.getBoundingClientRect();return{bottom:i.bottom-s.top,height:i.height,left:i.left-s.left,right:i.right-s.left,top:i.top-s.top,width:i.width}}getContents(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t;return[t,e]=ow(t,e),this.editor.getContents(t,e)}getFormat(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}getIndex(t){return t.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(t){return this.scroll.leaf(t)}getLine(t){return this.scroll.line(t)}getLines(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}getModule(t){return this.theme.modules[t]}getSelection(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof t&&(e=e??this.getLength()-t),[t,e]=ow(t,e),this.editor.getHTML(t,e)}getText(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return"number"==typeof t&&(e=e??this.getLength()-t),[t,e]=ow(t,e),this.editor.getText(t,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Quill.sources.API;return nw.call(this,(()=>this.editor.insertEmbed(t,e,i)),s,t)}insertText(t,e,i,s,n){let o;return[t,,o,n]=ow(t,0,i,s,n),nw.call(this,(()=>this.editor.insertText(t,e,o)),n,t,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(t,e,i){return[t,e,,i]=ow(t,e,i),nw.call(this,(()=>this.editor.removeFormat(t,e)),i,t)}scrollRectIntoView(t){((t,e)=>{const i=t.ownerDocument;let s=e,n=t;for(;n;){const t=n===i.body,e=t?{top:0,right:window.visualViewport?.width??i.documentElement.clientWidth,bottom:window.visualViewport?.height??i.documentElement.clientHeight,left:0}:Xx(n),r=getComputedStyle(n),c=Zx(s.left,s.right,e.left,e.right,Qx(r.scrollPaddingLeft),Qx(r.scrollPaddingRight)),h=Zx(s.top,s.bottom,e.top,e.bottom,Qx(r.scrollPaddingTop),Qx(r.scrollPaddingBottom));if(c||h)if(t)i.defaultView?.scrollBy(c,h);else{const{scrollLeft:t,scrollTop:e}=n;h&&(n.scrollTop+=h),c&&(n.scrollLeft+=c);const i=n.scrollLeft-t,o=n.scrollTop-e;s={left:s.left-i,top:s.top-o,right:s.right-i,bottom:s.bottom-o}}n=t||"fixed"===r.position?null:(o=n).parentElement||o.getRootNode().host||null}var o})(this.root,t)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}setContents(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Emitter.sources.API;return nw.call(this,(()=>{t=new Tx(t);const e=this.getLength(),i=this.editor.deleteText(0,e),s=this.editor.insertContents(0,t),n=this.editor.deleteText(this.getLength()-1,1);return i.compose(s).compose(n)}),e)}setSelection(t,e,i){null==t?this.selection.setRange(null,e||Quill.sources.API):([t,e,,i]=ow(t,e,i),this.selection.setRange(new Range(Math.max(0,t),e),i),i!==Emitter.sources.SILENT&&this.scrollSelectionIntoView())}setText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Emitter.sources.API;const i=(new Tx).insert(t);return this.setContents(i,e)}update(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Emitter.sources.USER;const e=this.scroll.update(t);return this.selection.update(t),e}updateContents(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Emitter.sources.API;return nw.call(this,(()=>(t=new Tx(t),this.editor.applyDelta(t))),e,!0)}}function ew(t){return"string"==typeof t?document.querySelector(t):t}function iw(t){return Object.entries(t??{}).reduce(((t,e)=>{let[i,s]=e;return{...t,[i]:!0===s?{}:s}}),{})}function sw(t){return Object.fromEntries(Object.entries(t).filter((t=>void 0!==t[1])))}function nw(t,e,i,s){if(!this.isEnabled()&&e===Emitter.sources.USER&&!this.allowReadOnlyEdits)return new Tx;let n=null==i?null:this.getSelection();const o=this.editor.delta,r=t();if(null!=n&&(!0===i&&(i=n.index),null==s?n=rw(n,r,e):0!==s&&(n=rw(n,i,s,e)),this.setSelection(n,Emitter.sources.SILENT)),r.length()>0){const t=[Emitter.events.TEXT_CHANGE,r,o,e];this.emitter.emit(Emitter.events.EDITOR_CHANGE,...t),e!==Emitter.sources.SILENT&&this.emitter.emit(...t)}return r}function ow(t,e,i,s,n){let o={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(n=s,s=i,i=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(n=s,s=i,i=e,e=0),"object"==typeof i?(o=i,n=s):"string"==typeof i&&(null!=s?o[i]=s:n=i),[t,e,o,n=n||Emitter.sources.API]}function rw(t,e,i,s){const n="number"==typeof i?i:0;if(null==t)return null;let o,r;return e&&"function"==typeof e.transformPosition?[o,r]=[t.index,t.index+t.length].map((t=>e.transformPosition(t,s!==Emitter.sources.USER))):[o,r]=[t.index,t.index+t.length].map((t=>t<e||t===e&&s===Emitter.sources.USER?t:n>=0?t+n:Math.max(e,t+n))),new Range(o,r-o)}class Container extends Z_{}function aw(t){return t instanceof Block||t instanceof BlockEmbed}function lw(t){return"function"==typeof t.updateContent}function cw(t,e,i){i.reduce(((e,i)=>{const s=wx.Op.length(i);let n=i.attributes||{};if(null!=i.insert)if("string"==typeof i.insert){const s=i.insert;t.insertAt(e,s);const[o]=t.descendant(V_,e),r=Dx(o);n=wx.AttributeMap.diff(r,n)||{}}else if("object"==typeof i.insert){const s=Object.keys(i.insert)[0];if(null==s)return e;t.insertAt(e,s,i.insert[s]);if(null!=t.scroll.query(s,M_.INLINE)){const[i]=t.descendant(V_,e),s=Dx(i);n=wx.AttributeMap.diff(s,n)||{}}}return Object.keys(n).forEach((i=>{t.formatAt(e,s,i,n[i])})),e+s}),e)}const hw={scope:M_.BLOCK,whitelist:["right","center","justify"]},dw=new Attributor("align","align",hw),uw=new P_("align","ql-align",hw),pw=new B_("align","text-align",hw);class ColorAttributor extends B_{value(t){let e=super.value(t);if(!e.startsWith("rgb("))return e;e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"");return`#${e.split(",").map((t=>`00${parseInt(t,10).toString(16)}`.slice(-2))).join("")}`}}const fw=new P_("color","ql-color",{scope:M_.INLINE}),gw=new ColorAttributor("color","color",{scope:M_.INLINE}),mw=new P_("background","ql-bg",{scope:M_.INLINE}),bw=new ColorAttributor("background","background-color",{scope:M_.INLINE});class CodeBlockContainer extends Container{static create(t){const e=super.create(t);return e.setAttribute("spellcheck","false"),e}code(t,e){return this.children.map((t=>t.length()<=1?"":t.domNode.innerText)).join("\n").slice(t,t+e)}html(t,e){return`<pre>\n${Sx(this.code(t,e))}\n</pre>`}}class CodeBlock extends Block{static TAB="  ";static register(){Quill.register(CodeBlockContainer)}}class Code extends Inline{}Code.blotName="code",Code.tagName="CODE",CodeBlock.blotName="code-block",CodeBlock.className="ql-code-block",CodeBlock.tagName="DIV",CodeBlockContainer.blotName="code-block-container",CodeBlockContainer.className="ql-code-block-container",CodeBlockContainer.tagName="DIV",CodeBlockContainer.allowedChildren=[CodeBlock],CodeBlock.allowedChildren=[Ax,Break,Cursor],CodeBlock.requiredContainer=CodeBlockContainer;const vw={scope:M_.BLOCK,whitelist:["rtl"]},yw=new Attributor("direction","dir",vw),Ew=new P_("direction","ql-direction",vw),_w=new B_("direction","direction",vw),xw={scope:M_.INLINE,whitelist:["serif","monospace"]},ww=new P_("font","ql-font",xw);const Tw=new class FontStyleAttributor extends B_{value(t){return super.value(t).replace(/["']/g,"")}}("font","font-family",xw),Aw=new P_("size","ql-size",{scope:M_.INLINE,whitelist:["small","large","huge"]}),Sw=new B_("size","font-size",{scope:M_.INLINE,whitelist:["10px","18px","32px"]}),Ow=Bx("quill:keyboard"),Dw=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Keyboard extends Module{static match(t,e){return!["altKey","ctrlKey","metaKey","shiftKey"].some((i=>!!e[i]!==t[i]&&null!==e[i]))&&(e.key===t.key||e.key===t.which)}constructor(t,e){super(t,e),this.bindings={},Object.keys(this.options.bindings).forEach((t=>{this.options.bindings[t]&&this.addBinding(this.options.bindings[t])})),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},(()=>{})),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=function(t){if("string"==typeof t||"number"==typeof t)t={key:t};else{if("object"!=typeof t)return null;t=$E(t)}t.shortKey&&(t[Dw]=t.shortKey,delete t.shortKey);return t}(t);if(null==s)return void Ow.warn("Attempted to add invalid keyboard binding",s);"function"==typeof e&&(e={handler:e}),"function"==typeof i&&(i={handler:i});(Array.isArray(s.key)?s.key:[s.key]).forEach((t=>{const n={...s,key:t,...e,...i};this.bindings[n.key]=this.bindings[n.key]||[],this.bindings[n.key].push(n)}))}listen(){this.quill.root.addEventListener("keydown",(t=>{if(t.defaultPrevented||t.isComposing)return;if(229===t.keyCode&&("Enter"===t.key||"Backspace"===t.key))return;const e=(this.bindings[t.key]||[]).concat(this.bindings[t.which]||[]).filter((e=>Keyboard.match(t,e)));if(0===e.length)return;const i=Quill.find(t.target,!0);if(i&&i.scroll!==this.quill.scroll)return;const s=this.quill.getSelection();if(null==s||!this.quill.hasFocus())return;const[n,o]=this.quill.getLine(s.index),[r,c]=this.quill.getLeaf(s.index),[h,d]=0===s.length?[r,c]:this.quill.getLeaf(s.index+s.length),u=r instanceof sx?r.value().slice(0,c):"",p=h instanceof sx?h.value().slice(d):"",m={collapsed:0===s.length,empty:0===s.length&&n.length()<=1,format:this.quill.getFormat(s),line:n,offset:o,prefix:u,suffix:p,event:t},b=e.some((t=>{if(null!=t.collapsed&&t.collapsed!==m.collapsed)return!1;if(null!=t.empty&&t.empty!==m.empty)return!1;if(null!=t.offset&&t.offset!==m.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((t=>null==m.format[t])))return!1}else if("object"==typeof t.format&&!Object.keys(t.format).every((e=>!0===t.format[e]?null!=m.format[e]:!1===t.format[e]?null==m.format[e]:D_(t.format[e],m.format[e]))))return!1;return!(null!=t.prefix&&!t.prefix.test(m.prefix))&&(!(null!=t.suffix&&!t.suffix.test(m.suffix))&&!0!==t.handler.call(this,s,m,t))}));b&&t.preventDefault()}))}handleBackspace(t,e){const i=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(0===t.index||this.quill.getLength()<=1)return;let s={};const[n]=this.quill.getLine(t.index);let o=(new Tx).retain(t.index-i).delete(i);if(0===e.offset){const[e]=this.quill.getLine(t.index-1);if(e){if(!("block"===e.statics.blotName&&e.length()<=1)){const e=n.formats(),i=this.quill.getFormat(t.index-1,1);if(s=wx.AttributeMap.diff(e,i)||{},Object.keys(s).length>0){const e=(new Tx).retain(t.index+n.length()-2).retain(1,s);o=o.compose(e)}}}}this.quill.updateContents(o,Quill.sources.USER),this.quill.focus()}handleDelete(t,e){const i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(t.index>=this.quill.getLength()-i)return;let s={};const[n]=this.quill.getLine(t.index);let o=(new Tx).retain(t.index).delete(i);if(e.offset>=n.length()-1){const[e]=this.quill.getLine(t.index+1);if(e){const i=n.formats(),r=this.quill.getFormat(t.index,1);s=wx.AttributeMap.diff(i,r)||{},Object.keys(s).length>0&&(o=o.retain(e.length()-1).retain(1,s))}}this.quill.updateContents(o,Quill.sources.USER),this.quill.focus()}handleDeleteRange(t){Rw({range:t,quill:this.quill}),this.quill.focus()}handleEnter(t,e){const i=Object.keys(e.format).reduce(((t,i)=>(this.quill.scroll.query(i,M_.BLOCK)&&!Array.isArray(e.format[i])&&(t[i]=e.format[i]),t)),{}),s=(new Tx).retain(t.index).delete(t.length).insert("\n",i);this.quill.updateContents(s,Quill.sources.USER),this.quill.setSelection(t.index+1,Quill.sources.SILENT),this.quill.focus()}}const Cw={bindings:{bold:Lw("bold"),italic:Lw("italic"),underline:Lw("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","+1",Quill.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","-1",Quill.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(t,e){null!=e.format.indent?this.quill.format("indent","-1",Quill.sources.USER):null!=e.format.list&&this.quill.format("list",!1,Quill.sources.USER)}},"indent code-block":Iw(!0),"outdent code-block":Iw(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(t){this.quill.deleteText(t.index-1,1,Quill.sources.USER)}},tab:{key:"Tab",handler(t,e){if(e.format.table)return!0;this.quill.history.cutoff();const i=(new Tx).retain(t.index).delete(t.length).insert("\t");return this.quill.updateContents(i,Quill.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,Quill.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,Quill.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(t,e){const i={list:!1};e.format.indent&&(i.indent=!1),this.quill.formatLine(t.index,t.length,i,Quill.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(t){const[e,i]=this.quill.getLine(t.index),s={...e.formats(),list:"checked"},n=(new Tx).retain(t.index).insert("\n",s).retain(e.length()-i-1).retain(1,{list:"unchecked"});this.quill.updateContents(n,Quill.sources.USER),this.quill.setSelection(t.index+1,Quill.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(t,e){const[i,s]=this.quill.getLine(t.index),n=(new Tx).retain(t.index).insert("\n",e.format).retain(i.length()-s-1).retain(1,{header:null});this.quill.updateContents(n,Quill.sources.USER),this.quill.setSelection(t.index+1,Quill.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(t){const e=this.quill.getModule("table");if(e){const[i,s,n,o]=e.getTable(t),r=function(t,e,i,s){if(null==e.prev&&null==e.next)return null==i.prev&&null==i.next?0===s?-1:1:null==i.prev?-1:1;if(null==e.prev)return-1;if(null==e.next)return 1;return null}(0,s,n,o);if(null==r)return;let c=i.offset();if(r<0){const e=(new Tx).retain(c).insert("\n");this.quill.updateContents(e,Quill.sources.USER),this.quill.setSelection(t.index+1,t.length,Quill.sources.SILENT)}else if(r>0){c+=i.length();const t=(new Tx).retain(c).insert("\n");this.quill.updateContents(t,Quill.sources.USER),this.quill.setSelection(c,Quill.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(t,e){const{event:i,line:s}=e,n=s.offset(this.quill.scroll);i.shiftKey?this.quill.setSelection(n-1,Quill.sources.USER):this.quill.setSelection(n+s.length(),Quill.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(t,e){if(null==this.quill.scroll.query("list"))return!0;const{length:i}=e.prefix,[s,n]=this.quill.getLine(t.index);if(n>i)return!0;let o;switch(e.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(t.index," ",Quill.sources.USER),this.quill.history.cutoff();const r=(new Tx).retain(t.index-n).delete(i+1).retain(s.length()-2-n).retain(1,{list:o});return this.quill.updateContents(r,Quill.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-i,Quill.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(t){const[e,i]=this.quill.getLine(t.index);let s=2,n=e;for(;null!=n&&n.length()<=1&&n.formats()["code-block"];)if(n=n.prev,s-=1,s<=0){const s=(new Tx).retain(t.index+e.length()-i-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(s,Quill.sources.USER),this.quill.setSelection(t.index-1,Quill.sources.SILENT),!1}return!0}},"embed left":Mw("ArrowLeft",!1),"embed left shift":Mw("ArrowLeft",!0),"embed right":Mw("ArrowRight",!1),"embed right shift":Mw("ArrowRight",!0),"table down":kw(!1),"table up":kw(!0)}};function Iw(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler(e,i){let{event:s}=i;const n=this.quill.scroll.query("code-block"),{TAB:o}=n;if(0===e.length&&!s.shiftKey)return this.quill.insertText(e.index,o,Quill.sources.USER),void this.quill.setSelection(e.index+o.length,Quill.sources.SILENT);const r=0===e.length?this.quill.getLines(e.index,1):this.quill.getLines(e);let{index:c,length:h}=e;r.forEach(((e,i)=>{t?(e.insertAt(0,o),0===i?c+=o.length:h+=o.length):e.domNode.textContent.startsWith(o)&&(e.deleteAt(0,o.length),0===i?c-=o.length:h-=o.length)})),this.quill.update(Quill.sources.USER),this.quill.setSelection(c,h,Quill.sources.SILENT)}}}function Mw(t,e){const i="ArrowLeft"===t?"prefix":"suffix";return{key:t,shiftKey:e,altKey:null,[i]:/^$/,handler(i){let{index:s}=i;"ArrowRight"===t&&(s+=i.length+1);const[n]=this.quill.getLeaf(s);return!(n instanceof K_)||("ArrowLeft"===t?e?this.quill.setSelection(i.index-1,i.length+1,Quill.sources.USER):this.quill.setSelection(i.index-1,Quill.sources.USER):e?this.quill.setSelection(i.index,i.length+1,Quill.sources.USER):this.quill.setSelection(i.index+i.length+1,Quill.sources.USER),!1)}}}function Lw(t){return{key:t[0],shortKey:!0,handler(e,i){this.quill.format(t,!i.format[t],Quill.sources.USER)}}}function kw(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(e,i){const s=t?"prev":"next",n=i.line,o=n.parent[s];if(null!=o){if("table-row"===o.statics.blotName){let t=o.children.head,e=n;for(;null!=e.prev;)e=e.prev,t=t.next;const s=t.offset(this.quill.scroll)+Math.min(i.offset,t.length()-1);this.quill.setSelection(s,0,Quill.sources.USER)}}else{const e=n.table()[s];null!=e&&(t?this.quill.setSelection(e.offset(this.quill.scroll)+e.length()-1,0,Quill.sources.USER):this.quill.setSelection(e.offset(this.quill.scroll),0,Quill.sources.USER))}return!1}}}function Rw(t){let{quill:e,range:i}=t;const s=e.getLines(i);let n={};if(s.length>1){const t=s[0].formats(),e=s[s.length-1].formats();n=wx.AttributeMap.diff(e,t)||{}}e.deleteText(i,Quill.sources.USER),Object.keys(n).length>0&&e.formatLine(i.index,1,n,Quill.sources.USER),e.setSelection(i.index,Quill.sources.SILENT)}Keyboard.DEFAULTS=Cw;const Pw=/font-weight:\s*normal/,Nw=["P","OL","UL"],Bw=t=>t&&Nw.includes(t.tagName);const Fw=/\bmso-list:[^;]*ignore/i,qw=/\bmso-list:[^;]*\bl(\d+)/i,jw=/\bmso-list:[^;]*\blevel(\d+)/i,zw=t=>{const e=Array.from(t.querySelectorAll("[style*=mso-list]")),i=[],s=[];e.forEach((t=>{(t.getAttribute("style")||"").match(Fw)?i.push(t):s.push(t)})),i.forEach((t=>t.parentNode?.removeChild(t)));const n=t.documentElement.innerHTML,o=s.map((t=>((t,e)=>{const i=t.getAttribute("style"),s=i?.match(qw);if(!s)return null;const n=Number(s[1]),o=i?.match(jw),r=o?Number(o[1]):1,c=new RegExp(`@list l${n}:level${r}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),h=e.match(c);return{id:n,indent:r,type:h&&"bullet"===h[1]?"bullet":"ordered",element:t}})(t,n))).filter((t=>t));for(;o.length;){const t=[];let e=o.shift();for(;e;)t.push(e),e=o.length&&o[0]?.element===e.element.nextElementSibling&&o[0].id===e.id?o.shift():null;const i=document.createElement("ul");t.forEach((t=>{const e=document.createElement("li");e.setAttribute("data-list",t.type),t.indent>1&&e.setAttribute("class","ql-indent-"+(t.indent-1)),e.innerHTML=t.element.innerHTML,i.appendChild(e)}));const s=t[0]?.element,{parentNode:n}=s??{};s&&n?.replaceChild(i,s),t.slice(1).forEach((t=>{let{element:e}=t;n?.removeChild(e)}))}};const Vw=[function(t){"urn:schemas-microsoft-com:office:word"===t.documentElement.getAttribute("xmlns:w")&&zw(t)},function(t){t.querySelector('[id^="docs-internal-guid-"]')&&((t=>{Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter((t=>t.getAttribute("style")?.match(Pw))).forEach((e=>{const i=t.createDocumentFragment();i.append(...e.childNodes),e.parentNode?.replaceChild(i,e)}))})(t),(t=>{Array.from(t.querySelectorAll("br")).filter((t=>Bw(t.previousElementSibling)&&Bw(t.nextElementSibling))).forEach((t=>{t.parentNode?.removeChild(t)}))})(t))}],Hw=Bx("quill:clipboard"),$w=[[Node.TEXT_NODE,function(t,e,i){let s=t.data;if("O:P"===t.parentElement?.tagName)return e.insert(s.trim());if(!Zw(t)){if(0===s.trim().length&&s.includes("\n")&&!function(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Xw(t.previousElementSibling,e)&&!Xw(t.nextElementSibling,e)}(t,i))return e;const n=(t,e)=>{const i=e.replace(/[^\u00a0]/g,"");return i.length<1&&t?" ":i};s=s.replace(/\r\n/g," ").replace(/\n/g," "),s=s.replace(/\s\s+/g,n.bind(n,!0)),(null==t.previousSibling&&null!=t.parentElement&&Xw(t.parentElement,i)||t.previousSibling instanceof Element&&Xw(t.previousSibling,i))&&(s=s.replace(/^\s+/,n.bind(n,!1))),(null==t.nextSibling&&null!=t.parentElement&&Xw(t.parentElement,i)||t.nextSibling instanceof Element&&Xw(t.nextSibling,i))&&(s=s.replace(/\s+$/,n.bind(n,!1)))}return e.insert(s)}],[Node.TEXT_NODE,tT],["br",function(t,e){Yw(e,"\n")||e.insert("\n");return e}],[Node.ELEMENT_NODE,tT],[Node.ELEMENT_NODE,function(t,e,i){const s=i.query(t);if(null==s)return e;if(s.prototype instanceof K_){const e={},n=s.value(t);if(null!=n)return e[s.blotName]=n,(new Tx).insert(e,s.formats(t,i))}else if(s.prototype instanceof X_&&!Yw(e,"\n")&&e.insert("\n"),"blotName"in s&&"formats"in s&&"function"==typeof s.formats)return Ww(e,s.blotName,s.formats(t,i),i);return e}],[Node.ELEMENT_NODE,function(t,e,i){const s=Attributor.keys(t),n=P_.keys(t),o=B_.keys(t),r={};return s.concat(n).concat(o).forEach((e=>{let s=i.query(e,M_.ATTRIBUTE);null!=s&&(r[s.attrName]=s.value(t),r[s.attrName])||(s=Uw[e],null==s||s.attrName!==e&&s.keyName!==e||(r[s.attrName]=s.value(t)||void 0),s=Gw[e],null==s||s.attrName!==e&&s.keyName!==e||(s=Gw[e],r[s.attrName]=s.value(t)||void 0))})),Object.entries(r).reduce(((t,e)=>{let[s,n]=e;return Ww(t,s,n,i)}),e)}],[Node.ELEMENT_NODE,function(t,e,i){const s={},n=t.style||{};"italic"===n.fontStyle&&(s.italic=!0);"underline"===n.textDecoration&&(s.underline=!0);"line-through"===n.textDecoration&&(s.strike=!0);(n.fontWeight?.startsWith("bold")||parseInt(n.fontWeight,10)>=700)&&(s.bold=!0);if(e=Object.entries(s).reduce(((t,e)=>{let[s,n]=e;return Ww(t,s,n,i)}),e),parseFloat(n.textIndent||0)>0)return(new Tx).insert("\t").concat(e);return e}],["li",function(t,e,i){const s=i.query(t);if(null==s||"list"!==s.blotName||!Yw(e,"\n"))return e;let n=-1,o=t.parentNode;for(;null!=o;)["OL","UL"].includes(o.tagName)&&(n+=1),o=o.parentNode;return n<=0?e:e.reduce(((t,e)=>e.insert?e.attributes&&"number"==typeof e.attributes.indent?t.push(e):t.insert(e.insert,{indent:n,...e.attributes||{}}):t),new Tx)}],["ol, ul",function(t,e,i){const s=t;let n="OL"===s.tagName?"ordered":"bullet";const o=s.getAttribute("data-checked");o&&(n="true"===o?"checked":"unchecked");return Ww(e,"list",n,i)}],["pre",function(t,e,i){const s=i.query("code-block"),n=!s||!("formats"in s)||"function"!=typeof s.formats||s.formats(t,i);return Ww(e,"code-block",n,i)}],["tr",function(t,e,i){const s="TABLE"===t.parentElement?.tagName?t.parentElement:t.parentElement?.parentElement;if(null!=s){return Ww(e,"table",Array.from(s.querySelectorAll("tr")).indexOf(t)+1,i)}return e}],["b",Jw("bold")],["i",Jw("italic")],["strike",Jw("strike")],["style",function(){return new Tx}]],Uw=[dw,yw].reduce(((t,e)=>(t[e.keyName]=e,t)),{}),Gw=[pw,bw,gw,_w,Tw,Sw].reduce(((t,e)=>(t[e.keyName]=e,t)),{});function Ww(t,e,i,s){return s.query(e)?t.reduce(((t,s)=>{if(!s.insert)return t;if(s.attributes&&s.attributes[e])return t.push(s);const n=i?{[e]:i}:{};return t.insert(s.insert,{...n,...s.attributes})}),new Tx):t}function Yw(t,e){let i="";for(let s=t.ops.length-1;s>=0&&i.length<e.length;--s){const e=t.ops[s];if("string"!=typeof e.insert)break;i=e.insert+i}return i.slice(-1*e.length)===e}function Xw(t,e){if(!(t instanceof Element))return!1;const i=e.query(t);return!(i&&i.prototype instanceof K_)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}const Qw=new WeakMap;function Zw(t){return null!=t&&(Qw.has(t)||("PRE"===t.tagName?Qw.set(t,!0):Qw.set(t,Zw(t.parentNode))),Qw.get(t))}function Kw(t,e,i,s,n){return e.nodeType===e.TEXT_NODE?s.reduce(((i,s)=>s(e,i,t)),new Tx):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce(((o,r)=>{let c=Kw(t,r,i,s,n);return r.nodeType===e.ELEMENT_NODE&&(c=i.reduce(((e,i)=>i(r,e,t)),c),c=(n.get(r)||[]).reduce(((e,i)=>i(r,e,t)),c)),o.concat(c)}),new Tx):new Tx}function Jw(t){return(e,i,s)=>Ww(i,t,!0,s)}function tT(t,e,i){if(!Yw(e,"\n")){if(Xw(t,i)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert("\n");if(e.length()>0&&t.nextSibling){let s=t.nextSibling;for(;null!=s;){if(Xw(s,i))return e.insert("\n");const t=i.query(s);if(t&&t.prototype instanceof BlockEmbed)return e.insert("\n");s=s.firstChild}}}return e}function eT(t,e){let i=e;for(let e=t.length-1;e>=0;e-=1){const s=t[e];t[e]={delta:i.transform(s.delta,!0),range:s.range&&iT(s.range,i)},i=s.delta.transform(i),0===t[e].delta.length()&&t.splice(e,1)}}function iT(t,e){if(!t)return t;const i=e.transformPosition(t.index);return{index:i,length:e.transformPosition(t.index+t.length)-i}}class Uploader extends Module{constructor(t,e){super(t,e),t.root.addEventListener("drop",(e=>{e.preventDefault();let i=null;if(document.caretRangeFromPoint)i=document.caretRangeFromPoint(e.clientX,e.clientY);else if(document.caretPositionFromPoint){const t=document.caretPositionFromPoint(e.clientX,e.clientY);i=document.createRange(),i.setStart(t.offsetNode,t.offset),i.setEnd(t.offsetNode,t.offset)}const s=i&&t.selection.normalizeNative(i);if(s){const i=t.selection.normalizedToRange(s);e.dataTransfer?.files&&this.upload(i,e.dataTransfer.files)}}))}upload(t,e){const i=[];Array.from(e).forEach((t=>{t&&this.options.mimetypes?.includes(t.type)&&i.push(t)})),i.length>0&&this.options.handler.call(this,t,i)}}Uploader.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(t,e){if(!this.quill.scroll.query("image"))return;const i=e.map((t=>new Promise((e=>{const i=new FileReader;i.onload=()=>{e(i.result)},i.readAsDataURL(t)}))));Promise.all(i).then((e=>{const i=e.reduce(((t,e)=>t.insert({image:e})),(new Tx).retain(t.index).delete(t.length));this.quill.updateContents(i,Emitter.sources.USER),this.quill.setSelection(t.index+e.length,Emitter.sources.SILENT)}))}};const sT=["insertText","insertReplacementText"];const nT=/Mac/i.test(navigator.platform);Quill.register({"blots/block":Block,"blots/block/embed":BlockEmbed,"blots/break":Break,"blots/container":Container,"blots/cursor":Cursor,"blots/embed":Embed,"blots/inline":Inline,"blots/scroll":class Scroll extends ex{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=Block;static allowedChildren=[Block,BlockEmbed,Container];constructor(t,e,i){let{emitter:s}=i;super(t,e),this.emitter=s,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",(t=>this.handleDragStart(t)))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const t=this.batch;this.batch=!1,this.update(t)}emitMount(t){this.emitter.emit(Emitter.events.SCROLL_BLOT_MOUNT,t)}emitUnmount(t){this.emitter.emit(Emitter.events.SCROLL_BLOT_UNMOUNT,t)}emitEmbedUpdate(t,e){this.emitter.emit(Emitter.events.SCROLL_EMBED_UPDATE,t,e)}deleteAt(t,e){const[i,s]=this.line(t),[n]=this.line(t+e);if(super.deleteAt(t,e),null!=n&&i!==n&&s>0){if(i instanceof BlockEmbed||n instanceof BlockEmbed)return void this.optimize();const t=n.children.head instanceof Break?null:n.children.head;i.moveChildren(n,t),i.remove()}this.optimize()}enable(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t?"true":"false")}formatAt(t,e,i,s){super.formatAt(t,e,i,s),this.optimize()}insertAt(t,e,i){if(t>=this.length())if(null==i||null==this.scroll.query(e,M_.BLOCK)){const t=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(t),null==i&&e.endsWith("\n")?t.insertAt(0,e.slice(0,-1),i):t.insertAt(0,e,i)}else{const t=this.scroll.create(e,i);this.appendChild(t)}else super.insertAt(t,e,i);this.optimize()}insertBefore(t,e){if(t.statics.scope===M_.INLINE_BLOT){const i=this.scroll.create(this.statics.defaultChild.blotName);i.appendChild(t),super.insertBefore(i,e)}else super.insertBefore(t,e)}insertContents(t,e){const i=this.deltaToRenderBlocks(e.concat((new Tx).insert("\n"))),s=i.pop();if(null==s)return;this.batchStart();const n=i.shift();if(n){const e="block"===n.type&&(0===n.delta.length()||!this.descendant(BlockEmbed,t)[0]&&t<this.length()),i="block"===n.type?n.delta:(new Tx).insert({[n.key]:n.value});cw(this,t,i);const s="block"===n.type?1:0,o=t+i.length()+s;e&&this.insertAt(o-1,"\n");const r=Dx(this.line(t)[0]),c=wx.AttributeMap.diff(r,n.attributes)||{};Object.keys(c).forEach((t=>{this.formatAt(o-1,1,t,c[t])})),t=o}let[o,r]=this.children.find(t);if(i.length&&(o&&(o=o.split(r),r=0),i.forEach((t=>{if("block"===t.type){cw(this.createBlock(t.attributes,o||void 0),0,t.delta)}else{const e=this.create(t.key,t.value);this.insertBefore(e,o||void 0),Object.keys(t.attributes).forEach((i=>{e.format(i,t.attributes[i])}))}}))),"block"===s.type&&s.delta.length()){cw(this,o?o.offset(o.scroll)+r:this.length(),s.delta)}this.batchEnd(),this.optimize()}isEnabled(){return"true"===this.domNode.getAttribute("contenteditable")}leaf(t){const e=this.path(t).pop();if(!e)return[null,-1];const[i,s]=e;return i instanceof V_?[i,s]:[null,-1]}line(t){return t===this.length()?this.line(t-1):this.descendant(aw,t)}lines(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;const i=(t,e,s)=>{let n=[],o=s;return t.children.forEachAt(e,s,((t,e,s)=>{aw(t)?n.push(t):t instanceof Z_&&(n=n.concat(i(t,e,o))),o-=s})),n};return i(this,t,e)}optimize(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(super.optimize(t,e),t.length>0&&this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE,t,e))}path(t){return super.path(t).slice(1)}remove(){}update(t){if(this.batch)return void(Array.isArray(t)&&(this.batch=this.batch.concat(t)));let e=Emitter.sources.USER;"string"==typeof t&&(e=t),Array.isArray(t)||(t=this.observer.takeRecords()),(t=t.filter((t=>{let{target:e}=t;const i=this.find(e,!0);return i&&!lw(i)}))).length>0&&this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE,e,t),super.update(t.concat([])),t.length>0&&this.emitter.emit(Emitter.events.SCROLL_UPDATE,e,t)}updateEmbedAt(t,e,i){const[s]=this.descendant((t=>t instanceof BlockEmbed),t);s&&s.statics.blotName===e&&lw(s)&&s.updateContent(i)}handleDragStart(t){t.preventDefault()}deltaToRenderBlocks(t){const e=[];let i=new Tx;return t.forEach((t=>{const s=t?.insert;if(s)if("string"==typeof s){const n=s.split("\n");n.slice(0,-1).forEach((s=>{i.insert(s,t.attributes),e.push({type:"block",delta:i,attributes:t.attributes??{}}),i=new Tx}));const o=n[n.length-1];o&&i.insert(o,t.attributes)}else{const n=Object.keys(s)[0];if(!n)return;this.query(n,M_.INLINE)?i.push(t):(i.length()&&e.push({type:"block",delta:i,attributes:{}}),i=new Tx,e.push({type:"blockEmbed",key:n,value:s[n],attributes:t.attributes??{}}))}})),i.length()&&e.push({type:"block",delta:i,attributes:{}}),e}createBlock(t,e){let i;const s={};Object.entries(t).forEach((t=>{let[e,n]=t;null!=this.query(e,M_.BLOCK&M_.BLOT)?i=e:s[e]=n}));const n=this.create(i||this.statics.defaultChild.blotName,i?t[i]:void 0);this.insertBefore(n,e||void 0);const o=n.length();return Object.entries(s).forEach((t=>{let[e,i]=t;n.formatAt(0,o,e,i)})),n}},"blots/text":Ax,"modules/clipboard":class Clipboard extends Module{static DEFAULTS={matchers:[]};constructor(t,e){super(t,e),this.quill.root.addEventListener("copy",(t=>this.onCaptureCopy(t,!1))),this.quill.root.addEventListener("cut",(t=>this.onCaptureCopy(t,!0))),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],$w.concat(this.options.matchers??[]).forEach((t=>{let[e,i]=t;this.addMatcher(e,i)}))}addMatcher(t,e){this.matchers.push([t,e])}convert(t){let{html:e,text:i}=t,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(s[CodeBlock.blotName])return(new Tx).insert(i||"",{[CodeBlock.blotName]:s[CodeBlock.blotName]});if(!e)return(new Tx).insert(i||"",s);const n=this.convertHTML(e);return Yw(n,"\n")&&(null==n.ops[n.ops.length-1].attributes||s.table)?n.compose((new Tx).retain(n.length()-1).delete(1)):n}normalizeHTML(t){(t=>{t.documentElement&&Vw.forEach((e=>{e(t)}))})(t)}convertHTML(t){const e=(new DOMParser).parseFromString(t,"text/html");this.normalizeHTML(e);const i=e.body,s=new WeakMap,[n,o]=this.prepareMatching(i,s);return Kw(this.quill.scroll,i,n,o,s)}dangerouslyPasteHTML(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Quill.sources.API;if("string"==typeof t){const i=this.convert({html:t,text:""});this.quill.setContents(i,e),this.quill.setSelection(0,Quill.sources.SILENT)}else{const s=this.convert({html:e,text:""});this.quill.updateContents((new Tx).retain(t).concat(s),i),this.quill.setSelection(t+s.length(),Quill.sources.SILENT)}}onCaptureCopy(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t.defaultPrevented)return;t.preventDefault();const[i]=this.quill.selection.getRange();if(null==i)return;const{html:s,text:n}=this.onCopy(i,e);t.clipboardData?.setData("text/plain",n),t.clipboardData?.setData("text/html",s),e&&Rw({range:i,quill:this.quill})}normalizeURIList(t){return t.split(/\r?\n/).filter((t=>"#"!==t[0])).join("\n")}onCapturePaste(t){if(t.defaultPrevented||!this.quill.isEnabled())return;t.preventDefault();const e=this.quill.getSelection(!0);if(null==e)return;const i=t.clipboardData?.getData("text/html");let s=t.clipboardData?.getData("text/plain");if(!i&&!s){const e=t.clipboardData?.getData("text/uri-list");e&&(s=this.normalizeURIList(e))}const n=Array.from(t.clipboardData?.files||[]);if(!i&&n.length>0)this.quill.uploader.upload(e,n);else{if(i&&n.length>0){const t=(new DOMParser).parseFromString(i,"text/html");if(1===t.body.childElementCount&&"IMG"===t.body.firstElementChild?.tagName)return void this.quill.uploader.upload(e,n)}this.onPaste(e,{html:i,text:s})}}onCopy(t){const e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}onPaste(t,e){let{text:i,html:s}=e;const n=this.quill.getFormat(t.index),o=this.convert({text:i,html:s},n);Hw.log("onPaste",o,{text:i,html:s});const r=(new Tx).retain(t.index).delete(t.length).concat(o);this.quill.updateContents(r,Quill.sources.USER),this.quill.setSelection(r.length()-t.length,Quill.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(t,e){const i=[],s=[];return this.matchers.forEach((n=>{const[o,r]=n;switch(o){case Node.TEXT_NODE:s.push(r);break;case Node.ELEMENT_NODE:i.push(r);break;default:Array.from(t.querySelectorAll(o)).forEach((t=>{if(e.has(t)){const i=e.get(t);i?.push(r)}else e.set(t,[r])}))}})),[i,s]}},"modules/history":class History extends Module{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(t,e){super(t,e),this.quill.on(Quill.events.EDITOR_CHANGE,((t,e,i,s)=>{t===Quill.events.SELECTION_CHANGE?e&&s!==Quill.sources.SILENT&&(this.currentRange=e):t===Quill.events.TEXT_CHANGE&&(this.ignoreChange||(this.options.userOnly&&s!==Quill.sources.USER?this.transform(e):this.record(e,i)),this.currentRange=iT(this.currentRange,e))})),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",(t=>{"historyUndo"===t.inputType?(this.undo(),t.preventDefault()):"historyRedo"===t.inputType&&(this.redo(),t.preventDefault())}))}change(t,e){if(0===this.stack[t].length)return;const i=this.stack[t].pop();if(!i)return;const s=this.quill.getContents(),n=i.delta.invert(s);this.stack[e].push({delta:n,range:iT(i.range,n)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i.delta,Quill.sources.USER),this.ignoreChange=!1,this.restoreSelection(i)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(t,e){if(0===t.ops.length)return;this.stack.redo=[];let i=t.invert(e),s=this.currentRange;const n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){const t=this.stack.undo.pop();t&&(i=i.compose(t.delta),s=t.range)}else this.lastRecorded=n;0!==i.length()&&(this.stack.undo.push({delta:i,range:s}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(t){eT(this.stack.undo,t),eT(this.stack.redo,t)}undo(){this.change("undo","redo")}restoreSelection(t){if(t.range)this.quill.setSelection(t.range,Quill.sources.USER);else{const e=function(t,e){const i=e.reduce(((t,e)=>t+(e.delete||0)),0);let s=e.length()-i;(function(t,e){const i=e.ops[e.ops.length-1];if(null==i)return!1;if(null!=i.insert)return"string"==typeof i.insert&&i.insert.endsWith("\n");if(null!=i.attributes)return Object.keys(i.attributes).some((e=>null!=t.query(e,M_.BLOCK)));return!1})(t,e)&&(s-=1);return s}(this.quill.scroll,t.delta);this.quill.setSelection(e,Quill.sources.USER)}}},"modules/keyboard":Keyboard,"modules/uploader":Uploader,"modules/input":class Input extends Module{constructor(t,e){super(t,e),t.root.addEventListener("beforeinput",(t=>{this.handleBeforeInput(t)})),/Android/i.test(navigator.userAgent)||t.on(Quill.events.COMPOSITION_BEFORE_START,(()=>{this.handleCompositionStart()}))}deleteRange(t){Rw({range:t,quill:this.quill})}replaceText(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===t.length)return!1;if(e){const i=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents((new Tx).retain(t.index).insert(e,i),Quill.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,Quill.sources.SILENT),!0}handleBeforeInput(t){if(this.quill.composition.isComposing||t.defaultPrevented||!sT.includes(t.inputType))return;const e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(!e||!0===e.collapsed)return;const i=function(t){if("string"==typeof t.data)return t.data;if(t.dataTransfer?.types.includes("text/plain"))return t.dataTransfer.getData("text/plain");return null}(t);if(null==i)return;const s=this.quill.selection.normalizeNative(e),n=s?this.quill.selection.normalizedToRange(s):null;n&&this.replaceText(n,i)&&t.preventDefault()}handleCompositionStart(){const t=this.quill.getSelection();t&&this.replaceText(t)}},"modules/uiNode":class UINode extends Module{isListening=!1;selectionChangeDeadline=0;constructor(t,e){super(t,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(t,e){let{line:i,event:s}=e;if(!(i instanceof U_&&i.uiNode))return!0;const n="rtl"===getComputedStyle(i.domNode).direction;return!!(n&&"ArrowRight"!==s.key||!n&&"ArrowLeft"!==s.key)||(this.quill.setSelection(t.index-1,t.length+(s.shiftKey?1:0),Quill.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",(t=>{!t.defaultPrevented&&(t=>"ArrowLeft"===t.key||"ArrowRight"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key||"Home"===t.key||!(!nT||"a"!==t.key||!0!==t.ctrlKey))(t)&&this.ensureListeningToSelectionChange()}))}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+100,this.isListening)return;this.isListening=!0;document.addEventListener("selectionchange",(()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()}),{once:!0})}handleSelectionChange(){const t=document.getSelection();if(!t)return;const e=t.getRangeAt(0);if(!0!==e.collapsed||0!==e.startOffset)return;const i=this.quill.scroll.find(e.startContainer);if(!(i instanceof U_&&i.uiNode))return;const s=document.createRange();s.setStartAfter(i.uiNode),s.setEndAfter(i.uiNode),t.removeAllRanges(),t.addRange(s)}}});const oT=new class IndentAttributor extends P_{add(t,e){let i=0;if("+1"===e||"-1"===e){const s=this.value(t)||0;i="+1"===e?s+1:s-1}else"number"==typeof e&&(i=e);return 0===i?(this.remove(t),!0):super.add(t,i.toString())}canAdd(t,e){return super.canAdd(t,e)||super.canAdd(t,parseInt(e,10))}value(t){return parseInt(super.value(t),10)||void 0}}("indent","ql-indent",{scope:M_.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class ListContainer extends Container{}ListContainer.blotName="list-container",ListContainer.tagName="OL";class ListItem extends Block{static create(t){const e=super.create();return e.setAttribute("data-list",t),e}static formats(t){return t.getAttribute("data-list")||void 0}static register(){Quill.register(ListContainer)}constructor(t,e){super(t,e);const i=e.ownerDocument.createElement("span"),s=i=>{if(!t.isEnabled())return;const s=this.statics.formats(e,t);"checked"===s?(this.format("list","unchecked"),i.preventDefault()):"unchecked"===s&&(this.format("list","checked"),i.preventDefault())};i.addEventListener("mousedown",s),i.addEventListener("touchstart",s),this.attachUI(i)}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(t,e)}}ListItem.blotName="list",ListItem.tagName="LI",ListContainer.allowedChildren=[ListItem],ListItem.requiredContainer=ListContainer;class Bold extends Inline{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(t){super.optimize(t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class Link extends Inline{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(t){const e=super.create(t);return e.setAttribute("href",this.sanitize(t)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(t){return t.getAttribute("href")}static sanitize(t){return rT(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("href",this.constructor.sanitize(e)):super.format(t,e)}}function rT(t,e){const i=document.createElement("a");i.href=t;const s=i.href.slice(0,i.href.indexOf(":"));return e.indexOf(s)>-1}const aT=["alt","height","width"];const lT=["height","width"];const cT=new P_("code-token","hljs",{scope:M_.INLINE});class CodeToken extends Inline{static formats(t,e){for(;null!=t&&t!==e.domNode;){if(t.classList&&t.classList.contains(CodeBlock.className))return super.formats(t,e);t=t.parentNode}}constructor(t,e,i){super(t,e,i),cT.add(this.domNode,i)}format(t,e){t!==CodeToken.blotName?super.format(t,e):e?cT.add(this.domNode,e):(cT.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),cT.value(this.domNode)||this.unwrap()}}CodeToken.blotName="code-token",CodeToken.className="ql-token";class SyntaxCodeBlock extends CodeBlock{static create(t){const e=super.create(t);return"string"==typeof t&&e.setAttribute("data-language",t),e}static formats(t){return t.getAttribute("data-language")||"plain"}static register(){}format(t,e){t===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(t,e)}replaceWith(t,e){return this.formatAt(0,this.length(),CodeToken.blotName,!1),super.replaceWith(t,e)}}class SyntaxCodeBlockContainer extends CodeBlockContainer{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(t,e){t===SyntaxCodeBlock.blotName&&(this.forceNext=!0,this.children.forEach((i=>{i.format(t,e)})))}formatAt(t,e,i,s){i===SyntaxCodeBlock.blotName&&(this.forceNext=!0),super.formatAt(t,e,i,s)}highlight(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==this.children.head)return;const i=`${Array.from(this.domNode.childNodes).filter((t=>t!==this.uiNode)).map((t=>t.textContent)).join("\n")}\n`,s=SyntaxCodeBlock.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==i){if(i.trim().length>0||null==this.cachedText){const e=this.children.reduce(((t,e)=>t.concat(Ox(e,!1))),new Tx),n=t(i,s);e.diff(n).reduce(((t,e)=>{let{retain:i,attributes:s}=e;return i?(s&&Object.keys(s).forEach((e=>{[SyntaxCodeBlock.blotName,CodeToken.blotName].includes(e)&&this.formatAt(t,i,e,s[e])})),t+i):t}),0)}this.cachedText=i,this.forceNext=!1}}html(t,e){const[i]=this.children.find(t);return`<pre data-language="${i?SyntaxCodeBlock.formats(i.domNode):"plain"}">\n${Sx(this.code(t,e))}\n</pre>`}optimize(t){if(super.optimize(t),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){const t=SyntaxCodeBlock.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}SyntaxCodeBlockContainer.allowedChildren=[SyntaxCodeBlock],SyntaxCodeBlock.requiredContainer=SyntaxCodeBlockContainer,SyntaxCodeBlock.allowedChildren=[CodeToken,Cursor,Ax,Break];class Syntax extends Module{static register(){Quill.register(CodeToken,!0),Quill.register(SyntaxCodeBlock,!0),Quill.register(SyntaxCodeBlockContainer,!0)}constructor(t,e){if(super(t,e),null==this.options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce(((t,e)=>{let{key:i}=e;return t[i]=!0,t}),{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(Quill.events.SCROLL_BLOT_MOUNT,(t=>{if(!(t instanceof SyntaxCodeBlockContainer))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach((t=>{let{key:i,label:s}=t;const n=e.ownerDocument.createElement("option");n.textContent=s,n.setAttribute("value",i),e.appendChild(n)})),e.addEventListener("change",(()=>{t.format(SyntaxCodeBlock.blotName,e.value),this.quill.root.focus(),this.highlight(t,!0)})),null==t.uiNode&&(t.attachUI(e),t.children.head&&(e.value=SyntaxCodeBlock.formats(t.children.head.domNode)))}))}initTimer(){let t=null;this.quill.on(Quill.events.SCROLL_OPTIMIZE,(()=>{t&&clearTimeout(t),t=setTimeout((()=>{this.highlight(),t=null}),this.options.interval)}))}highlight(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.quill.selection.composing)return;this.quill.update(Quill.sources.USER);const i=this.quill.getSelection();(null==t?this.quill.scroll.descendants(SyntaxCodeBlockContainer):[t]).forEach((t=>{t.highlight(this.highlightBlot,e)})),this.quill.update(Quill.sources.SILENT),null!=i&&this.quill.setSelection(i,Quill.sources.SILENT)}highlightBlot(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if(e=this.languages[e]?e:"plain","plain"===e)return Sx(t).split("\n").reduce(((t,i,s)=>(0!==s&&t.insert("\n",{[CodeBlock.blotName]:e}),t.insert(i))),new Tx);const i=this.quill.root.ownerDocument.createElement("div");return i.classList.add(CodeBlock.className),i.innerHTML=((t,e,i)=>{if("string"==typeof t.versionString){const s=t.versionString.split(".")[0];if(parseInt(s,10)>=11)return t.highlight(i,{language:e}).value}return t.highlight(e,i).value})(this.options.hljs,e,t),Kw(this.quill.scroll,i,[(t,e)=>{const i=cT.value(t);return i?e.compose((new Tx).retain(e.length(),{[CodeToken.blotName]:i})):e}],[(t,i)=>t.data.split("\n").reduce(((t,i,s)=>(0!==s&&t.insert("\n",{[CodeBlock.blotName]:e}),t.insert(i))),i)],new WeakMap)}}Syntax.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class TableCell extends Block{static blotName="table";static tagName="TD";static create(t){const e=super.create();return t?e.setAttribute("data-row",t):e.setAttribute("data-row",hT()),e}static formats(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(t,e){t===TableCell.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(t,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class TableRow extends Container{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&null!=this.next.children.head){const t=this.children.head.formats(),e=this.children.tail.formats(),i=this.next.children.head.formats(),s=this.next.children.tail.formats();return t.table===e.table&&t.table===i.table&&t.table===s.table}return!1}optimize(t){super.optimize(t),this.children.forEach((t=>{if(null==t.next)return;const e=t.formats(),i=t.next.formats();if(e.table!==i.table){const e=this.splitAfter(t);e&&e.optimize(),this.prev&&this.prev.optimize()}}))}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class TableBody extends Container{static blotName="table-body";static tagName="TBODY"}class TableContainer extends Container{static blotName="table-container";static tagName="TABLE";balanceCells(){const t=this.descendants(TableRow),e=t.reduce(((t,e)=>Math.max(e.children.length,t)),0);t.forEach((t=>{new Array(e-t.children.length).fill(0).forEach((()=>{let e;null!=t.children.head&&(e=TableCell.formats(t.children.head.domNode));const i=this.scroll.create(TableCell.blotName,e);t.appendChild(i),i.optimize()}))}))}cells(t){return this.rows().map((e=>e.children.at(t)))}deleteColumn(t){const[e]=this.descendant(TableBody);null!=e&&null!=e.children.head&&e.children.forEach((e=>{const i=e.children.at(t);null!=i&&i.remove()}))}insertColumn(t){const[e]=this.descendant(TableBody);null!=e&&null!=e.children.head&&e.children.forEach((e=>{const i=e.children.at(t),s=TableCell.formats(e.children.head.domNode),n=this.scroll.create(TableCell.blotName,s);e.insertBefore(n,i)}))}insertRow(t){const[e]=this.descendant(TableBody);if(null==e||null==e.children.head)return;const i=hT(),s=this.scroll.create(TableRow.blotName);e.children.head.children.forEach((()=>{const t=this.scroll.create(TableCell.blotName,i);s.appendChild(t)}));const n=e.children.at(t);e.insertBefore(s,n)}rows(){const t=this.children.head;return null==t?[]:t.children.map((t=>t))}}function hT(){return`row-${Math.random().toString(36).slice(2,6)}`}TableContainer.allowedChildren=[TableBody],TableBody.requiredContainer=TableContainer,TableBody.allowedChildren=[TableRow],TableRow.requiredContainer=TableBody,TableRow.allowedChildren=[TableCell],TableCell.requiredContainer=TableRow;const dT=Bx("quill:toolbar");class Toolbar extends Module{constructor(t,e){if(super(t,e),Array.isArray(this.options.container)){const e=document.createElement("div");e.setAttribute("role","toolbar"),function(t,e){Array.isArray(e[0])||(e=[e]);e.forEach((e=>{const i=document.createElement("span");i.classList.add("ql-formats"),e.forEach((t=>{if("string"==typeof t)uT(i,t);else{const e=Object.keys(t)[0],s=t[e];Array.isArray(s)?function(t,e,i){const s=document.createElement("select");s.classList.add(`ql-${e}`),i.forEach((t=>{const e=document.createElement("option");!1!==t?e.setAttribute("value",String(t)):e.setAttribute("selected","selected"),s.appendChild(e)})),t.appendChild(s)}(i,e,s):uT(i,e,s)}})),t.appendChild(i)}))}(e,this.options.container),t.container?.parentNode?.insertBefore(e,t.container),this.container=e}else"string"==typeof this.options.container?this.container=document.querySelector(this.options.container):this.container=this.options.container;this.container instanceof HTMLElement?(this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach((t=>{const e=this.options.handlers?.[t];e&&this.addHandler(t,e)})),Array.from(this.container.querySelectorAll("button, select")).forEach((t=>{this.attach(t)})),this.quill.on(Quill.events.EDITOR_CHANGE,(()=>{const[t]=this.quill.selection.getRange();this.update(t)}))):dT.error("Container required for toolbar",this.options)}addHandler(t,e){this.handlers[t]=e}attach(t){let e=Array.from(t.classList).find((t=>0===t.indexOf("ql-")));if(!e)return;if(e=e.slice(3),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[e]&&null==this.quill.scroll.query(e))return void dT.warn("ignoring attaching to nonexistent format",e,t);const i="SELECT"===t.tagName?"change":"click";t.addEventListener(i,(i=>{let s;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;const e=t.options[t.selectedIndex];s=!e.hasAttribute("selected")&&(e.value||!1)}else s=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),i.preventDefault();this.quill.focus();const[n]=this.quill.selection.getRange();if(null!=this.handlers[e])this.handlers[e].call(this,s);else if(this.quill.scroll.query(e).prototype instanceof K_){if(s=prompt(`Enter ${e}`),!s)return;this.quill.updateContents((new Tx).retain(n.index).delete(n.length).insert({[e]:s}),Quill.sources.USER)}else this.quill.format(e,s,Quill.sources.USER);this.update(n)})),this.controls.push([e,t])}update(t){const e=null==t?{}:this.quill.getFormat(t);this.controls.forEach((i=>{const[s,n]=i;if("SELECT"===n.tagName){let i=null;if(null==t)i=null;else if(null==e[s])i=n.querySelector("option[selected]");else if(!Array.isArray(e[s])){let t=e[s];"string"==typeof t&&(t=t.replace(/"/g,'\\"')),i=n.querySelector(`option[value="${t}"]`)}null==i?(n.value="",n.selectedIndex=-1):i.selected=!0}else if(null==t)n.classList.remove("ql-active"),n.setAttribute("aria-pressed","false");else if(n.hasAttribute("value")){const t=e[s],i=t===n.getAttribute("value")||null!=t&&t.toString()===n.getAttribute("value")||null==t&&!n.getAttribute("value");n.classList.toggle("ql-active",i),n.setAttribute("aria-pressed",i.toString())}else{const t=null!=e[s];n.classList.toggle("ql-active",t),n.setAttribute("aria-pressed",t.toString())}}))}}function uT(t,e,i){const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${e}`),s.setAttribute("aria-pressed","false"),null!=i?(s.value=i,s.setAttribute("aria-label",`${e}: ${i}`)):s.setAttribute("aria-label",e),t.appendChild(s)}Toolbar.DEFAULTS={},Toolbar.DEFAULTS={container:null,handlers:{clean(){const t=this.quill.getSelection();if(null!=t)if(0===t.length){const t=this.quill.getFormat();Object.keys(t).forEach((t=>{null!=this.quill.scroll.query(t,M_.INLINE)&&this.quill.format(t,!1,Quill.sources.USER)}))}else this.quill.removeFormat(t.index,t.length,Quill.sources.USER)},direction(t){const{align:e}=this.quill.getFormat();"rtl"===t&&null==e?this.quill.format("align","right",Quill.sources.USER):t||"right"!==e||this.quill.format("align",!1,Quill.sources.USER),this.quill.format("direction",t,Quill.sources.USER)},indent(t){const e=this.quill.getSelection(),i=this.quill.getFormat(e),s=parseInt(i.indent||0,10);if("+1"===t||"-1"===t){let e="+1"===t?1:-1;"rtl"===i.direction&&(e*=-1),this.quill.format("indent",s+e,Quill.sources.USER)}},link(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,Quill.sources.USER)},list(t){const e=this.quill.getSelection(),i=this.quill.getFormat(e);"check"===t?"checked"===i.list||"unchecked"===i.list?this.quill.format("list",!1,Quill.sources.USER):this.quill.format("list","unchecked",Quill.sources.USER):this.quill.format("list",t,Quill.sources.USER)}}};const pT='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>';var fT={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:pT,"code-block":pT,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',3:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',4:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',5:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',6:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'};let gT=0;function mT(t,e){t.setAttribute(e,`${!("true"===t.getAttribute(e))}`)}class Picker{constructor(t){this.select=t,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(()=>{this.togglePicker()})),this.label.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),t.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),mT(this.label,"aria-expanded"),mT(this.options,"aria-hidden")}buildItem(t){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const i=t.getAttribute("value");return i&&e.setAttribute("data-value",i),t.textContent&&e.setAttribute("data-label",t.textContent),e.addEventListener("click",(()=>{this.selectItem(e,!0)})),e.addEventListener("keydown",(t=>{switch(t.key){case"Enter":this.selectItem(e,!0),t.preventDefault();break;case"Escape":this.escape(),t.preventDefault()}})),e}buildLabel(){const t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}buildOptions(){const t=document.createElement("span");t.classList.add("ql-picker-options"),t.setAttribute("aria-hidden","true"),t.tabIndex="-1",t.id=`ql-picker-options-${gT}`,gT+=1,this.label.setAttribute("aria-controls",t.id),this.options=t,Array.from(this.select.options).forEach((e=>{const i=this.buildItem(e);t.appendChild(i),!0===e.selected&&this.selectItem(i)})),this.container.appendChild(t)}buildPicker(){Array.from(this.select.attributes).forEach((t=>{this.container.setAttribute(t.name,t.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout((()=>this.label.focus()),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this.container.querySelector(".ql-selected");t!==i&&(null!=i&&i.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let t;if(this.select.selectedIndex>-1){const e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);const e=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}}class ColorPicker extends Picker{constructor(t,e){super(t),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach((t=>{t.classList.add("ql-primary")}))}buildItem(t){const e=super.buildItem(t);return e.style.backgroundColor=t.getAttribute("value")||"",e}selectItem(t,e){super.selectItem(t,e);const i=this.label.querySelector(".ql-color-label"),s=t&&t.getAttribute("data-value")||"";i&&("line"===i.tagName?i.style.stroke=s:i.style.fill=s)}}class IconPicker extends Picker{constructor(t,e){super(t),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach((t=>{t.innerHTML=e[t.getAttribute("data-value")||""]})),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(t,e){super.selectItem(t,e);const i=t||this.defaultItem;if(null!=i){if(this.label.innerHTML===i.innerHTML)return;this.label.innerHTML=i.innerHTML}}}class Tooltip{constructor(t,e){this.quill=t,this.boundsContainer=e||document.body,this.root=t.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,(t=>{const{overflowY:e}=getComputedStyle(t,null);return"visible"!==e&&"clip"!==e})(this.quill.root)&&this.quill.root.addEventListener("scroll",(()=>{this.root.style.marginTop=-1*this.quill.root.scrollTop+"px"})),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(t){const e=t.left+t.width/2-this.root.offsetWidth/2,i=t.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${i}px`,this.root.classList.remove("ql-flip");const s=this.boundsContainer.getBoundingClientRect(),n=this.root.getBoundingClientRect();let o=0;if(n.right>s.right&&(o=s.right-n.right,this.root.style.left=`${e+o}px`),n.left<s.left&&(o=s.left-n.left,this.root.style.left=`${e+o}px`),n.bottom>s.bottom){const e=n.bottom-n.top,s=t.bottom-t.top+e;this.root.style.top=i-s+"px",this.root.classList.add("ql-flip")}return o}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const bT=[!1,"center","right","justify"],vT=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],yT=[!1,"serif","monospace"],ET=["1","2","3",!1],_T=["small",!1,"large","huge"];class BaseTheme extends Theme{constructor(t,e){super(t,e);const i=e=>{document.body.contains(t.root)?(null==this.tooltip||this.tooltip.root.contains(e.target)||document.activeElement===this.tooltip.textbox||this.quill.hasFocus()||this.tooltip.hide(),null!=this.pickers&&this.pickers.forEach((t=>{t.container.contains(e.target)||t.close()}))):document.body.removeEventListener("click",i)};t.emitter.listenDOM("click",document.body,i)}addModule(t){const e=super.addModule(t);return"toolbar"===t&&this.extendToolbar(e),e}buildButtons(t,e){Array.from(t).forEach((t=>{(t.getAttribute("class")||"").split(/\s+/).forEach((i=>{if(i.startsWith("ql-")&&(i=i.slice(3),null!=e[i]))if("direction"===i)t.innerHTML=e[i][""]+e[i].rtl;else if("string"==typeof e[i])t.innerHTML=e[i];else{const s=t.value||"";null!=s&&e[i][s]&&(t.innerHTML=e[i][s])}}))}))}buildPickers(t,e){this.pickers=Array.from(t).map((t=>{if(t.classList.contains("ql-align")&&(null==t.querySelector("option")&&xT(t,bT),"object"==typeof e.align))return new IconPicker(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){const i=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&xT(t,vT,"background"===i?"#ffffff":"#000000"),new ColorPicker(t,e[i])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?xT(t,yT):t.classList.contains("ql-header")?xT(t,ET):t.classList.contains("ql-size")&&xT(t,_T)),new Picker(t)}));this.quill.on(Emitter.events.EDITOR_CHANGE,(()=>{this.pickers.forEach((t=>{t.update()}))}))}}BaseTheme.DEFAULTS=I_({},Theme.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let t=this.container.querySelector("input.ql-image[type=file]");null==t&&(t=document.createElement("input"),t.setAttribute("type","file"),t.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),t.classList.add("ql-image"),t.addEventListener("change",(()=>{const e=this.quill.getSelection(!0);this.quill.uploader.upload(e,t.files),t.value=""})),this.container.appendChild(t)),t.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class BaseTooltip extends Tooltip{constructor(t,e){super(t,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",(t=>{"Enter"===t.key?(this.save(),t.preventDefault()):"Escape"===t.key&&(this.cancel(),t.preventDefault())}))}cancel(){this.hide(),this.restoreFocus()}edit(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null==this.textbox)return;null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const i=this.quill.getBounds(this.quill.selection.savedRange);null!=i&&this.position(i),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${t}`)||""),this.root.setAttribute("data-mode",t)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:t}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,Emitter.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,Emitter.sources.USER)),this.quill.root.scrollTop=e;break}case"video":t=function(t){let e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);if(e)return`${e[1]||"https"}://www.youtube.com/embed/${e[2]}?showinfo=0`;if(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))return`${e[1]||"https"}://player.vimeo.com/video/${e[2]}/`;return t}(t);case"formula":{if(!t)break;const e=this.quill.getSelection(!0);if(null!=e){const i=e.index+e.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),t,Emitter.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(i+1," ",Emitter.sources.USER),this.quill.setSelection(i+2,Emitter.sources.USER)}break}}this.textbox.value="",this.hide()}}function xT(t,e){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((e=>{const s=document.createElement("option");e===i?s.setAttribute("selected","selected"):s.setAttribute("value",String(e)),t.appendChild(s)}))}const wT=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class BubbleTooltip extends BaseTooltip{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(t,e){super(t,e),this.quill.on(Emitter.events.EDITOR_CHANGE,((t,e,i,s)=>{if(t===Emitter.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&s===Emitter.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const t=this.quill.getLines(e.index,e.length);if(1===t.length){const t=this.quill.getBounds(e);null!=t&&this.position(t)}else{const i=t[t.length-1],s=this.quill.getIndex(i),n=Math.min(i.length()-1,e.index+e.length-s),o=this.quill.getBounds(new Range(s,n));null!=o&&this.position(o)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()}))}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",(()=>{this.root.classList.remove("ql-editing")})),this.quill.on(Emitter.events.SCROLL_OPTIMIZE,(()=>{setTimeout((()=>{if(this.root.classList.contains("ql-hidden"))return;const t=this.quill.getSelection();if(null!=t){const e=this.quill.getBounds(t);null!=e&&this.position(e)}}),1)}))}cancel(){this.show()}position(t){const e=super.position(t),i=this.root.querySelector(".ql-tooltip-arrow");return i.style.marginLeft="",0!==e&&(i.style.marginLeft=-1*e-i.offsetWidth/2+"px"),e}}class BubbleTheme extends BaseTheme{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=wT),super(t,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(t){this.tooltip=new BubbleTooltip(this.quill,this.options.bounds),null!=t.container&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),fT),this.buildPickers(t.container.querySelectorAll("select"),fT))}}BubbleTheme.DEFAULTS=I_({},BaseTheme.DEFAULTS,{modules:{toolbar:{handlers:{link(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1,Quill.sources.USER)}}}}});const TT=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class SnowTooltip extends BaseTooltip{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",(t=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),t.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(t=>{if(null!=this.linkRange){const t=this.linkRange;this.restoreFocus(),this.quill.formatText(t,"link",!1,Emitter.sources.USER),delete this.linkRange}t.preventDefault(),this.hide()})),this.quill.on(Emitter.events.SELECTION_CHANGE,((t,e,i)=>{if(null!=t){if(0===t.length&&i===Emitter.sources.USER){const[e,i]=this.quill.scroll.descendant(Link,t.index);if(null!=e){this.linkRange=new Range(t.index-i,e.length());const s=Link.formats(e.domNode);this.preview.textContent=s,this.preview.setAttribute("href",s),this.show();const n=this.quill.getBounds(this.linkRange);return void(null!=n&&this.position(n))}}else delete this.linkRange;this.hide()}}))}show(){super.show(),this.root.removeAttribute("data-mode")}}class SnowTheme extends BaseTheme{constructor(t,e){null!=e.modules.toolbar&&null==e.modules.toolbar.container&&(e.modules.toolbar.container=TT),super(t,e),this.quill.container.classList.add("ql-snow")}extendToolbar(t){null!=t.container&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),fT),this.buildPickers(t.container.querySelectorAll("select"),fT),this.tooltip=new SnowTooltip(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},((e,i)=>{t.handlers.link.call(t,!i.format.link)})))}}SnowTheme.DEFAULTS=I_({},BaseTheme.DEFAULTS,{modules:{toolbar:{handlers:{link(t){if(t){const t=this.quill.getSelection();if(null==t||0===t.length)return;let e=this.quill.getText(t);/^\S+@\S+\.\S+$/.test(e)&&0!==e.indexOf("mailto:")&&(e=`mailto:${e}`);const{tooltip:i}=this.quill.theme;i.edit("link",e)}else this.quill.format("link",!1,Quill.sources.USER)}}}}}),Quill.register({"attributors/attribute/direction":yw,"attributors/class/align":uw,"attributors/class/background":mw,"attributors/class/color":fw,"attributors/class/direction":Ew,"attributors/class/font":ww,"attributors/class/size":Aw,"attributors/style/align":pw,"attributors/style/background":bw,"attributors/style/color":gw,"attributors/style/direction":_w,"attributors/style/font":Tw,"attributors/style/size":Sw},!0),Quill.register({"formats/align":uw,"formats/direction":Ew,"formats/indent":oT,"formats/background":bw,"formats/color":gw,"formats/font":ww,"formats/size":Aw,"formats/blockquote":class Blockquote extends Block{static blotName="blockquote";static tagName="blockquote"},"formats/code-block":CodeBlock,"formats/header":class Header extends Block{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(t){return this.tagName.indexOf(t.tagName)+1}},"formats/list":ListItem,"formats/bold":Bold,"formats/code":Code,"formats/italic":class Italic extends Bold{static blotName="italic";static tagName=["EM","I"]},"formats/link":Link,"formats/script":class Script extends Inline{static blotName="script";static tagName=["SUB","SUP"];static create(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):super.create(t)}static formats(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}},"formats/strike":class Strike extends Bold{static blotName="strike";static tagName=["S","STRIKE"]},"formats/underline":class Underline extends Inline{static blotName="underline";static tagName="U"},"formats/formula":class Formula extends Embed{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(t){if(null==window.katex)throw new Error("Formula module requires KaTeX.");const e=super.create(t);return"string"==typeof t&&(window.katex.render(t,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",t)),e}static value(t){return t.getAttribute("data-value")}html(){const{formula:t}=this.value();return`<span>${t}</span>`}},"formats/image":class Image extends K_{static blotName="image";static tagName="IMG";static create(t){const e=super.create(t);return"string"==typeof t&&e.setAttribute("src",this.sanitize(t)),e}static formats(t){return aT.reduce(((e,i)=>(t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e)),{})}static match(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}static sanitize(t){return rT(t,["http","https","data"])?t:"//:0"}static value(t){return t.getAttribute("src")}format(t,e){aT.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}},"formats/video":class Video extends BlockEmbed{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(t){const e=super.create(t);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(t)),e}static formats(t){return lT.reduce(((e,i)=>(t.hasAttribute(i)&&(e[i]=t.getAttribute(i)),e)),{})}static sanitize(t){return Link.sanitize(t)}static value(t){return t.getAttribute("src")}format(t,e){lT.indexOf(t)>-1?e?this.domNode.setAttribute(t,e):this.domNode.removeAttribute(t):super.format(t,e)}html(){const{video:t}=this.value();return`<a href="${t}">${t}</a>`}},"modules/syntax":Syntax,"modules/table":class Table extends Module{static register(){Quill.register(TableCell),Quill.register(TableRow),Quill.register(TableBody),Quill.register(TableContainer)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(TableContainer).forEach((t=>{t.balanceCells()}))}deleteColumn(){const[t,,e]=this.getTable();null!=e&&(t.deleteColumn(e.cellOffset()),this.quill.update(Quill.sources.USER))}deleteRow(){const[,t]=this.getTable();null!=t&&(t.remove(),this.quill.update(Quill.sources.USER))}deleteTable(){const[t]=this.getTable();if(null==t)return;const e=t.offset();t.remove(),this.quill.update(Quill.sources.USER),this.quill.setSelection(e,Quill.sources.SILENT)}getTable(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(null==t)return[null,null,null,-1];const[e,i]=this.quill.getLine(t.index);if(null==e||e.statics.blotName!==TableCell.blotName)return[null,null,null,-1];const s=e.parent;return[s.parent.parent,s,e,i]}insertColumn(t){const e=this.quill.getSelection();if(!e)return;const[i,s,n]=this.getTable(e);if(null==n)return;const o=n.cellOffset();i.insertColumn(o+t),this.quill.update(Quill.sources.USER);let r=s.rowOffset();0===t&&(r+=1),this.quill.setSelection(e.index+r,e.length,Quill.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(t){const e=this.quill.getSelection();if(!e)return;const[i,s,n]=this.getTable(e);if(null==n)return;const o=s.rowOffset();i.insertRow(o+t),this.quill.update(Quill.sources.USER),t>0?this.quill.setSelection(e,Quill.sources.SILENT):this.quill.setSelection(e.index+s.children.length,e.length,Quill.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(t,e){const i=this.quill.getSelection();if(null==i)return;const s=new Array(t).fill(0).reduce((t=>{const i=new Array(e).fill("\n").join("");return t.insert(i,{table:hT()})}),(new Tx).retain(i.index));this.quill.updateContents(s,Quill.sources.USER),this.quill.setSelection(i.index,Quill.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(Quill.events.SCROLL_OPTIMIZE,(t=>{t.some((t=>!!["TD","TR","TBODY","TABLE"].includes(t.target.tagName)&&(this.quill.once(Quill.events.TEXT_CHANGE,((t,e,i)=>{i===Quill.sources.USER&&this.balanceTables()})),!0)))}))}},"modules/toolbar":Toolbar,"themes/bubble":BubbleTheme,"themes/snow":SnowTheme,"ui/icons":fT,"ui/picker":Picker,"ui/icon-picker":IconPicker,"ui/color-picker":ColorPicker,"ui/tooltip":Tooltip},!0),document.addEventListener("DOMContentLoaded",(()=>{document.querySelectorAll("textarea[data-wysiwyg]").forEach((t=>{const e=document.createElement("div");e.classList.add("wysiwyg");const i=document.createElement("div");i.innerHTML=t.value,e.appendChild(i),t.after(e),i.before(t);Quill.import("ui/icons").expand='<i class="ti ti-arrows-maximize"></i><i class="ti ti-arrows-minimize"></i>';const s=new Quill(i,{modules:{toolbar:{container:[[{header:[!1,3,2]}],["bold","italic","underline","strike"],[{align:[]},{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],["link","image","video","blockquote","code"],[{indent:"-1"},{indent:"+1"}],[{script:"sub"},{script:"super"}],["clean"],["expand"]],handlers:{image:()=>handleImage(),expand:()=>function(){const t=e.querySelector(".ql-expand");function i(){e.classList.add("wysiwyg_fullscreen"),t&&t.classList.add("active")}function s(){e.classList.remove("wysiwyg_fullscreen"),t&&t.classList.remove("active")}e.classList.contains("wysiwyg_fullscreen")?s():i()}()}}},placeholder:t.placeholder||"",readOnly:!!t.disabled,theme:"snow"});s.on("editor-change",(()=>{t.value=s.root.innerHTML,t.dispatchEvent(new CustomEvent("change",{bubbles:!0}))})),e.instance=s,t.instance=s}))}));
