/*!
 * FilePond 4.30.4
 * Licensed under MIT, https://opensource.org/licenses/MIT/
 * Please visit https://pqina.nl/filepond/ for details.
 */
!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).FilePond={})}(this,(function(e){"use strict";var n=function(e,n){for(var r in e)e.hasOwnProperty(r)&&n(r,e[r])},r=function(e){var r={};return n(e,(function(n){!function(e,n,r){"function"!=typeof r?Object.defineProperty(e,n,Object.assign({},r)):e[n]=r}(r,n,e[n])})),r},i=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null===r)return e.getAttribute(n)||e.hasAttribute(n);e.setAttribute(n,r)},o=["svg","path"],a=function(e){return o.includes(e)},s=function(e,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"==typeof r&&(o=r,r=null);var s=a(e)?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e);return r&&(a(e)?i(s,"class",r):s.className=r),n(o,(function(e,n){i(s,e,n)})),s},u=function(e,n){return function(e,r){return void 0!==r?n.splice(r,0,e):n.push(e),e}},l=function(e,n){return function(r){return n.splice(n.indexOf(r),1),r.element.parentNode&&e.removeChild(r.element),r}},c="undefined"!=typeof window&&void 0!==window.document,f=function(){return c},d="children"in(f()?s("svg"):{})?function(e){return e.children.length}:function(e){return e.childNodes.length},p=function(e,n,r,i){var o=r[0]||e.left,a=r[1]||e.top,s=o+e.width,u=a+e.height*(i[1]||1),l={element:Object.assign({},e),inner:{left:e.left,top:e.top,right:e.right,bottom:e.bottom},outer:{left:o,top:a,right:s,bottom:u}};return n.filter((function(e){return!e.isRectIgnored()})).map((function(e){return e.rect})).forEach((function(e){E(l.inner,Object.assign({},e.inner)),E(l.outer,Object.assign({},e.outer))})),_(l.inner),l.outer.bottom+=l.element.marginBottom,l.outer.right+=l.element.marginRight,_(l.outer),l},E=function(e,n){n.top+=e.top,n.right+=e.left,n.bottom+=e.top,n.left+=e.left,n.bottom>e.bottom&&(e.bottom=n.bottom),n.right>e.right&&(e.right=n.right)},_=function(e){e.width=e.right-e.left,e.height=e.bottom-e.top},h=function(e){return"number"==typeof e},m=function(e){return e<.5?2*e*e:(4-2*e)*e-1},I={spring:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.stiffness,i=void 0===n?.5:n,o=e.damping,a=void 0===o?.75:o,s=e.mass,u=void 0===s?10:s,l=null,c=null,f=0,d=!1,p=r({interpolate:function(e,n){if(!d){if(!h(l)||!h(c))return d=!0,void(f=0);(function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001;return Math.abs(e-n)<i&&Math.abs(r)<i})(c+=f+=-(c-l)*i/u,l,f*=a)||n?(c=l,f=0,d=!0,p.onupdate(c),p.oncomplete(c)):p.onupdate(c)}},target:{set:function(e){if(h(e)&&!h(c)&&(c=e),null===l&&(l=e,c=e),c===(l=e)||void 0===l)return d=!0,f=0,p.onupdate(c),void p.oncomplete(c);d=!1},get:function(){return l}},resting:{get:function(){return d}},onupdate:function(e){},oncomplete:function(e){}});return p},tween:function(){var e,n,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=i.duration,a=void 0===o?500:o,s=i.easing,u=void 0===s?m:s,l=i.delay,c=void 0===l?0:l,f=null,d=!0,p=!1,E=null,_=r({interpolate:function(r,i){d||null===E||(null===f&&(f=r),r-f<c||((e=r-f-c)>=a||i?(e=1,n=p?0:1,_.onupdate(n*E),_.oncomplete(n*E),d=!0):(n=e/a,_.onupdate((e>=0?u(p?1-n:n):0)*E))))},target:{get:function(){return p?0:E},set:function(e){if(null===E)return E=e,_.onupdate(e),void _.oncomplete(e);e<E?(E=1,p=!0):(p=!1,E=e),d=!1,f=null}},resting:{get:function(){return d}},onupdate:function(e){},oncomplete:function(e){}});return _}},T=function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(n=Array.isArray(n)?n:[n]).forEach((function(n){e.forEach((function(e){var o=e,a=function(){return r[e]},s=function(n){return r[e]=n};"object"==typeof e&&(o=e.key,a=e.getter||a,s=e.setter||s),n[o]&&!i||(n[o]={get:a,set:s})}))}))},v=function(e){return null!=e},g={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},y={styles:function(e){var n=e.mixinConfig,r=e.viewProps,i=e.viewInternalAPI,o=e.viewExternalAPI,a=e.view,s=Object.assign({},r),u={};T(n,[i,o],r);var l=function(){return a.rect?p(a.rect,a.childViews,[r.translateX||0,r.translateY||0],[r.scaleX||0,r.scaleY||0]):null};return i.rect={get:l},o.rect={get:l},n.forEach((function(e){r[e]=void 0===s[e]?g[e]:s[e]})),{write:function(){if(function(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!0;for(var r in n)if(n[r]!==e[r])return!0;return!1}(u,r))return function(e,n){var r=n.opacity,i=n.perspective,o=n.translateX,a=n.translateY,s=n.scaleX,u=n.scaleY,l=n.rotateX,c=n.rotateY,f=n.rotateZ,d=n.originX,p=n.originY,E=n.width,_=n.height,h="",m="";(v(d)||v(p))&&(m+="transform-origin: "+(d||0)+"px "+(p||0)+"px;"),v(i)&&(h+="perspective("+i+"px) "),(v(o)||v(a))&&(h+="translate3d("+(o||0)+"px, "+(a||0)+"px, 0) "),(v(s)||v(u))&&(h+="scale3d("+(v(s)?s:1)+", "+(v(u)?u:1)+", 1) "),v(f)&&(h+="rotateZ("+f+"rad) "),v(l)&&(h+="rotateX("+l+"rad) "),v(c)&&(h+="rotateY("+c+"rad) "),h.length&&(m+="transform:"+h+";"),v(r)&&(m+="opacity:"+r+";",0===r&&(m+="visibility:hidden;"),r<1&&(m+="pointer-events:none;")),v(_)&&(m+="height:"+_+"px;"),v(E)&&(m+="width:"+E+"px;");var I=e.elementCurrentStyle||"";m.length===I.length&&m===I||(e.style.cssText=m,e.elementCurrentStyle=m)}(a.element,r),Object.assign(u,Object.assign({},r)),!0},destroy:function(){}}},listeners:function(e){e.mixinConfig,e.viewProps,e.viewInternalAPI;var n,r=e.viewExternalAPI,i=(e.viewState,e.view),o=[],a=(n=i.element,function(e,r){n.addEventListener(e,r)}),s=function(e){return function(n,r){e.removeEventListener(n,r)}}(i.element);return r.on=function(e,n){o.push({type:e,fn:n}),a(e,n)},r.off=function(e,n){o.splice(o.findIndex((function(r){return r.type===e&&r.fn===n})),1),s(e,n)},{write:function(){return!0},destroy:function(){o.forEach((function(e){s(e.type,e.fn)}))}}},animations:function(e){var r=e.mixinConfig,i=e.viewProps,o=e.viewInternalAPI,a=e.viewExternalAPI,s=Object.assign({},i),u=[];return n(r,(function(e,n){var r=function(e,n,r){var i=e[n]&&"object"==typeof e[n][r]?e[n][r]:e[n]||e,o="string"==typeof i?i:i.type,a="object"==typeof i?Object.assign({},i):{};return I[o]?I[o](a):null}(n);r&&(r.onupdate=function(n){i[e]=n},r.target=s[e],T([{key:e,setter:function(e){r.target!==e&&(r.target=e)},getter:function(){return i[e]}}],[o,a],i,!0),u.push(r))})),{write:function(e){var n=document.hidden,r=!0;return u.forEach((function(i){i.resting||(r=!1),i.interpolate(e,n)})),r},destroy:function(){}}},apis:function(e){var n=e.mixinConfig,r=e.viewProps,i=e.viewExternalAPI;T(n,i,r)}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.layoutCalculated||(e.paddingTop=parseInt(r.paddingTop,10)||0,e.marginTop=parseInt(r.marginTop,10)||0,e.marginRight=parseInt(r.marginRight,10)||0,e.marginBottom=parseInt(r.marginBottom,10)||0,e.marginLeft=parseInt(r.marginLeft,10)||0,n.layoutCalculated=!0),e.left=n.offsetLeft||0,e.top=n.offsetTop||0,e.width=n.offsetWidth||0,e.height=n.offsetHeight||0,e.right=e.left+e.width,e.bottom=e.top+e.height,e.scrollTop=n.scrollTop,e.hidden=null===n.offsetParent,e},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.tag,i=void 0===n?"div":n,o=e.name,a=void 0===o?null:o,c=e.attributes,f=void 0===c?{}:c,E=e.read,_=void 0===E?function(){}:E,h=e.write,m=void 0===h?function(){}:h,I=e.create,T=void 0===I?function(){}:I,v=e.destroy,g=void 0===v?function(){}:v,O=e.filterFrameActionsForChild,A=void 0===O?function(e,n){return n}:O,D=e.didCreateView,S=void 0===D?function(){}:D,w=e.didWriteView,L=void 0===w?function(){}:w,P=e.ignoreRect,M=void 0!==P&&P,b=e.ignoreRectUpdate,C=void 0!==b&&b,N=e.mixins,G=void 0===N?[]:N;return function(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=s(i,"filepond--"+a,f),E=window.getComputedStyle(c,null),h=R(),I=null,v=!1,O=[],D=[],w={},P={},b=[m],N=[_],x=[g],F=function(){return c},V=function(){return O.concat()},U=function(){return I||(I=p(h,O,[0,0],[1,1]))},B={element:{get:F},style:{get:function(){return E}},childViews:{get:V}},q=Object.assign({},B,{rect:{get:U},ref:{get:function(){return w}},is:function(e){return a===e},appendChild:(n=c,function(e,r){void 0!==r&&n.children[r]?n.insertBefore(e,n.children[r]):n.appendChild(e)}),createChildView:function(e){return function(n,r){return n(e,r)}}(e),linkView:function(e){return O.push(e),e},unlinkView:function(e){O.splice(O.indexOf(e),1)},appendChildView:u(0,O),removeChildView:l(c,O),registerWriter:function(e){return b.push(e)},registerReader:function(e){return N.push(e)},registerDestroyer:function(e){return x.push(e)},invalidateLayout:function(){return c.layoutCalculated=!1},dispatch:e.dispatch,query:e.query}),k={element:{get:F},childViews:{get:V},rect:{get:U},resting:{get:function(){return v}},isRectIgnored:function(){return M},_read:function(){I=null,O.forEach((function(e){return e._read()})),!(C&&h.width&&h.height)&&R(h,c,E);var e={root:W,props:o,rect:h};N.forEach((function(n){return n(e)}))},_write:function(e,n,r){var i=0===n.length;return b.forEach((function(a){!1===a({props:o,root:W,actions:n,timestamp:e,shouldOptimize:r})&&(i=!1)})),D.forEach((function(n){!1===n.write(e)&&(i=!1)})),O.filter((function(e){return!!e.element.parentNode})).forEach((function(o){o._write(e,A(o,n),r)||(i=!1)})),O.forEach((function(o,a){o.element.parentNode||(W.appendChild(o.element,a),o._read(),o._write(e,A(o,n),r),i=!1)})),v=i,L({props:o,root:W,actions:n,timestamp:e}),i},_destroy:function(){D.forEach((function(e){return e.destroy()})),x.forEach((function(e){e({root:W,props:o})})),O.forEach((function(e){return e._destroy()}))}},Y=Object.assign({},B,{rect:{get:function(){return h}}});Object.keys(G).sort((function(e,n){return"styles"===e?1:"styles"===n?-1:0})).forEach((function(e){var n=y[e]({mixinConfig:G[e],viewProps:o,viewState:P,viewInternalAPI:q,viewExternalAPI:k,view:r(Y)});n&&D.push(n)}));var W=r(q);T({root:W,props:o});var H=d(c);return O.forEach((function(e,n){W.appendChild(e.element,H+n)})),S(W),r(k)}},A=function(e,n){return function(r){var i=r.root,o=r.props,a=r.actions,s=void 0===a?[]:a,u=r.timestamp,l=r.shouldOptimize;s.filter((function(n){return e[n.type]})).forEach((function(n){return e[n.type]({root:i,props:o,action:n.data,timestamp:u,shouldOptimize:l})})),n&&n({root:i,props:o,actions:s,timestamp:u,shouldOptimize:l})}},D=function(e,n){return n.parentNode.insertBefore(e,n)},S=function(e,n){return n.parentNode.insertBefore(e,n.nextSibling)},w=function(e){return Array.isArray(e)},L=function(e){return null==e},P=function(e){return e.trim()},M=function(e){return""+e},b=function(e){return"boolean"==typeof e},C=function(e){return b(e)?e:"true"===e},N=function(e){return"string"==typeof e},G=function(e){return h(e)?e:N(e)?M(e).replace(/[a-z]+/gi,""):0},x=function(e){return parseInt(G(e),10)},F=function(e){return parseFloat(G(e))},V=function(e){return h(e)&&isFinite(e)&&Math.floor(e)===e},U=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(V(e))return e;var r=M(e).trim();return/MB$/i.test(r)?(r=r.replace(/MB$i/,"").trim(),x(r)*n*n):/KB/i.test(r)?(r=r.replace(/KB$i/,"").trim(),x(r)*n):x(r)},B=function(e){return"function"==typeof e},q={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},k=function(e){return"object"==typeof e&&null!==e},Y=function(e){return w(e)?"array":function(e){return null===e}(e)?"null":V(e)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(e)?"bytes":function(e){return k(e)&&N(e.url)&&k(e.process)&&k(e.revert)&&k(e.restore)&&k(e.fetch)}(e)?"api":typeof e},W={array:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return L(e)?[]:w(e)?e:M(e).split(n).map(P).filter((function(e){return e.length}))},boolean:C,int:function(e){return"bytes"===Y(e)?U(e):x(e)},number:F,float:F,bytes:U,string:function(e){return B(e)?e:M(e)},function:function(e){return function(e){for(var n=self,r=e.split("."),i=null;i=r.shift();)if(!(n=n[i]))return null;return n}(e)},serverapi:function(e){return(i={}).url=N(r=e)?r:r.url||"",i.timeout=r.timeout?parseInt(r.timeout,10):0,i.headers=r.headers?r.headers:{},n(q,(function(e){i[e]=function(e,n,r,i,o){if(null===n)return null;if("function"==typeof n)return n;var a={url:"GET"===r||"PATCH"===r?"?"+e+"=":"",method:r,headers:o,withCredentials:!1,timeout:i,onload:null,ondata:null,onerror:null};if(N(n))return a.url=n,a;if(Object.assign(a,n),N(a.headers)){var s=a.headers.split(/:(.+)/);a.headers={header:s[0],value:s[1]}}return a.withCredentials=C(a.withCredentials),a}(e,r[e],q[e],i.timeout,i.headers)})),i.process=r.process||N(r)||r.url?i.process:null,i.remove=r.remove||null,delete i.headers,i;var r,i},object:function(e){try{return JSON.parse(e.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'))}catch(e){return null}}},H=function(e,n,r){if(e===n)return e;var i,o=Y(e);if(o!==r){var a=(i=e,W[r](i));if(o=Y(a),null===a)throw'Trying to assign value with incorrect type to "'+option+'", allowed type: "'+r+'"';e=a}return e},z=function(e){var i={};return n(e,(function(n){var r,o,a,s=e[n];i[n]=(r=s[0],o=s[1],a=r,{enumerable:!0,get:function(){return a},set:function(e){a=H(e,r,o)}})})),r(i)},j=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.split(/(?=[A-Z])/).map((function(e){return e.toLowerCase()})).join(n)},X=function(e){return function(r,i,o){var a={};return n(e,(function(e){var n=j(e,"_").toUpperCase();a["SET_"+n]=function(i){try{o.options[e]=i.value}catch(e){}r("DID_SET_"+n,{value:o.options[e]})}})),a}},Z=function(e){return function(r){var i={};return n(e,(function(e){i["GET_"+j(e,"_").toUpperCase()]=function(n){return r.options[e]}})),i}},Q=function(){return Math.random().toString(36).substring(2,11)};function K(e){this.wrapped=e}function $(e){var n,r;function i(n,r){try{var a=e[n](r),s=a.value,u=s instanceof K;Promise.resolve(u?s.wrapped:s).then((function(e){u?i("next",e):o(a.done?"return":"normal",e)}),(function(e){i("throw",e)}))}catch(e){o("throw",e)}}function o(e,o){switch(e){case"return":n.resolve({value:o,done:!0});break;case"throw":n.reject(o);break;default:n.resolve({value:o,done:!1})}(n=n.next)?i(n.key,n.arg):r=null}this._invoke=function(e,o){return new Promise((function(a,s){var u={key:e,arg:o,resolve:a,reject:s,next:null};r?r=r.next=u:(n=r=u,i(e,o))}))},"function"!=typeof e.return&&(this.return=void 0)}function J(e,n){if(null==e)return{};var r,i,o=function(e,n){if(null==e)return{};var r,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)r=a[i],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function ee(e){return function(e){if(Array.isArray(e)){for(var n=0,r=new Array(e.length);n<e.length;n++)r[n]=e[n];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}"function"==typeof Symbol&&Symbol.asyncIterator&&($.prototype[Symbol.asyncIterator]=function(){return this}),$.prototype.next=function(e){return this._invoke("next",e)},$.prototype.throw=function(e){return this._invoke("throw",e)},$.prototype.return=function(e){return this._invoke("return",e)};var te,ne,re=function(e,n){return e.splice(n,1)},ie=function(){var e=[],n=function(n,r){re(e,e.findIndex((function(e){return e.event===n&&(e.cb===r||!r)})))},r=function(n,r,i){e.filter((function(e){return e.event===n})).map((function(e){return e.cb})).forEach((function(e){return function(e,n){n?e():document.hidden?Promise.resolve(1).then(e):setTimeout(e,0)}((function(){return e.apply(void 0,ee(r))}),i)}))};return{fireSync:function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];r(e,i,!0)},fire:function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];r(e,i,!1)},on:function(n,r){e.push({event:n,cb:r})},onOnce:function(r,i){e.push({event:r,cb:function(){n(r,i),i.apply(void 0,arguments)}})},off:n}},oe=function(e,n,r){Object.getOwnPropertyNames(e).filter((function(e){return!r.includes(e)})).forEach((function(r){return Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(e,r))}))},ae=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],se=function(e){var n={};return oe(e,n,ae),n},ue={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},le={INPUT:1,LIMBO:2,LOCAL:3},ce=function(e){return/[^0-9]+/.exec(e)},fe=function(){return ce(1.1.toLocaleString())[0]},de={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},pe=[],Ee=function(e,n,r){return new Promise((function(i,o){var a=pe.filter((function(n){return n.key===e})).map((function(e){return e.cb}));if(0!==a.length){var s=a.shift();a.reduce((function(e,n){return e.then((function(e){return n(e,r)}))}),s(n,r)).then((function(e){return i(e)})).catch((function(e){return o(e)}))}else i(n)}))},_e=function(e,n,r){return pe.filter((function(n){return n.key===e})).map((function(e){return e.cb(n,r)}))},he=function(e,n){return pe.push({key:e,cb:n})},me=function(){return Object.assign({},Ie)},Ie={id:[null,de.STRING],name:["filepond",de.STRING],disabled:[!1,de.BOOLEAN],className:[null,de.STRING],required:[!1,de.BOOLEAN],captureMethod:[null,de.STRING],allowSyncAcceptAttribute:[!0,de.BOOLEAN],allowDrop:[!0,de.BOOLEAN],allowBrowse:[!0,de.BOOLEAN],allowPaste:[!0,de.BOOLEAN],allowMultiple:[!1,de.BOOLEAN],allowReplace:[!0,de.BOOLEAN],allowRevert:[!0,de.BOOLEAN],allowRemove:[!0,de.BOOLEAN],allowProcess:[!0,de.BOOLEAN],allowReorder:[!1,de.BOOLEAN],allowDirectoriesOnly:[!1,de.BOOLEAN],storeAsFile:[!1,de.BOOLEAN],forceRevert:[!1,de.BOOLEAN],maxFiles:[null,de.INT],checkValidity:[!1,de.BOOLEAN],itemInsertLocationFreedom:[!0,de.BOOLEAN],itemInsertLocation:["before",de.STRING],itemInsertInterval:[75,de.INT],dropOnPage:[!1,de.BOOLEAN],dropOnElement:[!0,de.BOOLEAN],dropValidation:[!1,de.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],de.ARRAY],instantUpload:[!0,de.BOOLEAN],maxParallelUploads:[2,de.INT],allowMinimumUploadDuration:[!0,de.BOOLEAN],chunkUploads:[!1,de.BOOLEAN],chunkForce:[!1,de.BOOLEAN],chunkSize:[5e6,de.INT],chunkRetryDelays:[[500,1e3,3e3],de.ARRAY],server:[null,de.SERVER_API],fileSizeBase:[1e3,de.INT],labelFileSizeBytes:["bytes",de.STRING],labelFileSizeKilobytes:["KB",de.STRING],labelFileSizeMegabytes:["MB",de.STRING],labelFileSizeGigabytes:["GB",de.STRING],labelDecimalSeparator:[fe(),de.STRING],labelThousandsSeparator:[(te=fe(),ne=1e3.toLocaleString(),ne!==1e3.toString()?ce(ne)[0]:"."===te?",":"."),de.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',de.STRING],labelInvalidField:["Field contains invalid files",de.STRING],labelFileWaitingForSize:["Waiting for size",de.STRING],labelFileSizeNotAvailable:["Size not available",de.STRING],labelFileCountSingular:["file in list",de.STRING],labelFileCountPlural:["files in list",de.STRING],labelFileLoading:["Loading",de.STRING],labelFileAdded:["Added",de.STRING],labelFileLoadError:["Error during load",de.STRING],labelFileRemoved:["Removed",de.STRING],labelFileRemoveError:["Error during remove",de.STRING],labelFileProcessing:["Uploading",de.STRING],labelFileProcessingComplete:["Upload complete",de.STRING],labelFileProcessingAborted:["Upload cancelled",de.STRING],labelFileProcessingError:["Error during upload",de.STRING],labelFileProcessingRevertError:["Error during revert",de.STRING],labelTapToCancel:["tap to cancel",de.STRING],labelTapToRetry:["tap to retry",de.STRING],labelTapToUndo:["tap to undo",de.STRING],labelButtonRemoveItem:["Remove",de.STRING],labelButtonAbortItemLoad:["Abort",de.STRING],labelButtonRetryItemLoad:["Retry",de.STRING],labelButtonAbortItemProcessing:["Cancel",de.STRING],labelButtonUndoItemProcessing:["Undo",de.STRING],labelButtonRetryItemProcessing:["Retry",de.STRING],labelButtonProcessItem:["Upload",de.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',de.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',de.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',de.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',de.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',de.STRING],oninit:[null,de.FUNCTION],onwarning:[null,de.FUNCTION],onerror:[null,de.FUNCTION],onactivatefile:[null,de.FUNCTION],oninitfile:[null,de.FUNCTION],onaddfilestart:[null,de.FUNCTION],onaddfileprogress:[null,de.FUNCTION],onaddfile:[null,de.FUNCTION],onprocessfilestart:[null,de.FUNCTION],onprocessfileprogress:[null,de.FUNCTION],onprocessfileabort:[null,de.FUNCTION],onprocessfilerevert:[null,de.FUNCTION],onprocessfile:[null,de.FUNCTION],onprocessfiles:[null,de.FUNCTION],onremovefile:[null,de.FUNCTION],onpreparefile:[null,de.FUNCTION],onupdatefiles:[null,de.FUNCTION],onreorderfiles:[null,de.FUNCTION],beforeDropFile:[null,de.FUNCTION],beforeAddFile:[null,de.FUNCTION],beforeRemoveFile:[null,de.FUNCTION],beforePrepareFile:[null,de.FUNCTION],stylePanelLayout:[null,de.STRING],stylePanelAspectRatio:[null,de.STRING],styleItemPanelAspectRatio:[null,de.STRING],styleButtonRemoveItemPosition:["left",de.STRING],styleButtonProcessItemPosition:["right",de.STRING],styleLoadIndicatorPosition:["right",de.STRING],styleProgressIndicatorPosition:["right",de.STRING],styleButtonRemoveItemAlign:[!1,de.BOOLEAN],files:[[],de.ARRAY],credits:[["https://pqina.nl/","Powered by PQINA"],de.ARRAY]},Te=function(e,n){return L(n)?e[0]||null:V(n)?e[n]||null:("object"==typeof n&&(n=n.id),e.find((function(e){return e.id===n}))||null)},ve=function(e){if(L(e))return e;if(/:/.test(e)){var n=e.split(":");return n[1]/n[0]}return parseFloat(e)},ge=function(e){return e.filter((function(e){return!e.archived}))},ye={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4},Re=null,Oe=[ue.LOAD_ERROR,ue.PROCESSING_ERROR,ue.PROCESSING_REVERT_ERROR],Ae=[ue.LOADING,ue.PROCESSING,ue.PROCESSING_QUEUED,ue.INIT],De=[ue.PROCESSING_COMPLETE],Se=function(e){return Oe.includes(e.status)},we=function(e){return Ae.includes(e.status)},Le=function(e){return De.includes(e.status)},Pe=function(e){return k(e.options.server)&&(k(e.options.server.process)||B(e.options.server.process))},Me=function(e){return{GET_STATUS:function(){var n=ge(e.items),r=ye.EMPTY,i=ye.ERROR,o=ye.BUSY,a=ye.IDLE,s=ye.READY;return 0===n.length?r:n.some(Se)?i:n.some(we)?o:n.some(Le)?s:a},GET_ITEM:function(n){return Te(e.items,n)},GET_ACTIVE_ITEM:function(n){return Te(ge(e.items),n)},GET_ACTIVE_ITEMS:function(){return ge(e.items)},GET_ITEMS:function(){return e.items},GET_ITEM_NAME:function(n){var r=Te(e.items,n);return r?r.filename:null},GET_ITEM_SIZE:function(n){var r=Te(e.items,n);return r?r.fileSize:null},GET_STYLES:function(){return Object.keys(e.options).filter((function(e){return/^style/.test(e)})).map((function(n){return{name:n,value:e.options[n]}}))},GET_PANEL_ASPECT_RATIO:function(){return/circle/.test(e.options.stylePanelLayout)?1:ve(e.options.stylePanelAspectRatio)},GET_ITEM_PANEL_ASPECT_RATIO:function(){return e.options.styleItemPanelAspectRatio},GET_ITEMS_BY_STATUS:function(n){return ge(e.items).filter((function(e){return e.status===n}))},GET_TOTAL_ITEMS:function(){return ge(e.items).length},SHOULD_UPDATE_FILE_INPUT:function(){return e.options.storeAsFile&&function(){if(null===Re)try{var e=new DataTransfer;e.items.add(new File(["hello world"],"This_Works.txt"));var n=document.createElement("input");n.setAttribute("type","file"),n.files=e.files,Re=1===n.files.length}catch(e){Re=!1}return Re}()&&!Pe(e)},IS_ASYNC:function(){return Pe(e)},GET_FILE_SIZE_LABELS:function(e){return{labelBytes:e("GET_LABEL_FILE_SIZE_BYTES")||void 0,labelKilobytes:e("GET_LABEL_FILE_SIZE_KILOBYTES")||void 0,labelMegabytes:e("GET_LABEL_FILE_SIZE_MEGABYTES")||void 0,labelGigabytes:e("GET_LABEL_FILE_SIZE_GIGABYTES")||void 0}}}},be=function(e,n,r){return Math.max(Math.min(r,e),n)},Ce=function(e){return/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(e)},Ne=function(e){return e.split("/").pop().split("?").shift()},Ge=function(e){return e.split(".").pop()},xe=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(n+e).slice(-n.length)},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return e.getFullYear()+"-"+xe(e.getMonth()+1,"00")+"-"+xe(e.getDate(),"00")+"_"+xe(e.getHours(),"00")+"-"+xe(e.getMinutes(),"00")+"-"+xe(e.getSeconds(),"00")},Ve=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o="string"==typeof r?e.slice(0,e.size,r):e.slice(0,e.size,e.type);return o.lastModifiedDate=new Date,e._relativePath&&(o._relativePath=e._relativePath),N(n)||(n=Fe()),n&&null===i&&Ge(n)?o.name=n:(i=i||function(e){if("string"!=typeof e)return"";var n=e.split("/").pop();return/svg/.test(n)?"svg":/zip|compressed/.test(n)?"zip":/plain/.test(n)?"txt":/msword/.test(n)?"doc":/[a-z]+/.test(n)?"jpeg"===n?"jpg":n:""}(o.type),o.name=n+(i?"."+i:"")),o},Ue=function(e,n){var r=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(r){var i=new r;return i.append(e),i.getBlob(n)}return new Blob([e],{type:n})},Be=function(e){return(/^data:(.+);/.exec(e)||[])[1]||null},qe=function(e){if(!/^content-disposition:/i.test(e))return null;var n=e.split(/filename=|filename\*=.+''/).splice(1).map((function(e){return e.trim().replace(/^["']|[;"']{0,2}$/g,"")})).filter((function(e){return e.length}));return n.length?decodeURI(n[n.length-1]):null},ke=function(e){if(/content-length:/i.test(e)){var n=e.match(/[0-9]+/)[0];return n?parseInt(n,10):null}return null},Ye=function(e){return/x-content-transfer-id:/i.test(e)&&(e.split(":")[1]||"").trim()||null},We=function(e){var n={source:null,name:null,size:null},r=e.split("\n"),i=!0,o=!1,a=void 0;try{for(var s,u=r[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var l=s.value,c=qe(l);if(c)n.name=c;else{var f=ke(l);if(f)n.size=f;else{var d=Ye(l);d&&(n.source=d)}}}}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return n},He=function(e){var n={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},r=function(r){e?(n.timestamp=Date.now(),n.request=e(r,(function(e){n.duration=Date.now()-n.timestamp,n.complete=!0,e instanceof Blob&&(e=Ve(e,e.name||Ne(r))),i.fire("load",e instanceof Blob?e:e?e.body:null)}),(function(e){i.fire("error","string"==typeof e?{type:"error",code:0,body:e}:e)}),(function(e,r,o){o&&(n.size=o),n.duration=Date.now()-n.timestamp,e?(n.progress=r/o,i.fire("progress",n.progress)):n.progress=null}),(function(){i.fire("abort")}),(function(e){var r=We("string"==typeof e?e:e.headers);i.fire("meta",{size:n.size||r.size,filename:r.name,source:r.source})}))):i.fire("error",{type:"error",body:"Can't load URL",code:400})},i=Object.assign({},ie(),{setSource:function(e){return n.source=e},getProgress:function(){return n.progress},abort:function(){n.request&&n.request.abort&&n.request.abort()},load:function(){var e=n.source;i.fire("init",e),e instanceof File?i.fire("load",e):e instanceof Blob?i.fire("load",Ve(e,e.name)):Ce(e)?i.fire("load",Ve(function(e){var n=Be(e);return function(e,n){for(var r=new ArrayBuffer(e.length),i=new Uint8Array(r),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);return Ue(r,n)}(function(e){return atob(function(e){return e.split(",")[1].replace(/\s/g,"")}(e))}(e),n)}(e),undefined,null,undefined)):r(e)}});return i},ze=function(e){return/GET|HEAD/.test(e)},je=function(e,n,r){var i={onheaders:function(){},onprogress:function(){},onload:function(){},ontimeout:function(){},onerror:function(){},onabort:function(){},abort:function(){o=!0,s.abort()}},o=!1,a=!1;r=Object.assign({method:"POST",headers:{},withCredentials:!1},r),n=encodeURI(n),ze(r.method)&&e&&(n=""+n+encodeURIComponent("string"==typeof e?e:JSON.stringify(e)));var s=new XMLHttpRequest;return(ze(r.method)?s:s.upload).onprogress=function(e){o||i.onprogress(e.lengthComputable,e.loaded,e.total)},s.onreadystatechange=function(){s.readyState<2||4===s.readyState&&0===s.status||a||(a=!0,i.onheaders(s))},s.onload=function(){s.status>=200&&s.status<300?i.onload(s):i.onerror(s)},s.onerror=function(){return i.onerror(s)},s.onabort=function(){o=!0,i.onabort()},s.ontimeout=function(){return i.ontimeout(s)},s.open(r.method,n,!0),V(r.timeout)&&(s.timeout=r.timeout),Object.keys(r.headers).forEach((function(e){var n=unescape(encodeURIComponent(r.headers[e]));s.setRequestHeader(e,n)})),r.responseType&&(s.responseType=r.responseType),r.withCredentials&&(s.withCredentials=!0),s.send(e),i},Xe=function(e,n,r,i){return{type:e,code:n,body:r,headers:i}},Ze=function(e){return function(n){e(Xe("error",0,"Timeout",n.getAllResponseHeaders()))}},Qe=function(e){return/\?/.test(e)},Ke=function(){for(var e="",n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return r.forEach((function(n){e+=Qe(e)&&Qe(n)?n.replace(/\?/,"&"):n})),e},$e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;if("function"==typeof n)return n;if(!n||!N(n.url))return null;var r=n.onload||function(e){return e},i=n.onerror||function(e){return null};return function(o,a,s,u,l,c){var f=je(o,Ke(e,n.url),Object.assign({},n,{responseType:"blob"}));return f.onload=function(e){var i=e.getAllResponseHeaders(),s=We(i).name||Ne(o);a(Xe("load",e.status,"HEAD"===n.method?null:Ve(r(e.response),s),i))},f.onerror=function(e){s(Xe("error",e.status,i(e.response)||e.statusText,e.getAllResponseHeaders()))},f.onheaders=function(e){c(Xe("headers",e.status,null,e.getAllResponseHeaders()))},f.ontimeout=Ze(s),f.onprogress=u,f.onabort=l,f}},Je=function(e,n,r,i,o,a,s,u,l,c,f){for(var d=[],p=f.chunkTransferId,E=f.chunkServer,_=f.chunkSize,h=f.chunkRetryDelays,m={serverId:p,aborted:!1},I=n.ondata||function(e){return e},T=n.onload||function(e,n){return"HEAD"===n?e.getResponseHeader("Upload-Offset"):e.response},v=n.onerror||function(e){return null},g=Math.floor(i.size/_),y=0;y<=g;y++){var R=y*_,O=i.slice(R,R+_,"application/offset+octet-stream");d[y]={index:y,size:O.size,offset:R,data:O,file:i,progress:0,retries:ee(h),status:0,error:null,request:null,timeout:null}}var A,D,S,w,L=function(e){return 0===e.status||3===e.status},P=function(n){if(!m.aborted)if(n=n||d.find(L)){n.status=2,n.progress=null;var r=E.ondata||function(e){return e},o=E.onerror||function(e){return null},u=Ke(e,E.url,m.serverId),c="function"==typeof E.headers?E.headers(n):Object.assign({},E.headers,{"Content-Type":"application/offset+octet-stream","Upload-Offset":n.offset,"Upload-Length":i.size,"Upload-Name":i.name}),f=n.request=je(r(n.data),u,Object.assign({},E,{headers:c}));f.onload=function(){n.status=1,n.request=null,C()},f.onprogress=function(e,r,i){n.progress=e?r:null,b()},f.onerror=function(e){n.status=3,n.request=null,n.error=o(e.response)||e.statusText,M(n)||s(Xe("error",e.status,o(e.response)||e.statusText,e.getAllResponseHeaders()))},f.ontimeout=function(e){n.status=3,n.request=null,M(n)||Ze(s)(e)},f.onabort=function(){n.status=0,n.request=null,l()}}else d.every((function(e){return 1===e.status}))&&a(m.serverId)},M=function(e){return 0!==e.retries.length&&(e.status=4,clearTimeout(e.timeout),e.timeout=setTimeout((function(){P(e)}),e.retries.shift()),!0)},b=function(){var e=d.reduce((function(e,n){return null===e||null===n.progress?null:e+n.progress}),0);if(null===e)return u(!1,0,0);var n=d.reduce((function(e,n){return e+n.size}),0);u(!0,e,n)},C=function(){d.filter((function(e){return 2===e.status})).length>=1||P()};return m.serverId?(A=function(e){m.aborted||(d.filter((function(n){return n.offset<e})).forEach((function(e){e.status=1,e.progress=e.size})),C())},D=Ke(e,E.url,m.serverId),S={headers:"function"==typeof n.headers?n.headers(m.serverId):Object.assign({},n.headers),method:"HEAD"},(w=je(null,D,S)).onload=function(e){return A(T(e,S.method))},w.onerror=function(e){return s(Xe("error",e.status,v(e.response)||e.statusText,e.getAllResponseHeaders()))},w.ontimeout=Ze(s)):function(a){var u=new FormData;k(o)&&u.append(r,JSON.stringify(o));var l="function"==typeof n.headers?n.headers(i,o):Object.assign({},n.headers,{"Upload-Length":i.size}),c=Object.assign({},n,{headers:l}),f=je(I(u),Ke(e,n.url),c);f.onload=function(e){return a(T(e,c.method))},f.onerror=function(e){return s(Xe("error",e.status,v(e.response)||e.statusText,e.getAllResponseHeaders()))},f.ontimeout=Ze(s)}((function(e){m.aborted||(c(e),m.serverId=e,C())})),{abort:function(){m.aborted=!0,d.forEach((function(e){clearTimeout(e.timeout),e.request&&e.request.abort()}))}}},et=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;if("function"==typeof n)return n;if(!n||!N(n.url))return function(e,n){return n()};var r=n.onload||function(e){return e},i=n.onerror||function(e){return null};return function(o,a,s){var u=je(o,e+n.url,n);return u.onload=function(e){a(Xe("load",e.status,r(e.response),e.getAllResponseHeaders()))},u.onerror=function(e){s(Xe("error",e.status,i(e.response)||e.statusText,e.getAllResponseHeaders()))},u.ontimeout=Ze(s),u}},tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e+Math.random()*(n-e)},nt=function(e){return e.substring(0,e.lastIndexOf("."))||e},rt=function(e){return!!(e instanceof File||e instanceof Blob&&e.name)},it=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=Q(),a={archived:!1,frozen:!1,released:!1,source:null,file:i,serverFileReference:n,transferId:null,processingAborted:!1,status:n?ue.PROCESSING_COMPLETE:ue.INIT,activeLoader:null,activeProcessor:null},s=null,u={},l=function(e){return a.status=e},c=function(e){if(!a.released&&!a.frozen){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];d.fire.apply(d,[e].concat(r))}},f=function(e,n,r){var i=e.split("."),o=i[0],a=i.pop(),s=u;i.forEach((function(e){return s=s[e]})),JSON.stringify(s[a])!==JSON.stringify(n)&&(s[a]=n,c("metadata-update",{key:o,value:u[o],silent:r}))},d=Object.assign({id:{get:function(){return o}},origin:{get:function(){return e},set:function(n){return e=n}},serverId:{get:function(){return a.serverFileReference}},transferId:{get:function(){return a.transferId}},status:{get:function(){return a.status}},filename:{get:function(){return a.file.name}},filenameWithoutExtension:{get:function(){return nt(a.file.name)}},fileExtension:{get:function(){return Ge(a.file.name)}},fileType:{get:function(){return a.file.type}},fileSize:{get:function(){return a.file.size}},file:{get:function(){return a.file}},relativePath:{get:function(){return a.file._relativePath}},source:{get:function(){return a.source}},getMetadata:function(e){return function e(n){if(!k(n))return n;var r=w(n)?[]:{};for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];r[i]=o&&k(o)?e(o):o}return r}(e?u[e]:u)},setMetadata:function(e,n,r){if(k(e)){var i=e;return Object.keys(i).forEach((function(e){f(e,i[e],n)})),e}return f(e,n,r),n},extend:function(e,n){return p[e]=n},abortLoad:function(){a.activeLoader?a.activeLoader.abort():(l(ue.INIT),c("load-abort"))},retryLoad:function(){a.activeLoader&&a.activeLoader.load()},requestProcessing:function(){a.processingAborted=!1,l(ue.PROCESSING_QUEUED)},abortProcessing:function(){return new Promise((function(e){if(!a.activeProcessor)return a.processingAborted=!0,l(ue.IDLE),c("process-abort"),void e();s=function(){e()},a.activeProcessor.abort()}))},load:function(n,r,i){a.source=n,d.fireSync("init"),a.file?d.fireSync("load-skip"):(a.file=function(e){var n=[e.name,e.size,e.type];return e instanceof Blob||Ce(e)?n[0]=e.name||Fe():Ce(e)?(n[1]=e.length,n[2]=Be(e)):N(e)&&(n[0]=Ne(e),n[1]=0,n[2]="application/octet-stream"),{name:n[0],size:n[1],type:n[2]}}(n),r.on("init",(function(){c("load-init")})),r.on("meta",(function(n){a.file.size=n.size,a.file.filename=n.filename,n.source&&(e=le.LIMBO,a.serverFileReference=n.source,a.status=ue.PROCESSING_COMPLETE),c("load-meta")})),r.on("progress",(function(e){l(ue.LOADING),c("load-progress",e)})),r.on("error",(function(e){l(ue.LOAD_ERROR),c("load-request-error",e)})),r.on("abort",(function(){l(ue.INIT),c("load-abort")})),r.on("load",(function(n){a.activeLoader=null;var r=function(n){a.file=rt(n)?n:a.file,e===le.LIMBO&&a.serverFileReference?l(ue.PROCESSING_COMPLETE):l(ue.IDLE),c("load")};a.serverFileReference?r(n):i(n,r,(function(e){a.file=n,c("load-meta"),l(ue.LOAD_ERROR),c("load-file-error",e)}))})),r.setSource(n),a.activeLoader=r,r.load())},process:function e(n,r){if(a.processingAborted)a.processingAborted=!1;else if(l(ue.PROCESSING),s=null,a.file instanceof Blob){n.on("load",(function(e){a.transferId=null,a.serverFileReference=e})),n.on("transfer",(function(e){a.transferId=e})),n.on("load-perceived",(function(e){a.activeProcessor=null,a.transferId=null,a.serverFileReference=e,l(ue.PROCESSING_COMPLETE),c("process-complete",e)})),n.on("start",(function(){c("process-start")})),n.on("error",(function(e){a.activeProcessor=null,l(ue.PROCESSING_ERROR),c("process-error",e)})),n.on("abort",(function(e){a.activeProcessor=null,a.serverFileReference=e,l(ue.IDLE),c("process-abort"),s&&s()})),n.on("progress",(function(e){c("process-progress",e)}));var i=console.error;r(a.file,(function(e){a.archived||n.process(e,Object.assign({},u))}),i),a.activeProcessor=n}else d.on("load",(function(){e(n,r)}))},revert:function(e,n){return new Promise((function(r,i){var o=null!==a.serverFileReference?a.serverFileReference:a.transferId;null!==o?(e(o,(function(){a.serverFileReference=null,a.transferId=null,r()}),(function(e){n?(l(ue.PROCESSING_REVERT_ERROR),c("process-revert-error"),i(e)):r()})),l(ue.IDLE),c("process-revert")):r()}))}},ie(),{freeze:function(){return a.frozen=!0},release:function(){return a.released=!0},released:{get:function(){return a.released}},archive:function(){return a.archived=!0},archived:{get:function(){return a.archived}}}),p=r(d);return p},ot=function(e,n){var r=function(e,n){return L(n)?0:N(n)?e.findIndex((function(e){return e.id===n})):-1}(e,n);if(!(r<0))return e[r]||null},at=function(e,n,r,i,o,a){var s=je(null,e,{method:"GET",responseType:"blob"});return s.onload=function(r){var i=r.getAllResponseHeaders(),o=We(i).name||Ne(e);n(Xe("load",r.status,Ve(r.response,o),i))},s.onerror=function(e){r(Xe("error",e.status,e.statusText,e.getAllResponseHeaders()))},s.onheaders=function(e){a(Xe("headers",e.status,null,e.getAllResponseHeaders()))},s.ontimeout=Ze(r),s.onprogress=i,s.onabort=o,s},st=function(e){return 0===e.indexOf("//")&&(e=location.protocol+e),e.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]},ut=function(e){return function(){return B(e)?e.apply(void 0,arguments):e}},lt=function(e,n){clearTimeout(n.listUpdateTimeout),n.listUpdateTimeout=setTimeout((function(){e("DID_UPDATE_ITEMS",{items:ge(n.items)})}),0)},ct=function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new Promise((function(n){if(!e)return n(!0);var i=e.apply(void 0,r);return null==i?n(!0):"boolean"==typeof i?n(i):void("function"==typeof i.then&&i.then(n))}))},ft=function(e,n){e.items.sort((function(e,r){return n(se(e),se(r))}))},dt=function(e,n){return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.query,o=r.success,a=void 0===o?function(){}:o,s=r.failure,u=void 0===s?function(){}:s,l=J(r,["query","success","failure"]),c=Te(e.items,i);c?n(c,a,u,l||{}):u({error:Xe("error",0,"Item not found"),file:null})}},pt=function(e,n,r){return{ABORT_ALL:function(){ge(r.items).forEach((function(e){e.freeze(),e.abortLoad(),e.abortProcessing()}))},DID_SET_FILES:function(n){var i=n.value,o=(void 0===i?[]:i).map((function(e){return{source:e.source?e.source:e,options:e.options}})),a=ge(r.items);a.forEach((function(n){o.find((function(e){return e.source===n.source||e.source===n.file}))||e("REMOVE_ITEM",{query:n,remove:!1})})),a=ge(r.items),o.forEach((function(n,r){a.find((function(e){return e.source===n.source||e.file===n.source}))||e("ADD_ITEM",Object.assign({},n,{interactionMethod:5,index:r}))}))},DID_UPDATE_ITEM_METADATA:function(i){var o=i.id,a=i.action,s=i.change;s.silent||(clearTimeout(r.itemUpdateTimeout),r.itemUpdateTimeout=setTimeout((function(){var i=ot(r.items,o);if(n("IS_ASYNC")){i.origin===le.LOCAL&&e("DID_LOAD_ITEM",{id:i.id,error:null,serverFileReference:i.source});var u,l=function(){setTimeout((function(){e("REQUEST_ITEM_PROCESSING",{query:o})}),32)};return i.status===ue.PROCESSING_COMPLETE?(u=r.options.instantUpload,void i.revert(et(r.options.server.url,r.options.server.revert),n("GET_FORCE_REVERT")).then(u?l:function(){}).catch((function(){}))):i.status===ue.PROCESSING?function(e){i.abortProcessing().then(e?l:function(){})}(r.options.instantUpload):void(r.options.instantUpload&&l())}Ee("SHOULD_PREPARE_OUTPUT",!1,{item:i,query:n,action:a,change:s}).then((function(r){var a=n("GET_BEFORE_PREPARE_FILE");a&&(r=a(i,r)),r&&e("REQUEST_PREPARE_OUTPUT",{query:o,item:i,success:function(n){e("DID_PREPARE_OUTPUT",{id:o,file:n})}},!0)}))}),0))},MOVE_ITEM:function(e){var n=e.query,i=e.index,o=Te(r.items,n);if(o){var a=r.items.indexOf(o);a!==(i=be(i,0,r.items.length-1))&&r.items.splice(i,0,r.items.splice(a,1)[0])}},SORT:function(i){var o=i.compare;ft(r,o),e("DID_SORT_ITEMS",{items:n("GET_ACTIVE_ITEMS")})},ADD_ITEMS:function(r){var i=r.items,o=r.index,a=r.interactionMethod,s=r.success,u=void 0===s?function(){}:s,l=r.failure,c=void 0===l?function(){}:l,f=o;if(-1===o||void 0===o){var d=n("GET_ITEM_INSERT_LOCATION"),p=n("GET_TOTAL_ITEMS");f="before"===d?0:p}var E=n("GET_IGNORED_FILES"),_=i.filter((function(e){return rt(e)?!E.includes(e.name.toLowerCase()):!L(e)})).map((function(n){return new Promise((function(r,i){e("ADD_ITEM",{interactionMethod:a,source:n.source||n,success:r,failure:i,index:f++,options:n.options||{}})}))}));Promise.all(_).then(u).catch(c)},ADD_ITEM:function(i){var o=i.source,a=i.index,s=void 0===a?-1:a,u=i.interactionMethod,l=i.success,c=void 0===l?function(){}:l,f=i.failure,d=void 0===f?function(){}:f,p=i.options,E=void 0===p?{}:p;if(L(o))d({error:Xe("error",0,"No source"),file:null});else if(!rt(o)||!r.options.ignoredFiles.includes(o.name.toLowerCase())){if(!function(e){var n=ge(e.items).length;if(!e.options.allowMultiple)return 0===n;var r=e.options.maxFiles;return null===r||n<r}(r)){if(r.options.allowMultiple||!r.options.allowMultiple&&!r.options.allowReplace){var _=Xe("warning",0,"Max files");return e("DID_THROW_MAX_FILES",{source:o,error:_}),void d({error:_,file:null})}var h=ge(r.items)[0];if(h.status===ue.PROCESSING_COMPLETE||h.status===ue.PROCESSING_REVERT_ERROR){var m=n("GET_FORCE_REVERT");if(h.revert(et(r.options.server.url,r.options.server.revert),m).then((function(){m&&e("ADD_ITEM",{source:o,index:s,interactionMethod:u,success:c,failure:d,options:E})})).catch((function(){})),m)return}e("REMOVE_ITEM",{query:h.id})}var I="local"===E.type?le.LOCAL:"limbo"===E.type?le.LIMBO:le.INPUT,T=it(I,I===le.INPUT?null:o,E.file);Object.keys(E.metadata||{}).forEach((function(e){T.setMetadata(e,E.metadata[e])})),_e("DID_CREATE_ITEM",T,{query:n,dispatch:e});var v=n("GET_ITEM_INSERT_LOCATION");r.options.itemInsertLocationFreedom||(s="before"===v?-1:r.items.length),function(e,n,r){L(n)||(void 0===r?e.push(n):function(e,n,r){e.splice(n,0,r)}(e,r=be(r,0,e.length),n))}(r.items,T,s),B(v)&&o&&ft(r,v);var g=T.id;T.on("init",(function(){e("DID_INIT_ITEM",{id:g})})),T.on("load-init",(function(){e("DID_START_ITEM_LOAD",{id:g})})),T.on("load-meta",(function(){e("DID_UPDATE_ITEM_META",{id:g})})),T.on("load-progress",(function(n){e("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:g,progress:n})})),T.on("load-request-error",(function(n){var i=ut(r.options.labelFileLoadError)(n);if(n.code>=400&&n.code<500)return e("DID_THROW_ITEM_INVALID",{id:g,error:n,status:{main:i,sub:n.code+" ("+n.body+")"}}),void d({error:n,file:se(T)});e("DID_THROW_ITEM_LOAD_ERROR",{id:g,error:n,status:{main:i,sub:r.options.labelTapToRetry}})})),T.on("load-file-error",(function(n){e("DID_THROW_ITEM_INVALID",{id:g,error:n.status,status:n.status}),d({error:n.status,file:se(T)})})),T.on("load-abort",(function(){e("REMOVE_ITEM",{query:g})})),T.on("load-skip",(function(){e("COMPLETE_LOAD_ITEM",{query:g,item:T,data:{source:o,success:c}})})),T.on("load",(function(){var i=function(i){i?(T.on("metadata-update",(function(n){e("DID_UPDATE_ITEM_METADATA",{id:g,change:n})})),Ee("SHOULD_PREPARE_OUTPUT",!1,{item:T,query:n}).then((function(i){var a=n("GET_BEFORE_PREPARE_FILE");a&&(i=a(T,i));var s=function(){e("COMPLETE_LOAD_ITEM",{query:g,item:T,data:{source:o,success:c}}),lt(e,r)};i?e("REQUEST_PREPARE_OUTPUT",{query:g,item:T,success:function(n){e("DID_PREPARE_OUTPUT",{id:g,file:n}),s()}},!0):s()}))):e("REMOVE_ITEM",{query:g})};Ee("DID_LOAD_ITEM",T,{query:n,dispatch:e}).then((function(){ct(n("GET_BEFORE_ADD_FILE"),se(T)).then(i)})).catch((function(n){if(!n||!n.error||!n.status)return i(!1);e("DID_THROW_ITEM_INVALID",{id:g,error:n.error,status:n.status})}))})),T.on("process-start",(function(){e("DID_START_ITEM_PROCESSING",{id:g})})),T.on("process-progress",(function(n){e("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:g,progress:n})})),T.on("process-error",(function(n){e("DID_THROW_ITEM_PROCESSING_ERROR",{id:g,error:n,status:{main:ut(r.options.labelFileProcessingError)(n),sub:r.options.labelTapToRetry}})})),T.on("process-revert-error",(function(n){e("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:g,error:n,status:{main:ut(r.options.labelFileProcessingRevertError)(n),sub:r.options.labelTapToRetry}})})),T.on("process-complete",(function(n){e("DID_COMPLETE_ITEM_PROCESSING",{id:g,error:null,serverFileReference:n}),e("DID_DEFINE_VALUE",{id:g,value:n})})),T.on("process-abort",(function(){e("DID_ABORT_ITEM_PROCESSING",{id:g})})),T.on("process-revert",(function(){e("DID_REVERT_ITEM_PROCESSING",{id:g}),e("DID_DEFINE_VALUE",{id:g,value:null})})),e("DID_ADD_ITEM",{id:g,index:s,interactionMethod:u}),lt(e,r);var y=r.options.server||{},R=y.url,O=y.load,A=y.restore,D=y.fetch;T.load(o,He(I===le.INPUT?N(o)&&function(e){return(e.indexOf(":")>-1||e.indexOf("//")>-1)&&st(location.href)!==st(e)}(o)&&D?$e(R,D):at:$e(R,I===le.LIMBO?A:O)),(function(e,r,i){Ee("LOAD_FILE",e,{query:n}).then(r).catch(i)}))}},REQUEST_PREPARE_OUTPUT:function(e){var r=e.item,i=e.success,o=e.failure,a=void 0===o?function(){}:o,s={error:Xe("error",0,"Item not found"),file:null};if(r.archived)return a(s);Ee("PREPARE_OUTPUT",r.file,{query:n,item:r}).then((function(e){Ee("COMPLETE_PREPARE_OUTPUT",e,{query:n,item:r}).then((function(e){if(r.archived)return a(s);i(e)}))}))},COMPLETE_LOAD_ITEM:function(i){var o=i.item,a=i.data,s=a.success,u=a.source,l=n("GET_ITEM_INSERT_LOCATION");if(B(l)&&u&&ft(r,l),e("DID_LOAD_ITEM",{id:o.id,error:null,serverFileReference:o.origin===le.INPUT?null:u}),s(se(o)),o.origin!==le.LOCAL)return o.origin===le.LIMBO?(e("DID_COMPLETE_ITEM_PROCESSING",{id:o.id,error:null,serverFileReference:u}),void e("DID_DEFINE_VALUE",{id:o.id,value:o.serverId||u})):void(n("IS_ASYNC")&&r.options.instantUpload&&e("REQUEST_ITEM_PROCESSING",{query:o.id}));e("DID_LOAD_LOCAL_ITEM",{id:o.id})},RETRY_ITEM_LOAD:dt(r,(function(e){e.retryLoad()})),REQUEST_ITEM_PREPARE:dt(r,(function(n,r,i){e("REQUEST_PREPARE_OUTPUT",{query:n.id,item:n,success:function(i){e("DID_PREPARE_OUTPUT",{id:n.id,file:i}),r({file:n,output:i})},failure:i},!0)})),REQUEST_ITEM_PROCESSING:dt(r,(function(i,o,a){if(i.status===ue.IDLE||i.status===ue.PROCESSING_ERROR)i.status!==ue.PROCESSING_QUEUED&&(i.requestProcessing(),e("DID_REQUEST_ITEM_PROCESSING",{id:i.id}),e("PROCESS_ITEM",{query:i,success:o,failure:a},!0));else{var s=function(){return e("REQUEST_ITEM_PROCESSING",{query:i,success:o,failure:a})},u=function(){return document.hidden?s():setTimeout(s,32)};i.status===ue.PROCESSING_COMPLETE||i.status===ue.PROCESSING_REVERT_ERROR?i.revert(et(r.options.server.url,r.options.server.revert),n("GET_FORCE_REVERT")).then(u).catch((function(){})):i.status===ue.PROCESSING&&i.abortProcessing().then(u)}})),PROCESS_ITEM:dt(r,(function(i,o,a){var s=n("GET_MAX_PARALLEL_UPLOADS");if(n("GET_ITEMS_BY_STATUS",ue.PROCESSING).length!==s){if(i.status!==ue.PROCESSING){var u=function n(){var i=r.processingQueue.shift();if(i){var o=i.id,a=i.success,s=i.failure,u=Te(r.items,o);u&&!u.archived?e("PROCESS_ITEM",{query:o,success:a,failure:s},!0):n()}};i.onOnce("process-complete",(function(){o(se(i)),u();var a=r.options.server;if(r.options.instantUpload&&i.origin===le.LOCAL&&B(a.remove)){var s=function(){};i.origin=le.LIMBO,r.options.server.remove(i.source,s,s)}n("GET_ITEMS_BY_STATUS",ue.PROCESSING_COMPLETE).length===r.items.length&&e("DID_COMPLETE_ITEM_PROCESSING_ALL")})),i.onOnce("process-error",(function(e){a({error:e,file:se(i)}),u()}));var l=r.options;i.process(function(e,n){var r={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},i=n.allowMinimumUploadDuration,o=function(){r.request&&(r.perceivedPerformanceUpdater.clear(),r.request.abort&&r.request.abort(),r.complete=!0)},a=i?function(){return r.progress?Math.min(r.progress,r.perceivedProgress):null}:function(){return r.progress||null},s=i?function(){return Math.min(r.duration,r.perceivedDuration)}:function(){return r.duration},u=Object.assign({},ie(),{process:function(n,o){var a=function(){0!==r.duration&&null!==r.progress&&u.fire("progress",u.getProgress())},s=function(){r.complete=!0,u.fire("load-perceived",r.response.body)};u.fire("start"),r.timestamp=Date.now(),r.perceivedPerformanceUpdater=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:25,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,o=null,a=Date.now();return n>0&&function s(){var u=Date.now()-a,l=tt(r,i);u+l>n&&(l=u+l-n);var c=u/n;c>=1||document.hidden?e(1):(e(c),o=setTimeout(s,l))}(),{clear:function(){clearTimeout(o)}}}((function(e){r.perceivedProgress=e,r.perceivedDuration=Date.now()-r.timestamp,a(),r.response&&1===r.perceivedProgress&&!r.complete&&s()}),i?tt(750,1500):0),r.request=e(n,o,(function(e){r.response=k(e)?e:{type:"load",code:200,body:""+e,headers:{}},r.duration=Date.now()-r.timestamp,r.progress=1,u.fire("load",r.response.body),(!i||i&&1===r.perceivedProgress)&&s()}),(function(e){r.perceivedPerformanceUpdater.clear(),u.fire("error",k(e)?e:{type:"error",code:0,body:""+e})}),(function(e,n,i){r.duration=Date.now()-r.timestamp,r.progress=e?n/i:null,a()}),(function(){r.perceivedPerformanceUpdater.clear(),u.fire("abort",r.response?r.response.body:null)}),(function(e){u.fire("transfer",e)}))},abort:o,getProgress:a,getDuration:s,reset:function(){o(),r.complete=!1,r.perceivedProgress=0,r.progress=0,r.timestamp=null,r.perceivedDuration=0,r.duration=0,r.request=null,r.response=null}});return u}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;return"function"==typeof n?function(){for(var e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return n.apply(void 0,[r].concat(o,[i]))}:n&&N(n.url)?function(e,n,r,i){return function(o,a,s,u,l,c,f){if(o){var d=i.chunkUploads,p=d&&o.size>i.chunkSize,E=d&&(p||i.chunkForce);if(o instanceof Blob&&E)return Je(e,n,r,o,a,s,u,l,c,f,i);var _=n.ondata||function(e){return e},h=n.onload||function(e){return e},m=n.onerror||function(e){return null},I="function"==typeof n.headers?n.headers(o,a)||{}:Object.assign({},n.headers),T=Object.assign({},n,{headers:I}),v=new FormData;k(a)&&v.append(r,JSON.stringify(a)),(o instanceof Blob?[{name:null,file:o}]:o).forEach((function(e){v.append(r,e.file,null===e.name?e.file.name:""+e.name+e.file.name)}));var g=je(_(v),Ke(e,n.url),T);return g.onload=function(e){s(Xe("load",e.status,h(e.response),e.getAllResponseHeaders()))},g.onerror=function(e){u(Xe("error",e.status,m(e.response)||e.statusText,e.getAllResponseHeaders()))},g.ontimeout=Ze(u),g.onprogress=l,g.onabort=c,g}}}(e,n,r,i):null}(l.server.url,l.server.process,l.name,{chunkTransferId:i.transferId,chunkServer:l.server.patch,chunkUploads:l.chunkUploads,chunkForce:l.chunkForce,chunkSize:l.chunkSize,chunkRetryDelays:l.chunkRetryDelays}),{allowMinimumUploadDuration:n("GET_ALLOW_MINIMUM_UPLOAD_DURATION")}),(function(r,o,a){Ee("PREPARE_OUTPUT",r,{query:n,item:i}).then((function(n){e("DID_PREPARE_OUTPUT",{id:i.id,file:n}),o(n)})).catch(a)}))}}else r.processingQueue.push({id:i.id,success:o,failure:a})})),RETRY_ITEM_PROCESSING:dt(r,(function(n){e("REQUEST_ITEM_PROCESSING",{query:n})})),REQUEST_REMOVE_ITEM:dt(r,(function(r){ct(n("GET_BEFORE_REMOVE_FILE"),se(r)).then((function(n){n&&e("REMOVE_ITEM",{query:r})}))})),RELEASE_ITEM:dt(r,(function(e){e.release()})),REMOVE_ITEM:dt(r,(function(i,o,a,s){var u=function(){var n=i.id;ot(r.items,n).archive(),e("DID_REMOVE_ITEM",{error:null,id:n,item:i}),lt(e,r),o(se(i))},l=r.options.server;i.origin===le.LOCAL&&l&&B(l.remove)&&!1!==s.remove?(e("DID_START_ITEM_REMOVE",{id:i.id}),l.remove(i.source,(function(){return u()}),(function(n){e("DID_THROW_ITEM_REMOVE_ERROR",{id:i.id,error:Xe("error",0,n,null),status:{main:ut(r.options.labelFileRemoveError)(n),sub:r.options.labelTapToRetry}})}))):((s.revert&&i.origin!==le.LOCAL&&null!==i.serverId||r.options.chunkUploads&&i.file.size>r.options.chunkSize||r.options.chunkUploads&&r.options.chunkForce)&&i.revert(et(r.options.server.url,r.options.server.revert),n("GET_FORCE_REVERT")),u())})),ABORT_ITEM_LOAD:dt(r,(function(e){e.abortLoad()})),ABORT_ITEM_PROCESSING:dt(r,(function(n){n.serverId?e("REVERT_ITEM_PROCESSING",{id:n.id}):n.abortProcessing().then((function(){r.options.instantUpload&&e("REMOVE_ITEM",{query:n.id})}))})),REQUEST_REVERT_ITEM_PROCESSING:dt(r,(function(i){if(r.options.instantUpload){var o=function(n){n&&e("REVERT_ITEM_PROCESSING",{query:i})},a=n("GET_BEFORE_REMOVE_FILE");if(!a)return o(!0);var s=a(se(i));return null==s?o(!0):"boolean"==typeof s?o(s):void("function"==typeof s.then&&s.then(o))}e("REVERT_ITEM_PROCESSING",{query:i})})),REVERT_ITEM_PROCESSING:dt(r,(function(i){i.revert(et(r.options.server.url,r.options.server.revert),n("GET_FORCE_REVERT")).then((function(){(r.options.instantUpload||function(e){return!rt(e.file)}(i))&&e("REMOVE_ITEM",{query:i.id})})).catch((function(){}))})),SET_OPTIONS:function(n){var r=n.options,i=Object.keys(r),o=Et.filter((function(e){return i.includes(e)}));[].concat(ee(o),ee(Object.keys(r).filter((function(e){return!o.includes(e)})))).forEach((function(n){e("SET_"+j(n,"_").toUpperCase(),{value:r[n]})}))}}},Et=["server"],_t=function(e){return document.createElement(e)},ht=function(e,n){var r=e.childNodes[0];r?n!==r.nodeValue&&(r.nodeValue=n):(r=document.createTextNode(n),e.appendChild(r))},mt=function(e,n,r,i){var o=(i%360-90)*Math.PI/180;return{x:e+r*Math.cos(o),y:n+r*Math.sin(o)}},It=O({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:function(e){var n=e.root,r=e.props;r.spin=!1,r.progress=0,r.opacity=0;var i=s("svg");n.ref.path=s("path",{"stroke-width":2,"stroke-linecap":"round"}),i.appendChild(n.ref.path),n.ref.svg=i,n.appendChild(i)},write:function(e){var n=e.root,r=e.props;if(0!==r.opacity){r.align&&(n.element.dataset.align=r.align);var o=parseInt(i(n.ref.path,"stroke-width"),10),a=.5*n.rect.element.width,s=0,u=0;r.spin?(s=0,u=.5):(s=0,u=r.progress);var l=function(e,n,r,i,o){var a=1;return o>i&&o-i<=.5&&(a=0),i>o&&i-o>=.5&&(a=0),function(e,n,r,i,o,a){var s=mt(e,n,r,o),u=mt(e,n,r,i);return["M",s.x,s.y,"A",r,r,0,a,0,u.x,u.y].join(" ")}(e,n,r,360*Math.min(.9999,i),360*Math.min(.9999,o),a)}(a,a,a-o,s,u);i(n.ref.path,"d",l),i(n.ref.path,"stroke-opacity",r.spin||r.progress>0?1:0)}},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Tt=O({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:function(e){var n=e.root,r=e.props;n.element.innerHTML=(r.icon||"")+"<span>"+r.label+"</span>",r.isDisabled=!1},write:function(e){var n=e.root,r=e.props,o=r.isDisabled,a=n.query("GET_DISABLED")||0===r.opacity;a&&!o?(r.isDisabled=!0,i(n.element,"disabled","disabled")):!a&&o&&(r.isDisabled=!1,n.element.removeAttribute("disabled"))}}),vt=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=i.labelBytes,a=void 0===o?"bytes":o,s=i.labelKilobytes,u=void 0===s?"KB":s,l=i.labelMegabytes,c=void 0===l?"MB":l,f=i.labelGigabytes,d=void 0===f?"GB":f,p=r,E=r*r,_=r*r*r;return(e=Math.round(Math.abs(e)))<p?e+" "+a:e<E?Math.floor(e/p)+" "+u:e<_?gt(e/E,1,n)+" "+c:gt(e/_,2,n)+" "+d},gt=function(e,n,r){return e.toFixed(n).split(".").filter((function(e){return"0"!==e})).join(r)},yt=function(e){var n=e.root,r=e.props;ht(n.ref.fileSize,vt(n.query("GET_ITEM_SIZE",r.id),".",n.query("GET_FILE_SIZE_BASE"),n.query("GET_FILE_SIZE_LABELS",n.query))),ht(n.ref.fileName,n.query("GET_ITEM_NAME",r.id))},Rt=function(e){var n=e.root,r=e.props;V(n.query("GET_ITEM_SIZE",r.id))?yt({root:n,props:r}):ht(n.ref.fileSize,n.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},Ot=O({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:A({DID_LOAD_ITEM:yt,DID_UPDATE_ITEM_META:yt,DID_THROW_ITEM_LOAD_ERROR:Rt,DID_THROW_ITEM_INVALID:Rt}),didCreateView:function(e){_e("CREATE_VIEW",Object.assign({},e,{view:e}))},create:function(e){var n=e.root,r=e.props,o=_t("span");o.className="filepond--file-info-main",i(o,"aria-hidden","true"),n.appendChild(o),n.ref.fileName=o;var a=_t("span");a.className="filepond--file-info-sub",n.appendChild(a),n.ref.fileSize=a,ht(a,n.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),ht(o,n.query("GET_ITEM_NAME",r.id))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),At=function(e){return Math.round(100*e)},Dt=function(e){var n=e.root,r=e.action,i=null===r.progress?n.query("GET_LABEL_FILE_LOADING"):n.query("GET_LABEL_FILE_LOADING")+" "+At(r.progress)+"%";ht(n.ref.main,i),ht(n.ref.sub,n.query("GET_LABEL_TAP_TO_CANCEL"))},St=function(e){var n=e.root;ht(n.ref.main,""),ht(n.ref.sub,"")},wt=function(e){var n=e.root,r=e.action;ht(n.ref.main,r.status.main),ht(n.ref.sub,r.status.sub)},Lt=O({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:A({DID_LOAD_ITEM:St,DID_REVERT_ITEM_PROCESSING:St,DID_REQUEST_ITEM_PROCESSING:function(e){var n=e.root;ht(n.ref.main,n.query("GET_LABEL_FILE_PROCESSING")),ht(n.ref.sub,n.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:function(e){var n=e.root;ht(n.ref.main,n.query("GET_LABEL_FILE_PROCESSING_ABORTED")),ht(n.ref.sub,n.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:function(e){var n=e.root;ht(n.ref.main,n.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),ht(n.ref.sub,n.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(e){var n=e.root,r=e.action,i=null===r.progress?n.query("GET_LABEL_FILE_PROCESSING"):n.query("GET_LABEL_FILE_PROCESSING")+" "+At(r.progress)+"%";ht(n.ref.main,i),ht(n.ref.sub,n.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:Dt,DID_THROW_ITEM_LOAD_ERROR:wt,DID_THROW_ITEM_INVALID:wt,DID_THROW_ITEM_PROCESSING_ERROR:wt,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:wt,DID_THROW_ITEM_REMOVE_ERROR:wt}),didCreateView:function(e){_e("CREATE_VIEW",Object.assign({},e,{view:e}))},create:function(e){var n=e.root,r=_t("span");r.className="filepond--file-status-main",n.appendChild(r),n.ref.main=r;var i=_t("span");i.className="filepond--file-status-sub",n.appendChild(i),n.ref.sub=i,Dt({root:n,action:{progress:null}})},mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Pt={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Mt=[];n(Pt,(function(e){Mt.push(e)}));var bt,Ct=function(e){if("right"===Ft(e))return 0;var n=e.ref.buttonRemoveItem.rect.element;return n.hidden?null:n.width+n.left},Nt=function(e){return e.ref.buttonAbortItemLoad.rect.element.width},Gt=function(e){return Math.floor(e.ref.buttonRemoveItem.rect.element.height/4)},xt=function(e){return Math.floor(e.ref.buttonRemoveItem.rect.element.left/2)},Ft=function(e){return e.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION")},Vt={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:function(e){return e.query("GET_STYLE_LOAD_INDICATOR_POSITION")}},processProgressIndicator:{opacity:0,align:function(e){return e.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},Ut={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Ct},status:{translateX:Ct}},Bt={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},qt={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:Ct},status:{translateX:Ct,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:Ct},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:Ft},info:{translateX:Ct},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:Ft},buttonRemoveItem:{opacity:1},info:{translateX:Ct},status:{opacity:1,translateX:Ct}},DID_LOAD_ITEM:Ut,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:Ct},status:{translateX:Ct}},DID_START_ITEM_PROCESSING:Bt,DID_REQUEST_ITEM_PROCESSING:Bt,DID_UPDATE_ITEM_PROCESS_PROGRESS:Bt,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:Ct}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Ct},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:Ut},kt=O({create:function(e){var n=e.root;n.element.innerHTML=n.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),Yt=A({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:function(e){var n=e.root,r=e.action;n.ref.buttonAbortItemProcessing.label=r.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:function(e){var n=e.root,r=e.action;n.ref.buttonAbortItemLoad.label=r.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:function(e){var n=e.root,r=e.action;n.ref.buttonAbortItemRemoval.label=r.value},DID_REQUEST_ITEM_PROCESSING:function(e){var n=e.root;n.ref.processProgressIndicator.spin=!0,n.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:function(e){var n=e.root;n.ref.loadProgressIndicator.spin=!0,n.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:function(e){var n=e.root;n.ref.processProgressIndicator.spin=!0,n.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:function(e){var n=e.root,r=e.action;n.ref.loadProgressIndicator.spin=!1,n.ref.loadProgressIndicator.progress=r.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(e){var n=e.root,r=e.action;n.ref.processProgressIndicator.spin=!1,n.ref.processProgressIndicator.progress=r.progress}}),Wt=O({create:function(e){var r,i=e.root,o=e.props,a=Object.keys(Pt).reduce((function(e,n){return e[n]=Object.assign({},Pt[n]),e}),{}),s=o.id,u=i.query("GET_ALLOW_REVERT"),l=i.query("GET_ALLOW_REMOVE"),c=i.query("GET_ALLOW_PROCESS"),f=i.query("GET_INSTANT_UPLOAD"),d=i.query("IS_ASYNC"),p=i.query("GET_STYLE_BUTTON_REMOVE_ITEM_ALIGN");d?c&&!u?r=function(e){return!/RevertItemProcessing/.test(e)}:!c&&u?r=function(e){return!/ProcessItem|RetryItemProcessing|AbortItemProcessing/.test(e)}:c||u||(r=function(e){return!/Process/.test(e)}):r=function(e){return!/Process/.test(e)};var E=r?Mt.filter(r):Mt.concat();if(f&&u&&(a.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",a.RevertItemProcessing.icon="GET_ICON_REMOVE"),d&&!u){var _=qt.DID_COMPLETE_ITEM_PROCESSING;_.info.translateX=xt,_.info.translateY=Gt,_.status.translateY=Gt,_.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}if(d&&!c&&(["DID_START_ITEM_PROCESSING","DID_REQUEST_ITEM_PROCESSING","DID_UPDATE_ITEM_PROCESS_PROGRESS","DID_THROW_ITEM_PROCESSING_ERROR"].forEach((function(e){qt[e].status.translateY=Gt})),qt.DID_THROW_ITEM_PROCESSING_ERROR.status.translateX=Nt),p&&u){a.RevertItemProcessing.align="BUTTON_REMOVE_ITEM_POSITION";var h=qt.DID_COMPLETE_ITEM_PROCESSING;h.info.translateX=Ct,h.status.translateY=Gt,h.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}l||(a.RemoveItem.disabled=!0),n(a,(function(e,n){var r=i.createChildView(Tt,{label:i.query(n.label),icon:i.query(n.icon),opacity:0});E.includes(e)&&i.appendChildView(r),n.disabled&&(r.element.setAttribute("disabled","disabled"),r.element.setAttribute("hidden","hidden")),r.element.dataset.align=i.query("GET_STYLE_"+n.align),r.element.classList.add(n.className),r.on("click",(function(e){e.stopPropagation(),n.disabled||i.dispatch(n.action,{query:s})})),i.ref["button"+e]=r})),i.ref.processingCompleteIndicator=i.appendChildView(i.createChildView(kt)),i.ref.processingCompleteIndicator.element.dataset.align=i.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION"),i.ref.info=i.appendChildView(i.createChildView(Ot,{id:s})),i.ref.status=i.appendChildView(i.createChildView(Lt,{id:s}));var m=i.appendChildView(i.createChildView(It,{opacity:0,align:i.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));m.element.classList.add("filepond--load-indicator"),i.ref.loadProgressIndicator=m;var I=i.appendChildView(i.createChildView(It,{opacity:0,align:i.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));I.element.classList.add("filepond--process-indicator"),i.ref.processProgressIndicator=I,i.ref.activeStyles=[]},write:function(e){var r=e.root,i=e.actions,o=e.props;Yt({root:r,actions:i,props:o});var a=i.concat().filter((function(e){return/^DID_/.test(e.type)})).reverse().find((function(e){return qt[e.type]}));if(a){r.ref.activeStyles=[];var s=qt[a.type];n(Vt,(function(e,i){var o=r.ref[e];n(i,(function(n,i){var a=s[e]&&void 0!==s[e][n]?s[e][n]:i;r.ref.activeStyles.push({control:o,key:n,value:a})}))}))}r.ref.activeStyles.forEach((function(e){var n=e.control,i=e.key,o=e.value;n[i]="function"==typeof o?o(r):o}))},didCreateView:function(e){_e("CREATE_VIEW",Object.assign({},e,{view:e}))},name:"file"}),Ht=O({create:function(e){var n=e.root,r=e.props;n.ref.fileName=_t("legend"),n.appendChild(n.ref.fileName),n.ref.file=n.appendChildView(n.createChildView(Wt,{id:r.id})),n.ref.data=!1},ignoreRect:!0,write:A({DID_LOAD_ITEM:function(e){var n=e.root,r=e.props;ht(n.ref.fileName,n.query("GET_ITEM_NAME",r.id))}}),didCreateView:function(e){_e("CREATE_VIEW",Object.assign({},e,{view:e}))},tag:"fieldset",name:"file-wrapper"}),zt={type:"spring",damping:.6,mass:7},jt=O({name:"panel",read:function(e){var n=e.root;return e.props.heightCurrent=n.ref.bottom.translateY},write:function(e){var n=e.root,r=e.props;if(null!==n.ref.scalable&&r.scalable===n.ref.scalable||(n.ref.scalable=!b(r.scalable)||r.scalable,n.element.dataset.scalable=n.ref.scalable),r.height){var i=n.ref.top.rect.element,o=n.ref.bottom.rect.element,a=Math.max(i.height+o.height,r.height);n.ref.center.translateY=i.height,n.ref.center.scaleY=(a-i.height-o.height)/100,n.ref.bottom.translateY=a-o.height}},create:function(e){var n=e.root,r=e.props;[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:zt},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:zt},styles:["translateY"]}}].forEach((function(e){!function(e,n,r){var i=O({name:"panel-"+n.name+" filepond--"+r,mixins:n.mixins,ignoreRectUpdate:!0}),o=e.createChildView(i,n.props);e.ref[n.name]=e.appendChildView(o)}(n,e,r.name)})),n.element.classList.add("filepond--"+r.name),n.ref.scalable=null},ignoreRect:!0,mixins:{apis:["height","heightCurrent","scalable"]}}),Xt={type:"spring",stiffness:.75,damping:.45,mass:10},Zt={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy processing",DID_REQUEST_ITEM_PROCESSING:"busy processing",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},Qt=A({DID_UPDATE_PANEL_HEIGHT:function(e){var n=e.root,r=e.action;n.height=r.height}}),Kt=A({DID_GRAB_ITEM:function(e){var n=e.root;e.props.dragOrigin={x:n.translateX,y:n.translateY}},DID_DRAG_ITEM:function(e){e.root.element.dataset.dragState="drag"},DID_DROP_ITEM:function(e){var n=e.root,r=e.props;r.dragOffset=null,r.dragOrigin=null,n.element.dataset.dragState="drop"}},(function(e){var n=e.root,r=e.actions,i=e.props,o=e.shouldOptimize;"drop"===n.element.dataset.dragState&&n.scaleX<=1&&(n.element.dataset.dragState="idle");var a=r.concat().filter((function(e){return/^DID_/.test(e.type)})).reverse().find((function(e){return Zt[e.type]}));a&&a.type!==i.currentState&&(i.currentState=a.type,n.element.dataset.filepondItemState=Zt[i.currentState]||"");var s=n.query("GET_ITEM_PANEL_ASPECT_RATIO")||n.query("GET_PANEL_ASPECT_RATIO");s?o||(n.height=n.rect.element.width*s):(Qt({root:n,actions:r,props:i}),!n.height&&n.ref.container.rect.element.height>0&&(n.height=n.ref.container.rect.element.height)),o&&(n.ref.panel.height=null),n.ref.panel.height=n.height})),$t=O({create:function(e){var n=e.root,r=e.props;n.ref.handleClick=function(e){return n.dispatch("DID_ACTIVATE_ITEM",{id:r.id})},n.element.id="filepond--item-"+r.id,n.element.addEventListener("click",n.ref.handleClick),n.ref.container=n.appendChildView(n.createChildView(Ht,{id:r.id})),n.ref.panel=n.appendChildView(n.createChildView(jt,{name:"item-panel"})),n.ref.panel.height=null,r.markedForRemoval=!1,n.query("GET_ALLOW_REORDER")&&(n.element.dataset.dragState="idle",n.element.addEventListener("pointerdown",(function(e){if(e.isPrimary){var i=!1,o=e.pageX,a=e.pageY;r.dragOrigin={x:n.translateX,y:n.translateY},r.dragCenter={x:e.offsetX,y:e.offsetY};var s,u,l,c=(s=n.query("GET_ACTIVE_ITEMS"),u=s.map((function(e){return e.id})),l=void 0,{setIndex:function(e){l=e},getIndex:function(){return l},getItemIndex:function(e){return u.indexOf(e.id)}});n.dispatch("DID_GRAB_ITEM",{id:r.id,dragState:c});var f=function(e){e.isPrimary&&(e.stopPropagation(),e.preventDefault(),r.dragOffset={x:e.pageX-o,y:e.pageY-a},r.dragOffset.x*r.dragOffset.x+r.dragOffset.y*r.dragOffset.y>16&&!i&&(i=!0,n.element.removeEventListener("click",n.ref.handleClick)),n.dispatch("DID_DRAG_ITEM",{id:r.id,dragState:c}))};document.addEventListener("pointermove",f),document.addEventListener("pointerup",(function e(s){s.isPrimary&&(document.removeEventListener("pointermove",f),document.removeEventListener("pointerup",e),r.dragOffset={x:s.pageX-o,y:s.pageY-a},n.dispatch("DID_DROP_ITEM",{id:r.id,dragState:c}),i&&setTimeout((function(){return n.element.addEventListener("click",n.ref.handleClick)}),0))}))}})))},write:Kt,destroy:function(e){var n=e.root,r=e.props;n.element.removeEventListener("click",n.ref.handleClick),n.dispatch("RELEASE_ITEM",{query:r.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:"spring",scaleY:"spring",translateX:Xt,translateY:Xt,opacity:{type:"tween",duration:150}}}}),Jt=function(e,n){return Math.max(1,Math.floor((e+1)/n))},en=function(e,n,r){if(r){var i=e.rect.element.width,o=n.length,a=null;if(0===o||r.top<n[0].rect.element.top)return-1;var s=n[0].rect.element,u=s.marginLeft+s.marginRight,l=s.width+u,c=Jt(i,l);if(1===c){for(var f=0;f<o;f++){var d=n[f],p=d.rect.outer.top+.5*d.rect.element.height;if(r.top<p)return f}return o}for(var E=s.marginTop+s.marginBottom,_=s.height+E,h=0;h<o;h++){var m=h%c*l,I=Math.floor(h/c)*_,T=I-s.marginTop,v=m+l,g=I+_+s.marginBottom;if(r.top<g&&r.top>T){if(r.left<v)return h;a=h!==o-1?h:null}}return null!==a?a:o}},tn={height:0,width:0,get getHeight(){return this.height},set setHeight(e){0!==this.height&&0!==e||(this.height=e)},get getWidth(){return this.width},set setWidth(e){0!==this.width&&0!==e||(this.width=e)},setDimensions:function(e,n){0!==this.height&&0!==e||(this.height=e),0!==this.width&&0!==n||(this.width=n)}},nn=function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;e.dragOffset?(e.translateX=null,e.translateY=null,e.translateX=e.dragOrigin.x+e.dragOffset.x,e.translateY=e.dragOrigin.y+e.dragOffset.y,e.scaleX=1.025,e.scaleY=1.025):(e.translateX=n,e.translateY=r,Date.now()>e.spawnDate&&(0===e.opacity&&rn(e,n,r,i,o),e.scaleX=1,e.scaleY=1,e.opacity=1))},rn=function(e,n,r,i,o){5===e.interactionMethod?(e.translateX=null,e.translateX=n,e.translateY=null,e.translateY=r):2===e.interactionMethod?(e.translateX=null,e.translateX=n-20*i,e.translateY=null,e.translateY=r-10*o,e.scaleX=.8,e.scaleY=.8):3===e.interactionMethod?(e.translateY=null,e.translateY=r-30):1===e.interactionMethod&&(e.translateX=null,e.translateX=n-30,e.translateY=null)},on=function(e){return e.rect.element.height+.5*e.rect.element.marginBottom+.5*e.rect.element.marginTop},an=A({DID_ADD_ITEM:function(e){var n=e.root,r=e.action,i=r.id,o=r.index,a=r.interactionMethod;n.ref.addIndex=o;var s=Date.now(),u=s,l=1;if(5!==a){l=0;var c=n.query("GET_ITEM_INSERT_INTERVAL"),f=s-n.ref.lastItemSpanwDate;u=f<c?s+(c-f):s}n.ref.lastItemSpanwDate=u,n.appendChildView(n.createChildView($t,{spawnDate:u,id:i,opacity:l,interactionMethod:a}),o)},DID_REMOVE_ITEM:function(e){var n=e.root,r=e.action.id,i=n.childViews.find((function(e){return e.id===r}));i&&(i.scaleX=.9,i.scaleY=.9,i.opacity=0,i.markedForRemoval=!0)},DID_DRAG_ITEM:function(e){var n=e.root,r=e.action,i=r.id,o=r.dragState,a=n.query("GET_ITEM",{id:i}),s=n.childViews.find((function(e){return e.id===i})),u=n.childViews.length,l=o.getItemIndex(a);if(s){var c,f=s.dragOrigin.x+s.dragOffset.x+s.dragCenter.x,d=s.dragOrigin.y+s.dragOffset.y+s.dragCenter.y,p=on(s),E=(c=s).rect.element.width+.5*c.rect.element.marginLeft+.5*c.rect.element.marginRight,_=Math.floor(n.rect.outer.width/E);_>u&&(_=u);var h=Math.floor(u/_+1);tn.setHeight=p*h,tn.setWidth=E*_;var m={y:Math.floor(d/p),x:Math.floor(f/E),getGridIndex:function(){return d>tn.getHeight||d<0||f>tn.getWidth||f<0?l:this.y*_+this.x},getColIndex:function(){for(var e=n.query("GET_ACTIVE_ITEMS"),r=n.childViews.filter((function(e){return e.rect.element.height})),i=e.map((function(e){return r.find((function(n){return n.id===e.id}))})),o=i.findIndex((function(e){return e===s})),a=on(s),u=i.length,l=u,c=0,f=0,p=0,E=0;E<u;E++)if(c=on(i[E]),d<(f=(p=f)+c)){if(o>E){if(d<p+a){l=E;break}continue}l=E;break}return l}},I=_>1?m.getGridIndex():m.getColIndex();n.dispatch("MOVE_ITEM",{query:s,index:I});var T=o.getIndex();if(void 0===T||T!==I){if(o.setIndex(I),void 0===T)return;n.dispatch("DID_REORDER_ITEMS",{items:n.query("GET_ACTIVE_ITEMS"),origin:l,target:I})}}}}),sn=O({create:function(e){var n=e.root;i(n.element,"role","list"),n.ref.lastItemSpanwDate=Date.now()},write:function(e){var n=e.root,r=e.props,i=e.actions,o=e.shouldOptimize;an({root:n,props:r,actions:i});var a=r.dragCoordinates,s=n.rect.element.width,u=n.childViews.filter((function(e){return e.rect.element.height})),l=n.query("GET_ACTIVE_ITEMS").map((function(e){return u.find((function(n){return n.id===e.id}))})).filter((function(e){return e})),c=a?en(n,l,a):null,f=n.ref.addIndex||null;n.ref.addIndex=null;var d=0,p=0,E=0;if(0!==l.length){var _=l[0].rect.element,h=_.marginTop+_.marginBottom,m=_.marginLeft+_.marginRight,I=_.width+m,T=_.height+h,v=Jt(s,I);if(1===v){var g=0,y=0;l.forEach((function(e,n){if(c){var r=n-c;y=-2===r?.25*-h:-1===r?.75*-h:0===r?.75*h:1===r?.25*h:0}o&&(e.translateX=null,e.translateY=null),e.markedForRemoval||nn(e,0,g+y);var i=(e.rect.element.height+h)*(e.markedForRemoval?e.opacity:1);g+=i}))}else{var R=0,O=0;l.forEach((function(e,n){n===c&&(d=1),n===f&&(E+=1),e.markedForRemoval&&e.opacity<.5&&(p-=1);var r=n+E+d+p,i=r%v,a=Math.floor(r/v),s=i*I,u=a*T,l=Math.sign(s-R),_=Math.sign(u-O);R=s,O=u,e.markedForRemoval||(o&&(e.translateX=null,e.translateY=null),nn(e,s,u,l,_))}))}}},tag:"ul",name:"list",didWriteView:function(e){var n=e.root;n.childViews.filter((function(e){return e.markedForRemoval&&0===e.opacity&&e.resting})).forEach((function(e){e._destroy(),n.removeChildView(e)}))},filterFrameActionsForChild:function(e,n){return n.filter((function(n){return!n.data||!n.data.id||e.id===n.data.id}))},mixins:{apis:["dragCoordinates"]}}),un=A({DID_DRAG:function(e){var n=e.root,r=e.props,i=e.action;n.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(r.dragCoordinates={left:i.position.scopeLeft-n.ref.list.rect.element.left,top:i.position.scopeTop-(n.rect.outer.top+n.rect.element.marginTop+n.rect.element.scrollTop)})},DID_END_DRAG:function(e){e.props.dragCoordinates=null}}),ln=O({create:function(e){var n=e.root,r=e.props;n.ref.list=n.appendChildView(n.createChildView(sn)),r.dragCoordinates=null,r.overflowing=!1},write:function(e){var n=e.root,r=e.props,i=e.actions;if(un({root:n,props:r,actions:i}),n.ref.list.dragCoordinates=r.dragCoordinates,r.overflowing&&!r.overflow&&(r.overflowing=!1,n.element.dataset.state="",n.height=null),r.overflow){var o=Math.round(r.overflow);o!==n.height&&(r.overflowing=!0,n.element.dataset.state="overflow",n.height=o)}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),cn=function(e,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";r?i(e,n,o):e.removeAttribute(n)},fn=function(e){var n=e.root,r=e.action;n.query("GET_ALLOW_SYNC_ACCEPT_ATTRIBUTE")&&cn(n.element,"accept",!!r.value,r.value?r.value.join(","):"")},dn=function(e){var n=e.root,r=e.action;cn(n.element,"multiple",r.value)},pn=function(e){var n=e.root,r=e.action;cn(n.element,"webkitdirectory",r.value)},En=function(e){var n=e.root,r=n.query("GET_DISABLED"),i=n.query("GET_ALLOW_BROWSE"),o=r||!i;cn(n.element,"disabled",o)},_n=function(e){var n=e.root;e.action.value?0===n.query("GET_TOTAL_ITEMS")&&cn(n.element,"required",!0):cn(n.element,"required",!1)},hn=function(e){var n=e.root,r=e.action;cn(n.element,"capture",!!r.value,!0===r.value?"":r.value)},mn=function(e){var n=e.root,r=n.element;n.query("GET_TOTAL_ITEMS")>0?(cn(r,"required",!1),cn(r,"name",!1)):(cn(r,"name",!0,n.query("GET_NAME")),n.query("GET_CHECK_VALIDITY")&&r.setCustomValidity(""),n.query("GET_REQUIRED")&&cn(r,"required",!0))},In=O({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:function(e){var n=e.root,r=e.props;n.element.id="filepond--browser-"+r.id,i(n.element,"name",n.query("GET_NAME")),i(n.element,"aria-controls","filepond--assistant-"+r.id),i(n.element,"aria-labelledby","filepond--drop-label-"+r.id),fn({root:n,action:{value:n.query("GET_ACCEPTED_FILE_TYPES")}}),dn({root:n,action:{value:n.query("GET_ALLOW_MULTIPLE")}}),pn({root:n,action:{value:n.query("GET_ALLOW_DIRECTORIES_ONLY")}}),En({root:n}),_n({root:n,action:{value:n.query("GET_REQUIRED")}}),hn({root:n,action:{value:n.query("GET_CAPTURE_METHOD")}}),n.ref.handleChange=function(e){if(n.element.value){var i=Array.from(n.element.files).map((function(e){return e._relativePath=e.webkitRelativePath,e}));setTimeout((function(){r.onload(i),function(e){if(e&&""!==e.value){try{e.value=""}catch(e){}if(e.value){var n=_t("form"),r=e.parentNode,i=e.nextSibling;n.appendChild(e),n.reset(),i?r.insertBefore(e,i):r.appendChild(e)}}}(n.element)}),250)}},n.element.addEventListener("change",n.ref.handleChange)},destroy:function(e){var n=e.root;n.element.removeEventListener("change",n.ref.handleChange)},write:A({DID_LOAD_ITEM:mn,DID_REMOVE_ITEM:mn,DID_THROW_ITEM_INVALID:function(e){var n=e.root;n.query("GET_CHECK_VALIDITY")&&n.element.setCustomValidity(n.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:En,DID_SET_ALLOW_BROWSE:En,DID_SET_ALLOW_DIRECTORIES_ONLY:pn,DID_SET_ALLOW_MULTIPLE:dn,DID_SET_ACCEPTED_FILE_TYPES:fn,DID_SET_CAPTURE_METHOD:hn,DID_SET_REQUIRED:_n})}),Tn=function(e,n){e.innerHTML=n;var r=e.querySelector(".filepond--label-action");return r&&i(r,"tabindex","0"),n},vn=O({name:"drop-label",ignoreRect:!0,create:function(e){var n=e.root,r=e.props,o=_t("label");i(o,"for","filepond--browser-"+r.id),i(o,"id","filepond--drop-label-"+r.id),i(o,"aria-hidden","true"),n.ref.handleKeyDown=function(e){(13===e.keyCode||32===e.keyCode)&&(e.preventDefault(),n.ref.label.click())},n.ref.handleClick=function(e){e.target===o||o.contains(e.target)||n.ref.label.click()},o.addEventListener("keydown",n.ref.handleKeyDown),n.element.addEventListener("click",n.ref.handleClick),Tn(o,r.caption),n.appendChild(o),n.ref.label=o},destroy:function(e){var n=e.root;n.ref.label.addEventListener("keydown",n.ref.handleKeyDown),n.element.removeEventListener("click",n.ref.handleClick)},write:A({DID_SET_LABEL_IDLE:function(e){var n=e.root,r=e.action;Tn(n.ref.label,r.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),gn=O({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),yn=A({DID_DRAG:function(e){var n=e.root,r=e.action;n.ref.blob?(n.ref.blob.translateX=r.position.scopeLeft,n.ref.blob.translateY=r.position.scopeTop,n.ref.blob.scaleX=1,n.ref.blob.scaleY=1,n.ref.blob.opacity=1):function(e){var n=e.root,r=.5*n.rect.element.width,i=.5*n.rect.element.height;n.ref.blob=n.appendChildView(n.createChildView(gn,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:r,translateY:i}))}({root:n})},DID_DROP:function(e){var n=e.root;n.ref.blob&&(n.ref.blob.scaleX=2.5,n.ref.blob.scaleY=2.5,n.ref.blob.opacity=0)},DID_END_DRAG:function(e){var n=e.root;n.ref.blob&&(n.ref.blob.opacity=0)}}),Rn=O({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:function(e){var n=e.root,r=e.props,i=e.actions;yn({root:n,props:r,actions:i});var o=n.ref.blob;0===i.length&&o&&0===o.opacity&&(n.removeChildView(o),n.ref.blob=null)}}),On=function(e,n){try{var r=new DataTransfer;n.forEach((function(e){e instanceof File?r.items.add(e):r.items.add(new File([e],e.name,{type:e.type}))})),e.files=r.files}catch(e){return!1}return!0},An=function(e,n){return e.ref.fields[n]},Dn=function(e){e.query("GET_ACTIVE_ITEMS").forEach((function(n){e.ref.fields[n.id]&&e.element.appendChild(e.ref.fields[n.id])}))},Sn=function(e){var n=e.root;return Dn(n)},wn=A({DID_SET_DISABLED:function(e){var n=e.root;n.element.disabled=n.query("GET_DISABLED")},DID_ADD_ITEM:function(e){var n=e.root,r=e.action,i=!(n.query("GET_ITEM",r.id).origin===le.LOCAL)&&n.query("SHOULD_UPDATE_FILE_INPUT"),o=_t("input");o.type=i?"file":"hidden",o.name=n.query("GET_NAME"),o.disabled=n.query("GET_DISABLED"),n.ref.fields[r.id]=o,Dn(n)},DID_LOAD_ITEM:function(e){var n=e.root,r=e.action,i=An(n,r.id);if(i&&(null!==r.serverFileReference&&(i.value=r.serverFileReference),n.query("SHOULD_UPDATE_FILE_INPUT"))){var o=n.query("GET_ITEM",r.id);On(i,[o.file])}},DID_REMOVE_ITEM:function(e){var n=e.root,r=e.action,i=An(n,r.id);i&&(i.parentNode&&i.parentNode.removeChild(i),delete n.ref.fields[r.id])},DID_DEFINE_VALUE:function(e){var n=e.root,r=e.action,i=An(n,r.id);i&&(null===r.value?i.removeAttribute("value"):i.value=r.value,Dn(n))},DID_PREPARE_OUTPUT:function(e){var n=e.root,r=e.action;n.query("SHOULD_UPDATE_FILE_INPUT")&&setTimeout((function(){var e=An(n,r.id);e&&On(e,[r.file])}),0)},DID_REORDER_ITEMS:Sn,DID_SORT_ITEMS:Sn}),Ln=O({tag:"fieldset",name:"data",create:function(e){return e.root.ref.fields={}},write:wn,ignoreRect:!0}),Pn=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Mn=["css","csv","html","txt"],bn={zip:"zip|compressed",epub:"application/epub+zip"},Cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e=e.toLowerCase(),Pn.includes(e)?"image/"+("jpg"===e?"jpeg":"svg"===e?"svg+xml":e):Mn.includes(e)?"text/"+e:bn[e]||""},Nn=function(e){return new Promise((function(n,r){var i=Wn(e);if(i.length&&!Gn(e))return n(i);xn(e).then(n)}))},Gn=function(e){return!!e.files&&e.files.length>0},xn=function(e){return new Promise((function(n,r){var i=(e.items?Array.from(e.items):[]).filter((function(e){return Fn(e)})).map((function(e){return Vn(e)}));i.length?Promise.all(i).then((function(e){var r=[];e.forEach((function(e){r.push.apply(r,e)})),n(r.filter((function(e){return e})).map((function(e){return e._relativePath||(e._relativePath=e.webkitRelativePath),e})))})).catch(console.error):n(e.files?Array.from(e.files):[])}))},Fn=function(e){if(kn(e)){var n=Yn(e);if(n)return n.isFile||n.isDirectory}return"file"===e.kind},Vn=function(e){return new Promise((function(n,r){qn(e)?Un(Yn(e)).then(n).catch(r):n([e.getAsFile()])}))},Un=function(e){return new Promise((function(n,r){var i=[],o=0,a=0,s=function(){0===a&&0===o&&n(i)};!function e(n){o++;var u=n.createReader();!function n(){u.readEntries((function(r){if(0===r.length)return o--,void s();r.forEach((function(n){n.isDirectory?e(n):(a++,n.file((function(e){var r=Bn(e);n.fullPath&&(r._relativePath=n.fullPath),i.push(r),a--,s()})))})),n()}),r)}()}(e)}))},Bn=function(e){if(e.type.length)return e;var n=e.lastModifiedDate,r=e.name,i=Cn(Ge(e.name));return i.length?((e=e.slice(0,e.size,i)).name=r,e.lastModifiedDate=n,e):e},qn=function(e){return kn(e)&&(Yn(e)||{}).isDirectory},kn=function(e){return"webkitGetAsEntry"in e},Yn=function(e){return e.webkitGetAsEntry()},Wn=function(e){var n=[];try{if((n=zn(e)).length)return n;n=Hn(e)}catch(e){}return n},Hn=function(e){var n=e.getData("url");return"string"==typeof n&&n.length?[n]:[]},zn=function(e){var n=e.getData("text/html");if("string"==typeof n&&n.length){var r=n.match(/src\s*=\s*"(.+?)"/);if(r)return[r[1]]}return[]},jn=[],Xn=function(e){return{pageLeft:e.pageX,pageTop:e.pageY,scopeLeft:e.offsetX||e.layerX,scopeTop:e.offsetY||e.layerY}},Zn=function(e){var r=[],i={dragenter:Jn,dragover:er,dragleave:nr,drop:tr},o={};n(i,(function(n,i){o[n]=i(e,r),e.addEventListener(n,o[n],!1)}));var a={element:e,addListener:function(s){return r.push(s),function(){r.splice(r.indexOf(s),1),0===r.length&&(jn.splice(jn.indexOf(a),1),n(i,(function(n){e.removeEventListener(n,o[n],!1)})))}}};return a},Qn=function(e,n){var r,i=function(e,n){return"elementFromPoint"in e||(e=document),e.elementFromPoint(n.x,n.y)}("getRootNode"in(r=n)?r.getRootNode():document,{x:e.pageX-window.pageXOffset,y:e.pageY-window.pageYOffset});return i===n||n.contains(i)},Kn=null,$n=function(e,n){try{e.dropEffect=n}catch(e){}},Jn=function(e,n){return function(e){e.preventDefault(),Kn=e.target,n.forEach((function(n){var r=n.element,i=n.onenter;Qn(e,r)&&(n.state="enter",i(Xn(e)))}))}},er=function(e,n){return function(e){e.preventDefault();var r=e.dataTransfer;Nn(r).then((function(i){var o=!1;n.some((function(n){var a=n.filterElement,s=n.element,u=n.onenter,l=n.onexit,c=n.ondrag,f=n.allowdrop;$n(r,"copy");var d=f(i);if(d)if(Qn(e,s)){if(o=!0,null===n.state)return n.state="enter",void u(Xn(e));if(n.state="over",a&&!d)return void $n(r,"none");c(Xn(e))}else a&&!o&&$n(r,"none"),n.state&&(n.state=null,l(Xn(e)));else $n(r,"none")}))}))}},tr=function(e,n){return function(e){e.preventDefault();var r=e.dataTransfer;Nn(r).then((function(r){n.forEach((function(n){var i=n.filterElement,o=n.element,a=n.ondrop,s=n.onexit,u=n.allowdrop;if(n.state=null,!i||Qn(e,o))return u(r)?void a(Xn(e),r):s(Xn(e))}))}))}},nr=function(e,n){return function(e){Kn===e.target&&n.forEach((function(n){var r=n.onexit;n.state=null,r(Xn(e))}))}},rr=function(e,n,r){e.classList.add("filepond--hopper");var i=r.catchesDropsOnPage,o=r.requiresDropOnElement,a=r.filterItems,s=void 0===a?function(e){return e}:a,u=function(e,n,r){var i=function(e){var n=jn.find((function(n){return n.element===e}));if(n)return n;var r=Zn(e);return jn.push(r),r}(n),o={element:e,filterElement:r,state:null,ondrop:function(){},onenter:function(){},ondrag:function(){},onexit:function(){},onload:function(){},allowdrop:function(){}};return o.destroy=i.addListener(o),o}(e,i?document.documentElement:e,o),l="",c="";u.allowdrop=function(e){return n(s(e))},u.ondrop=function(e,r){var i=s(r);n(i)?(c="drag-drop",f.onload(i,e)):f.ondragend(e)},u.ondrag=function(e){f.ondrag(e)},u.onenter=function(e){c="drag-over",f.ondragstart(e)},u.onexit=function(e){c="drag-exit",f.ondragend(e)};var f={updateHopperState:function(){l!==c&&(e.dataset.hopperState=c,l=c)},onload:function(){},ondragstart:function(){},ondrag:function(){},ondragend:function(){},destroy:function(){u.destroy()}};return f},ir=!1,or=[],ar=function(e){var n=document.activeElement;if(n&&/textarea|input/i.test(n.nodeName)){for(var r=!1,i=n;i!==document.body;){if(i.classList.contains("filepond--root")){r=!0;break}i=i.parentNode}if(!r)return}Nn(e.clipboardData).then((function(e){e.length&&or.forEach((function(n){return n(e)}))}))},sr=null,ur=null,lr=[],cr=function(e,n){e.element.textContent=n},fr=function(e,n,r){var i=e.query("GET_TOTAL_ITEMS");cr(e,r+" "+n+", "+i+" "+(1===i?e.query("GET_LABEL_FILE_COUNT_SINGULAR"):e.query("GET_LABEL_FILE_COUNT_PLURAL"))),clearTimeout(ur),ur=setTimeout((function(){!function(e){e.element.textContent=""}(e)}),1500)},dr=function(e){return e.element.parentNode.contains(document.activeElement)},pr=function(e){var n=e.root,r=e.action,i=n.query("GET_ITEM",r.id).filename,o=n.query("GET_LABEL_FILE_PROCESSING_ABORTED");cr(n,i+" "+o)},Er=function(e){var n=e.root,r=e.action,i=n.query("GET_ITEM",r.id).filename;cr(n,r.status.main+" "+i+" "+r.status.sub)},_r=O({create:function(e){var n=e.root,r=e.props;n.element.id="filepond--assistant-"+r.id,i(n.element,"role","status"),i(n.element,"aria-live","polite"),i(n.element,"aria-relevant","additions")},ignoreRect:!0,ignoreRectUpdate:!0,write:A({DID_LOAD_ITEM:function(e){var n=e.root,r=e.action;if(dr(n)){n.element.textContent="";var i=n.query("GET_ITEM",r.id);lr.push(i.filename),clearTimeout(sr),sr=setTimeout((function(){fr(n,lr.join(", "),n.query("GET_LABEL_FILE_ADDED")),lr.length=0}),750)}},DID_REMOVE_ITEM:function(e){var n=e.root,r=e.action;if(dr(n)){var i=r.item;fr(n,i.filename,n.query("GET_LABEL_FILE_REMOVED"))}},DID_COMPLETE_ITEM_PROCESSING:function(e){var n=e.root,r=e.action,i=n.query("GET_ITEM",r.id).filename,o=n.query("GET_LABEL_FILE_PROCESSING_COMPLETE");cr(n,i+" "+o)},DID_ABORT_ITEM_PROCESSING:pr,DID_REVERT_ITEM_PROCESSING:pr,DID_THROW_ITEM_REMOVE_ERROR:Er,DID_THROW_ITEM_LOAD_ERROR:Er,DID_THROW_ITEM_INVALID:Er,DID_THROW_ITEM_PROCESSING_ERROR:Er}),tag:"span",name:"assistant"}),hr=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(new RegExp(n+".","g"),(function(e){return e.charAt(1).toUpperCase()}))},mr=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=Date.now(),o=null;return function(){for(var a=arguments.length,s=new Array(a),u=0;u<a;u++)s[u]=arguments[u];clearTimeout(o);var l=Date.now()-i,c=function(){i=Date.now(),e.apply(void 0,s)};l<n?r||(o=setTimeout(c,n-l)):c()}},Ir=function(e){return e.preventDefault()},Tr=function(e,n){var r=e.query("GET_ALLOW_REPLACE"),i=e.query("GET_ALLOW_MULTIPLE"),o=e.query("GET_TOTAL_ITEMS"),a=e.query("GET_MAX_FILES"),s=n.length;return!i&&s>1?(e.dispatch("DID_THROW_MAX_FILES",{source:n,error:Xe("warning",0,"Max files")}),!0):!(!i&&r||!(V(a=i?a:1)&&o+s>a)||(e.dispatch("DID_THROW_MAX_FILES",{source:n,error:Xe("warning",0,"Max files")}),0))},vr=function(e,n,r){var i=e.childViews[0];return en(i,n,{left:r.scopeLeft-i.rect.element.left,top:r.scopeTop-(e.rect.outer.top+e.rect.element.marginTop+e.rect.element.scrollTop)})},gr=function(e){var n=e.query("GET_ALLOW_DROP"),r=e.query("GET_DISABLED"),i=n&&!r;if(i&&!e.ref.hopper){var o=rr(e.element,(function(n){var r=e.query("GET_BEFORE_DROP_FILE")||function(){return!0};return!e.query("GET_DROP_VALIDATION")||n.every((function(n){return _e("ALLOW_HOPPER_ITEM",n,{query:e.query}).every((function(e){return!0===e}))&&r(n)}))}),{filterItems:function(n){var r=e.query("GET_IGNORED_FILES");return n.filter((function(e){return!rt(e)||!r.includes(e.name.toLowerCase())}))},catchesDropsOnPage:e.query("GET_DROP_ON_PAGE"),requiresDropOnElement:e.query("GET_DROP_ON_ELEMENT")});o.onload=function(n,r){var i=e.ref.list.childViews[0].childViews.filter((function(e){return e.rect.element.height})),o=e.query("GET_ACTIVE_ITEMS").map((function(e){return i.find((function(n){return n.id===e.id}))})).filter((function(e){return e}));Ee("ADD_ITEMS",n,{dispatch:e.dispatch}).then((function(n){if(Tr(e,n))return!1;e.dispatch("ADD_ITEMS",{items:n,index:vr(e.ref.list,o,r),interactionMethod:2})})),e.dispatch("DID_DROP",{position:r}),e.dispatch("DID_END_DRAG",{position:r})},o.ondragstart=function(n){e.dispatch("DID_START_DRAG",{position:n})},o.ondrag=mr((function(n){e.dispatch("DID_DRAG",{position:n})})),o.ondragend=function(n){e.dispatch("DID_END_DRAG",{position:n})},e.ref.hopper=o,e.ref.drip=e.appendChildView(e.createChildView(Rn))}else!i&&e.ref.hopper&&(e.ref.hopper.destroy(),e.ref.hopper=null,e.removeChildView(e.ref.drip))},yr=function(e,n){var r=e.query("GET_ALLOW_BROWSE"),i=e.query("GET_DISABLED"),o=r&&!i;o&&!e.ref.browser?e.ref.browser=e.appendChildView(e.createChildView(In,Object.assign({},n,{onload:function(n){Ee("ADD_ITEMS",n,{dispatch:e.dispatch}).then((function(n){if(Tr(e,n))return!1;e.dispatch("ADD_ITEMS",{items:n,index:-1,interactionMethod:3})}))}})),0):!o&&e.ref.browser&&(e.removeChildView(e.ref.browser),e.ref.browser=null)},Rr=function(e){var n=e.query("GET_ALLOW_PASTE"),r=e.query("GET_DISABLED"),i=n&&!r;i&&!e.ref.paster?(e.ref.paster=function(){var e=function(e){n.onload(e)},n={destroy:function(){var n;n=e,re(or,or.indexOf(n)),0===or.length&&(document.removeEventListener("paste",ar),ir=!1)},onload:function(){}};return function(e){or.includes(e)||(or.push(e),ir||(ir=!0,document.addEventListener("paste",ar)))}(e),n}(),e.ref.paster.onload=function(n){Ee("ADD_ITEMS",n,{dispatch:e.dispatch}).then((function(n){if(Tr(e,n))return!1;e.dispatch("ADD_ITEMS",{items:n,index:-1,interactionMethod:4})}))}):!i&&e.ref.paster&&(e.ref.paster.destroy(),e.ref.paster=null)},Or=A({DID_SET_ALLOW_BROWSE:function(e){var n=e.root,r=e.props;yr(n,r)},DID_SET_ALLOW_DROP:function(e){var n=e.root;gr(n)},DID_SET_ALLOW_PASTE:function(e){var n=e.root;Rr(n)},DID_SET_DISABLED:function(e){var n=e.root,r=e.props;gr(n),Rr(n),yr(n,r),n.query("GET_DISABLED")?n.element.dataset.disabled="disabled":n.element.removeAttribute("data-disabled")}}),Ar=O({name:"root",read:function(e){var n=e.root;n.ref.measure&&(n.ref.measureHeight=n.ref.measure.offsetHeight)},create:function(e){var n=e.root,r=e.props,i=n.query("GET_ID");i&&(n.element.id=i);var o=n.query("GET_CLASS_NAME");o&&o.split(" ").filter((function(e){return e.length})).forEach((function(e){n.element.classList.add(e)})),n.ref.label=n.appendChildView(n.createChildView(vn,Object.assign({},r,{translateY:null,caption:n.query("GET_LABEL_IDLE")}))),n.ref.list=n.appendChildView(n.createChildView(ln,{translateY:null})),n.ref.panel=n.appendChildView(n.createChildView(jt,{name:"panel-root"})),n.ref.assistant=n.appendChildView(n.createChildView(_r,Object.assign({},r))),n.ref.data=n.appendChildView(n.createChildView(Ln,Object.assign({},r))),n.ref.measure=_t("div"),n.ref.measure.style.height="100%",n.element.appendChild(n.ref.measure),n.ref.bounds=null,n.query("GET_STYLES").filter((function(e){return!L(e.value)})).map((function(e){var r=e.name,i=e.value;n.element.dataset[r]=i})),n.ref.widthPrevious=null,n.ref.widthUpdated=mr((function(){n.ref.updateHistory=[],n.dispatch("DID_RESIZE_ROOT")}),250),n.ref.previousAspectRatio=null,n.ref.updateHistory=[];var a=window.matchMedia("(pointer: fine) and (hover: hover)").matches,s="PointerEvent"in window;n.query("GET_ALLOW_REORDER")&&s&&!a&&(n.element.addEventListener("touchmove",Ir,{passive:!1}),n.element.addEventListener("gesturestart",Ir));var u=n.query("GET_CREDITS");if(2===u.length){var l=document.createElement("a");l.className="filepond--credits",l.setAttribute("aria-hidden","true"),l.href=u[0],l.tabindex=-1,l.target="_blank",l.rel="noopener noreferrer",l.textContent=u[1],n.element.appendChild(l),n.ref.credits=l}},write:function(e){var n=e.root,r=e.props,i=e.actions;if(Or({root:n,props:r,actions:i}),i.filter((function(e){return/^DID_SET_STYLE_/.test(e.type)})).filter((function(e){return!L(e.data.value)})).map((function(e){var r=e.type,i=e.data,o=hr(r.substring(8).toLowerCase(),"_");n.element.dataset[o]=i.value,n.invalidateLayout()})),!n.rect.element.hidden){n.rect.element.width!==n.ref.widthPrevious&&(n.ref.widthPrevious=n.rect.element.width,n.ref.widthUpdated());var o=n.ref.bounds;o||(o=n.ref.bounds=function(e){var n=e.ref.measureHeight||null;return{cappedHeight:parseInt(e.style.maxHeight,10)||null,fixedHeight:0===n?null:n}}(n),n.element.removeChild(n.ref.measure),n.ref.measure=null);var a=n.ref,s=a.hopper,u=a.label,l=a.list,c=a.panel;s&&s.updateHopperState();var f=n.query("GET_PANEL_ASPECT_RATIO"),d=n.query("GET_ALLOW_MULTIPLE"),p=n.query("GET_TOTAL_ITEMS"),E=p===(d?n.query("GET_MAX_FILES")||1e6:1),_=i.find((function(e){return"DID_ADD_ITEM"===e.type}));if(E&&_){var h=_.data.interactionMethod;u.opacity=0,d?u.translateY=-40:1===h?u.translateX=40:u.translateY=3===h?40:30}else E||(u.opacity=1,u.translateX=0,u.translateY=0);var m=function(e){var n=e.ref.list.childViews[0].childViews[0];return n?{top:n.rect.element.marginTop,bottom:n.rect.element.marginBottom}:{top:0,bottom:0}}(n),I=function(e){var n=0,r=0,i=e.ref.list,o=i.childViews[0],a=o.childViews.filter((function(e){return e.rect.element.height})),s=e.query("GET_ACTIVE_ITEMS").map((function(e){return a.find((function(n){return n.id===e.id}))})).filter((function(e){return e}));if(0===s.length)return{visual:n,bounds:r};var u=o.rect.element.width,l=en(o,s,i.dragCoordinates),c=s[0].rect.element,f=c.marginTop+c.marginBottom,d=c.marginLeft+c.marginRight,p=c.width+d,E=c.height+f,_=void 0!==l&&l>=0?1:0,h=s.find((function(e){return e.markedForRemoval&&e.opacity<.45}))?-1:0,m=s.length+_+h,I=Jt(u,p);return 1===I?s.forEach((function(e){var i=e.rect.element.height+f;r+=i,n+=i*e.opacity})):(r=Math.ceil(m/I)*E,n=r),{visual:n,bounds:r}}(n),T=u.rect.element.height,v=!d||E?0:T,g=E?l.rect.element.marginTop:0,y=0===p?0:l.rect.element.marginBottom,R=v+g+I.visual+y,O=v+g+I.bounds+y;if(l.translateY=Math.max(0,v-l.rect.element.marginTop)-m.top,f){var A=n.rect.element.width,D=A*f;f!==n.ref.previousAspectRatio&&(n.ref.previousAspectRatio=f,n.ref.updateHistory=[]);var S=n.ref.updateHistory;if(S.push(A),S.length>4)for(var w=S.length,P=w-10,M=0,b=w;b>=P;b--)if(S[b]===S[b-2]&&M++,M>=2)return;c.scalable=!1,c.height=D;var C=D-v-(y-m.bottom)-(E?g:0);I.visual>C?l.overflow=C:l.overflow=null,n.height=D}else if(o.fixedHeight){c.scalable=!1;var N=o.fixedHeight-v-(y-m.bottom)-(E?g:0);I.visual>N?l.overflow=N:l.overflow=null}else if(o.cappedHeight){var G=R>=o.cappedHeight,x=Math.min(o.cappedHeight,R);c.scalable=!0,c.height=G?x:x-m.top-m.bottom;var F=x-v-(y-m.bottom)-(E?g:0);R>o.cappedHeight&&I.visual>F?l.overflow=F:l.overflow=null,n.height=Math.min(o.cappedHeight,O-m.top-m.bottom)}else{var V=p>0?m.top+m.bottom:0;c.scalable=!0,c.height=Math.max(T,R-V),n.height=Math.max(T,O-V)}n.ref.credits&&c.heightCurrent&&(n.ref.credits.style.transform="translateY("+c.heightCurrent+"px)")}},destroy:function(e){var n=e.root;n.ref.paster&&n.ref.paster.destroy(),n.ref.hopper&&n.ref.hopper.destroy(),n.element.removeEventListener("touchmove",Ir),n.element.removeEventListener("gesturestart",Ir)},mixins:{styles:["height"]}}),Dr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=null,o=me(),a=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=Object.assign({},e),o=[],a=[],s=function(e,n,r){!r||document.hidden?(f[e]&&f[e](n),o.push({type:e,data:n})):a.push({type:e,data:n})},u=function(e){for(var n,r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return c[e]?(n=c)[e].apply(n,i):null},l={getState:function(){return Object.assign({},i)},processActionQueue:function(){var e=[].concat(o);return o.length=0,e},processDispatchQueue:function(){var e=[].concat(a);a.length=0,e.forEach((function(e){var n=e.type,r=e.data;s(n,r)}))},dispatch:s,query:u},c={};n.forEach((function(e){c=Object.assign({},e(i),{},c)}));var f={};return r.forEach((function(e){f=Object.assign({},e(s,u,i),{},f)})),l}({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:z(o)},[Me,Z(o)],[pt,X(o)]);a.dispatch("SET_OPTIONS",{options:e});var s=function(){document.hidden||a.dispatch("KICK")};document.addEventListener("visibilitychange",s);var u=null,l=!1,c=!1,f=null,d=null,p=function(){l||(l=!0),clearTimeout(u),u=setTimeout((function(){l=!1,f=null,d=null,c&&(c=!1,a.dispatch("DID_STOP_RESIZE"))}),500)};window.addEventListener("resize",p);var E=Ar(a,{id:Q()}),_=!1,m=!1,I={_read:function(){l&&(d=window.innerWidth,f||(f=d),c||d===f||(a.dispatch("DID_START_RESIZE"),c=!0)),m&&_&&(_=null===E.element.offsetParent),_||(E._read(),m=E.rect.element.hidden)},_write:function(e){var n,r=a.processActionQueue().filter((function(e){return!/^SET_/.test(e.type)}));_&&!r.length||(y(r),_=E._write(e,r,c),(n=a.query("GET_ITEMS")).forEach((function(e,r){e.released&&re(n,r)})),_&&a.processDispatchQueue())}},T=function(e){return function(n){var r={type:e};if(!n)return r;if(n.hasOwnProperty("error")&&(r.error=n.error?Object.assign({},n.error):null),n.status&&(r.status=Object.assign({},n.status)),n.file&&(r.output=n.file),n.source)r.file=n.source;else if(n.item||n.id){var i=n.item?n.item:a.query("GET_ITEM",n.id);r.file=i?se(i):null}return n.items&&(r.items=n.items.map(se)),/progress/.test(e)&&(r.progress=n.progress),n.hasOwnProperty("origin")&&n.hasOwnProperty("target")&&(r.origin=n.origin,r.target=n.target),r}},v={DID_DESTROY:T("destroy"),DID_INIT:T("init"),DID_THROW_MAX_FILES:T("warning"),DID_INIT_ITEM:T("initfile"),DID_START_ITEM_LOAD:T("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:T("addfileprogress"),DID_LOAD_ITEM:T("addfile"),DID_THROW_ITEM_INVALID:[T("error"),T("addfile")],DID_THROW_ITEM_LOAD_ERROR:[T("error"),T("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[T("error"),T("removefile")],DID_PREPARE_OUTPUT:T("preparefile"),DID_START_ITEM_PROCESSING:T("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:T("processfileprogress"),DID_ABORT_ITEM_PROCESSING:T("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:T("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:T("processfiles"),DID_REVERT_ITEM_PROCESSING:T("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[T("error"),T("processfile")],DID_REMOVE_ITEM:T("removefile"),DID_UPDATE_ITEMS:T("updatefiles"),DID_ACTIVATE_ITEM:T("activatefile"),DID_REORDER_ITEMS:T("reorderfiles")},g=function(e){var n=Object.assign({pond:M},e);delete n.type,E.element.dispatchEvent(new CustomEvent("FilePond:"+e.type,{detail:n,bubbles:!0,cancelable:!0,composed:!0}));var r=[];e.hasOwnProperty("error")&&r.push(e.error),e.hasOwnProperty("file")&&r.push(e.file);var i=["type","error","file"];Object.keys(e).filter((function(e){return!i.includes(e)})).forEach((function(n){return r.push(e[n])})),M.fire.apply(M,[e.type].concat(r));var o=a.query("GET_ON"+e.type.toUpperCase());o&&o.apply(void 0,r)},y=function(e){e.length&&e.filter((function(e){return v[e.type]})).forEach((function(e){var n=v[e.type];(Array.isArray(n)?n:[n]).forEach((function(n){"DID_INIT_ITEM"===e.type?g(n(e.data)):setTimeout((function(){g(n(e.data))}),0)}))}))},R=function(e){return new Promise((function(n,r){a.dispatch("REQUEST_ITEM_PREPARE",{query:e,success:function(e){n(e)},failure:function(e){r(e)}})}))},O=function(e,n){var r;return"object"!=typeof e||(r=e).file&&r.id||n||(n=e,e=void 0),a.dispatch("REMOVE_ITEM",Object.assign({},n,{query:e})),null===a.query("GET_ACTIVE_ITEM",e)},A=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new Promise((function(e,r){var i=[],o={};if(w(n[0]))i.push.apply(i,n[0]),Object.assign(o,n[1]||{});else{var s=n[n.length-1];"object"!=typeof s||s instanceof Blob||Object.assign(o,n.pop()),i.push.apply(i,n)}a.dispatch("ADD_ITEMS",{items:i,index:o.index,interactionMethod:1,success:e,failure:r})}))},L=function(){return a.query("GET_ACTIVE_ITEMS")},P=function(e){return new Promise((function(n,r){a.dispatch("REQUEST_ITEM_PROCESSING",{query:e,success:function(e){n(e)},failure:function(e){r(e)}})}))},M=Object.assign({},ie(),{},I,{},function(e,r){var i={};return n(r,(function(n){i[n]={get:function(){return e.getState().options[n]},set:function(r){e.dispatch("SET_"+j(n,"_").toUpperCase(),{value:r})}}})),i}(a,o),{setOptions:function(e){return a.dispatch("SET_OPTIONS",{options:e})},addFile:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(r,i){A([{source:e,options:n}],{index:n.index}).then((function(e){return r(e&&e[0])})).catch(i)}))},addFiles:A,getFile:function(e){return a.query("GET_ACTIVE_ITEM",e)},processFile:P,prepareFile:R,removeFile:O,moveFile:function(e,n){return a.dispatch("MOVE_ITEM",{query:e,index:n})},getFiles:L,processFiles:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=Array.isArray(n[0])?n[0]:n;if(!i.length){var o=L().filter((function(e){return!(e.status===ue.IDLE&&e.origin===le.LOCAL)&&e.status!==ue.PROCESSING&&e.status!==ue.PROCESSING_COMPLETE&&e.status!==ue.PROCESSING_REVERT_ERROR}));return Promise.all(o.map(P))}return Promise.all(i.map(P))},removeFiles:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i,o=Array.isArray(n[0])?n[0]:n;"object"==typeof o[o.length-1]?i=o.pop():Array.isArray(n[0])&&(i=n[1]);var a=L();return o.length?o.map((function(e){return h(e)?a[e]?a[e].id:null:e})).filter((function(e){return e})).map((function(e){return O(e,i)})):Promise.all(a.map((function(e){return O(e,i)})))},prepareFiles:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=Array.isArray(n[0])?n[0]:n,o=i.length?i:L();return Promise.all(o.map(R))},sort:function(e){return a.dispatch("SORT",{compare:e})},browse:function(){var e=E.element.querySelector("input[type=file]");e&&e.click()},destroy:function(){M.fire("destroy",E.element),a.dispatch("ABORT_ALL"),E._destroy(),window.removeEventListener("resize",p),document.removeEventListener("visibilitychange",s),a.dispatch("DID_DESTROY")},insertBefore:function(e){return D(E.element,e)},insertAfter:function(e){return S(E.element,e)},appendTo:function(e){return e.appendChild(E.element)},replaceElement:function(e){D(E.element,e),e.parentNode.removeChild(e),i=e},restoreElement:function(){i&&(S(i,E.element),E.element.parentNode.removeChild(E.element),i=null)},isAttachedTo:function(e){return E.element===e||i===e},element:{get:function(){return E.element}},status:{get:function(){return a.query("GET_STATUS")}}});return a.dispatch("DID_INIT"),r(M)},Sr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};return n(me(),(function(e,n){r[e]=n[0]})),Dr(Object.assign({},r,{},e))},wr=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=[];n(e.attributes,(function(n){o.push(e.attributes[n])}));var a=o.filter((function(e){return e.name})).reduce((function(n,r){var o,a=i(e,r.name);return n[(o=r.name,hr(o.replace(/^data-/,"")))]=a===r.name||a,n}),{});return function e(r,i){n(i,(function(i,o){n(r,(function(e,n){var a=new RegExp(i);if(a.test(e)&&(delete r[e],!1!==o))if(N(o))r[o]=n;else{var s,u=o.group;k(o)&&!r[u]&&(r[u]={}),r[u][(s=e.replace(a,""),s.charAt(0).toLowerCase()+s.slice(1))]=n}})),o.mapping&&e(r[o.group],o.mapping)}))}(a,r),a},Lr=function(){return(arguments.length<=0?void 0:arguments[0])instanceof HTMLElement?function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};_e("SET_ATTRIBUTE_TO_OPTION_MAP",r);var i=Object.assign({},n),o=wr("FIELDSET"===e.nodeName?e.querySelector("input[type=file]"):e,r);Object.keys(o).forEach((function(e){k(o[e])?(k(i[e])||(i[e]={}),Object.assign(i[e],o[e])):i[e]=o[e]})),i.files=(n.files||[]).concat(Array.from(e.querySelectorAll("input:not([type=file])")).map((function(e){return{source:e.value,options:{type:e.dataset.type}}})));var a=Sr(i);return e.files&&Array.from(e.files).forEach((function(e){a.addFile(e)})),a.replaceElement(e),a}.apply(void 0,arguments):Sr.apply(void 0,arguments)},Pr=["fire","_read","_write"],Mr=function(e){var n={};return oe(e,n,Pr),n},br=function(e,n){return e.replace(/(?:{([a-zA-Z]+)})/g,(function(e,r){return n[r]}))},Cr=function(e){var n=new Blob(["(",e.toString(),")()"],{type:"application/javascript"}),r=URL.createObjectURL(n),i=new Worker(r);return{transfer:function(e,n){},post:function(e,n,r){var o=Q();i.onmessage=function(e){e.data.id===o&&n(e.data.message)},i.postMessage({id:o,message:e},r)},terminate:function(){i.terminate(),URL.revokeObjectURL(r)}}},Nr=function(e){return new Promise((function(n,r){var i=new Image;i.onload=function(){n(i)},i.onerror=function(e){r(e)},i.src=e}))},Gr=function(e,n){var r=e.slice(0,e.size,e.type);return r.lastModifiedDate=e.lastModifiedDate,r.name=n,r},xr=function(e){return Gr(e,e.name)},Fr=[],Vr=function(e){var r;Fr.includes(e)||(Fr.push(e),r=e({addFilter:he,utils:{Type:de,forin:n,isString:N,isFile:rt,toNaturalFileSize:vt,replaceInString:br,getExtensionFromFilename:Ge,getFilenameWithoutExtension:nt,guesstimateMimeType:Cn,getFileFromBlob:Ve,getFilenameFromURL:Ne,createRoute:A,createWorker:Cr,createView:O,createItemAPI:se,loadImage:Nr,copyFile:xr,renameFile:Gr,createBlob:Ue,applyFilterChain:Ee,text:ht,getNumericAspectRatioFromString:ve},views:{fileActionButton:Tt}}).options,Object.assign(Ie,r))},Ur=(bt=f()&&!("[object OperaMini]"===Object.prototype.toString.call(window.operamini))&&"visibilityState"in document&&"Promise"in window&&"slice"in Blob.prototype&&"URL"in window&&"createObjectURL"in window.URL&&"performance"in window&&("supports"in(window.CSS||{})||/MSIE|Trident/.test(window.navigator.userAgent)),function(){return bt}),Br={apps:[]},qr=function(){};if(e.Status={},e.FileStatus={},e.FileOrigin={},e.OptionTypes={},e.create=qr,e.destroy=qr,e.parse=qr,e.find=qr,e.registerPlugin=qr,e.getOptions=qr,e.setOptions=qr,Ur()){!function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,i="__framePainter";if(window[i])return window[i].readers.push(e),void window[i].writers.push(n);window[i]={readers:[e],writers:[n]};var o=window[i],a=1e3/r,s=null,u=null,l=null,c=null,f=function(){document.hidden?(l=function(){return window.setTimeout((function(){return d(performance.now())}),a)},c=function(){return window.clearTimeout(u)}):(l=function(){return window.requestAnimationFrame(d)},c=function(){return window.cancelAnimationFrame(u)})};document.addEventListener("visibilitychange",(function(){c&&c(),f(),d(performance.now())}));var d=function e(n){u=l(e),s||(s=n);var r=n-s;r<=a||(s=n-r%a,o.readers.forEach((function(e){return e()})),o.writers.forEach((function(e){return e(n)})))};f(),d(performance.now())}((function(){Br.apps.forEach((function(e){return e._read()}))}),(function(e){Br.apps.forEach((function(n){return n._write(e)}))}));var kr=function n(){document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Ur,create:e.create,destroy:e.destroy,parse:e.parse,find:e.find,registerPlugin:e.registerPlugin,setOptions:e.setOptions}})),document.removeEventListener("DOMContentLoaded",n)};"loading"!==document.readyState?setTimeout((function(){return kr()}),0):document.addEventListener("DOMContentLoaded",kr);var Yr=function(){return n(me(),(function(n,r){e.OptionTypes[n]=r[1]}))};e.Status=Object.assign({},ye),e.FileOrigin=Object.assign({},le),e.FileStatus=Object.assign({},ue),e.OptionTypes={},Yr(),e.create=function(){var n=Lr.apply(void 0,arguments);return n.on("destroy",e.destroy),Br.apps.push(n),Mr(n)},e.destroy=function(e){var n=Br.apps.findIndex((function(n){return n.isAttachedTo(e)}));return n>=0&&(Br.apps.splice(n,1)[0].restoreElement(),!0)},e.parse=function(n){return Array.from(n.querySelectorAll(".filepond")).filter((function(e){return!Br.apps.find((function(n){return n.isAttachedTo(e)}))})).map((function(n){return e.create(n)}))},e.find=function(e){var n=Br.apps.find((function(n){return n.isAttachedTo(e)}));return n?Mr(n):null},e.registerPlugin=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(Vr),Yr()},e.getOptions=function(){var e={};return n(me(),(function(n,r){e[n]=r[0]})),e},e.setOptions=function(r){return k(r)&&(Br.apps.forEach((function(e){e.setOptions(r)})),function(e){n(e,(function(e,n){Ie[e]&&(Ie[e][0]=H(n,Ie[e][0],Ie[e][1]))}))}(r)),e.getOptions()}}e.supported=Ur,Object.defineProperty(e,"__esModule",{value:!0})})),function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).FilePondPluginFileValidateSize=n()}(this,(function(){"use strict";var e=function(e){var n=e.addFilter,r=e.utils,i=r.Type,o=r.replaceInString,a=r.toNaturalFileSize;return n("ALLOW_HOPPER_ITEM",(function(e,n){var r=n.query;if(!r("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;var i=r("GET_MAX_FILE_SIZE");if(null!==i&&e.size>i)return!1;var o=r("GET_MIN_FILE_SIZE");return!(null!==o&&e.size<o)})),n("LOAD_FILE",(function(e,n){var r=n.query;return new Promise((function(n,i){if(!r("GET_ALLOW_FILE_SIZE_VALIDATION"))return n(e);var s=r("GET_FILE_VALIDATE_SIZE_FILTER");if(s&&!s(e))return n(e);var u=r("GET_MAX_FILE_SIZE");if(null!==u&&e.size>u)i({status:{main:r("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:o(r("GET_LABEL_MAX_FILE_SIZE"),{filesize:a(u,".",r("GET_FILE_SIZE_BASE"),r("GET_FILE_SIZE_LABELS",r))})}});else{var l=r("GET_MIN_FILE_SIZE");if(null!==l&&e.size<l)i({status:{main:r("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:o(r("GET_LABEL_MIN_FILE_SIZE"),{filesize:a(l,".",r("GET_FILE_SIZE_BASE"),r("GET_FILE_SIZE_LABELS",r))})}});else{var c=r("GET_MAX_TOTAL_FILE_SIZE");if(null!==c&&r("GET_ACTIVE_ITEMS").reduce((function(e,n){return e+n.fileSize}),0)>c)return void i({status:{main:r("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:o(r("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:a(c,".",r("GET_FILE_SIZE_BASE"),r("GET_FILE_SIZE_LABELS",r))})}});n(e)}}}))})),{options:{allowFileSizeValidation:[!0,i.BOOLEAN],maxFileSize:[null,i.INT],minFileSize:[null,i.INT],maxTotalFileSize:[null,i.INT],fileValidateSizeFilter:[null,i.FUNCTION],labelMinFileSizeExceeded:["File is too small",i.STRING],labelMinFileSize:["Minimum file size is {filesize}",i.STRING],labelMaxFileSizeExceeded:["File is too large",i.STRING],labelMaxFileSize:["Maximum file size is {filesize}",i.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",i.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",i.STRING]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e})),function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).FilePondPluginFileValidateType=n()}(this,(function(){"use strict";var e=function(e){var n=e.addFilter,r=e.utils,i=r.Type,o=r.isString,a=r.replaceInString,s=r.guesstimateMimeType,u=r.getExtensionFromFilename,l=r.getFilenameFromURL,c=function(e,n){return e.some((function(e){return/\*$/.test(e)?(r=e,(/^[^/]+/.exec(n)||[]).pop()===r.slice(0,-2)):e===n;var r}))},f=function(e,n,r){if(0===n.length)return!0;var i=function(e){var n="";if(o(e)){var r=l(e),i=u(r);i&&(n=s(i))}else n=e.type;return n}(e);return r?new Promise((function(o,a){r(e,i).then((function(e){c(n,e)?o():a()})).catch(a)})):c(n,i)};return n("SET_ATTRIBUTE_TO_OPTION_MAP",(function(e){return Object.assign(e,{accept:"acceptedFileTypes"})})),n("ALLOW_HOPPER_ITEM",(function(e,n){var r=n.query;return!r("GET_ALLOW_FILE_TYPE_VALIDATION")||f(e,r("GET_ACCEPTED_FILE_TYPES"))})),n("LOAD_FILE",(function(e,n){var r=n.query;return new Promise((function(n,i){if(r("GET_ALLOW_FILE_TYPE_VALIDATION")){var o=r("GET_ACCEPTED_FILE_TYPES"),s=r("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),u=f(e,o,s),l=function(){var e,n=o.map((e=r("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"),function(n){return null!==e[n]&&(e[n]||n)})).filter((function(e){return!1!==e})),s=n.filter((function(e,r){return n.indexOf(e)===r}));i({status:{main:r("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:a(r("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:s.join(", "),allButLastType:s.slice(0,-1).join(", "),lastType:s[n.length-1]})}})};if("boolean"==typeof u)return u?n(e):l();u.then((function(){n(e)})).catch(l)}else n(e)}))})),{options:{allowFileTypeValidation:[!0,i.BOOLEAN],acceptedFileTypes:[[],i.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",i.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",i.STRING],fileValidateTypeLabelExpectedTypesMap:[{},i.OBJECT],fileValidateTypeDetectType:[null,i.FUNCTION]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:e})),e})),function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).FilePondPluginFilePoster=n()}(this,(function(){"use strict";var e={type:"spring",stiffness:.5,damping:.45,mass:10},n=function(e){return-.5*(Math.cos(Math.PI*e)-1)},r=function(e){var n=Math.min(10/e.width,10/e.height),r=document.createElement("canvas"),o=r.getContext("2d"),a=r.width=Math.ceil(e.width*n),s=r.height=Math.ceil(e.height*n);o.drawImage(e,0,0,a,s);var u=null;try{u=o.getImageData(0,0,a,s).data}catch(e){return null}for(var l=u.length,c=0,f=0,d=0,p=0;p<l;p+=4)c+=u[p]*u[p],f+=u[p+1]*u[p+1],d+=u[p+2]*u[p+2];return{r:c=i(c,l),g:f=i(f,l),b:d=i(d,l)}},i=function(e,n){return Math.floor(Math.sqrt(e/(n/4)))},o=function(e,r,i,o,a){e.width=r,e.height=i;var s=e.getContext("2d"),u=.5*r,l=s.createRadialGradient(u,i+110,i-100,u,i+110,i+100);!function(e,r){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:10,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,u=1-s,l=r.join(","),c=0;c<=a;c++){var f=c/a,d=s+u*f;e.addColorStop(d,"rgba(".concat(l,", ").concat(o(f)*i,")"))}}(l,o,a,void 0,8,.4),s.save(),s.translate(.5*-r,0),s.scale(2,1),s.fillStyle=l,s.fillRect(0,0,r,i),s.restore()},a="undefined"!=typeof navigator,s=a&&document.createElement("canvas"),u=a&&document.createElement("canvas"),l=a&&document.createElement("canvas"),c=[40,40,40],f=[196,78,71],d=[54,151,99];a&&(o(s,500,200,c,.85),o(u,500,200,f,1),o(l,500,200,d,1));var p=function(n){var i=n.utils.createView({name:"file-poster-overlay",tag:"canvas",ignoreRect:!0,create:function(e){var n,r,i=e.root;n=e.props.template,(r=i.element).width=n.width,r.height=n.height,r.getContext("2d").drawImage(n,0,0)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),a=function(e){var n=e.root;n.ref.overlayShadow.opacity=1,n.ref.overlayError.opacity=0,n.ref.overlaySuccess.opacity=0},p=function(e){var n=e.root;n.ref.overlayShadow.opacity=.25,n.ref.overlayError.opacity=1};return n.utils.createView({name:"file-poster-wrapper",create:function(r){var a=r.root,p=r.props,E=a.query("GET_FILE_POSTER_ITEM_OVERLAY_SHADOW_COLOR"),_=a.query("GET_FILE_POSTER_ITEM_OVERLAY_ERROR_COLOR"),h=a.query("GET_FILE_POSTER_ITEM_OVERLAY_SUCCESS_COLOR");E&&E!==c&&o(s,500,200,c=E,.85),_&&_!==f&&o(u,500,200,f=_,1),h&&h!==d&&o(l,500,200,d=h,1);var m=function(n){return n.utils.createView({name:"file-poster",tag:"div",ignoreRect:!0,create:function(e){var n=e.root;n.ref.image=document.createElement("img"),n.element.appendChild(n.ref.image)},write:n.utils.createRoute({DID_FILE_POSTER_LOAD:function(e){var n=e.root,r=e.props,i=r.id,o=n.query("GET_ITEM",{id:r.id});if(o){var a=o.getMetadata("poster");n.ref.image.src=a,n.dispatch("DID_FILE_POSTER_DRAW",{id:i})}}}),mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:e,scaleY:e,opacity:{type:"tween",duration:750}}}})}(n);a.ref.image=a.appendChildView(a.createChildView(m,{id:p.id,scaleX:1.25,scaleY:1.25,opacity:0})),a.ref.overlayShadow=a.appendChildView(a.createChildView(i,{template:s,opacity:0})),a.ref.overlaySuccess=a.appendChildView(a.createChildView(i,{template:l,opacity:0})),a.ref.overlayError=a.appendChildView(a.createChildView(i,{template:u,opacity:0}))},write:n.utils.createRoute({DID_FILE_POSTER_LOAD:function(e){e.root.ref.overlayShadow.opacity=1},DID_FILE_POSTER_DRAW:function(e){var n=e.root.ref.image;n.scaleX=1,n.scaleY=1,n.opacity=1},DID_FILE_POSTER_CONTAINER_CREATE:function(e){var n=e.root,i=e.props.id,o=n.query("GET_ITEM",i);if(o){var a,s,u,l=o.getMetadata("poster"),c=function(e){var a=n.query("GET_FILE_POSTER_CALCULATE_AVERAGE_IMAGE_COLOR")?r(e):null;o.setMetadata("color",a,!0),n.dispatch("DID_FILE_POSTER_LOAD",{id:i,data:e})};a=l,s=function(e,r){var o,a;n.dispatch("DID_FILE_POSTER_CALCULATE_SIZE",{id:i,width:e,height:r}),(o=l,a=n.query("GET_FILE_POSTER_CROSS_ORIGIN_ATTRIBUTE_VALUE"),new Promise((function(e,n){var r=new Image;"string"==typeof crossOrigin&&(r.crossOrigin=a),r.onload=function(){e(r)},r.onerror=function(e){n(e)},r.src=o}))).then(c)},(u=new Image).onload=function(){var e=u.naturalWidth,n=u.naturalHeight;u=null,s(e,n)},u.src=a}},DID_THROW_ITEM_LOAD_ERROR:p,DID_THROW_ITEM_PROCESSING_ERROR:p,DID_THROW_ITEM_INVALID:p,DID_COMPLETE_ITEM_PROCESSING:function(e){var n=e.root;n.ref.overlayShadow.opacity=.25,n.ref.overlaySuccess.opacity=1},DID_START_ITEM_PROCESSING:a,DID_REVERT_ITEM_PROCESSING:a})})},E=function(e){var n=e.addFilter,r=e.utils,i=r.Type,o=r.createRoute,a=p(e);return n("CREATE_VIEW",(function(e){var n=e.is,r=e.view,i=e.query;if(n("file")&&i("GET_ALLOW_FILE_POSTER")){var s=function(e,n){var o=n.id,s=i("GET_ITEM",o);s&&s.getMetadata("poster")&&!s.archived&&e.ref.previousPoster!==s.getMetadata("poster")&&(e.ref.previousPoster=s.getMetadata("poster"),i("GET_FILE_POSTER_FILTER_ITEM")(s)&&(e.ref.filePoster&&r.removeChildView(e.ref.filePoster),e.ref.filePoster=r.appendChildView(r.createChildView(a,{id:o})),e.dispatch("DID_FILE_POSTER_CONTAINER_CREATE",{id:o})))},u=function(e){var n=e.root,r=n.query("GET_FILE_POSTER_HEIGHT");if(r)return r;var i=n.query("GET_FILE_POSTER_MIN_HEIGHT"),o=n.query("GET_FILE_POSTER_MAX_HEIGHT");if(i&&n.ref.imageHeight<i)return i;var a=n.rect.element.width*(n.ref.imageHeight/n.ref.imageWidth);return i&&a<i?i:o&&a>o?o:a};r.registerWriter(o({DID_LOAD_ITEM:function(e){var n=e.root,r=e.props;s(n,r)},DID_FILE_POSTER_CALCULATE_SIZE:function(e){var n=e.root,r=e.action;n.ref.filePoster&&(n.ref.imageWidth=r.width,n.ref.imageHeight=r.height,n.ref.shouldUpdatePanelHeight=!0,n.dispatch("KICK"))},DID_UPDATE_ITEM_METADATA:function(e){var n=e.root,r=e.props,i=e.action;/poster/.test(i.change.key)&&s(n,r)}},(function(e){var n=e.root,r=e.props;n.ref.filePoster&&(n.rect.element.hidden||n.ref.shouldUpdatePanelHeight&&(n.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:r.id,height:u({root:n})}),n.ref.shouldUpdatePanelHeight=!1))})))}})),{options:{allowFilePoster:[!0,i.BOOLEAN],filePosterHeight:[null,i.INT],filePosterMinHeight:[null,i.INT],filePosterMaxHeight:[null,i.INT],filePosterFilterItem:[function(){return!0},i.FUNCTION],filePosterCalculateAverageImageColor:[!1,i.BOOLEAN],filePosterCrossOriginAttributeValue:["Anonymous",i.STRING],filePosterItemOverlayShadowColor:[null,i.ARRAY],filePosterItemOverlayErrorColor:[null,i.ARRAY],filePosterItemOverlaySuccessColor:[null,i.ARRAY]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:E})),E})),function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).FilePondPluginImagePreview=n()}(this,(function(){"use strict";function e(e){this.wrapped=e}function n(n){var r,i;function o(r,i){try{var s=n[r](i),u=s.value,l=u instanceof e;Promise.resolve(l?u.wrapped:u).then((function(e){l?o("next",e):a(s.done?"return":"normal",e)}),(function(e){o("throw",e)}))}catch(e){a("throw",e)}}function a(e,n){switch(e){case"return":r.resolve({value:n,done:!0});break;case"throw":r.reject(n);break;default:r.resolve({value:n,done:!1})}(r=r.next)?o(r.key,r.arg):i=null}this._invoke=function(e,n){return new Promise((function(a,s){var u={key:e,arg:n,resolve:a,reject:s,next:null};i?i=i.next=u:(r=i=u,o(e,n))}))},"function"!=typeof n.return&&(this.return=void 0)}function r(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],i=!0,o=!1,a=void 0;try{for(var s,u=e[Symbol.iterator]();!(i=(s=u.next()).done)&&(r.push(s.value),!n||r.length!==n);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}"function"==typeof Symbol&&Symbol.asyncIterator&&(n.prototype[Symbol.asyncIterator]=function(){return this}),n.prototype.next=function(e){return this._invoke("next",e)},n.prototype.throw=function(e){return this._invoke("throw",e)},n.prototype.return=function(e){return this._invoke("return",e)};var i=function(e,n){return s(e.x*n,e.y*n)},o=function(e,n){return s(e.x+n.x,e.y+n.y)},a=function(e,n,r){var i=Math.cos(n),o=Math.sin(n),a=s(e.x-r.x,e.y-r.y);return s(r.x+i*a.x-o*a.y,r.y+o*a.x+i*a.y)},s=function(){return{x:arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,y:arguments.length>1&&void 0!==arguments[1]?arguments[1]:0}},u=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0;return"string"==typeof e?parseFloat(e)*r:"number"==typeof e?e*(i?n[i]:Math.min(n.width,n.height)):void 0},l=function(e){return null!=e},c=function(e,n){return Object.keys(n).forEach((function(r){return e.setAttribute(r,n[r])}))},f=function(e,n){var r=document.createElementNS("http://www.w3.org/2000/svg",e);return n&&c(r,n),r},d={contain:"xMidYMid meet",cover:"xMidYMid slice"},p={left:"start",center:"middle",right:"end"},E=function(e){return function(n){return f(e,{id:n.id})}},_={image:function(e){var n=f("image",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round",opacity:"0"});return n.onload=function(){n.setAttribute("opacity",e.opacity||1)},n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",e.src),n},rect:E("rect"),ellipse:E("ellipse"),text:E("text"),path:E("path"),line:function(e){var n=f("g",{id:e.id,"stroke-linecap":"round","stroke-linejoin":"round"}),r=f("line");n.appendChild(r);var i=f("path");n.appendChild(i);var o=f("path");return n.appendChild(o),n}},h={rect:function(e){return c(e,Object.assign({},e.rect,e.styles))},ellipse:function(e){var n=e.rect.x+.5*e.rect.width,r=e.rect.y+.5*e.rect.height,i=.5*e.rect.width,o=.5*e.rect.height;return c(e,Object.assign({cx:n,cy:r,rx:i,ry:o},e.styles))},image:function(e,n){c(e,Object.assign({},e.rect,e.styles,{preserveAspectRatio:d[n.fit]||"none"}))},text:function(e,n,r,i){var o=u(n.fontSize,r,i),a=n.fontFamily||"sans-serif",s=n.fontWeight||"normal",l=p[n.textAlign]||"start";c(e,Object.assign({},e.rect,e.styles,{"stroke-width":0,"font-weight":s,"font-size":o,"font-family":a,"text-anchor":l})),e.text!==n.text&&(e.text=n.text,e.textContent=n.text.length?n.text:" ")},path:function(e,n,r,i){var o;c(e,Object.assign({},e.styles,{fill:"none",d:(o=n.points.map((function(e){return{x:u(e.x,r,i,"width"),y:u(e.y,r,i,"height")}})),o.map((function(e,n){return"".concat(0===n?"M":"L"," ").concat(e.x," ").concat(e.y)})).join(" "))}))},line:function(e,n,r,l){c(e,Object.assign({},e.rect,e.styles,{fill:"none"}));var f=e.childNodes[0],d=e.childNodes[1],p=e.childNodes[2],E=e.rect,_={x:e.rect.x+e.rect.width,y:e.rect.y+e.rect.height};if(c(f,{x1:E.x,y1:E.y,x2:_.x,y2:_.y}),n.lineDecoration){d.style.display="none",p.style.display="none";var h=function(e){var n=Math.sqrt(e.x*e.x+e.y*e.y);return 0===n?{x:0,y:0}:s(e.x/n,e.y/n)}({x:_.x-E.x,y:_.y-E.y}),m=u(.05,r,l);if(-1!==n.lineDecoration.indexOf("arrow-begin")){var I=i(h,m),T=o(E,I),v=a(E,2,T),g=a(E,-2,T);c(d,{style:"display:block;",d:"M".concat(v.x,",").concat(v.y," L").concat(E.x,",").concat(E.y," L").concat(g.x,",").concat(g.y)})}if(-1!==n.lineDecoration.indexOf("arrow-end")){var y=i(h,-m),R=o(_,y),O=a(_,2,R),A=a(_,-2,R);c(p,{style:"display:block;",d:"M".concat(O.x,",").concat(O.y," L").concat(_.x,",").concat(_.y," L").concat(A.x,",").concat(A.y)})}}}},m=function(e,n,r,i,o){"path"!==n&&(e.rect=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=u(e.x,n,r,"width")||u(e.left,n,r,"width"),o=u(e.y,n,r,"height")||u(e.top,n,r,"height"),a=u(e.width,n,r,"width"),s=u(e.height,n,r,"height"),c=u(e.right,n,r,"width"),f=u(e.bottom,n,r,"height");return l(o)||(o=l(s)&&l(f)?n.height-s-f:f),l(i)||(i=l(a)&&l(c)?n.width-a-c:c),l(a)||(a=l(i)&&l(c)?n.width-i-c:0),l(s)||(s=l(o)&&l(f)?n.height-o-f:0),{x:i||0,y:o||0,width:a||0,height:s||0}}(r,i,o)),e.styles=function(e,n,r){var i=e.borderStyle||e.lineStyle||"solid",o=e.backgroundColor||e.fontColor||"transparent",a=e.borderColor||e.lineColor||"transparent",s=u(e.borderWidth||e.lineWidth,n,r);return{"stroke-linecap":e.lineCap||"round","stroke-linejoin":e.lineJoin||"round","stroke-width":s||0,"stroke-dasharray":"string"==typeof i?"":i.map((function(e){return u(e,n,r)})).join(","),stroke:a,fill:o,opacity:e.opacity||1}}(r,i,o),h[n](e,r,i,o)},I=["x","y","left","top","right","bottom","width","height"],T=function(e){var n=r(e,2),i=n[0],o=n[1],a=o.points?{}:I.reduce((function(e,n){var r;return e[n]="string"==typeof(r=o[n])&&/%/.test(r)?parseFloat(r)/100:r,e}),{});return[i,Object.assign({zIndex:0},o,a)]},v=function(e,n){return e[1].zIndex>n[1].zIndex?1:e[1].zIndex<n[1].zIndex?-1:0},g=function(e){return e.utils.createView({name:"image-preview-markup",tag:"svg",ignoreRect:!0,mixins:{apis:["width","height","crop","markup","resize","dirty"]},write:function(e){var n=e.root,i=e.props;if(i.dirty){var o=i.crop,a=i.resize,s=i.markup,u=i.width,l=i.height,c=o.width,f=o.height;if(a){var d=a.size,p=d&&d.width,E=d&&d.height,h=a.mode,I=a.upscale;p&&!E&&(E=p),E&&!p&&(p=E);var g=c<p&&f<E;if(!g||g&&I){var y,R=p/c,O=E/f;"force"===h?(c=p,f=E):("cover"===h?y=Math.max(R,O):"contain"===h&&(y=Math.min(R,O)),c*=y,f*=y)}}var A={width:u,height:l};n.element.setAttribute("width",A.width),n.element.setAttribute("height",A.height);var D=Math.min(u/c,l/f);n.element.innerHTML="";var S=n.query("GET_IMAGE_PREVIEW_MARKUP_FILTER");s.filter(S).map(T).sort(v).forEach((function(e){var i=r(e,2),o=i[0],a=i[1],s=function(e,n){return _[e](n)}(o,a);m(s,o,a,A,D),n.element.appendChild(s)}))}}})},y=function(e,n){return{x:e,y:n}},R=function(e,n){return y(e.x-n.x,e.y-n.y)},O=function(e,n){return Math.sqrt(function(e,n){return function(e,n){return e.x*n.x+e.y*n.y}(R(e,n),R(e,n))}(e,n))},A=function(e,n){var r=e,i=n,o=1.5707963267948966-n,a=Math.sin(1.5707963267948966),s=Math.sin(i),u=Math.sin(o),l=Math.cos(o),c=r/a;return y(l*(c*s),l*(c*u))},D=function(e,n,r,i){var o=i.x>.5?1-i.x:i.x,a=i.y>.5?1-i.y:i.y,s=2*o*e.width,u=2*a*e.height,l=function(e,n){var r=e.width,i=e.height,o=A(r,n),a=A(i,n),s=y(e.x+Math.abs(o.x),e.y-Math.abs(o.y)),u=y(e.x+e.width+Math.abs(a.y),e.y+Math.abs(a.x)),l=y(e.x-Math.abs(a.y),e.y+e.height-Math.abs(a.x));return{width:O(s,u),height:O(s,l)}}(n,r);return Math.max(l.width/s,l.height/u)},S=function(e,n){var r=e.width,i=r*n;return i>e.height&&(r=(i=e.height)/n),{x:.5*(e.width-r),y:.5*(e.height-i),width:r,height:i}},w={type:"spring",stiffness:.5,damping:.45,mass:10},L=function(e){return e.utils.createView({name:"image-clip",tag:"div",ignoreRect:!0,mixins:{apis:["crop","markup","resize","width","height","dirty","background"],styles:["width","height","opacity"],animations:{opacity:{type:"tween",duration:250}}},didWriteView:function(e){var n=e.root,r=e.props;r.background&&(n.element.style.backgroundColor=r.background)},create:function(n){var r=n.root,i=n.props;r.ref.image=r.appendChildView(r.createChildView(function(e){return e.utils.createView({name:"image-canvas-wrapper",tag:"div",ignoreRect:!0,mixins:{apis:["crop","width","height"],styles:["originX","originY","translateX","translateY","scaleX","scaleY","rotateZ"],animations:{originX:w,originY:w,scaleX:w,scaleY:w,translateX:w,translateY:w,rotateZ:w}},create:function(n){var r=n.root,i=n.props;i.width=i.image.width,i.height=i.image.height,r.ref.bitmap=r.appendChildView(r.createChildView(function(e){return e.utils.createView({name:"image-bitmap",ignoreRect:!0,mixins:{styles:["scaleX","scaleY"]},create:function(e){var n=e.root,r=e.props;n.appendChild(r.image)}})}(e),{image:i.image}))},write:function(e){var n=e.root,r=e.props.crop.flip,i=n.ref.bitmap;i.scaleX=r.horizontal?-1:1,i.scaleY=r.vertical?-1:1}})}(e),Object.assign({},i))),r.ref.createMarkup=function(){r.ref.markup||(r.ref.markup=r.appendChildView(r.createChildView(g(e),Object.assign({},i))))},r.ref.destroyMarkup=function(){r.ref.markup&&(r.removeChildView(r.ref.markup),r.ref.markup=null)};var o=r.query("GET_IMAGE_PREVIEW_TRANSPARENCY_INDICATOR");null!==o&&(r.element.dataset.transparencyIndicator="grid"===o?o:"color")},write:function(e){var n=e.root,r=e.props,i=e.shouldOptimize,o=r.crop,a=r.markup,s=r.resize,u=r.dirty,l=r.width,c=r.height;n.ref.image.crop=o;var f={x:0,y:0,width:l,height:c,center:{x:.5*l,y:.5*c}},d={width:n.ref.image.width,height:n.ref.image.height},p={x:o.center.x*d.width,y:o.center.y*d.height},E={x:f.center.x-d.width*o.center.x,y:f.center.y-d.height*o.center.y},_=2*Math.PI+o.rotation%(2*Math.PI),h=o.aspectRatio||d.height/d.width,m=void 0===o.scaleToFit||o.scaleToFit,I=D(d,S(f,h),_,m?o.center:{x:.5,y:.5}),T=o.zoom*I;a&&a.length?(n.ref.createMarkup(),n.ref.markup.width=l,n.ref.markup.height=c,n.ref.markup.resize=s,n.ref.markup.dirty=u,n.ref.markup.markup=a,n.ref.markup.crop=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.zoom,i=n.rotation,o=n.center,a=n.aspectRatio;a||(a=e.height/e.width);var s=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=e.height/e.width,o=n,a=1,s=i;s>o&&(a=(s=o)/i);var u=Math.max(1/a,o/s),l=e.width/(r*u*a);return{width:l,height:l*n}}(e,a,r),u={x:.5*s.width,y:.5*s.height},l={x:0,y:0,width:s.width,height:s.height,center:u},c=void 0===n.scaleToFit||n.scaleToFit,f=r*D(e,S(l,a),i,c?o:{x:.5,y:.5});return{widthFloat:s.width/f,heightFloat:s.height/f,width:Math.round(s.width/f),height:Math.round(s.height/f)}}(d,o)):n.ref.markup&&n.ref.destroyMarkup();var v=n.ref.image;if(i)return v.originX=null,v.originY=null,v.translateX=null,v.translateY=null,v.rotateZ=null,v.scaleX=null,void(v.scaleY=null);v.originX=p.x,v.originY=p.y,v.translateX=E.x,v.translateY=E.y,v.rotateZ=_,v.scaleX=T,v.scaleY=T}})},P=0,M=function(){self.onmessage=function(e){createImageBitmap(e.data.message.file).then((function(n){self.postMessage({id:e.data.id,message:n},[n])}))}},b=function(){self.onmessage=function(e){for(var n=e.data.message.imageData,r=e.data.message.colorMatrix,i=n.data,o=i.length,a=r[0],s=r[1],u=r[2],l=r[3],c=r[4],f=r[5],d=r[6],p=r[7],E=r[8],_=r[9],h=r[10],m=r[11],I=r[12],T=r[13],v=r[14],g=r[15],y=r[16],R=r[17],O=r[18],A=r[19],D=0,S=0,w=0,L=0,P=0;D<o;D+=4)S=i[D]/255,w=i[D+1]/255,L=i[D+2]/255,P=i[D+3]/255,i[D]=Math.max(0,Math.min(255*(S*a+w*s+L*u+P*l+c),255)),i[D+1]=Math.max(0,Math.min(255*(S*f+w*d+L*p+P*E+_),255)),i[D+2]=Math.max(0,Math.min(255*(S*h+w*m+L*I+P*T+v),255)),i[D+3]=Math.max(0,Math.min(255*(S*g+w*y+L*R+P*O+A),255));self.postMessage({id:e.data.id,message:n},[n.data.buffer])}},C={1:function(){return[1,0,0,1,0,0]},2:function(e){return[-1,0,0,1,e,0]},3:function(e,n){return[-1,0,0,-1,e,n]},4:function(e,n){return[1,0,0,-1,0,n]},5:function(){return[0,1,1,0,0,0]},6:function(e,n){return[0,1,-1,0,n,0]},7:function(e,n){return[0,-1,-1,0,n,e]},8:function(e){return[0,-1,1,0,0,e]}},N=function(e){return/^image/.test(e.type)&&!/svg/.test(e.type)},G=function(e,n){return Math.floor(Math.sqrt(e/(n/4)))},x=function(e){var n=e.utils.createView({name:"image-preview-overlay",tag:"div",ignoreRect:!0,create:function(e){var n=e.root,r=e.props,i='<svg width="500" height="200" viewBox="0 0 500 200" preserveAspectRatio="none">\n    <defs>\n        <radialGradient id="gradient-__UID__" cx=".5" cy="1.25" r="1.15">\n            <stop offset=\'50%\' stop-color=\'#000000\'/>\n            <stop offset=\'56%\' stop-color=\'#0a0a0a\'/>\n            <stop offset=\'63%\' stop-color=\'#262626\'/>\n            <stop offset=\'69%\' stop-color=\'#4f4f4f\'/>\n            <stop offset=\'75%\' stop-color=\'#808080\'/>\n            <stop offset=\'81%\' stop-color=\'#b1b1b1\'/>\n            <stop offset=\'88%\' stop-color=\'#dadada\'/>\n            <stop offset=\'94%\' stop-color=\'#f6f6f6\'/>\n            <stop offset=\'100%\' stop-color=\'#ffffff\'/>\n        </radialGradient>\n        <mask id="mask-__UID__">\n            <rect x="0" y="0" width="500" height="200" fill="url(#gradient-__UID__)"></rect>\n        </mask>\n    </defs>\n    <rect x="0" width="500" height="200" fill="currentColor" mask="url(#mask-__UID__)"></rect>\n</svg>';if(document.querySelector("base")){var o=new URL(window.location.href.replace(window.location.hash,"")).href;i=i.replace(/url\(\#/g,"url("+o+"#")}P++,n.element.classList.add("filepond--image-preview-overlay-".concat(r.status)),n.element.innerHTML=i.replace(/__UID__/g,P)},mixins:{styles:["opacity"],animations:{opacity:{type:"spring",mass:25}}}}),r=function(e){return e.utils.createView({name:"image-preview",tag:"div",ignoreRect:!0,mixins:{apis:["image","crop","markup","resize","dirty","background"],styles:["translateY","scaleX","scaleY","opacity"],animations:{scaleX:w,scaleY:w,translateY:w,opacity:{type:"tween",duration:400}}},create:function(n){var r=n.root,i=n.props;r.ref.clip=r.appendChildView(r.createChildView(L(e),{id:i.id,image:i.image,crop:i.crop,markup:i.markup,resize:i.resize,dirty:i.dirty,background:i.background}))},write:function(e){var n=e.root,r=e.props,i=e.shouldOptimize,o=n.ref.clip,a=r.image,s=r.crop,u=r.markup,l=r.resize,c=r.dirty;if(o.crop=s,o.markup=u,o.resize=l,o.dirty=c,o.opacity=i?0:1,!i&&!n.rect.element.hidden){var f=a.height/a.width,d=s.aspectRatio||f,p=n.rect.inner.width,E=n.rect.inner.height,_=n.query("GET_IMAGE_PREVIEW_HEIGHT"),h=n.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),m=n.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),I=n.query("GET_PANEL_ASPECT_RATIO"),T=n.query("GET_ALLOW_MULTIPLE");I&&!T&&(_=p*I,d=I);var v=null!==_?_:Math.max(h,Math.min(p*d,m)),g=v/d;g>p&&(v=(g=p)*d),v>E&&(v=E,g=E/d),o.width=g,o.height=v}}})}(e),i=e.utils.createWorker,o=function(e,n,r){return new Promise((function(o){e.ref.imageData||(e.ref.imageData=r.getContext("2d").getImageData(0,0,r.width,r.height));var a=function(e){var n;try{n=new ImageData(e.width,e.height)}catch(r){n=document.createElement("canvas").getContext("2d").createImageData(e.width,e.height)}return n.data.set(new Uint8ClampedArray(e.data)),n}(e.ref.imageData);if(!n||20!==n.length)return r.getContext("2d").putImageData(a,0,0),o();var s=i(b);s.post({imageData:a,colorMatrix:n},(function(e){r.getContext("2d").putImageData(e,0,0),s.terminate(),o()}),[a.data.buffer])}))},a=function(e){var n=e.root,i=e.props,o=e.image,a=i.id,s=n.query("GET_ITEM",{id:a});if(s){var u,l,c=s.getMetadata("crop")||{center:{x:.5,y:.5},flip:{horizontal:!1,vertical:!1},zoom:1,rotation:0,aspectRatio:null},f=n.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),d=!1;n.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(u=s.getMetadata("markup")||[],l=s.getMetadata("resize"),d=!0);var p=n.appendChildView(n.createChildView(r,{id:a,image:o,crop:c,resize:l,markup:u,dirty:d,background:f,opacity:0,scaleX:1.15,scaleY:1.15,translateY:15}),n.childViews.length);n.ref.images.push(p),p.opacity=1,p.scaleX=1,p.scaleY=1,p.translateY=0,setTimeout((function(){n.dispatch("DID_IMAGE_PREVIEW_SHOW",{id:a})}),250)}},s=function(e){var n=e.root;n.ref.overlayShadow.opacity=1,n.ref.overlayError.opacity=0,n.ref.overlaySuccess.opacity=0},u=function(e){var n=e.root;n.ref.overlayShadow.opacity=.25,n.ref.overlayError.opacity=1};return e.utils.createView({name:"image-preview-wrapper",create:function(e){var r=e.root;r.ref.images=[],r.ref.imageData=null,r.ref.imageViewBin=[],r.ref.overlayShadow=r.appendChildView(r.createChildView(n,{opacity:0,status:"idle"})),r.ref.overlaySuccess=r.appendChildView(r.createChildView(n,{opacity:0,status:"success"})),r.ref.overlayError=r.appendChildView(r.createChildView(n,{opacity:0,status:"failure"}))},styles:["height"],apis:["height"],destroy:function(e){e.root.ref.images.forEach((function(e){e.image.width=1,e.image.height=1}))},didWriteView:function(e){e.root.ref.images.forEach((function(e){e.dirty=!1}))},write:e.utils.createRoute({DID_IMAGE_PREVIEW_DRAW:function(e){var n=e.root,r=n.ref.images[n.ref.images.length-1];r.translateY=0,r.scaleX=1,r.scaleY=1,r.opacity=1},DID_IMAGE_PREVIEW_CONTAINER_CREATE:function(e){var n,r,i,o=e.root,a=e.props.id,s=o.query("GET_ITEM",a);s&&(n=URL.createObjectURL(s.file),r=function(e,n){o.dispatch("DID_IMAGE_PREVIEW_CALCULATE_SIZE",{id:a,width:e,height:n})},(i=new Image).onload=function(){var e=i.naturalWidth,n=i.naturalHeight;i=null,r(e,n)},i.src=n)},DID_FINISH_CALCULATE_PREVIEWSIZE:function(e){var n=e.root,r=e.props,s=r.id,u=n.query("GET_ITEM",s);if(u){var l,c,f=URL.createObjectURL(u.file),d=function(){var e;(e=f,new Promise((function(n,r){var i=new Image;i.crossOrigin="Anonymous",i.onload=function(){n(i)},i.onerror=function(e){r(e)},i.src=e}))).then(p)},p=function(e){URL.revokeObjectURL(f);var i=(u.getMetadata("exif")||{}).orientation||-1,s=e.width,l=e.height;if(s&&l){if(i>=5&&i<=8){var c=[l,s];s=c[0],l=c[1]}var d=Math.max(1,.75*window.devicePixelRatio),p=n.query("GET_IMAGE_PREVIEW_ZOOM_FACTOR")*d,E=l/s,_=n.rect.element.width,h=n.rect.element.height,m=_,I=m*E;E>1?I=(m=Math.min(s,_*p))*E:m=(I=Math.min(l,h*p))/E;var T=function(e,n,r,i){n=Math.round(n),r=Math.round(r);var o=document.createElement("canvas");o.width=n,o.height=r;var a=o.getContext("2d");if(i>=5&&i<=8){var s=[r,n];n=s[0],r=s[1]}return function(e,n,r,i){-1!==i&&e.transform.apply(e,C[i](n,r))}(a,n,r,i),a.drawImage(e,0,0,n,r),o}(e,m,I,i),v=function(){var i=n.query("GET_IMAGE_PREVIEW_CALCULATE_AVERAGE_IMAGE_COLOR")?function(e){var n=Math.min(10/e.width,10/e.height),r=document.createElement("canvas"),i=r.getContext("2d"),o=r.width=Math.ceil(e.width*n),a=r.height=Math.ceil(e.height*n);i.drawImage(e,0,0,o,a);var s=null;try{s=i.getImageData(0,0,o,a).data}catch(e){return null}for(var u=s.length,l=0,c=0,f=0,d=0;d<u;d+=4)l+=s[d]*s[d],c+=s[d+1]*s[d+1],f+=s[d+2]*s[d+2];return{r:l=G(l,u),g:c=G(c,u),b:f=G(f,u)}}(data):null;u.setMetadata("color",i,!0),"close"in e&&e.close(),n.ref.overlayShadow.opacity=1,a({root:n,props:r,image:T})},g=u.getMetadata("filter");g?o(n,g,T).then(v):v()}};if(l=u.file,((c=window.navigator.userAgent.match(/Firefox\/([0-9]+)\./))?parseInt(c[1]):null)<=58||!("createImageBitmap"in window)||!N(l))d();else{var E=i(M);E.post({file:u.file},(function(e){E.terminate(),e?p(e):d()}))}}},DID_UPDATE_ITEM_METADATA:function(e){var n=e.root,r=e.props,i=e.action;if(/crop|filter|markup|resize/.test(i.change.key)&&n.ref.images.length){var s=n.query("GET_ITEM",{id:r.id});if(s)if(/filter/.test(i.change.key)){var u=n.ref.images[n.ref.images.length-1];o(n,i.change.value,u.image)}else{if(/crop|markup|resize/.test(i.change.key)){var l=s.getMetadata("crop"),c=n.ref.images[n.ref.images.length-1];if(l&&l.aspectRatio&&c.crop&&c.crop.aspectRatio&&Math.abs(l.aspectRatio-c.crop.aspectRatio)>1e-5){var f=function(e){var n=e.root,r=n.ref.images.shift();return r.opacity=0,r.translateY=-15,n.ref.imageViewBin.push(r),r}({root:n});a({root:n,props:r,image:(d=f.image,(p=p||document.createElement("canvas")).width=d.width,p.height=d.height,p.getContext("2d").drawImage(d,0,0),p)})}else!function(e){var n=e.root,r=e.props,i=n.query("GET_ITEM",{id:r.id});if(i){var o=n.ref.images[n.ref.images.length-1];o.crop=i.getMetadata("crop"),o.background=n.query("GET_IMAGE_TRANSFORM_CANVAS_BACKGROUND_COLOR"),n.query("GET_IMAGE_PREVIEW_MARKUP_SHOW")&&(o.dirty=!0,o.resize=i.getMetadata("resize"),o.markup=i.getMetadata("markup"))}}({root:n,props:r})}var d,p}}},DID_THROW_ITEM_LOAD_ERROR:u,DID_THROW_ITEM_PROCESSING_ERROR:u,DID_THROW_ITEM_INVALID:u,DID_COMPLETE_ITEM_PROCESSING:function(e){var n=e.root;n.ref.overlayShadow.opacity=.25,n.ref.overlaySuccess.opacity=1},DID_START_ITEM_PROCESSING:s,DID_REVERT_ITEM_PROCESSING:s},(function(e){var n=e.root,r=n.ref.imageViewBin.filter((function(e){return 0===e.opacity}));n.ref.imageViewBin=n.ref.imageViewBin.filter((function(e){return e.opacity>0})),r.forEach((function(e){return function(e,n){e.removeChildView(n),n.image.width=1,n.image.height=1,n._destroy()}(n,e)})),r.length=0}))})},F=function(e){var n=e.addFilter,r=e.utils,i=r.Type,o=r.createRoute,a=r.isFile,s=x(e);return n("CREATE_VIEW",(function(e){var n=e.is,r=e.view,i=e.query;if(n("file")&&i("GET_ALLOW_IMAGE_PREVIEW")){var u=function(e){e.root.ref.shouldRescale=!0};r.registerWriter(o({DID_RESIZE_ROOT:u,DID_STOP_RESIZE:u,DID_LOAD_ITEM:function(e){var n=e.root,o=e.props.id,u=i("GET_ITEM",o);if(u&&a(u.file)&&!u.archived){var l=u.file;if(function(e){return/^image/.test(e.type)}(l)&&i("GET_IMAGE_PREVIEW_FILTER_ITEM")(u)){var c="createImageBitmap"in(window||{}),f=i("GET_IMAGE_PREVIEW_MAX_FILE_SIZE");if(!(!c&&f&&l.size>f)){n.ref.imagePreview=r.appendChildView(r.createChildView(s,{id:o}));var d=n.query("GET_IMAGE_PREVIEW_HEIGHT");d&&n.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:u.id,height:d});var p=!c&&l.size>i("GET_IMAGE_PREVIEW_MAX_INSTANT_PREVIEW_FILE_SIZE");n.dispatch("DID_IMAGE_PREVIEW_CONTAINER_CREATE",{id:o},p)}}}},DID_IMAGE_PREVIEW_CALCULATE_SIZE:function(e){var n=e.root,r=e.action;n.ref.imageWidth=r.width,n.ref.imageHeight=r.height,n.ref.shouldRescale=!0,n.ref.shouldDrawPreview=!0,n.dispatch("KICK")},DID_UPDATE_ITEM_METADATA:function(e){var n=e.root;"crop"===e.action.change.key&&(n.ref.shouldRescale=!0)}},(function(e){var n=e.root,r=e.props;n.ref.imagePreview&&(n.rect.element.hidden||(n.ref.shouldRescale&&(function(e,n){if(e.ref.imagePreview){var r=n.id,i=e.query("GET_ITEM",{id:r});if(i){var o=e.query("GET_PANEL_ASPECT_RATIO"),a=e.query("GET_ITEM_PANEL_ASPECT_RATIO"),s=e.query("GET_IMAGE_PREVIEW_HEIGHT");if(!(o||a||s)){var u=e.ref,l=u.imageWidth,c=u.imageHeight;if(l&&c){var f=e.query("GET_IMAGE_PREVIEW_MIN_HEIGHT"),d=e.query("GET_IMAGE_PREVIEW_MAX_HEIGHT"),p=(i.getMetadata("exif")||{}).orientation||-1;if(p>=5&&p<=8){var E=[c,l];l=E[0],c=E[1]}if(!N(i.file)||e.query("GET_IMAGE_PREVIEW_UPSCALE")){var _=2048/l;l*=_,c*=_}var h=c/l,m=(i.getMetadata("crop")||{}).aspectRatio||h,I=Math.max(f,Math.min(c,d)),T=e.rect.element.width,v=Math.min(T*m,I);e.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i.id,height:v})}}}}}(n,r),n.ref.shouldRescale=!1),n.ref.shouldDrawPreview&&(requestAnimationFrame((function(){requestAnimationFrame((function(){n.dispatch("DID_FINISH_CALCULATE_PREVIEWSIZE",{id:r.id})}))})),n.ref.shouldDrawPreview=!1)))})))}})),{options:{allowImagePreview:[!0,i.BOOLEAN],imagePreviewFilterItem:[function(){return!0},i.FUNCTION],imagePreviewHeight:[null,i.INT],imagePreviewMinHeight:[44,i.INT],imagePreviewMaxHeight:[256,i.INT],imagePreviewMaxFileSize:[null,i.INT],imagePreviewZoomFactor:[2,i.INT],imagePreviewUpscale:[!1,i.BOOLEAN],imagePreviewMaxInstantPreviewFileSize:[1e6,i.INT],imagePreviewTransparencyIndicator:[null,i.STRING],imagePreviewCalculateAverageImageColor:[!1,i.BOOLEAN],imagePreviewMarkupShow:[!0,i.BOOLEAN],imagePreviewMarkupFilter:[function(){return!0},i.FUNCTION]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:F})),F})),function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).FilePondPluginMediaPreview=n()}(this,(function(){"use strict";const e=e=>/^video/.test(e.type),n=e=>/^audio/.test(e.type);class t{constructor(e,n){this.mediaEl=e,this.audioElems=n,this.onplayhead=!1,this.duration=0,this.timelineWidth=this.audioElems.timeline.offsetWidth-this.audioElems.playhead.offsetWidth,this.moveplayheadFn=this.moveplayhead.bind(this),this.registerListeners()}registerListeners(){this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1),this.mediaEl.addEventListener("canplaythrough",(()=>this.duration=this.mediaEl.duration),!1),this.audioElems.timeline.addEventListener("click",this.timelineClicked.bind(this),!1),this.audioElems.button.addEventListener("click",this.play.bind(this)),this.audioElems.playhead.addEventListener("mousedown",this.mouseDown.bind(this),!1),window.addEventListener("mouseup",this.mouseUp.bind(this),!1)}play(){this.mediaEl.paused?this.mediaEl.play():this.mediaEl.pause(),this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause")}timeUpdate(){let e=this.mediaEl.currentTime/this.duration*100;this.audioElems.playhead.style.marginLeft=e+"%",this.mediaEl.currentTime===this.duration&&(this.audioElems.button.classList.toggle("play"),this.audioElems.button.classList.toggle("pause"))}moveplayhead(e){let n=e.clientX-this.getPosition(this.audioElems.timeline);n>=0&&n<=this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=n+"px"),n<0&&(this.audioElems.playhead.style.marginLeft="0px"),n>this.timelineWidth&&(this.audioElems.playhead.style.marginLeft=this.timelineWidth-4+"px")}timelineClicked(e){this.moveplayhead(e),this.mediaEl.currentTime=this.duration*this.clickPercent(e)}mouseDown(){this.onplayhead=!0,window.addEventListener("mousemove",this.moveplayheadFn,!0),this.mediaEl.removeEventListener("timeupdate",this.timeUpdate.bind(this),!1)}mouseUp(e){window.removeEventListener("mousemove",this.moveplayheadFn,!0),1==this.onplayhead&&(this.moveplayhead(e),this.mediaEl.currentTime=this.duration*this.clickPercent(e),this.mediaEl.addEventListener("timeupdate",this.timeUpdate.bind(this),!1)),this.onplayhead=!1}clickPercent(e){return(e.clientX-this.getPosition(this.audioElems.timeline))/this.timelineWidth}getPosition(e){return e.getBoundingClientRect().left}}const r=r=>r.utils.createView({name:"media-preview-wrapper",create:({root:i,props:o})=>{const a=(r=>r.utils.createView({name:"media-preview",tag:"div",ignoreRect:!0,create:({root:e,props:r})=>{const{id:i}=r,o=e.query("GET_ITEM",{id:r.id});let a=n(o.file)?"audio":"video";if(e.ref.media=document.createElement(a),e.ref.media.setAttribute("controls",!0),e.element.appendChild(e.ref.media),n(o.file)){let n=document.createDocumentFragment();e.ref.audio=[],e.ref.audio.container=document.createElement("div"),e.ref.audio.button=document.createElement("span"),e.ref.audio.timeline=document.createElement("div"),e.ref.audio.playhead=document.createElement("div"),e.ref.audio.container.className="audioplayer",e.ref.audio.button.className="playpausebtn play",e.ref.audio.timeline.className="timeline",e.ref.audio.playhead.className="playhead",e.ref.audio.timeline.appendChild(e.ref.audio.playhead),e.ref.audio.container.appendChild(e.ref.audio.button),e.ref.audio.container.appendChild(e.ref.audio.timeline),n.appendChild(e.ref.audio.container),e.element.appendChild(n)}},write:r.utils.createRoute({DID_MEDIA_PREVIEW_LOAD:({root:r,props:i})=>{const{id:o}=i,a=r.query("GET_ITEM",{id:i.id});if(!a)return;let s=window.URL||window.webkitURL,u=new Blob([a.file],{type:a.file.type});r.ref.media.type=a.file.type,r.ref.media.src=a.file.mock&&a.file.url||s.createObjectURL(u),n(a.file)&&new t(r.ref.media,r.ref.audio),r.ref.media.addEventListener("loadeddata",(()=>{let n=75;if(e(a.file)){let e=r.ref.media.offsetWidth,i=r.ref.media.videoWidth/e;n=r.ref.media.videoHeight/i}r.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i.id,height:n})}),!1)}})}))(r);i.ref.media=i.appendChildView(i.createChildView(a,{id:o.id}))},write:r.utils.createRoute({DID_MEDIA_PREVIEW_CONTAINER_CREATE:({root:e,props:n})=>{const{id:r}=n;e.query("GET_ITEM",r)&&e.dispatch("DID_MEDIA_PREVIEW_LOAD",{id:r})}})}),i=i=>{const{addFilter:o,utils:a}=i,{Type:s,createRoute:u}=a,l=r(i);return o("CREATE_VIEW",(r=>{const{is:i,view:o,query:a}=r;i("file")&&o.registerWriter(u({DID_LOAD_ITEM:({root:r,props:i})=>{const{id:s}=i,u=a("GET_ITEM",s),c=a("GET_ALLOW_VIDEO_PREVIEW"),f=a("GET_ALLOW_AUDIO_PREVIEW");u&&!u.archived&&(e(u.file)&&c||n(u.file)&&f)&&(r.ref.mediaPreview=o.appendChildView(o.createChildView(l,{id:s})),r.dispatch("DID_MEDIA_PREVIEW_CONTAINER_CREATE",{id:s}))}},(({root:r,props:i})=>{const{id:o}=i,s=a("GET_ITEM",o),u=r.query("GET_ALLOW_VIDEO_PREVIEW"),l=r.query("GET_ALLOW_AUDIO_PREVIEW");s&&(e(s.file)&&u||n(s.file)&&l)&&r.rect.element.hidden})))})),{options:{allowVideoPreview:[!0,s.BOOLEAN],allowAudioPreview:[!0,s.BOOLEAN]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:i})),i})),function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self).FilePondPluginPdfPreview=n()}(this,(function(){"use strict";const e=e=>/pdf$/.test(e.type),n=n=>{const{addFilter:r,utils:i}=n,{Type:o,createRoute:a}=i,s=(n=>n.utils.createView({name:"pdf-preview-wrapper",create:({root:r,props:i})=>{const o=(n=>n.utils.createView({name:"pdf-preview",tag:"div",ignoreRect:!0,create:({root:n,props:r})=>{const i=n.query("GET_ITEM",{id:r.id});if(e(i.file)){const e=n.query("GET_PDF_PREVIEW_HEIGHT");n.ref.pdf=document.createElement("object"),n.ref.pdf.setAttribute("height",e),n.ref.pdf.setAttribute("width","100%"),n.ref.pdf.setAttribute("style","position:absolute;left:0;right:0;margin:auto;padding-top:unset;"+(e?"height:"+e+"px;":"")),n.element.appendChild(n.ref.pdf)}},write:n.utils.createRoute({DID_PDF_PREVIEW_LOAD:({root:n,props:r})=>{const{id:i}=r,o=n.query("GET_ITEM",{id:i});if(!o)return;let a=window.URL||window.webkitURL,s=new Blob([o.file],{type:o.file.type});if(n.ref.pdf.type=o.file.type,e(o.file)){const e=n.query("GET_PDF_COMPONENT_EXTRA_PARAMS");n.ref.pdf.data=a.createObjectURL(s)+(e?"#?"+e:"")}n.ref.pdf.addEventListener("load",(()=>{e(o.file)&&n.dispatch("DID_UPDATE_PANEL_HEIGHT",{id:i,height:n.ref.pdf.scrollHeight})}),!1)}})}))(n);r.ref.pdf=r.appendChildView(r.createChildView(o,{id:i.id}))},write:n.utils.createRoute({DID_PDF_PREVIEW_CONTAINER_CREATE:({root:e,props:n})=>{const{id:r}=n;e.query("GET_ITEM",r)&&e.dispatch("DID_PDF_PREVIEW_LOAD",{id:r})}})}))(n);return r("CREATE_VIEW",(n=>{const{is:r,view:i,query:o}=n;r("file")&&i.registerWriter(a({DID_LOAD_ITEM:({root:n,props:r})=>{const{id:a}=r,u=o("GET_ITEM",a);u&&!u.archived&&e(u.file)&&(n.ref.PdfPreview=i.appendChildView(i.createChildView(s,{id:a})),n.dispatch("DID_PDF_PREVIEW_CONTAINER_CREATE",{id:a}))}},(({root:n,props:r})=>{const{id:i}=r,a=o("GET_ITEM",i);e(a.file)&&n.rect.element.hidden})))})),{options:{allowPdfPreview:[!0,o.BOOLEAN],pdfPreviewHeight:[320,o.INT],pdfComponentExtraParams:["toolbar=0&navpanes=0&scrollbar=0&statusbar=0&zoom=0&messages=0&view=fitH&page=1",o.STRING]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:n})),n})),function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e=e||self).FilePondPluginImageExifOrientation=n()}(this,(function(){"use strict";var e=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.getUint16(n,r)},n=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e.getUint32(n,r)},r="undefined"!=typeof window&&void 0!==window.document,i=void 0,o=r?new Image:{};o.onload=function(){return i=o.naturalWidth>o.naturalHeight},o.src="data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=";var a=function(r){var o=r.addFilter,a=r.utils,s=a.Type,u=a.isFile;return o("DID_LOAD_ITEM",(function(r,o){var a=o.query;return new Promise((function(o,s){var l=r.file;if(!(u(l)&&function(e){return/^image\/jpeg/.test(e.type)}(l)&&a("GET_ALLOW_IMAGE_EXIF_ORIENTATION")&&i))return o(r);(function(r){return new Promise((function(i,o){var a=new FileReader;a.onload=function(r){var o=new DataView(r.target.result);if(65496===e(o,0)){for(var a=o.byteLength,s=2;s<a;){var u=e(o,s);if(s+=2,65505===u){if(1165519206!==n(o,s+=2))break;var l=18761===e(o,s+=6);s+=n(o,s+4,l);var c=e(o,s,l);s+=2;for(var f=0;f<c;f++)if(274===e(o,s+12*f,l))return void i(e(o,s+12*f+8,l))}else{if(65280!=(65280&u))break;s+=e(o,s)}}i(-1)}else i(-1)},a.readAsArrayBuffer(r.slice(0,65536))}))})(l).then((function(e){r.setMetadata("exif",{orientation:e}),o(r)}))}))})),{options:{allowImageExifOrientation:[!0,s.BOOLEAN]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:a})),a})),FilePond.registerPlugin(FilePondPluginFileValidateSize,FilePondPluginFileValidateType,FilePondPluginFilePoster,FilePondPluginImagePreview,FilePondPluginMediaPreview,FilePondPluginPdfPreview,FilePondPluginImageExifOrientation);